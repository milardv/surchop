var IM=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var q7=IM((eQ,$u)=>{function CM(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function vy(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var rI={exports:{}},Ah={},iI={exports:{}},we={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var au=Symbol.for("react.element"),AM=Symbol.for("react.portal"),bM=Symbol.for("react.fragment"),RM=Symbol.for("react.strict_mode"),PM=Symbol.for("react.profiler"),kM=Symbol.for("react.provider"),NM=Symbol.for("react.context"),MM=Symbol.for("react.forward_ref"),DM=Symbol.for("react.suspense"),OM=Symbol.for("react.memo"),VM=Symbol.for("react.lazy"),m0=Symbol.iterator;function LM(t){return t===null||typeof t!="object"?null:(t=m0&&t[m0]||t["@@iterator"],typeof t=="function"?t:null)}var sI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},oI=Object.assign,aI={};function Ko(t,e,n){this.props=t,this.context=e,this.refs=aI,this.updater=n||sI}Ko.prototype.isReactComponent={};Ko.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ko.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function lI(){}lI.prototype=Ko.prototype;function wy(t,e,n){this.props=t,this.context=e,this.refs=aI,this.updater=n||sI}var _y=wy.prototype=new lI;_y.constructor=wy;oI(_y,Ko.prototype);_y.isPureReactComponent=!0;var g0=Array.isArray,uI=Object.prototype.hasOwnProperty,Ey={current:null},cI={key:!0,ref:!0,__self:!0,__source:!0};function dI(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)uI.call(e,r)&&!cI.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:au,type:t,key:s,ref:o,props:i,_owner:Ey.current}}function FM(t,e){return{$$typeof:au,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function xy(t){return typeof t=="object"&&t!==null&&t.$$typeof===au}function jM(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var y0=/\/+/g;function Xf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?jM(""+t.key):e.toString(36)}function Wc(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case au:case AM:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Xf(o,0):r,g0(i)?(n="",t!=null&&(n=t.replace(y0,"$&/")+"/"),Wc(i,e,n,"",function(u){return u})):i!=null&&(xy(i)&&(i=FM(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(y0,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",g0(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Xf(s,a);o+=Wc(s,e,n,l,i)}else if(l=LM(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Xf(s,a++),o+=Wc(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ac(t,e,n){if(t==null)return t;var r=[],i=0;return Wc(t,r,"","",function(s){return e.call(n,s,i++)}),r}function UM(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Gt={current:null},Hc={transition:null},BM={ReactCurrentDispatcher:Gt,ReactCurrentBatchConfig:Hc,ReactCurrentOwner:Ey};function hI(){throw Error("act(...) is not supported in production builds of React.")}we.Children={map:ac,forEach:function(t,e,n){ac(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ac(t,function(){e++}),e},toArray:function(t){return ac(t,function(e){return e})||[]},only:function(t){if(!xy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};we.Component=Ko;we.Fragment=bM;we.Profiler=PM;we.PureComponent=wy;we.StrictMode=RM;we.Suspense=DM;we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BM;we.act=hI;we.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=oI({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Ey.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)uI.call(e,l)&&!cI.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:au,type:t.type,key:i,ref:s,props:r,_owner:o}};we.createContext=function(t){return t={$$typeof:NM,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:kM,_context:t},t.Consumer=t};we.createElement=dI;we.createFactory=function(t){var e=dI.bind(null,t);return e.type=t,e};we.createRef=function(){return{current:null}};we.forwardRef=function(t){return{$$typeof:MM,render:t}};we.isValidElement=xy;we.lazy=function(t){return{$$typeof:VM,_payload:{_status:-1,_result:t},_init:UM}};we.memo=function(t,e){return{$$typeof:OM,type:t,compare:e===void 0?null:e}};we.startTransition=function(t){var e=Hc.transition;Hc.transition={};try{t()}finally{Hc.transition=e}};we.unstable_act=hI;we.useCallback=function(t,e){return Gt.current.useCallback(t,e)};we.useContext=function(t){return Gt.current.useContext(t)};we.useDebugValue=function(){};we.useDeferredValue=function(t){return Gt.current.useDeferredValue(t)};we.useEffect=function(t,e){return Gt.current.useEffect(t,e)};we.useId=function(){return Gt.current.useId()};we.useImperativeHandle=function(t,e,n){return Gt.current.useImperativeHandle(t,e,n)};we.useInsertionEffect=function(t,e){return Gt.current.useInsertionEffect(t,e)};we.useLayoutEffect=function(t,e){return Gt.current.useLayoutEffect(t,e)};we.useMemo=function(t,e){return Gt.current.useMemo(t,e)};we.useReducer=function(t,e,n){return Gt.current.useReducer(t,e,n)};we.useRef=function(t){return Gt.current.useRef(t)};we.useState=function(t){return Gt.current.useState(t)};we.useSyncExternalStore=function(t,e,n){return Gt.current.useSyncExternalStore(t,e,n)};we.useTransition=function(){return Gt.current.useTransition()};we.version="18.3.1";iI.exports=we;var y=iI.exports;const Er=vy(y),fI=CM({__proto__:null,default:Er},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $M=y,zM=Symbol.for("react.element"),WM=Symbol.for("react.fragment"),HM=Object.prototype.hasOwnProperty,qM=$M.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,GM={key:!0,ref:!0,__self:!0,__source:!0};function pI(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)HM.call(e,r)&&!GM.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:zM,type:t,key:s,ref:o,props:i,_owner:qM.current}}Ah.Fragment=WM;Ah.jsx=pI;Ah.jsxs=pI;rI.exports=Ah;var x=rI.exports,mI={exports:{}},wn={},gI={exports:{}},yI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,B){var O=F.length;F.push(B);e:for(;0<O;){var D=O-1>>>1,W=F[D];if(0<i(W,B))F[D]=B,F[O]=W,O=D;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var B=F[0],O=F.pop();if(O!==B){F[0]=O;e:for(var D=0,W=F.length,q=W>>>1;D<q;){var Y=2*(D+1)-1,ne=F[Y],re=Y+1,G=F[re];if(0>i(ne,O))re<W&&0>i(G,ne)?(F[D]=G,F[re]=O,D=re):(F[D]=ne,F[Y]=O,D=Y);else if(re<W&&0>i(G,O))F[D]=G,F[re]=O,D=re;else break e}}return B}function i(F,B){var O=F.sortIndex-B.sortIndex;return O!==0?O:F.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,h=null,f=3,m=!1,w=!1,_=!1,I=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(F){for(var B=n(u);B!==null;){if(B.callback===null)r(u);else if(B.startTime<=F)r(u),B.sortIndex=B.expirationTime,e(l,B);else break;B=n(u)}}function R(F){if(_=!1,T(F),!w)if(n(l)!==null)w=!0,ae(N);else{var B=n(u);B!==null&&te(R,B.startTime-F)}}function N(F,B){w=!1,_&&(_=!1,g(S),S=-1),m=!0;var O=f;try{for(T(B),h=n(l);h!==null&&(!(h.expirationTime>B)||F&&!M());){var D=h.callback;if(typeof D=="function"){h.callback=null,f=h.priorityLevel;var W=D(h.expirationTime<=B);B=t.unstable_now(),typeof W=="function"?h.callback=W:h===n(l)&&r(l),T(B)}else r(l);h=n(l)}if(h!==null)var q=!0;else{var Y=n(u);Y!==null&&te(R,Y.startTime-B),q=!1}return q}finally{h=null,f=O,m=!1}}var L=!1,C=null,S=-1,A=5,P=-1;function M(){return!(t.unstable_now()-P<A)}function V(){if(C!==null){var F=t.unstable_now();P=F;var B=!0;try{B=C(!0,F)}finally{B?k():(L=!1,C=null)}}else L=!1}var k;if(typeof E=="function")k=function(){E(V)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,me=oe.port2;oe.port1.onmessage=V,k=function(){me.postMessage(null)}}else k=function(){I(V,0)};function ae(F){C=F,L||(L=!0,k())}function te(F,B){S=I(function(){F(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){w||m||(w=!0,ae(N))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(F){switch(f){case 1:case 2:case 3:var B=3;break;default:B=f}var O=f;f=B;try{return F()}finally{f=O}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,B){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var O=f;f=F;try{return B()}finally{f=O}},t.unstable_scheduleCallback=function(F,B,O){var D=t.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?D+O:D):O=D,F){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=O+W,F={id:d++,callback:B,priorityLevel:F,startTime:O,expirationTime:W,sortIndex:-1},O>D?(F.sortIndex=O,e(u,F),n(l)===null&&F===n(u)&&(_?(g(S),S=-1):_=!0,te(R,O-D))):(F.sortIndex=W,e(l,F),w||m||(w=!0,ae(N))),F},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(F){var B=f;return function(){var O=f;f=B;try{return F.apply(this,arguments)}finally{f=O}}}})(yI);gI.exports=yI;var KM=gI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QM=y,vn=KM;function H(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vI=new Set,wl={};function bs(t,e){Po(t,e),Po(t+"Capture",e)}function Po(t,e){for(wl[t]=e,t=0;t<e.length;t++)vI.add(e[t])}var Dr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fm=Object.prototype.hasOwnProperty,YM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v0={},w0={};function XM(t){return fm.call(w0,t)?!0:fm.call(v0,t)?!1:YM.test(t)?w0[t]=!0:(v0[t]=!0,!1)}function JM(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ZM(t,e,n,r){if(e===null||typeof e>"u"||JM(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Kt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var St={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){St[t]=new Kt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];St[e]=new Kt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){St[t]=new Kt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){St[t]=new Kt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){St[t]=new Kt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){St[t]=new Kt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){St[t]=new Kt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){St[t]=new Kt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){St[t]=new Kt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ty=/[\-:]([a-z])/g;function Sy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ty,Sy);St[e]=new Kt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ty,Sy);St[e]=new Kt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ty,Sy);St[e]=new Kt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){St[t]=new Kt(t,1,!1,t.toLowerCase(),null,!1,!1)});St.xlinkHref=new Kt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){St[t]=new Kt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Iy(t,e,n,r){var i=St.hasOwnProperty(e)?St[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ZM(e,n,i,r)&&(n=null),r||i===null?XM(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Kr=QM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,lc=Symbol.for("react.element"),Ys=Symbol.for("react.portal"),Xs=Symbol.for("react.fragment"),Cy=Symbol.for("react.strict_mode"),pm=Symbol.for("react.profiler"),wI=Symbol.for("react.provider"),_I=Symbol.for("react.context"),Ay=Symbol.for("react.forward_ref"),mm=Symbol.for("react.suspense"),gm=Symbol.for("react.suspense_list"),by=Symbol.for("react.memo"),si=Symbol.for("react.lazy"),EI=Symbol.for("react.offscreen"),_0=Symbol.iterator;function Ra(t){return t===null||typeof t!="object"?null:(t=_0&&t[_0]||t["@@iterator"],typeof t=="function"?t:null)}var He=Object.assign,Jf;function za(t){if(Jf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Jf=e&&e[1]||""}return`
`+Jf+t}var Zf=!1;function ep(t,e){if(!t||Zf)return"";Zf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Zf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?za(t):""}function eD(t){switch(t.tag){case 5:return za(t.type);case 16:return za("Lazy");case 13:return za("Suspense");case 19:return za("SuspenseList");case 0:case 2:case 15:return t=ep(t.type,!1),t;case 11:return t=ep(t.type.render,!1),t;case 1:return t=ep(t.type,!0),t;default:return""}}function ym(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Xs:return"Fragment";case Ys:return"Portal";case pm:return"Profiler";case Cy:return"StrictMode";case mm:return"Suspense";case gm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case _I:return(t.displayName||"Context")+".Consumer";case wI:return(t._context.displayName||"Context")+".Provider";case Ay:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case by:return e=t.displayName||null,e!==null?e:ym(t.type)||"Memo";case si:e=t._payload,t=t._init;try{return ym(t(e))}catch{}}return null}function tD(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ym(e);case 8:return e===Cy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ai(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function xI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function nD(t){var e=xI(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function uc(t){t._valueTracker||(t._valueTracker=nD(t))}function TI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=xI(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Td(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function vm(t,e){var n=e.checked;return He({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function E0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ai(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function SI(t,e){e=e.checked,e!=null&&Iy(t,"checked",e,!1)}function wm(t,e){SI(t,e);var n=Ai(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?_m(t,e.type,n):e.hasOwnProperty("defaultValue")&&_m(t,e.type,Ai(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function x0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function _m(t,e,n){(e!=="number"||Td(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Wa=Array.isArray;function mo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ai(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Em(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(H(91));return He({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function T0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(H(92));if(Wa(n)){if(1<n.length)throw Error(H(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ai(n)}}function II(t,e){var n=Ai(e.value),r=Ai(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function S0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function CI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?CI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var cc,AI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(cc=cc||document.createElement("div"),cc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=cc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function _l(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ja={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rD=["Webkit","ms","Moz","O"];Object.keys(Ja).forEach(function(t){rD.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ja[e]=Ja[t]})});function bI(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ja.hasOwnProperty(t)&&Ja[t]?(""+e).trim():e+"px"}function RI(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=bI(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var iD=He({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Tm(t,e){if(e){if(iD[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(H(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(H(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(H(61))}if(e.style!=null&&typeof e.style!="object")throw Error(H(62))}}function Sm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Im=null;function Ry(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Cm=null,go=null,yo=null;function I0(t){if(t=cu(t)){if(typeof Cm!="function")throw Error(H(280));var e=t.stateNode;e&&(e=Nh(e),Cm(t.stateNode,t.type,e))}}function PI(t){go?yo?yo.push(t):yo=[t]:go=t}function kI(){if(go){var t=go,e=yo;if(yo=go=null,I0(t),e)for(t=0;t<e.length;t++)I0(e[t])}}function NI(t,e){return t(e)}function MI(){}var tp=!1;function DI(t,e,n){if(tp)return t(e,n);tp=!0;try{return NI(t,e,n)}finally{tp=!1,(go!==null||yo!==null)&&(MI(),kI())}}function El(t,e){var n=t.stateNode;if(n===null)return null;var r=Nh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(H(231,e,typeof n));return n}var Am=!1;if(Dr)try{var Pa={};Object.defineProperty(Pa,"passive",{get:function(){Am=!0}}),window.addEventListener("test",Pa,Pa),window.removeEventListener("test",Pa,Pa)}catch{Am=!1}function sD(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var Za=!1,Sd=null,Id=!1,bm=null,oD={onError:function(t){Za=!0,Sd=t}};function aD(t,e,n,r,i,s,o,a,l){Za=!1,Sd=null,sD.apply(oD,arguments)}function lD(t,e,n,r,i,s,o,a,l){if(aD.apply(this,arguments),Za){if(Za){var u=Sd;Za=!1,Sd=null}else throw Error(H(198));Id||(Id=!0,bm=u)}}function Rs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function OI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function C0(t){if(Rs(t)!==t)throw Error(H(188))}function uD(t){var e=t.alternate;if(!e){if(e=Rs(t),e===null)throw Error(H(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return C0(i),t;if(s===r)return C0(i),e;s=s.sibling}throw Error(H(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(H(189))}}if(n.alternate!==r)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?t:e}function VI(t){return t=uD(t),t!==null?LI(t):null}function LI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=LI(t);if(e!==null)return e;t=t.sibling}return null}var FI=vn.unstable_scheduleCallback,A0=vn.unstable_cancelCallback,cD=vn.unstable_shouldYield,dD=vn.unstable_requestPaint,Ze=vn.unstable_now,hD=vn.unstable_getCurrentPriorityLevel,Py=vn.unstable_ImmediatePriority,jI=vn.unstable_UserBlockingPriority,Cd=vn.unstable_NormalPriority,fD=vn.unstable_LowPriority,UI=vn.unstable_IdlePriority,bh=null,ir=null;function pD(t){if(ir&&typeof ir.onCommitFiberRoot=="function")try{ir.onCommitFiberRoot(bh,t,void 0,(t.current.flags&128)===128)}catch{}}var Un=Math.clz32?Math.clz32:yD,mD=Math.log,gD=Math.LN2;function yD(t){return t>>>=0,t===0?32:31-(mD(t)/gD|0)|0}var dc=64,hc=4194304;function Ha(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ad(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Ha(a):(s&=o,s!==0&&(r=Ha(s)))}else o=n&~i,o!==0?r=Ha(o):s!==0&&(r=Ha(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Un(e),i=1<<n,r|=t[n],e&=~i;return r}function vD(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wD(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Un(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=vD(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Rm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function BI(){var t=dc;return dc<<=1,!(dc&4194240)&&(dc=64),t}function np(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function lu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Un(e),t[e]=n}function _D(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Un(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function ky(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Un(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Re=0;function $I(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var zI,Ny,WI,HI,qI,Pm=!1,fc=[],gi=null,yi=null,vi=null,xl=new Map,Tl=new Map,ai=[],ED="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function b0(t,e){switch(t){case"focusin":case"focusout":gi=null;break;case"dragenter":case"dragleave":yi=null;break;case"mouseover":case"mouseout":vi=null;break;case"pointerover":case"pointerout":xl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tl.delete(e.pointerId)}}function ka(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=cu(e),e!==null&&Ny(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function xD(t,e,n,r,i){switch(e){case"focusin":return gi=ka(gi,t,e,n,r,i),!0;case"dragenter":return yi=ka(yi,t,e,n,r,i),!0;case"mouseover":return vi=ka(vi,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return xl.set(s,ka(xl.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Tl.set(s,ka(Tl.get(s)||null,t,e,n,r,i)),!0}return!1}function GI(t){var e=es(t.target);if(e!==null){var n=Rs(e);if(n!==null){if(e=n.tag,e===13){if(e=OI(n),e!==null){t.blockedOn=e,qI(t.priority,function(){WI(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function qc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=km(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Im=r,n.target.dispatchEvent(r),Im=null}else return e=cu(n),e!==null&&Ny(e),t.blockedOn=n,!1;e.shift()}return!0}function R0(t,e,n){qc(t)&&n.delete(e)}function TD(){Pm=!1,gi!==null&&qc(gi)&&(gi=null),yi!==null&&qc(yi)&&(yi=null),vi!==null&&qc(vi)&&(vi=null),xl.forEach(R0),Tl.forEach(R0)}function Na(t,e){t.blockedOn===e&&(t.blockedOn=null,Pm||(Pm=!0,vn.unstable_scheduleCallback(vn.unstable_NormalPriority,TD)))}function Sl(t){function e(i){return Na(i,t)}if(0<fc.length){Na(fc[0],t);for(var n=1;n<fc.length;n++){var r=fc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(gi!==null&&Na(gi,t),yi!==null&&Na(yi,t),vi!==null&&Na(vi,t),xl.forEach(e),Tl.forEach(e),n=0;n<ai.length;n++)r=ai[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ai.length&&(n=ai[0],n.blockedOn===null);)GI(n),n.blockedOn===null&&ai.shift()}var vo=Kr.ReactCurrentBatchConfig,bd=!0;function SD(t,e,n,r){var i=Re,s=vo.transition;vo.transition=null;try{Re=1,My(t,e,n,r)}finally{Re=i,vo.transition=s}}function ID(t,e,n,r){var i=Re,s=vo.transition;vo.transition=null;try{Re=4,My(t,e,n,r)}finally{Re=i,vo.transition=s}}function My(t,e,n,r){if(bd){var i=km(t,e,n,r);if(i===null)hp(t,e,r,Rd,n),b0(t,r);else if(xD(i,t,e,n,r))r.stopPropagation();else if(b0(t,r),e&4&&-1<ED.indexOf(t)){for(;i!==null;){var s=cu(i);if(s!==null&&zI(s),s=km(t,e,n,r),s===null&&hp(t,e,r,Rd,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else hp(t,e,r,null,n)}}var Rd=null;function km(t,e,n,r){if(Rd=null,t=Ry(r),t=es(t),t!==null)if(e=Rs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=OI(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Rd=t,null}function KI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hD()){case Py:return 1;case jI:return 4;case Cd:case fD:return 16;case UI:return 536870912;default:return 16}default:return 16}}var hi=null,Dy=null,Gc=null;function QI(){if(Gc)return Gc;var t,e=Dy,n=e.length,r,i="value"in hi?hi.value:hi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Gc=i.slice(t,1<r?1-r:void 0)}function Kc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function pc(){return!0}function P0(){return!1}function _n(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?pc:P0,this.isPropagationStopped=P0,this}return He(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=pc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=pc)},persist:function(){},isPersistent:pc}),e}var Qo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Oy=_n(Qo),uu=He({},Qo,{view:0,detail:0}),CD=_n(uu),rp,ip,Ma,Rh=He({},uu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ma&&(Ma&&t.type==="mousemove"?(rp=t.screenX-Ma.screenX,ip=t.screenY-Ma.screenY):ip=rp=0,Ma=t),rp)},movementY:function(t){return"movementY"in t?t.movementY:ip}}),k0=_n(Rh),AD=He({},Rh,{dataTransfer:0}),bD=_n(AD),RD=He({},uu,{relatedTarget:0}),sp=_n(RD),PD=He({},Qo,{animationName:0,elapsedTime:0,pseudoElement:0}),kD=_n(PD),ND=He({},Qo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),MD=_n(ND),DD=He({},Qo,{data:0}),N0=_n(DD),OD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},VD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},LD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function FD(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=LD[t])?!!e[t]:!1}function Vy(){return FD}var jD=He({},uu,{key:function(t){if(t.key){var e=OD[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Kc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?VD[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vy,charCode:function(t){return t.type==="keypress"?Kc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Kc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),UD=_n(jD),BD=He({},Rh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),M0=_n(BD),$D=He({},uu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vy}),zD=_n($D),WD=He({},Qo,{propertyName:0,elapsedTime:0,pseudoElement:0}),HD=_n(WD),qD=He({},Rh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),GD=_n(qD),KD=[9,13,27,32],Ly=Dr&&"CompositionEvent"in window,el=null;Dr&&"documentMode"in document&&(el=document.documentMode);var QD=Dr&&"TextEvent"in window&&!el,YI=Dr&&(!Ly||el&&8<el&&11>=el),D0=" ",O0=!1;function XI(t,e){switch(t){case"keyup":return KD.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function JI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Js=!1;function YD(t,e){switch(t){case"compositionend":return JI(e);case"keypress":return e.which!==32?null:(O0=!0,D0);case"textInput":return t=e.data,t===D0&&O0?null:t;default:return null}}function XD(t,e){if(Js)return t==="compositionend"||!Ly&&XI(t,e)?(t=QI(),Gc=Dy=hi=null,Js=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return YI&&e.locale!=="ko"?null:e.data;default:return null}}var JD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function V0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!JD[t.type]:e==="textarea"}function ZI(t,e,n,r){PI(r),e=Pd(e,"onChange"),0<e.length&&(n=new Oy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var tl=null,Il=null;function ZD(t){cC(t,0)}function Ph(t){var e=to(t);if(TI(e))return t}function e2(t,e){if(t==="change")return e}var eC=!1;if(Dr){var op;if(Dr){var ap="oninput"in document;if(!ap){var L0=document.createElement("div");L0.setAttribute("oninput","return;"),ap=typeof L0.oninput=="function"}op=ap}else op=!1;eC=op&&(!document.documentMode||9<document.documentMode)}function F0(){tl&&(tl.detachEvent("onpropertychange",tC),Il=tl=null)}function tC(t){if(t.propertyName==="value"&&Ph(Il)){var e=[];ZI(e,Il,t,Ry(t)),DI(ZD,e)}}function t2(t,e,n){t==="focusin"?(F0(),tl=e,Il=n,tl.attachEvent("onpropertychange",tC)):t==="focusout"&&F0()}function n2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ph(Il)}function r2(t,e){if(t==="click")return Ph(e)}function i2(t,e){if(t==="input"||t==="change")return Ph(e)}function s2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var zn=typeof Object.is=="function"?Object.is:s2;function Cl(t,e){if(zn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!fm.call(e,i)||!zn(t[i],e[i]))return!1}return!0}function j0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function U0(t,e){var n=j0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=j0(n)}}function nC(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?nC(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function rC(){for(var t=window,e=Td();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Td(t.document)}return e}function Fy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function o2(t){var e=rC(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&nC(n.ownerDocument.documentElement,n)){if(r!==null&&Fy(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=U0(n,s);var o=U0(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var a2=Dr&&"documentMode"in document&&11>=document.documentMode,Zs=null,Nm=null,nl=null,Mm=!1;function B0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Mm||Zs==null||Zs!==Td(r)||(r=Zs,"selectionStart"in r&&Fy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),nl&&Cl(nl,r)||(nl=r,r=Pd(Nm,"onSelect"),0<r.length&&(e=new Oy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Zs)))}function mc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var eo={animationend:mc("Animation","AnimationEnd"),animationiteration:mc("Animation","AnimationIteration"),animationstart:mc("Animation","AnimationStart"),transitionend:mc("Transition","TransitionEnd")},lp={},iC={};Dr&&(iC=document.createElement("div").style,"AnimationEvent"in window||(delete eo.animationend.animation,delete eo.animationiteration.animation,delete eo.animationstart.animation),"TransitionEvent"in window||delete eo.transitionend.transition);function kh(t){if(lp[t])return lp[t];if(!eo[t])return t;var e=eo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in iC)return lp[t]=e[n];return t}var sC=kh("animationend"),oC=kh("animationiteration"),aC=kh("animationstart"),lC=kh("transitionend"),uC=new Map,$0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Li(t,e){uC.set(t,e),bs(e,[t])}for(var up=0;up<$0.length;up++){var cp=$0[up],l2=cp.toLowerCase(),u2=cp[0].toUpperCase()+cp.slice(1);Li(l2,"on"+u2)}Li(sC,"onAnimationEnd");Li(oC,"onAnimationIteration");Li(aC,"onAnimationStart");Li("dblclick","onDoubleClick");Li("focusin","onFocus");Li("focusout","onBlur");Li(lC,"onTransitionEnd");Po("onMouseEnter",["mouseout","mouseover"]);Po("onMouseLeave",["mouseout","mouseover"]);Po("onPointerEnter",["pointerout","pointerover"]);Po("onPointerLeave",["pointerout","pointerover"]);bs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bs("onBeforeInput",["compositionend","keypress","textInput","paste"]);bs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),c2=new Set("cancel close invalid load scroll toggle".split(" ").concat(qa));function z0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,lD(r,e,void 0,t),t.currentTarget=null}function cC(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;z0(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;z0(i,a,u),s=l}}}if(Id)throw t=bm,Id=!1,bm=null,t}function Ve(t,e){var n=e[Fm];n===void 0&&(n=e[Fm]=new Set);var r=t+"__bubble";n.has(r)||(dC(e,t,2,!1),n.add(r))}function dp(t,e,n){var r=0;e&&(r|=4),dC(n,t,r,e)}var gc="_reactListening"+Math.random().toString(36).slice(2);function Al(t){if(!t[gc]){t[gc]=!0,vI.forEach(function(n){n!=="selectionchange"&&(c2.has(n)||dp(n,!1,t),dp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[gc]||(e[gc]=!0,dp("selectionchange",!1,e))}}function dC(t,e,n,r){switch(KI(e)){case 1:var i=SD;break;case 4:i=ID;break;default:i=My}n=i.bind(null,e,n,t),i=void 0,!Am||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function hp(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=es(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}DI(function(){var u=s,d=Ry(n),h=[];e:{var f=uC.get(t);if(f!==void 0){var m=Oy,w=t;switch(t){case"keypress":if(Kc(n)===0)break e;case"keydown":case"keyup":m=UD;break;case"focusin":w="focus",m=sp;break;case"focusout":w="blur",m=sp;break;case"beforeblur":case"afterblur":m=sp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=k0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=bD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=zD;break;case sC:case oC:case aC:m=kD;break;case lC:m=HD;break;case"scroll":m=CD;break;case"wheel":m=GD;break;case"copy":case"cut":case"paste":m=MD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=M0}var _=(e&4)!==0,I=!_&&t==="scroll",g=_?f!==null?f+"Capture":null:f;_=[];for(var E=u,T;E!==null;){T=E;var R=T.stateNode;if(T.tag===5&&R!==null&&(T=R,g!==null&&(R=El(E,g),R!=null&&_.push(bl(E,R,T)))),I)break;E=E.return}0<_.length&&(f=new m(f,w,null,n,d),h.push({event:f,listeners:_}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==Im&&(w=n.relatedTarget||n.fromElement)&&(es(w)||w[Or]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(w=n.relatedTarget||n.toElement,m=u,w=w?es(w):null,w!==null&&(I=Rs(w),w!==I||w.tag!==5&&w.tag!==6)&&(w=null)):(m=null,w=u),m!==w)){if(_=k0,R="onMouseLeave",g="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(_=M0,R="onPointerLeave",g="onPointerEnter",E="pointer"),I=m==null?f:to(m),T=w==null?f:to(w),f=new _(R,E+"leave",m,n,d),f.target=I,f.relatedTarget=T,R=null,es(d)===u&&(_=new _(g,E+"enter",w,n,d),_.target=T,_.relatedTarget=I,R=_),I=R,m&&w)t:{for(_=m,g=w,E=0,T=_;T;T=$s(T))E++;for(T=0,R=g;R;R=$s(R))T++;for(;0<E-T;)_=$s(_),E--;for(;0<T-E;)g=$s(g),T--;for(;E--;){if(_===g||g!==null&&_===g.alternate)break t;_=$s(_),g=$s(g)}_=null}else _=null;m!==null&&W0(h,f,m,_,!1),w!==null&&I!==null&&W0(h,I,w,_,!0)}}e:{if(f=u?to(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var N=e2;else if(V0(f))if(eC)N=i2;else{N=n2;var L=t2}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=r2);if(N&&(N=N(t,u))){ZI(h,N,n,d);break e}L&&L(t,f,u),t==="focusout"&&(L=f._wrapperState)&&L.controlled&&f.type==="number"&&_m(f,"number",f.value)}switch(L=u?to(u):window,t){case"focusin":(V0(L)||L.contentEditable==="true")&&(Zs=L,Nm=u,nl=null);break;case"focusout":nl=Nm=Zs=null;break;case"mousedown":Mm=!0;break;case"contextmenu":case"mouseup":case"dragend":Mm=!1,B0(h,n,d);break;case"selectionchange":if(a2)break;case"keydown":case"keyup":B0(h,n,d)}var C;if(Ly)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Js?XI(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(YI&&n.locale!=="ko"&&(Js||S!=="onCompositionStart"?S==="onCompositionEnd"&&Js&&(C=QI()):(hi=d,Dy="value"in hi?hi.value:hi.textContent,Js=!0)),L=Pd(u,S),0<L.length&&(S=new N0(S,t,null,n,d),h.push({event:S,listeners:L}),C?S.data=C:(C=JI(n),C!==null&&(S.data=C)))),(C=QD?YD(t,n):XD(t,n))&&(u=Pd(u,"onBeforeInput"),0<u.length&&(d=new N0("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=C))}cC(h,e)})}function bl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Pd(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=El(t,n),s!=null&&r.unshift(bl(t,s,i)),s=El(t,e),s!=null&&r.push(bl(t,s,i))),t=t.return}return r}function $s(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function W0(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=El(n,s),l!=null&&o.unshift(bl(n,l,a))):i||(l=El(n,s),l!=null&&o.push(bl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var d2=/\r\n?/g,h2=/\u0000|\uFFFD/g;function H0(t){return(typeof t=="string"?t:""+t).replace(d2,`
`).replace(h2,"")}function yc(t,e,n){if(e=H0(e),H0(t)!==e&&n)throw Error(H(425))}function kd(){}var Dm=null,Om=null;function Vm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Lm=typeof setTimeout=="function"?setTimeout:void 0,f2=typeof clearTimeout=="function"?clearTimeout:void 0,q0=typeof Promise=="function"?Promise:void 0,p2=typeof queueMicrotask=="function"?queueMicrotask:typeof q0<"u"?function(t){return q0.resolve(null).then(t).catch(m2)}:Lm;function m2(t){setTimeout(function(){throw t})}function fp(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Sl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Sl(e)}function wi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function G0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Yo=Math.random().toString(36).slice(2),tr="__reactFiber$"+Yo,Rl="__reactProps$"+Yo,Or="__reactContainer$"+Yo,Fm="__reactEvents$"+Yo,g2="__reactListeners$"+Yo,y2="__reactHandles$"+Yo;function es(t){var e=t[tr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Or]||n[tr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=G0(t);t!==null;){if(n=t[tr])return n;t=G0(t)}return e}t=n,n=t.parentNode}return null}function cu(t){return t=t[tr]||t[Or],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function to(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(H(33))}function Nh(t){return t[Rl]||null}var jm=[],no=-1;function Fi(t){return{current:t}}function Le(t){0>no||(t.current=jm[no],jm[no]=null,no--)}function De(t,e){no++,jm[no]=t.current,t.current=e}var bi={},Lt=Fi(bi),nn=Fi(!1),ps=bi;function ko(t,e){var n=t.type.contextTypes;if(!n)return bi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function rn(t){return t=t.childContextTypes,t!=null}function Nd(){Le(nn),Le(Lt)}function K0(t,e,n){if(Lt.current!==bi)throw Error(H(168));De(Lt,e),De(nn,n)}function hC(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(H(108,tD(t)||"Unknown",i));return He({},n,r)}function Md(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||bi,ps=Lt.current,De(Lt,t),De(nn,nn.current),!0}function Q0(t,e,n){var r=t.stateNode;if(!r)throw Error(H(169));n?(t=hC(t,e,ps),r.__reactInternalMemoizedMergedChildContext=t,Le(nn),Le(Lt),De(Lt,t)):Le(nn),De(nn,n)}var Tr=null,Mh=!1,pp=!1;function fC(t){Tr===null?Tr=[t]:Tr.push(t)}function v2(t){Mh=!0,fC(t)}function ji(){if(!pp&&Tr!==null){pp=!0;var t=0,e=Re;try{var n=Tr;for(Re=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Tr=null,Mh=!1}catch(i){throw Tr!==null&&(Tr=Tr.slice(t+1)),FI(Py,ji),i}finally{Re=e,pp=!1}}return null}var ro=[],io=0,Dd=null,Od=0,Tn=[],Sn=0,ms=null,Ir=1,Cr="";function Qi(t,e){ro[io++]=Od,ro[io++]=Dd,Dd=t,Od=e}function pC(t,e,n){Tn[Sn++]=Ir,Tn[Sn++]=Cr,Tn[Sn++]=ms,ms=t;var r=Ir;t=Cr;var i=32-Un(r)-1;r&=~(1<<i),n+=1;var s=32-Un(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ir=1<<32-Un(e)+i|n<<i|r,Cr=s+t}else Ir=1<<s|n<<i|r,Cr=t}function jy(t){t.return!==null&&(Qi(t,1),pC(t,1,0))}function Uy(t){for(;t===Dd;)Dd=ro[--io],ro[io]=null,Od=ro[--io],ro[io]=null;for(;t===ms;)ms=Tn[--Sn],Tn[Sn]=null,Cr=Tn[--Sn],Tn[Sn]=null,Ir=Tn[--Sn],Tn[Sn]=null}var pn=null,hn=null,je=!1,jn=null;function mC(t,e){var n=In(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Y0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,pn=t,hn=wi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,pn=t,hn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ms!==null?{id:Ir,overflow:Cr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=In(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,pn=t,hn=null,!0):!1;default:return!1}}function Um(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Bm(t){if(je){var e=hn;if(e){var n=e;if(!Y0(t,e)){if(Um(t))throw Error(H(418));e=wi(n.nextSibling);var r=pn;e&&Y0(t,e)?mC(r,n):(t.flags=t.flags&-4097|2,je=!1,pn=t)}}else{if(Um(t))throw Error(H(418));t.flags=t.flags&-4097|2,je=!1,pn=t}}}function X0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;pn=t}function vc(t){if(t!==pn)return!1;if(!je)return X0(t),je=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Vm(t.type,t.memoizedProps)),e&&(e=hn)){if(Um(t))throw gC(),Error(H(418));for(;e;)mC(t,e),e=wi(e.nextSibling)}if(X0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){hn=wi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}hn=null}}else hn=pn?wi(t.stateNode.nextSibling):null;return!0}function gC(){for(var t=hn;t;)t=wi(t.nextSibling)}function No(){hn=pn=null,je=!1}function By(t){jn===null?jn=[t]:jn.push(t)}var w2=Kr.ReactCurrentBatchConfig;function Da(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(H(309));var r=n.stateNode}if(!r)throw Error(H(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(H(284));if(!n._owner)throw Error(H(290,t))}return t}function wc(t,e){throw t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function J0(t){var e=t._init;return e(t._payload)}function yC(t){function e(g,E){if(t){var T=g.deletions;T===null?(g.deletions=[E],g.flags|=16):T.push(E)}}function n(g,E){if(!t)return null;for(;E!==null;)e(g,E),E=E.sibling;return null}function r(g,E){for(g=new Map;E!==null;)E.key!==null?g.set(E.key,E):g.set(E.index,E),E=E.sibling;return g}function i(g,E){return g=Ti(g,E),g.index=0,g.sibling=null,g}function s(g,E,T){return g.index=T,t?(T=g.alternate,T!==null?(T=T.index,T<E?(g.flags|=2,E):T):(g.flags|=2,E)):(g.flags|=1048576,E)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,E,T,R){return E===null||E.tag!==6?(E=Ep(T,g.mode,R),E.return=g,E):(E=i(E,T),E.return=g,E)}function l(g,E,T,R){var N=T.type;return N===Xs?d(g,E,T.props.children,R,T.key):E!==null&&(E.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===si&&J0(N)===E.type)?(R=i(E,T.props),R.ref=Da(g,E,T),R.return=g,R):(R=td(T.type,T.key,T.props,null,g.mode,R),R.ref=Da(g,E,T),R.return=g,R)}function u(g,E,T,R){return E===null||E.tag!==4||E.stateNode.containerInfo!==T.containerInfo||E.stateNode.implementation!==T.implementation?(E=xp(T,g.mode,R),E.return=g,E):(E=i(E,T.children||[]),E.return=g,E)}function d(g,E,T,R,N){return E===null||E.tag!==7?(E=us(T,g.mode,R,N),E.return=g,E):(E=i(E,T),E.return=g,E)}function h(g,E,T){if(typeof E=="string"&&E!==""||typeof E=="number")return E=Ep(""+E,g.mode,T),E.return=g,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case lc:return T=td(E.type,E.key,E.props,null,g.mode,T),T.ref=Da(g,null,E),T.return=g,T;case Ys:return E=xp(E,g.mode,T),E.return=g,E;case si:var R=E._init;return h(g,R(E._payload),T)}if(Wa(E)||Ra(E))return E=us(E,g.mode,T,null),E.return=g,E;wc(g,E)}return null}function f(g,E,T,R){var N=E!==null?E.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return N!==null?null:a(g,E,""+T,R);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case lc:return T.key===N?l(g,E,T,R):null;case Ys:return T.key===N?u(g,E,T,R):null;case si:return N=T._init,f(g,E,N(T._payload),R)}if(Wa(T)||Ra(T))return N!==null?null:d(g,E,T,R,null);wc(g,T)}return null}function m(g,E,T,R,N){if(typeof R=="string"&&R!==""||typeof R=="number")return g=g.get(T)||null,a(E,g,""+R,N);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case lc:return g=g.get(R.key===null?T:R.key)||null,l(E,g,R,N);case Ys:return g=g.get(R.key===null?T:R.key)||null,u(E,g,R,N);case si:var L=R._init;return m(g,E,T,L(R._payload),N)}if(Wa(R)||Ra(R))return g=g.get(T)||null,d(E,g,R,N,null);wc(E,R)}return null}function w(g,E,T,R){for(var N=null,L=null,C=E,S=E=0,A=null;C!==null&&S<T.length;S++){C.index>S?(A=C,C=null):A=C.sibling;var P=f(g,C,T[S],R);if(P===null){C===null&&(C=A);break}t&&C&&P.alternate===null&&e(g,C),E=s(P,E,S),L===null?N=P:L.sibling=P,L=P,C=A}if(S===T.length)return n(g,C),je&&Qi(g,S),N;if(C===null){for(;S<T.length;S++)C=h(g,T[S],R),C!==null&&(E=s(C,E,S),L===null?N=C:L.sibling=C,L=C);return je&&Qi(g,S),N}for(C=r(g,C);S<T.length;S++)A=m(C,g,S,T[S],R),A!==null&&(t&&A.alternate!==null&&C.delete(A.key===null?S:A.key),E=s(A,E,S),L===null?N=A:L.sibling=A,L=A);return t&&C.forEach(function(M){return e(g,M)}),je&&Qi(g,S),N}function _(g,E,T,R){var N=Ra(T);if(typeof N!="function")throw Error(H(150));if(T=N.call(T),T==null)throw Error(H(151));for(var L=N=null,C=E,S=E=0,A=null,P=T.next();C!==null&&!P.done;S++,P=T.next()){C.index>S?(A=C,C=null):A=C.sibling;var M=f(g,C,P.value,R);if(M===null){C===null&&(C=A);break}t&&C&&M.alternate===null&&e(g,C),E=s(M,E,S),L===null?N=M:L.sibling=M,L=M,C=A}if(P.done)return n(g,C),je&&Qi(g,S),N;if(C===null){for(;!P.done;S++,P=T.next())P=h(g,P.value,R),P!==null&&(E=s(P,E,S),L===null?N=P:L.sibling=P,L=P);return je&&Qi(g,S),N}for(C=r(g,C);!P.done;S++,P=T.next())P=m(C,g,S,P.value,R),P!==null&&(t&&P.alternate!==null&&C.delete(P.key===null?S:P.key),E=s(P,E,S),L===null?N=P:L.sibling=P,L=P);return t&&C.forEach(function(V){return e(g,V)}),je&&Qi(g,S),N}function I(g,E,T,R){if(typeof T=="object"&&T!==null&&T.type===Xs&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case lc:e:{for(var N=T.key,L=E;L!==null;){if(L.key===N){if(N=T.type,N===Xs){if(L.tag===7){n(g,L.sibling),E=i(L,T.props.children),E.return=g,g=E;break e}}else if(L.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===si&&J0(N)===L.type){n(g,L.sibling),E=i(L,T.props),E.ref=Da(g,L,T),E.return=g,g=E;break e}n(g,L);break}else e(g,L);L=L.sibling}T.type===Xs?(E=us(T.props.children,g.mode,R,T.key),E.return=g,g=E):(R=td(T.type,T.key,T.props,null,g.mode,R),R.ref=Da(g,E,T),R.return=g,g=R)}return o(g);case Ys:e:{for(L=T.key;E!==null;){if(E.key===L)if(E.tag===4&&E.stateNode.containerInfo===T.containerInfo&&E.stateNode.implementation===T.implementation){n(g,E.sibling),E=i(E,T.children||[]),E.return=g,g=E;break e}else{n(g,E);break}else e(g,E);E=E.sibling}E=xp(T,g.mode,R),E.return=g,g=E}return o(g);case si:return L=T._init,I(g,E,L(T._payload),R)}if(Wa(T))return w(g,E,T,R);if(Ra(T))return _(g,E,T,R);wc(g,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,E!==null&&E.tag===6?(n(g,E.sibling),E=i(E,T),E.return=g,g=E):(n(g,E),E=Ep(T,g.mode,R),E.return=g,g=E),o(g)):n(g,E)}return I}var Mo=yC(!0),vC=yC(!1),Vd=Fi(null),Ld=null,so=null,$y=null;function zy(){$y=so=Ld=null}function Wy(t){var e=Vd.current;Le(Vd),t._currentValue=e}function $m(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function wo(t,e){Ld=t,$y=so=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(en=!0),t.firstContext=null)}function kn(t){var e=t._currentValue;if($y!==t)if(t={context:t,memoizedValue:e,next:null},so===null){if(Ld===null)throw Error(H(308));so=t,Ld.dependencies={lanes:0,firstContext:t}}else so=so.next=t;return e}var ts=null;function Hy(t){ts===null?ts=[t]:ts.push(t)}function wC(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Hy(e)):(n.next=i.next,i.next=n),e.interleaved=n,Vr(t,r)}function Vr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var oi=!1;function qy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _C(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function kr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function _i(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ie&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Vr(t,n)}return i=r.interleaved,i===null?(e.next=e,Hy(r)):(e.next=i.next,i.next=e),r.interleaved=e,Vr(t,n)}function Qc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ky(t,n)}}function Z0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Fd(t,e,n,r){var i=t.updateQueue;oi=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=u=l=null,a=s;do{var f=a.lane,m=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=t,_=a;switch(f=e,m=n,_.tag){case 1:if(w=_.payload,typeof w=="function"){h=w.call(m,h,f);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=_.payload,f=typeof w=="function"?w.call(m,h,f):w,f==null)break e;h=He({},h,f);break e;case 2:oi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=m,l=h):d=d.next=m,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ys|=o,t.lanes=o,t.memoizedState=h}}function eE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(H(191,i));i.call(r)}}}var du={},sr=Fi(du),Pl=Fi(du),kl=Fi(du);function ns(t){if(t===du)throw Error(H(174));return t}function Gy(t,e){switch(De(kl,e),De(Pl,t),De(sr,du),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:xm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=xm(e,t)}Le(sr),De(sr,e)}function Do(){Le(sr),Le(Pl),Le(kl)}function EC(t){ns(kl.current);var e=ns(sr.current),n=xm(e,t.type);e!==n&&(De(Pl,t),De(sr,n))}function Ky(t){Pl.current===t&&(Le(sr),Le(Pl))}var $e=Fi(0);function jd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var mp=[];function Qy(){for(var t=0;t<mp.length;t++)mp[t]._workInProgressVersionPrimary=null;mp.length=0}var Yc=Kr.ReactCurrentDispatcher,gp=Kr.ReactCurrentBatchConfig,gs=0,We=null,at=null,dt=null,Ud=!1,rl=!1,Nl=0,_2=0;function Pt(){throw Error(H(321))}function Yy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!zn(t[n],e[n]))return!1;return!0}function Xy(t,e,n,r,i,s){if(gs=s,We=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Yc.current=t===null||t.memoizedState===null?S2:I2,t=n(r,i),rl){s=0;do{if(rl=!1,Nl=0,25<=s)throw Error(H(301));s+=1,dt=at=null,e.updateQueue=null,Yc.current=C2,t=n(r,i)}while(rl)}if(Yc.current=Bd,e=at!==null&&at.next!==null,gs=0,dt=at=We=null,Ud=!1,e)throw Error(H(300));return t}function Jy(){var t=Nl!==0;return Nl=0,t}function er(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dt===null?We.memoizedState=dt=t:dt=dt.next=t,dt}function Nn(){if(at===null){var t=We.alternate;t=t!==null?t.memoizedState:null}else t=at.next;var e=dt===null?We.memoizedState:dt.next;if(e!==null)dt=e,at=t;else{if(t===null)throw Error(H(310));at=t,t={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},dt===null?We.memoizedState=dt=t:dt=dt.next=t}return dt}function Ml(t,e){return typeof e=="function"?e(t):e}function yp(t){var e=Nn(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=at,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var d=u.lane;if((gs&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,We.lanes|=d,ys|=d}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,zn(r,e.memoizedState)||(en=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,We.lanes|=s,ys|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function vp(t){var e=Nn(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);zn(s,e.memoizedState)||(en=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function xC(){}function TC(t,e){var n=We,r=Nn(),i=e(),s=!zn(r.memoizedState,i);if(s&&(r.memoizedState=i,en=!0),r=r.queue,Zy(CC.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||dt!==null&&dt.memoizedState.tag&1){if(n.flags|=2048,Dl(9,IC.bind(null,n,r,i,e),void 0,null),ft===null)throw Error(H(349));gs&30||SC(n,e,i)}return i}function SC(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=We.updateQueue,e===null?(e={lastEffect:null,stores:null},We.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function IC(t,e,n,r){e.value=n,e.getSnapshot=r,AC(e)&&bC(t)}function CC(t,e,n){return n(function(){AC(e)&&bC(t)})}function AC(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!zn(t,n)}catch{return!0}}function bC(t){var e=Vr(t,1);e!==null&&Bn(e,t,1,-1)}function tE(t){var e=er();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ml,lastRenderedState:t},e.queue=t,t=t.dispatch=T2.bind(null,We,t),[e.memoizedState,t]}function Dl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=We.updateQueue,e===null?(e={lastEffect:null,stores:null},We.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function RC(){return Nn().memoizedState}function Xc(t,e,n,r){var i=er();We.flags|=t,i.memoizedState=Dl(1|e,n,void 0,r===void 0?null:r)}function Dh(t,e,n,r){var i=Nn();r=r===void 0?null:r;var s=void 0;if(at!==null){var o=at.memoizedState;if(s=o.destroy,r!==null&&Yy(r,o.deps)){i.memoizedState=Dl(e,n,s,r);return}}We.flags|=t,i.memoizedState=Dl(1|e,n,s,r)}function nE(t,e){return Xc(8390656,8,t,e)}function Zy(t,e){return Dh(2048,8,t,e)}function PC(t,e){return Dh(4,2,t,e)}function kC(t,e){return Dh(4,4,t,e)}function NC(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function MC(t,e,n){return n=n!=null?n.concat([t]):null,Dh(4,4,NC.bind(null,e,t),n)}function ev(){}function DC(t,e){var n=Nn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Yy(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function OC(t,e){var n=Nn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Yy(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function VC(t,e,n){return gs&21?(zn(n,e)||(n=BI(),We.lanes|=n,ys|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,en=!0),t.memoizedState=n)}function E2(t,e){var n=Re;Re=n!==0&&4>n?n:4,t(!0);var r=gp.transition;gp.transition={};try{t(!1),e()}finally{Re=n,gp.transition=r}}function LC(){return Nn().memoizedState}function x2(t,e,n){var r=xi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},FC(t))jC(e,n);else if(n=wC(t,e,n,r),n!==null){var i=Ht();Bn(n,t,r,i),UC(n,e,r)}}function T2(t,e,n){var r=xi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(FC(t))jC(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,zn(a,o)){var l=e.interleaved;l===null?(i.next=i,Hy(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=wC(t,e,i,r),n!==null&&(i=Ht(),Bn(n,t,r,i),UC(n,e,r))}}function FC(t){var e=t.alternate;return t===We||e!==null&&e===We}function jC(t,e){rl=Ud=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function UC(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ky(t,n)}}var Bd={readContext:kn,useCallback:Pt,useContext:Pt,useEffect:Pt,useImperativeHandle:Pt,useInsertionEffect:Pt,useLayoutEffect:Pt,useMemo:Pt,useReducer:Pt,useRef:Pt,useState:Pt,useDebugValue:Pt,useDeferredValue:Pt,useTransition:Pt,useMutableSource:Pt,useSyncExternalStore:Pt,useId:Pt,unstable_isNewReconciler:!1},S2={readContext:kn,useCallback:function(t,e){return er().memoizedState=[t,e===void 0?null:e],t},useContext:kn,useEffect:nE,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Xc(4194308,4,NC.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Xc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Xc(4,2,t,e)},useMemo:function(t,e){var n=er();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=er();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=x2.bind(null,We,t),[r.memoizedState,t]},useRef:function(t){var e=er();return t={current:t},e.memoizedState=t},useState:tE,useDebugValue:ev,useDeferredValue:function(t){return er().memoizedState=t},useTransition:function(){var t=tE(!1),e=t[0];return t=E2.bind(null,t[1]),er().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=We,i=er();if(je){if(n===void 0)throw Error(H(407));n=n()}else{if(n=e(),ft===null)throw Error(H(349));gs&30||SC(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,nE(CC.bind(null,r,s,t),[t]),r.flags|=2048,Dl(9,IC.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=er(),e=ft.identifierPrefix;if(je){var n=Cr,r=Ir;n=(r&~(1<<32-Un(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Nl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=_2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},I2={readContext:kn,useCallback:DC,useContext:kn,useEffect:Zy,useImperativeHandle:MC,useInsertionEffect:PC,useLayoutEffect:kC,useMemo:OC,useReducer:yp,useRef:RC,useState:function(){return yp(Ml)},useDebugValue:ev,useDeferredValue:function(t){var e=Nn();return VC(e,at.memoizedState,t)},useTransition:function(){var t=yp(Ml)[0],e=Nn().memoizedState;return[t,e]},useMutableSource:xC,useSyncExternalStore:TC,useId:LC,unstable_isNewReconciler:!1},C2={readContext:kn,useCallback:DC,useContext:kn,useEffect:Zy,useImperativeHandle:MC,useInsertionEffect:PC,useLayoutEffect:kC,useMemo:OC,useReducer:vp,useRef:RC,useState:function(){return vp(Ml)},useDebugValue:ev,useDeferredValue:function(t){var e=Nn();return at===null?e.memoizedState=t:VC(e,at.memoizedState,t)},useTransition:function(){var t=vp(Ml)[0],e=Nn().memoizedState;return[t,e]},useMutableSource:xC,useSyncExternalStore:TC,useId:LC,unstable_isNewReconciler:!1};function Ln(t,e){if(t&&t.defaultProps){e=He({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function zm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:He({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Oh={isMounted:function(t){return(t=t._reactInternals)?Rs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ht(),i=xi(t),s=kr(r,i);s.payload=e,n!=null&&(s.callback=n),e=_i(t,s,i),e!==null&&(Bn(e,t,i,r),Qc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ht(),i=xi(t),s=kr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=_i(t,s,i),e!==null&&(Bn(e,t,i,r),Qc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ht(),r=xi(t),i=kr(n,r);i.tag=2,e!=null&&(i.callback=e),e=_i(t,i,r),e!==null&&(Bn(e,t,r,n),Qc(e,t,r))}};function rE(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Cl(n,r)||!Cl(i,s):!0}function BC(t,e,n){var r=!1,i=bi,s=e.contextType;return typeof s=="object"&&s!==null?s=kn(s):(i=rn(e)?ps:Lt.current,r=e.contextTypes,s=(r=r!=null)?ko(t,i):bi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Oh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function iE(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Oh.enqueueReplaceState(e,e.state,null)}function Wm(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},qy(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=kn(s):(s=rn(e)?ps:Lt.current,i.context=ko(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(zm(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Oh.enqueueReplaceState(i,i.state,null),Fd(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Oo(t,e){try{var n="",r=e;do n+=eD(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function wp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Hm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var A2=typeof WeakMap=="function"?WeakMap:Map;function $C(t,e,n){n=kr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){zd||(zd=!0,tg=r),Hm(t,e)},n}function zC(t,e,n){n=kr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Hm(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Hm(t,e),typeof r!="function"&&(Ei===null?Ei=new Set([this]):Ei.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function sE(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new A2;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=B2.bind(null,t,e,n),e.then(t,t))}function oE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function aE(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=kr(-1,1),e.tag=2,_i(n,e,1))),n.lanes|=1),t)}var b2=Kr.ReactCurrentOwner,en=!1;function $t(t,e,n,r){e.child=t===null?vC(e,null,n,r):Mo(e,t.child,n,r)}function lE(t,e,n,r,i){n=n.render;var s=e.ref;return wo(e,i),r=Xy(t,e,n,r,s,i),n=Jy(),t!==null&&!en?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Lr(t,e,i)):(je&&n&&jy(e),e.flags|=1,$t(t,e,r,i),e.child)}function uE(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!lv(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,WC(t,e,s,r,i)):(t=td(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Cl,n(o,r)&&t.ref===e.ref)return Lr(t,e,i)}return e.flags|=1,t=Ti(s,r),t.ref=e.ref,t.return=e,e.child=t}function WC(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Cl(s,r)&&t.ref===e.ref)if(en=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(en=!0);else return e.lanes=t.lanes,Lr(t,e,i)}return qm(t,e,n,r,i)}function HC(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},De(ao,cn),cn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,De(ao,cn),cn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,De(ao,cn),cn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,De(ao,cn),cn|=r;return $t(t,e,i,n),e.child}function qC(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function qm(t,e,n,r,i){var s=rn(n)?ps:Lt.current;return s=ko(e,s),wo(e,i),n=Xy(t,e,n,r,s,i),r=Jy(),t!==null&&!en?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Lr(t,e,i)):(je&&r&&jy(e),e.flags|=1,$t(t,e,n,i),e.child)}function cE(t,e,n,r,i){if(rn(n)){var s=!0;Md(e)}else s=!1;if(wo(e,i),e.stateNode===null)Jc(t,e),BC(e,n,r),Wm(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=kn(u):(u=rn(n)?ps:Lt.current,u=ko(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&iE(e,o,r,u),oi=!1;var f=e.memoizedState;o.state=f,Fd(e,r,o,i),l=e.memoizedState,a!==r||f!==l||nn.current||oi?(typeof d=="function"&&(zm(e,n,d,r),l=e.memoizedState),(a=oi||rE(e,n,a,r,f,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,_C(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Ln(e.type,a),o.props=u,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=kn(l):(l=rn(n)?ps:Lt.current,l=ko(e,l));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&iE(e,o,r,l),oi=!1,f=e.memoizedState,o.state=f,Fd(e,r,o,i);var w=e.memoizedState;a!==h||f!==w||nn.current||oi?(typeof m=="function"&&(zm(e,n,m,r),w=e.memoizedState),(u=oi||rE(e,n,u,r,f,w,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Gm(t,e,n,r,s,i)}function Gm(t,e,n,r,i,s){qC(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Q0(e,n,!1),Lr(t,e,s);r=e.stateNode,b2.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Mo(e,t.child,null,s),e.child=Mo(e,null,a,s)):$t(t,e,a,s),e.memoizedState=r.state,i&&Q0(e,n,!0),e.child}function GC(t){var e=t.stateNode;e.pendingContext?K0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&K0(t,e.context,!1),Gy(t,e.containerInfo)}function dE(t,e,n,r,i){return No(),By(i),e.flags|=256,$t(t,e,n,r),e.child}var Km={dehydrated:null,treeContext:null,retryLane:0};function Qm(t){return{baseLanes:t,cachePool:null,transitions:null}}function KC(t,e,n){var r=e.pendingProps,i=$e.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),De($e,i&1),t===null)return Bm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Fh(o,r,0,null),t=us(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Qm(n),e.memoizedState=Km,t):tv(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return R2(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ti(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Ti(a,s):(s=us(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Qm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Km,r}return s=t.child,t=s.sibling,r=Ti(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function tv(t,e){return e=Fh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function _c(t,e,n,r){return r!==null&&By(r),Mo(e,t.child,null,n),t=tv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function R2(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=wp(Error(H(422))),_c(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Fh({mode:"visible",children:r.children},i,0,null),s=us(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Mo(e,t.child,null,o),e.child.memoizedState=Qm(o),e.memoizedState=Km,s);if(!(e.mode&1))return _c(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(H(419)),r=wp(s,r,void 0),_c(t,e,o,r)}if(a=(o&t.childLanes)!==0,en||a){if(r=ft,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Vr(t,i),Bn(r,t,i,-1))}return av(),r=wp(Error(H(421))),_c(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=$2.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,hn=wi(i.nextSibling),pn=e,je=!0,jn=null,t!==null&&(Tn[Sn++]=Ir,Tn[Sn++]=Cr,Tn[Sn++]=ms,Ir=t.id,Cr=t.overflow,ms=e),e=tv(e,r.children),e.flags|=4096,e)}function hE(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),$m(t.return,e,n)}function _p(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function QC(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if($t(t,e,r.children,n),r=$e.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&hE(t,n,e);else if(t.tag===19)hE(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(De($e,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&jd(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),_p(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&jd(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}_p(e,!0,n,null,s);break;case"together":_p(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Jc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Lr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ys|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,n=Ti(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ti(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function P2(t,e,n){switch(e.tag){case 3:GC(e),No();break;case 5:EC(e);break;case 1:rn(e.type)&&Md(e);break;case 4:Gy(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;De(Vd,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(De($e,$e.current&1),e.flags|=128,null):n&e.child.childLanes?KC(t,e,n):(De($e,$e.current&1),t=Lr(t,e,n),t!==null?t.sibling:null);De($e,$e.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return QC(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),De($e,$e.current),r)break;return null;case 22:case 23:return e.lanes=0,HC(t,e,n)}return Lr(t,e,n)}var YC,Ym,XC,JC;YC=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ym=function(){};XC=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ns(sr.current);var s=null;switch(n){case"input":i=vm(t,i),r=vm(t,r),s=[];break;case"select":i=He({},i,{value:void 0}),r=He({},r,{value:void 0}),s=[];break;case"textarea":i=Em(t,i),r=Em(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=kd)}Tm(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(wl.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(wl.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ve("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};JC=function(t,e,n,r){n!==r&&(e.flags|=4)};function Oa(t,e){if(!je)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function kt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function k2(t,e,n){var r=e.pendingProps;switch(Uy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(e),null;case 1:return rn(e.type)&&Nd(),kt(e),null;case 3:return r=e.stateNode,Do(),Le(nn),Le(Lt),Qy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(vc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,jn!==null&&(ig(jn),jn=null))),Ym(t,e),kt(e),null;case 5:Ky(e);var i=ns(kl.current);if(n=e.type,t!==null&&e.stateNode!=null)XC(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(H(166));return kt(e),null}if(t=ns(sr.current),vc(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[tr]=e,r[Rl]=s,t=(e.mode&1)!==0,n){case"dialog":Ve("cancel",r),Ve("close",r);break;case"iframe":case"object":case"embed":Ve("load",r);break;case"video":case"audio":for(i=0;i<qa.length;i++)Ve(qa[i],r);break;case"source":Ve("error",r);break;case"img":case"image":case"link":Ve("error",r),Ve("load",r);break;case"details":Ve("toggle",r);break;case"input":E0(r,s),Ve("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ve("invalid",r);break;case"textarea":T0(r,s),Ve("invalid",r)}Tm(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&yc(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&yc(r.textContent,a,t),i=["children",""+a]):wl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ve("scroll",r)}switch(n){case"input":uc(r),x0(r,s,!0);break;case"textarea":uc(r),S0(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=kd)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=CI(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[tr]=e,t[Rl]=r,YC(t,e,!1,!1),e.stateNode=t;e:{switch(o=Sm(n,r),n){case"dialog":Ve("cancel",t),Ve("close",t),i=r;break;case"iframe":case"object":case"embed":Ve("load",t),i=r;break;case"video":case"audio":for(i=0;i<qa.length;i++)Ve(qa[i],t);i=r;break;case"source":Ve("error",t),i=r;break;case"img":case"image":case"link":Ve("error",t),Ve("load",t),i=r;break;case"details":Ve("toggle",t),i=r;break;case"input":E0(t,r),i=vm(t,r),Ve("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=He({},r,{value:void 0}),Ve("invalid",t);break;case"textarea":T0(t,r),i=Em(t,r),Ve("invalid",t);break;default:i=r}Tm(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?RI(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&AI(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&_l(t,l):typeof l=="number"&&_l(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(wl.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ve("scroll",t):l!=null&&Iy(t,s,l,o))}switch(n){case"input":uc(t),x0(t,r,!1);break;case"textarea":uc(t),S0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ai(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?mo(t,!!r.multiple,s,!1):r.defaultValue!=null&&mo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=kd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return kt(e),null;case 6:if(t&&e.stateNode!=null)JC(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(H(166));if(n=ns(kl.current),ns(sr.current),vc(e)){if(r=e.stateNode,n=e.memoizedProps,r[tr]=e,(s=r.nodeValue!==n)&&(t=pn,t!==null))switch(t.tag){case 3:yc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&yc(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[tr]=e,e.stateNode=r}return kt(e),null;case 13:if(Le($e),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(je&&hn!==null&&e.mode&1&&!(e.flags&128))gC(),No(),e.flags|=98560,s=!1;else if(s=vc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(H(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(H(317));s[tr]=e}else No(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;kt(e),s=!1}else jn!==null&&(ig(jn),jn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||$e.current&1?lt===0&&(lt=3):av())),e.updateQueue!==null&&(e.flags|=4),kt(e),null);case 4:return Do(),Ym(t,e),t===null&&Al(e.stateNode.containerInfo),kt(e),null;case 10:return Wy(e.type._context),kt(e),null;case 17:return rn(e.type)&&Nd(),kt(e),null;case 19:if(Le($e),s=e.memoizedState,s===null)return kt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Oa(s,!1);else{if(lt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=jd(t),o!==null){for(e.flags|=128,Oa(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return De($e,$e.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ze()>Vo&&(e.flags|=128,r=!0,Oa(s,!1),e.lanes=4194304)}else{if(!r)if(t=jd(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Oa(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!je)return kt(e),null}else 2*Ze()-s.renderingStartTime>Vo&&n!==1073741824&&(e.flags|=128,r=!0,Oa(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ze(),e.sibling=null,n=$e.current,De($e,r?n&1|2:n&1),e):(kt(e),null);case 22:case 23:return ov(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?cn&1073741824&&(kt(e),e.subtreeFlags&6&&(e.flags|=8192)):kt(e),null;case 24:return null;case 25:return null}throw Error(H(156,e.tag))}function N2(t,e){switch(Uy(e),e.tag){case 1:return rn(e.type)&&Nd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Do(),Le(nn),Le(Lt),Qy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ky(e),null;case 13:if(Le($e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));No()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Le($e),null;case 4:return Do(),null;case 10:return Wy(e.type._context),null;case 22:case 23:return ov(),null;case 24:return null;default:return null}}var Ec=!1,Dt=!1,M2=typeof WeakSet=="function"?WeakSet:Set,X=null;function oo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Qe(t,e,r)}else n.current=null}function Xm(t,e,n){try{n()}catch(r){Qe(t,e,r)}}var fE=!1;function D2(t,e){if(Dm=bd,t=rC(),Fy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var m;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===n&&++u===i&&(a=o),f===s&&++d===r&&(l=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Om={focusedElem:t,selectionRange:n},bd=!1,X=e;X!==null;)if(e=X,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,X=t;else for(;X!==null;){e=X;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var _=w.memoizedProps,I=w.memoizedState,g=e.stateNode,E=g.getSnapshotBeforeUpdate(e.elementType===e.type?_:Ln(e.type,_),I);g.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(R){Qe(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}return w=fE,fE=!1,w}function il(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Xm(e,n,s)}i=i.next}while(i!==r)}}function Vh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Jm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ZC(t){var e=t.alternate;e!==null&&(t.alternate=null,ZC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[tr],delete e[Rl],delete e[Fm],delete e[g2],delete e[y2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function eA(t){return t.tag===5||t.tag===3||t.tag===4}function pE(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||eA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Zm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=kd));else if(r!==4&&(t=t.child,t!==null))for(Zm(t,e,n),t=t.sibling;t!==null;)Zm(t,e,n),t=t.sibling}function eg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(eg(t,e,n),t=t.sibling;t!==null;)eg(t,e,n),t=t.sibling}var gt=null,Fn=!1;function ei(t,e,n){for(n=n.child;n!==null;)tA(t,e,n),n=n.sibling}function tA(t,e,n){if(ir&&typeof ir.onCommitFiberUnmount=="function")try{ir.onCommitFiberUnmount(bh,n)}catch{}switch(n.tag){case 5:Dt||oo(n,e);case 6:var r=gt,i=Fn;gt=null,ei(t,e,n),gt=r,Fn=i,gt!==null&&(Fn?(t=gt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):gt.removeChild(n.stateNode));break;case 18:gt!==null&&(Fn?(t=gt,n=n.stateNode,t.nodeType===8?fp(t.parentNode,n):t.nodeType===1&&fp(t,n),Sl(t)):fp(gt,n.stateNode));break;case 4:r=gt,i=Fn,gt=n.stateNode.containerInfo,Fn=!0,ei(t,e,n),gt=r,Fn=i;break;case 0:case 11:case 14:case 15:if(!Dt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Xm(n,e,o),i=i.next}while(i!==r)}ei(t,e,n);break;case 1:if(!Dt&&(oo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Qe(n,e,a)}ei(t,e,n);break;case 21:ei(t,e,n);break;case 22:n.mode&1?(Dt=(r=Dt)||n.memoizedState!==null,ei(t,e,n),Dt=r):ei(t,e,n);break;default:ei(t,e,n)}}function mE(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new M2),e.forEach(function(r){var i=z2.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function On(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:gt=a.stateNode,Fn=!1;break e;case 3:gt=a.stateNode.containerInfo,Fn=!0;break e;case 4:gt=a.stateNode.containerInfo,Fn=!0;break e}a=a.return}if(gt===null)throw Error(H(160));tA(s,o,i),gt=null,Fn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Qe(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)nA(e,t),e=e.sibling}function nA(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(On(e,t),Jn(t),r&4){try{il(3,t,t.return),Vh(3,t)}catch(_){Qe(t,t.return,_)}try{il(5,t,t.return)}catch(_){Qe(t,t.return,_)}}break;case 1:On(e,t),Jn(t),r&512&&n!==null&&oo(n,n.return);break;case 5:if(On(e,t),Jn(t),r&512&&n!==null&&oo(n,n.return),t.flags&32){var i=t.stateNode;try{_l(i,"")}catch(_){Qe(t,t.return,_)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&SI(i,s),Sm(a,o);var u=Sm(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?RI(i,h):d==="dangerouslySetInnerHTML"?AI(i,h):d==="children"?_l(i,h):Iy(i,d,h,u)}switch(a){case"input":wm(i,s);break;case"textarea":II(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?mo(i,!!s.multiple,m,!1):f!==!!s.multiple&&(s.defaultValue!=null?mo(i,!!s.multiple,s.defaultValue,!0):mo(i,!!s.multiple,s.multiple?[]:"",!1))}i[Rl]=s}catch(_){Qe(t,t.return,_)}}break;case 6:if(On(e,t),Jn(t),r&4){if(t.stateNode===null)throw Error(H(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(_){Qe(t,t.return,_)}}break;case 3:if(On(e,t),Jn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Sl(e.containerInfo)}catch(_){Qe(t,t.return,_)}break;case 4:On(e,t),Jn(t);break;case 13:On(e,t),Jn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(iv=Ze())),r&4&&mE(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Dt=(u=Dt)||d,On(e,t),Dt=u):On(e,t),Jn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(X=t,d=t.child;d!==null;){for(h=X=d;X!==null;){switch(f=X,m=f.child,f.tag){case 0:case 11:case 14:case 15:il(4,f,f.return);break;case 1:oo(f,f.return);var w=f.stateNode;if(typeof w.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(_){Qe(r,n,_)}}break;case 5:oo(f,f.return);break;case 22:if(f.memoizedState!==null){yE(h);continue}}m!==null?(m.return=f,X=m):yE(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=bI("display",o))}catch(_){Qe(t,t.return,_)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(_){Qe(t,t.return,_)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:On(e,t),Jn(t),r&4&&mE(t);break;case 21:break;default:On(e,t),Jn(t)}}function Jn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(eA(n)){var r=n;break e}n=n.return}throw Error(H(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(_l(i,""),r.flags&=-33);var s=pE(t);eg(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=pE(t);Zm(t,a,o);break;default:throw Error(H(161))}}catch(l){Qe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function O2(t,e,n){X=t,rA(t)}function rA(t,e,n){for(var r=(t.mode&1)!==0;X!==null;){var i=X,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Ec;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Dt;a=Ec;var u=Dt;if(Ec=o,(Dt=l)&&!u)for(X=i;X!==null;)o=X,l=o.child,o.tag===22&&o.memoizedState!==null?vE(i):l!==null?(l.return=o,X=l):vE(i);for(;s!==null;)X=s,rA(s),s=s.sibling;X=i,Ec=a,Dt=u}gE(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,X=s):gE(t)}}function gE(t){for(;X!==null;){var e=X;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Dt||Vh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Dt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ln(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&eE(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}eE(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Sl(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}Dt||e.flags&512&&Jm(e)}catch(f){Qe(e,e.return,f)}}if(e===t){X=null;break}if(n=e.sibling,n!==null){n.return=e.return,X=n;break}X=e.return}}function yE(t){for(;X!==null;){var e=X;if(e===t){X=null;break}var n=e.sibling;if(n!==null){n.return=e.return,X=n;break}X=e.return}}function vE(t){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Vh(4,e)}catch(l){Qe(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Qe(e,i,l)}}var s=e.return;try{Jm(e)}catch(l){Qe(e,s,l)}break;case 5:var o=e.return;try{Jm(e)}catch(l){Qe(e,o,l)}}}catch(l){Qe(e,e.return,l)}if(e===t){X=null;break}var a=e.sibling;if(a!==null){a.return=e.return,X=a;break}X=e.return}}var V2=Math.ceil,$d=Kr.ReactCurrentDispatcher,nv=Kr.ReactCurrentOwner,An=Kr.ReactCurrentBatchConfig,Ie=0,ft=null,rt=null,Et=0,cn=0,ao=Fi(0),lt=0,Ol=null,ys=0,Lh=0,rv=0,sl=null,Zt=null,iv=0,Vo=1/0,xr=null,zd=!1,tg=null,Ei=null,xc=!1,fi=null,Wd=0,ol=0,ng=null,Zc=-1,ed=0;function Ht(){return Ie&6?Ze():Zc!==-1?Zc:Zc=Ze()}function xi(t){return t.mode&1?Ie&2&&Et!==0?Et&-Et:w2.transition!==null?(ed===0&&(ed=BI()),ed):(t=Re,t!==0||(t=window.event,t=t===void 0?16:KI(t.type)),t):1}function Bn(t,e,n,r){if(50<ol)throw ol=0,ng=null,Error(H(185));lu(t,n,r),(!(Ie&2)||t!==ft)&&(t===ft&&(!(Ie&2)&&(Lh|=n),lt===4&&li(t,Et)),sn(t,r),n===1&&Ie===0&&!(e.mode&1)&&(Vo=Ze()+500,Mh&&ji()))}function sn(t,e){var n=t.callbackNode;wD(t,e);var r=Ad(t,t===ft?Et:0);if(r===0)n!==null&&A0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&A0(n),e===1)t.tag===0?v2(wE.bind(null,t)):fC(wE.bind(null,t)),p2(function(){!(Ie&6)&&ji()}),n=null;else{switch($I(r)){case 1:n=Py;break;case 4:n=jI;break;case 16:n=Cd;break;case 536870912:n=UI;break;default:n=Cd}n=dA(n,iA.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function iA(t,e){if(Zc=-1,ed=0,Ie&6)throw Error(H(327));var n=t.callbackNode;if(_o()&&t.callbackNode!==n)return null;var r=Ad(t,t===ft?Et:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Hd(t,r);else{e=r;var i=Ie;Ie|=2;var s=oA();(ft!==t||Et!==e)&&(xr=null,Vo=Ze()+500,ls(t,e));do try{j2();break}catch(a){sA(t,a)}while(!0);zy(),$d.current=s,Ie=i,rt!==null?e=0:(ft=null,Et=0,e=lt)}if(e!==0){if(e===2&&(i=Rm(t),i!==0&&(r=i,e=rg(t,i))),e===1)throw n=Ol,ls(t,0),li(t,r),sn(t,Ze()),n;if(e===6)li(t,r);else{if(i=t.current.alternate,!(r&30)&&!L2(i)&&(e=Hd(t,r),e===2&&(s=Rm(t),s!==0&&(r=s,e=rg(t,s))),e===1))throw n=Ol,ls(t,0),li(t,r),sn(t,Ze()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(H(345));case 2:Yi(t,Zt,xr);break;case 3:if(li(t,r),(r&130023424)===r&&(e=iv+500-Ze(),10<e)){if(Ad(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ht(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Lm(Yi.bind(null,t,Zt,xr),e);break}Yi(t,Zt,xr);break;case 4:if(li(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Un(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ze()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*V2(r/1960))-r,10<r){t.timeoutHandle=Lm(Yi.bind(null,t,Zt,xr),r);break}Yi(t,Zt,xr);break;case 5:Yi(t,Zt,xr);break;default:throw Error(H(329))}}}return sn(t,Ze()),t.callbackNode===n?iA.bind(null,t):null}function rg(t,e){var n=sl;return t.current.memoizedState.isDehydrated&&(ls(t,e).flags|=256),t=Hd(t,e),t!==2&&(e=Zt,Zt=n,e!==null&&ig(e)),t}function ig(t){Zt===null?Zt=t:Zt.push.apply(Zt,t)}function L2(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!zn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function li(t,e){for(e&=~rv,e&=~Lh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Un(e),r=1<<n;t[n]=-1,e&=~r}}function wE(t){if(Ie&6)throw Error(H(327));_o();var e=Ad(t,0);if(!(e&1))return sn(t,Ze()),null;var n=Hd(t,e);if(t.tag!==0&&n===2){var r=Rm(t);r!==0&&(e=r,n=rg(t,r))}if(n===1)throw n=Ol,ls(t,0),li(t,e),sn(t,Ze()),n;if(n===6)throw Error(H(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Yi(t,Zt,xr),sn(t,Ze()),null}function sv(t,e){var n=Ie;Ie|=1;try{return t(e)}finally{Ie=n,Ie===0&&(Vo=Ze()+500,Mh&&ji())}}function vs(t){fi!==null&&fi.tag===0&&!(Ie&6)&&_o();var e=Ie;Ie|=1;var n=An.transition,r=Re;try{if(An.transition=null,Re=1,t)return t()}finally{Re=r,An.transition=n,Ie=e,!(Ie&6)&&ji()}}function ov(){cn=ao.current,Le(ao)}function ls(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,f2(n)),rt!==null)for(n=rt.return;n!==null;){var r=n;switch(Uy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Nd();break;case 3:Do(),Le(nn),Le(Lt),Qy();break;case 5:Ky(r);break;case 4:Do();break;case 13:Le($e);break;case 19:Le($e);break;case 10:Wy(r.type._context);break;case 22:case 23:ov()}n=n.return}if(ft=t,rt=t=Ti(t.current,null),Et=cn=e,lt=0,Ol=null,rv=Lh=ys=0,Zt=sl=null,ts!==null){for(e=0;e<ts.length;e++)if(n=ts[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ts=null}return t}function sA(t,e){do{var n=rt;try{if(zy(),Yc.current=Bd,Ud){for(var r=We.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ud=!1}if(gs=0,dt=at=We=null,rl=!1,Nl=0,nv.current=null,n===null||n.return===null){lt=1,Ol=e,rt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Et,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=oE(o);if(m!==null){m.flags&=-257,aE(m,o,a,s,e),m.mode&1&&sE(s,u,e),e=m,l=u;var w=e.updateQueue;if(w===null){var _=new Set;_.add(l),e.updateQueue=_}else w.add(l);break e}else{if(!(e&1)){sE(s,u,e),av();break e}l=Error(H(426))}}else if(je&&a.mode&1){var I=oE(o);if(I!==null){!(I.flags&65536)&&(I.flags|=256),aE(I,o,a,s,e),By(Oo(l,a));break e}}s=l=Oo(l,a),lt!==4&&(lt=2),sl===null?sl=[s]:sl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=$C(s,l,e);Z0(s,g);break e;case 1:a=l;var E=s.type,T=s.stateNode;if(!(s.flags&128)&&(typeof E.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Ei===null||!Ei.has(T)))){s.flags|=65536,e&=-e,s.lanes|=e;var R=zC(s,a,e);Z0(s,R);break e}}s=s.return}while(s!==null)}lA(n)}catch(N){e=N,rt===n&&n!==null&&(rt=n=n.return);continue}break}while(!0)}function oA(){var t=$d.current;return $d.current=Bd,t===null?Bd:t}function av(){(lt===0||lt===3||lt===2)&&(lt=4),ft===null||!(ys&268435455)&&!(Lh&268435455)||li(ft,Et)}function Hd(t,e){var n=Ie;Ie|=2;var r=oA();(ft!==t||Et!==e)&&(xr=null,ls(t,e));do try{F2();break}catch(i){sA(t,i)}while(!0);if(zy(),Ie=n,$d.current=r,rt!==null)throw Error(H(261));return ft=null,Et=0,lt}function F2(){for(;rt!==null;)aA(rt)}function j2(){for(;rt!==null&&!cD();)aA(rt)}function aA(t){var e=cA(t.alternate,t,cn);t.memoizedProps=t.pendingProps,e===null?lA(t):rt=e,nv.current=null}function lA(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=N2(n,e),n!==null){n.flags&=32767,rt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{lt=6,rt=null;return}}else if(n=k2(n,e,cn),n!==null){rt=n;return}if(e=e.sibling,e!==null){rt=e;return}rt=e=t}while(e!==null);lt===0&&(lt=5)}function Yi(t,e,n){var r=Re,i=An.transition;try{An.transition=null,Re=1,U2(t,e,n,r)}finally{An.transition=i,Re=r}return null}function U2(t,e,n,r){do _o();while(fi!==null);if(Ie&6)throw Error(H(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(H(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(_D(t,s),t===ft&&(rt=ft=null,Et=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||xc||(xc=!0,dA(Cd,function(){return _o(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=An.transition,An.transition=null;var o=Re;Re=1;var a=Ie;Ie|=4,nv.current=null,D2(t,n),nA(n,t),o2(Om),bd=!!Dm,Om=Dm=null,t.current=n,O2(n),dD(),Ie=a,Re=o,An.transition=s}else t.current=n;if(xc&&(xc=!1,fi=t,Wd=i),s=t.pendingLanes,s===0&&(Ei=null),pD(n.stateNode),sn(t,Ze()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(zd)throw zd=!1,t=tg,tg=null,t;return Wd&1&&t.tag!==0&&_o(),s=t.pendingLanes,s&1?t===ng?ol++:(ol=0,ng=t):ol=0,ji(),null}function _o(){if(fi!==null){var t=$I(Wd),e=An.transition,n=Re;try{if(An.transition=null,Re=16>t?16:t,fi===null)var r=!1;else{if(t=fi,fi=null,Wd=0,Ie&6)throw Error(H(331));var i=Ie;for(Ie|=4,X=t.current;X!==null;){var s=X,o=s.child;if(X.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(X=u;X!==null;){var d=X;switch(d.tag){case 0:case 11:case 15:il(8,d,s)}var h=d.child;if(h!==null)h.return=d,X=h;else for(;X!==null;){d=X;var f=d.sibling,m=d.return;if(ZC(d),d===u){X=null;break}if(f!==null){f.return=m,X=f;break}X=m}}}var w=s.alternate;if(w!==null){var _=w.child;if(_!==null){w.child=null;do{var I=_.sibling;_.sibling=null,_=I}while(_!==null)}}X=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,X=o;else e:for(;X!==null;){if(s=X,s.flags&2048)switch(s.tag){case 0:case 11:case 15:il(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,X=g;break e}X=s.return}}var E=t.current;for(X=E;X!==null;){o=X;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,X=T;else e:for(o=E;X!==null;){if(a=X,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Vh(9,a)}}catch(N){Qe(a,a.return,N)}if(a===o){X=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,X=R;break e}X=a.return}}if(Ie=i,ji(),ir&&typeof ir.onPostCommitFiberRoot=="function")try{ir.onPostCommitFiberRoot(bh,t)}catch{}r=!0}return r}finally{Re=n,An.transition=e}}return!1}function _E(t,e,n){e=Oo(n,e),e=$C(t,e,1),t=_i(t,e,1),e=Ht(),t!==null&&(lu(t,1,e),sn(t,e))}function Qe(t,e,n){if(t.tag===3)_E(t,t,n);else for(;e!==null;){if(e.tag===3){_E(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ei===null||!Ei.has(r))){t=Oo(n,t),t=zC(e,t,1),e=_i(e,t,1),t=Ht(),e!==null&&(lu(e,1,t),sn(e,t));break}}e=e.return}}function B2(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ht(),t.pingedLanes|=t.suspendedLanes&n,ft===t&&(Et&n)===n&&(lt===4||lt===3&&(Et&130023424)===Et&&500>Ze()-iv?ls(t,0):rv|=n),sn(t,e)}function uA(t,e){e===0&&(t.mode&1?(e=hc,hc<<=1,!(hc&130023424)&&(hc=4194304)):e=1);var n=Ht();t=Vr(t,e),t!==null&&(lu(t,e,n),sn(t,n))}function $2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),uA(t,n)}function z2(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(H(314))}r!==null&&r.delete(e),uA(t,n)}var cA;cA=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||nn.current)en=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return en=!1,P2(t,e,n);en=!!(t.flags&131072)}else en=!1,je&&e.flags&1048576&&pC(e,Od,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Jc(t,e),t=e.pendingProps;var i=ko(e,Lt.current);wo(e,n),i=Xy(null,e,r,t,i,n);var s=Jy();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,rn(r)?(s=!0,Md(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,qy(e),i.updater=Oh,e.stateNode=i,i._reactInternals=e,Wm(e,r,t,n),e=Gm(null,e,r,!0,s,n)):(e.tag=0,je&&s&&jy(e),$t(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Jc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=H2(r),t=Ln(r,t),i){case 0:e=qm(null,e,r,t,n);break e;case 1:e=cE(null,e,r,t,n);break e;case 11:e=lE(null,e,r,t,n);break e;case 14:e=uE(null,e,r,Ln(r.type,t),n);break e}throw Error(H(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ln(r,i),qm(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ln(r,i),cE(t,e,r,i,n);case 3:e:{if(GC(e),t===null)throw Error(H(387));r=e.pendingProps,s=e.memoizedState,i=s.element,_C(t,e),Fd(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Oo(Error(H(423)),e),e=dE(t,e,r,n,i);break e}else if(r!==i){i=Oo(Error(H(424)),e),e=dE(t,e,r,n,i);break e}else for(hn=wi(e.stateNode.containerInfo.firstChild),pn=e,je=!0,jn=null,n=vC(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(No(),r===i){e=Lr(t,e,n);break e}$t(t,e,r,n)}e=e.child}return e;case 5:return EC(e),t===null&&Bm(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Vm(r,i)?o=null:s!==null&&Vm(r,s)&&(e.flags|=32),qC(t,e),$t(t,e,o,n),e.child;case 6:return t===null&&Bm(e),null;case 13:return KC(t,e,n);case 4:return Gy(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Mo(e,null,r,n):$t(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ln(r,i),lE(t,e,r,i,n);case 7:return $t(t,e,e.pendingProps,n),e.child;case 8:return $t(t,e,e.pendingProps.children,n),e.child;case 12:return $t(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,De(Vd,r._currentValue),r._currentValue=o,s!==null)if(zn(s.value,o)){if(s.children===i.children&&!nn.current){e=Lr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=kr(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),$m(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(H(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),$m(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}$t(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,wo(e,n),i=kn(i),r=r(i),e.flags|=1,$t(t,e,r,n),e.child;case 14:return r=e.type,i=Ln(r,e.pendingProps),i=Ln(r.type,i),uE(t,e,r,i,n);case 15:return WC(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ln(r,i),Jc(t,e),e.tag=1,rn(r)?(t=!0,Md(e)):t=!1,wo(e,n),BC(e,r,i),Wm(e,r,i,n),Gm(null,e,r,!0,t,n);case 19:return QC(t,e,n);case 22:return HC(t,e,n)}throw Error(H(156,e.tag))};function dA(t,e){return FI(t,e)}function W2(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(t,e,n,r){return new W2(t,e,n,r)}function lv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function H2(t){if(typeof t=="function")return lv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ay)return 11;if(t===by)return 14}return 2}function Ti(t,e){var n=t.alternate;return n===null?(n=In(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function td(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")lv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Xs:return us(n.children,i,s,e);case Cy:o=8,i|=8;break;case pm:return t=In(12,n,e,i|2),t.elementType=pm,t.lanes=s,t;case mm:return t=In(13,n,e,i),t.elementType=mm,t.lanes=s,t;case gm:return t=In(19,n,e,i),t.elementType=gm,t.lanes=s,t;case EI:return Fh(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case wI:o=10;break e;case _I:o=9;break e;case Ay:o=11;break e;case by:o=14;break e;case si:o=16,r=null;break e}throw Error(H(130,t==null?t:typeof t,""))}return e=In(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function us(t,e,n,r){return t=In(7,t,r,e),t.lanes=n,t}function Fh(t,e,n,r){return t=In(22,t,r,e),t.elementType=EI,t.lanes=n,t.stateNode={isHidden:!1},t}function Ep(t,e,n){return t=In(6,t,null,e),t.lanes=n,t}function xp(t,e,n){return e=In(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function q2(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=np(0),this.expirationTimes=np(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=np(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function uv(t,e,n,r,i,s,o,a,l){return t=new q2(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=In(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},qy(s),t}function G2(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ys,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function hA(t){if(!t)return bi;t=t._reactInternals;e:{if(Rs(t)!==t||t.tag!==1)throw Error(H(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(rn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(H(171))}if(t.tag===1){var n=t.type;if(rn(n))return hC(t,n,e)}return e}function fA(t,e,n,r,i,s,o,a,l){return t=uv(n,r,!0,t,i,s,o,a,l),t.context=hA(null),n=t.current,r=Ht(),i=xi(n),s=kr(r,i),s.callback=e??null,_i(n,s,i),t.current.lanes=i,lu(t,i,r),sn(t,r),t}function jh(t,e,n,r){var i=e.current,s=Ht(),o=xi(i);return n=hA(n),e.context===null?e.context=n:e.pendingContext=n,e=kr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=_i(i,e,o),t!==null&&(Bn(t,i,o,s),Qc(t,i,o)),o}function qd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function EE(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function cv(t,e){EE(t,e),(t=t.alternate)&&EE(t,e)}function K2(){return null}var pA=typeof reportError=="function"?reportError:function(t){console.error(t)};function dv(t){this._internalRoot=t}Uh.prototype.render=dv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));jh(t,e,null,null)};Uh.prototype.unmount=dv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;vs(function(){jh(null,t,null,null)}),e[Or]=null}};function Uh(t){this._internalRoot=t}Uh.prototype.unstable_scheduleHydration=function(t){if(t){var e=HI();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ai.length&&e!==0&&e<ai[n].priority;n++);ai.splice(n,0,t),n===0&&GI(t)}};function hv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Bh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function xE(){}function Q2(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=qd(o);s.call(u)}}var o=fA(e,r,t,0,null,!1,!1,"",xE);return t._reactRootContainer=o,t[Or]=o.current,Al(t.nodeType===8?t.parentNode:t),vs(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=qd(l);a.call(u)}}var l=uv(t,0,!1,null,null,!1,!1,"",xE);return t._reactRootContainer=l,t[Or]=l.current,Al(t.nodeType===8?t.parentNode:t),vs(function(){jh(e,l,n,r)}),l}function $h(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=qd(o);a.call(l)}}jh(e,o,t,i)}else o=Q2(n,e,t,i,r);return qd(o)}zI=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ha(e.pendingLanes);n!==0&&(ky(e,n|1),sn(e,Ze()),!(Ie&6)&&(Vo=Ze()+500,ji()))}break;case 13:vs(function(){var r=Vr(t,1);if(r!==null){var i=Ht();Bn(r,t,1,i)}}),cv(t,1)}};Ny=function(t){if(t.tag===13){var e=Vr(t,134217728);if(e!==null){var n=Ht();Bn(e,t,134217728,n)}cv(t,134217728)}};WI=function(t){if(t.tag===13){var e=xi(t),n=Vr(t,e);if(n!==null){var r=Ht();Bn(n,t,e,r)}cv(t,e)}};HI=function(){return Re};qI=function(t,e){var n=Re;try{return Re=t,e()}finally{Re=n}};Cm=function(t,e,n){switch(e){case"input":if(wm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Nh(r);if(!i)throw Error(H(90));TI(r),wm(r,i)}}}break;case"textarea":II(t,n);break;case"select":e=n.value,e!=null&&mo(t,!!n.multiple,e,!1)}};NI=sv;MI=vs;var Y2={usingClientEntryPoint:!1,Events:[cu,to,Nh,PI,kI,sv]},Va={findFiberByHostInstance:es,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},X2={bundleType:Va.bundleType,version:Va.version,rendererPackageName:Va.rendererPackageName,rendererConfig:Va.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Kr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=VI(t),t===null?null:t.stateNode},findFiberByHostInstance:Va.findFiberByHostInstance||K2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tc.isDisabled&&Tc.supportsFiber)try{bh=Tc.inject(X2),ir=Tc}catch{}}wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y2;wn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hv(e))throw Error(H(200));return G2(t,e,null,n)};wn.createRoot=function(t,e){if(!hv(t))throw Error(H(299));var n=!1,r="",i=pA;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=uv(t,1,!1,null,null,n,!1,r,i),t[Or]=e.current,Al(t.nodeType===8?t.parentNode:t),new dv(e)};wn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=VI(e),t=t===null?null:t.stateNode,t};wn.flushSync=function(t){return vs(t)};wn.hydrate=function(t,e,n){if(!Bh(e))throw Error(H(200));return $h(null,t,e,!0,n)};wn.hydrateRoot=function(t,e,n){if(!hv(t))throw Error(H(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=pA;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=fA(e,null,t,1,n??null,i,!1,s,o),t[Or]=e.current,Al(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Uh(e)};wn.render=function(t,e,n){if(!Bh(e))throw Error(H(200));return $h(null,t,e,!1,n)};wn.unmountComponentAtNode=function(t){if(!Bh(t))throw Error(H(40));return t._reactRootContainer?(vs(function(){$h(null,null,t,!1,function(){t._reactRootContainer=null,t[Or]=null})}),!0):!1};wn.unstable_batchedUpdates=sv;wn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Bh(n))throw Error(H(200));if(t==null||t._reactInternals===void 0)throw Error(H(38));return $h(t,e,n,!1,r)};wn.version="18.3.1-next-f1338f8080-20240426";function mA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mA)}catch(t){console.error(t)}}mA(),mI.exports=wn;var zh=mI.exports;const J2=vy(zh);var gA,TE=zh;gA=TE.createRoot,TE.hydrateRoot;/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var SE="popstate";function Z2(t={}){function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return sg("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Vl(i)}return tO(e,n,null,t)}function Be(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Wn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function eO(){return Math.random().toString(36).substring(2,10)}function IE(t,e){return{usr:t.state,key:t.key,idx:e}}function sg(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Xo(e):e,state:n,key:e&&e.key||r||eO()}}function Vl({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Xo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function tO(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",l=null,u=d();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function d(){return(o.state||{idx:null}).idx}function h(){a="POP";let I=d(),g=I==null?null:I-u;u=I,l&&l({action:a,location:_.location,delta:g})}function f(I,g){a="PUSH";let E=sg(_.location,I,g);u=d()+1;let T=IE(E,u),R=_.createHref(E);try{o.pushState(T,"",R)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;i.location.assign(R)}s&&l&&l({action:a,location:_.location,delta:1})}function m(I,g){a="REPLACE";let E=sg(_.location,I,g);u=d();let T=IE(E,u),R=_.createHref(E);o.replaceState(T,"",R),s&&l&&l({action:a,location:_.location,delta:0})}function w(I){return nO(I)}let _={get action(){return a},get location(){return t(i,o)},listen(I){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(SE,h),l=I,()=>{i.removeEventListener(SE,h),l=null}},createHref(I){return e(i,I)},createURL:w,encodeLocation(I){let g=w(I);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:m,go(I){return o.go(I)}};return _}function nO(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Be(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Vl(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function yA(t,e,n="/"){return rO(t,e,n,!1)}function rO(t,e,n,r){let i=typeof e=="string"?Xo(e):e,s=Fr(i.pathname||"/",n);if(s==null)return null;let o=vA(t);iO(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=mO(s);a=fO(o[l],u,r)}return a}function vA(t,e=[],n=[],r="",i=!1){let s=(o,a,l=i,u)=>{let d={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(r)&&l)return;Be(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length)}let h=Nr([r,d.relativePath]),f=n.concat(d);o.children&&o.children.length>0&&(Be(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),vA(o.children,e,f,h,l)),!(o.path==null&&!o.index)&&e.push({path:h,score:dO(h,o.index),routesMeta:f})};return t.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,a);else for(let u of wA(o.path))s(o,a,!0,u)}),e}function wA(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=wA(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function iO(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:hO(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var sO=/^:[\w-]+$/,oO=3,aO=2,lO=1,uO=10,cO=-2,CE=t=>t==="*";function dO(t,e){let n=t.split("/"),r=n.length;return n.some(CE)&&(r+=cO),e&&(r+=aO),n.filter(i=>!CE(i)).reduce((i,s)=>i+(sO.test(s)?oO:s===""?lO:uO),r)}function hO(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function fO(t,e,n=!1){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=Gd({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),f=l.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=Gd({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:Nr([s,h.pathname]),pathnameBase:wO(Nr([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=Nr([s,h.pathnameBase]))}return o}function Gd(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=pO(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,{paramName:d,isOptional:h},f)=>{if(d==="*"){let w=a[f]||"";o=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const m=a[f];return h&&!m?u[d]=void 0:u[d]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function pO(t,e=!1,n=!0){Wn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function mO(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Wn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Fr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function gO(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Xo(t):t;return{pathname:n?n.startsWith("/")?n:yO(n,e):e,search:_O(r),hash:EO(i)}}function yO(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Tp(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function vO(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function fv(t){let e=vO(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function pv(t,e,n,r=!1){let i;typeof t=="string"?i=Xo(t):(i={...t},Be(!i.pathname||!i.pathname.includes("?"),Tp("?","pathname","search",i)),Be(!i.pathname||!i.pathname.includes("#"),Tp("#","pathname","hash",i)),Be(!i.search||!i.search.includes("#"),Tp("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=gO(i,a),u=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}var Nr=t=>t.join("/").replace(/\/\/+/g,"/"),wO=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),_O=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,EO=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function xO(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var _A=["POST","PUT","PATCH","DELETE"];new Set(_A);var TO=["GET",..._A];new Set(TO);var Jo=y.createContext(null);Jo.displayName="DataRouter";var Wh=y.createContext(null);Wh.displayName="DataRouterState";y.createContext(!1);var EA=y.createContext({isTransitioning:!1});EA.displayName="ViewTransition";var SO=y.createContext(new Map);SO.displayName="Fetchers";var IO=y.createContext(null);IO.displayName="Await";var Qn=y.createContext(null);Qn.displayName="Navigation";var hu=y.createContext(null);hu.displayName="Location";var Yn=y.createContext({outlet:null,matches:[],isDataRoute:!1});Yn.displayName="Route";var mv=y.createContext(null);mv.displayName="RouteError";function CO(t,{relative:e}={}){Be(Zo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=y.useContext(Qn),{hash:i,pathname:s,search:o}=pu(t,{relative:e}),a=s;return n!=="/"&&(a=s==="/"?n:Nr([n,s])),r.createHref({pathname:a,search:o,hash:i})}function Zo(){return y.useContext(hu)!=null}function Qr(){return Be(Zo(),"useLocation() may be used only in the context of a <Router> component."),y.useContext(hu).location}var xA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function TA(t){y.useContext(Qn).static||y.useLayoutEffect(t)}function fu(){let{isDataRoute:t}=y.useContext(Yn);return t?UO():AO()}function AO(){Be(Zo(),"useNavigate() may be used only in the context of a <Router> component.");let t=y.useContext(Jo),{basename:e,navigator:n}=y.useContext(Qn),{matches:r}=y.useContext(Yn),{pathname:i}=Qr(),s=JSON.stringify(fv(r)),o=y.useRef(!1);return TA(()=>{o.current=!0}),y.useCallback((l,u={})=>{if(Wn(o.current,xA),!o.current)return;if(typeof l=="number"){n.go(l);return}let d=pv(l,JSON.parse(s),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Nr([e,d.pathname])),(u.replace?n.replace:n.push)(d,u.state,u)},[e,n,s,i,t])}y.createContext(null);function bO(){let{matches:t}=y.useContext(Yn),e=t[t.length-1];return e?e.params:{}}function pu(t,{relative:e}={}){let{matches:n}=y.useContext(Yn),{pathname:r}=Qr(),i=JSON.stringify(fv(n));return y.useMemo(()=>pv(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function RO(t,e){return SA(t,e)}function SA(t,e,n,r,i){var E;Be(Zo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=y.useContext(Qn),{matches:o}=y.useContext(Yn),a=o[o.length-1],l=a?a.params:{},u=a?a.pathname:"/",d=a?a.pathnameBase:"/",h=a&&a.route;{let T=h&&h.path||"";IA(u,!h||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let f=Qr(),m;if(e){let T=typeof e=="string"?Xo(e):e;Be(d==="/"||((E=T.pathname)==null?void 0:E.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${T.pathname}" was given in the \`location\` prop.`),m=T}else m=f;let w=m.pathname||"/",_=w;if(d!=="/"){let T=d.replace(/^\//,"").split("/");_="/"+w.replace(/^\//,"").split("/").slice(T.length).join("/")}let I=yA(t,{pathname:_});Wn(h||I!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),Wn(I==null||I[I.length-1].route.element!==void 0||I[I.length-1].route.Component!==void 0||I[I.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=DO(I&&I.map(T=>Object.assign({},T,{params:Object.assign({},l,T.params),pathname:Nr([d,s.encodeLocation?s.encodeLocation(T.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?d:Nr([d,s.encodeLocation?s.encodeLocation(T.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathnameBase])})),o,n,r,i);return e&&g?y.createElement(hu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},g):g}function PO(){let t=jO(),e=xO(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=y.createElement(y.Fragment,null,y.createElement("p",null," Hey developer "),y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",y.createElement("code",{style:s},"ErrorBoundary")," or"," ",y.createElement("code",{style:s},"errorElement")," prop on your route.")),y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},e),n?y.createElement("pre",{style:i},n):null,o)}var kO=y.createElement(PO,null),NO=class extends y.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?y.createElement(Yn.Provider,{value:this.props.routeContext},y.createElement(mv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function MO({routeContext:t,match:e,children:n}){let r=y.useContext(Jo);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),y.createElement(Yn.Provider,{value:t},n)}function DO(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,o=n==null?void 0:n.errors;if(o!=null){let u=s.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);Be(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,u+1))}let a=!1,l=-1;if(n)for(let u=0;u<s.length;u++){let d=s[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:h,errors:f}=n,m=d.route.loader&&!h.hasOwnProperty(d.route.id)&&(!f||f[d.route.id]===void 0);if(d.route.lazy||m){a=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((u,d,h)=>{let f,m=!1,w=null,_=null;n&&(f=o&&d.route.id?o[d.route.id]:void 0,w=d.route.errorElement||kO,a&&(l<0&&h===0?(IA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,_=null):l===h&&(m=!0,_=d.route.hydrateFallbackElement||null)));let I=e.concat(s.slice(0,h+1)),g=()=>{let E;return f?E=w:m?E=_:d.route.Component?E=y.createElement(d.route.Component,null):d.route.element?E=d.route.element:E=u,y.createElement(MO,{match:d,routeContext:{outlet:u,matches:I,isDataRoute:n!=null},children:E})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?y.createElement(NO,{location:n.location,revalidation:n.revalidation,component:w,error:f,children:g(),routeContext:{outlet:null,matches:I,isDataRoute:!0},unstable_onError:r}):g()},null)}function gv(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function OO(t){let e=y.useContext(Jo);return Be(e,gv(t)),e}function VO(t){let e=y.useContext(Wh);return Be(e,gv(t)),e}function LO(t){let e=y.useContext(Yn);return Be(e,gv(t)),e}function yv(t){let e=LO(t),n=e.matches[e.matches.length-1];return Be(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function FO(){return yv("useRouteId")}function jO(){var r;let t=y.useContext(mv),e=VO("useRouteError"),n=yv("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function UO(){let{router:t}=OO("useNavigate"),e=yv("useNavigate"),n=y.useRef(!1);return TA(()=>{n.current=!0}),y.useCallback(async(i,s={})=>{Wn(n.current,xA),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var AE={};function IA(t,e,n){!e&&!AE[t]&&(AE[t]=!0,Wn(!1,n))}y.memo(BO);function BO({routes:t,future:e,state:n,unstable_onError:r}){return SA(t,void 0,n,r,e)}function $O({to:t,replace:e,state:n,relative:r}){Be(Zo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=y.useContext(Qn);Wn(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=y.useContext(Yn),{pathname:o}=Qr(),a=fu(),l=pv(t,fv(s),o,r==="path"),u=JSON.stringify(l);return y.useEffect(()=>{a(JSON.parse(u),{replace:e,state:n,relative:r})},[a,u,r,e,n]),null}function Zn(t){Be(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function zO({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){Be(!Zo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),a=y.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof n=="string"&&(n=Xo(n));let{pathname:l="/",search:u="",hash:d="",state:h=null,key:f="default"}=n,m=y.useMemo(()=>{let w=Fr(l,o);return w==null?null:{location:{pathname:w,search:u,hash:d,state:h,key:f},navigationType:r}},[o,l,u,d,h,f,r]);return Wn(m!=null,`<Router basename="${o}"> is not able to match the URL "${l}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:y.createElement(Qn.Provider,{value:a},y.createElement(hu.Provider,{children:e,value:m}))}function WO({children:t,location:e}){return RO(og(t),e)}function og(t,e=[]){let n=[];return y.Children.forEach(t,(r,i)=>{if(!y.isValidElement(r))return;let s=[...e,i];if(r.type===y.Fragment){n.push.apply(n,og(r.props.children,s));return}Be(r.type===Zn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Be(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=og(r.props.children,s)),n.push(o)}),n}var nd="get",rd="application/x-www-form-urlencoded";function Hh(t){return t!=null&&typeof t.tagName=="string"}function HO(t){return Hh(t)&&t.tagName.toLowerCase()==="button"}function qO(t){return Hh(t)&&t.tagName.toLowerCase()==="form"}function GO(t){return Hh(t)&&t.tagName.toLowerCase()==="input"}function KO(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function QO(t,e){return t.button===0&&(!e||e==="_self")&&!KO(t)}var Sc=null;function YO(){if(Sc===null)try{new FormData(document.createElement("form"),0),Sc=!1}catch{Sc=!0}return Sc}var XO=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Sp(t){return t!=null&&!XO.has(t)?(Wn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${rd}"`),null):t}function JO(t,e){let n,r,i,s,o;if(qO(t)){let a=t.getAttribute("action");r=a?Fr(a,e):null,n=t.getAttribute("method")||nd,i=Sp(t.getAttribute("enctype"))||rd,s=new FormData(t)}else if(HO(t)||GO(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?Fr(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||nd,i=Sp(t.getAttribute("formenctype"))||Sp(a.getAttribute("enctype"))||rd,s=new FormData(a,t),!YO()){let{name:u,type:d,value:h}=t;if(d==="image"){let f=u?`${u}.`:"";s.append(`${f}x`,"0"),s.append(`${f}y`,"0")}else u&&s.append(u,h)}}else{if(Hh(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=nd,r=null,i=rd,o=t}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function vv(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ZO(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Fr(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function eV(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function tV(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function nV(t,e,n){let r=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await eV(s,n);return o.links?o.links():[]}return[]}));return oV(r.flat(1).filter(tV).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function bE(t,e,n,r,i,s){let o=(l,u)=>n[u]?l.route.id!==n[u].route.id:!0,a=(l,u)=>{var d;return n[u].pathname!==l.pathname||((d=n[u].route.path)==null?void 0:d.endsWith("*"))&&n[u].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,u)=>o(l,u)||a(l,u)):s==="data"?e.filter((l,u)=>{var h;let d=r.routes[l.route.id];if(!d||!d.hasLoader)return!1;if(o(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((h=n[0])==null?void 0:h.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function rV(t,e,{includeHydrateFallback:n}={}){return iV(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function iV(t){return[...new Set(t)]}function sV(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function oV(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let s=JSON.stringify(sV(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}function CA(){let t=y.useContext(Jo);return vv(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function aV(){let t=y.useContext(Wh);return vv(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var wv=y.createContext(void 0);wv.displayName="FrameworkContext";function AA(){let t=y.useContext(wv);return vv(t,"You must render this element inside a <HydratedRouter> element"),t}function lV(t,e){let n=y.useContext(wv),[r,i]=y.useState(!1),[s,o]=y.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=e,f=y.useRef(null);y.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let _=g=>{g.forEach(E=>{o(E.isIntersecting)})},I=new IntersectionObserver(_,{threshold:.5});return f.current&&I.observe(f.current),()=>{I.disconnect()}}},[t]),y.useEffect(()=>{if(r){let _=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(_)}}},[r]);let m=()=>{i(!0)},w=()=>{i(!1),o(!1)};return n?t!=="intent"?[s,f,{}]:[s,f,{onFocus:La(a,m),onBlur:La(l,w),onMouseEnter:La(u,m),onMouseLeave:La(d,w),onTouchStart:La(h,m)}]:[!1,f,{}]}function La(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function uV({page:t,...e}){let{router:n}=CA(),r=y.useMemo(()=>yA(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?y.createElement(dV,{page:t,matches:r,...e}):null}function cV(t){let{manifest:e,routeModules:n}=AA(),[r,i]=y.useState([]);return y.useEffect(()=>{let s=!1;return nV(t,e,n).then(o=>{s||i(o)}),()=>{s=!0}},[t,e,n]),r}function dV({page:t,matches:e,...n}){let r=Qr(),{manifest:i,routeModules:s}=AA(),{basename:o}=CA(),{loaderData:a,matches:l}=aV(),u=y.useMemo(()=>bE(t,e,l,i,r,"data"),[t,e,l,i,r]),d=y.useMemo(()=>bE(t,e,l,i,r,"assets"),[t,e,l,i,r]),h=y.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let w=new Set,_=!1;if(e.forEach(g=>{var T;let E=i.routes[g.route.id];!E||!E.hasLoader||(!u.some(R=>R.route.id===g.route.id)&&g.route.id in a&&((T=s[g.route.id])!=null&&T.shouldRevalidate)||E.hasClientLoader?_=!0:w.add(g.route.id))}),w.size===0)return[];let I=ZO(t,o,"data");return _&&w.size>0&&I.searchParams.set("_routes",e.filter(g=>w.has(g.route.id)).map(g=>g.route.id).join(",")),[I.pathname+I.search]},[o,a,r,i,u,e,t,s]),f=y.useMemo(()=>rV(d,i),[d,i]),m=cV(d);return y.createElement(y.Fragment,null,h.map(w=>y.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...n})),f.map(w=>y.createElement("link",{key:w,rel:"modulepreload",href:w,...n})),m.map(({key:w,link:_})=>y.createElement("link",{key:w,nonce:n.nonce,..._})))}function hV(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var bA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{bA&&(window.__reactRouterVersion="7.9.4")}catch{}function fV({basename:t,children:e,window:n}){let r=y.useRef();r.current==null&&(r.current=Z2({window:n,v5Compat:!0}));let i=r.current,[s,o]=y.useState({action:i.action,location:i.location}),a=y.useCallback(l=>{y.startTransition(()=>o(l))},[o]);return y.useLayoutEffect(()=>i.listen(a),[i,a]),y.createElement(zO,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:i})}var RA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Eo=y.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:d,viewTransition:h,...f},m){let{basename:w}=y.useContext(Qn),_=typeof u=="string"&&RA.test(u),I,g=!1;if(typeof u=="string"&&_&&(I=u,bA))try{let A=new URL(window.location.href),P=u.startsWith("//")?new URL(A.protocol+u):new URL(u),M=Fr(P.pathname,w);P.origin===A.origin&&M!=null?u=M+P.search+P.hash:g=!0}catch{Wn(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let E=CO(u,{relative:i}),[T,R,N]=lV(r,f),L=yV(u,{replace:o,state:a,target:l,preventScrollReset:d,relative:i,viewTransition:h});function C(A){e&&e(A),A.defaultPrevented||L(A)}let S=y.createElement("a",{...f,...N,href:I||E,onClick:g||s?e:C,ref:hV(m,R),target:l,"data-discover":!_&&n==="render"?"true":void 0});return T&&!_?y.createElement(y.Fragment,null,S,y.createElement(uV,{page:E})):S});Eo.displayName="Link";var pV=y.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:l,...u},d){let h=pu(o,{relative:u.relative}),f=Qr(),m=y.useContext(Wh),{navigator:w,basename:_}=y.useContext(Qn),I=m!=null&&xV(h)&&a===!0,g=w.encodeLocation?w.encodeLocation(h).pathname:h.pathname,E=f.pathname,T=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;n||(E=E.toLowerCase(),T=T?T.toLowerCase():null,g=g.toLowerCase()),T&&_&&(T=Fr(T,_)||T);const R=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let N=E===g||!i&&E.startsWith(g)&&E.charAt(R)==="/",L=T!=null&&(T===g||!i&&T.startsWith(g)&&T.charAt(g.length)==="/"),C={isActive:N,isPending:L,isTransitioning:I},S=N?e:void 0,A;typeof r=="function"?A=r(C):A=[r,N?"active":null,L?"pending":null,I?"transitioning":null].filter(Boolean).join(" ");let P=typeof s=="function"?s(C):s;return y.createElement(Eo,{...u,"aria-current":S,className:A,ref:d,style:P,to:o,viewTransition:a},typeof l=="function"?l(C):l)});pV.displayName="NavLink";var mV=y.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:s,method:o=nd,action:a,onSubmit:l,relative:u,preventScrollReset:d,viewTransition:h,...f},m)=>{let w=_V(),_=EV(a,{relative:u}),I=o.toLowerCase()==="get"?"get":"post",g=typeof a=="string"&&RA.test(a),E=T=>{if(l&&l(T),T.defaultPrevented)return;T.preventDefault();let R=T.nativeEvent.submitter,N=(R==null?void 0:R.getAttribute("formmethod"))||o;w(R||T.currentTarget,{fetcherKey:e,method:N,navigate:n,replace:i,state:s,relative:u,preventScrollReset:d,viewTransition:h})};return y.createElement("form",{ref:m,method:I,action:_,onSubmit:r?l:E,...f,"data-discover":!g&&t==="render"?"true":void 0})});mV.displayName="Form";function gV(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function PA(t){let e=y.useContext(Jo);return Be(e,gV(t)),e}function yV(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=fu(),l=Qr(),u=pu(t,{relative:s});return y.useCallback(d=>{if(QO(d,e)){d.preventDefault();let h=n!==void 0?n:Vl(l)===Vl(u);a(t,{replace:h,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[l,a,u,n,r,e,t,i,s,o])}var vV=0,wV=()=>`__${String(++vV)}__`;function _V(){let{router:t}=PA("useSubmit"),{basename:e}=y.useContext(Qn),n=FO();return y.useCallback(async(r,i={})=>{let{action:s,method:o,encType:a,formData:l,body:u}=JO(r,e);if(i.navigate===!1){let d=i.fetcherKey||wV();await t.fetch(d,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await t.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function EV(t,{relative:e}={}){let{basename:n}=y.useContext(Qn),r=y.useContext(Yn);Be(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...pu(t||".",{relative:e})},o=Qr();if(t==null){s.search=o.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(d=>d==="")){a.delete("index"),l.filter(h=>h).forEach(h=>a.append("index",h));let d=a.toString();s.search=d?`?${d}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Nr([n,s.pathname])),Vl(s)}function xV(t,{relative:e}={}){let n=y.useContext(EA);Be(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=PA("useViewTransitionState"),i=pu(t,{relative:e});if(!n.isTransitioning)return!1;let s=Fr(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Fr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Gd(i.pathname,o)!=null||Gd(i.pathname,s)!=null}const TV="modulepreload",SV=function(t){return"/"+t},RE={},IV=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=SV(l),l in RE)return;RE[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":TV,u||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),u)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function CV(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:s,onRegisterError:o}=t;let a,l;const u=async(h=!0)=>{await l};async function d(){if("serviceWorker"in navigator){if(a=await IV(async()=>{const{Workbox:h}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:h}},[]).then(({Workbox:h})=>new h("/sw.js",{scope:"/",type:"classic"})).catch(h=>{o==null||o(h)}),!a)return;a.addEventListener("activated",h=>{(h.isUpdate||h.isExternal)&&window.location.reload()}),a.addEventListener("installed",h=>{h.isUpdate||r==null||r()}),a.register({immediate:e}).then(h=>{s?s("/sw.js",h):i==null||i(h)}).catch(h=>{o==null||o(h)})}}return l=d(),u}var PE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},AV=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},NA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,d=s>>2,h=(s&3)<<4|a>>4;let f=(a&15)<<2|u>>6,m=u&63;l||(m=64,o||(f=64)),r.push(n[d],n[h],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(kA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):AV(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||h==null)throw new bV;const f=s<<2|a>>4;if(r.push(f),u!==64){const m=a<<4&240|u>>2;if(r.push(m),h!==64){const w=u<<6&192|h;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class bV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const RV=function(t){const e=kA(t);return NA.encodeByteArray(e,!0)},Kd=function(t){return RV(t).replace(/\./g,"")},MA=function(t){try{return NA.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kV=()=>PV().__FIREBASE_DEFAULTS__,NV=()=>{if(typeof process>"u"||typeof PE>"u")return;const t=PE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},MV=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&MA(t[1]);return e&&JSON.parse(e)},qh=()=>{try{return kV()||NV()||MV()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},DA=t=>{var e,n;return(n=(e=qh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},DV=t=>{const e=DA(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},OA=()=>{var t;return(t=qh())===null||t===void 0?void 0:t.config},VA=t=>{var e;return(e=qh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VV(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Kd(JSON.stringify(n)),Kd(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function LV(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ft())}function FV(){var t;const e=(t=qh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function jV(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function LA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function UV(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BV(){const t=Ft();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function $V(){return!FV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function FA(){try{return typeof indexedDB=="object"}catch{return!1}}function jA(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function zV(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WV="FirebaseError";class Xn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=WV,Object.setPrototypeOf(this,Xn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ps.prototype.create)}}class Ps{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?HV(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Xn(i,a,r)}}function HV(t,e){return t.replace(qV,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const qV=/\{\$([^}]+)}/g;function GV(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ll(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(kE(s)&&kE(o)){if(!Ll(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function kE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function KV(t,e){const n=new QV(t,e);return n.subscribe.bind(n)}class QV{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");YV(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Ip),i.error===void 0&&(i.error=Ip),i.complete===void 0&&(i.complete=Ip);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function YV(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ip(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XV=1e3,JV=2,ZV=4*60*60*1e3,eL=.5;function NE(t,e=XV,n=JV){const r=e*Math.pow(n,t),i=Math.round(eL*r*(Math.random()-.5)*2);return Math.min(ZV,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(t){return t&&t._delegate?t._delegate:t}class Hn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new OV;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(rL(e))try{this.getOrInitializeService({instanceIdentifier:Xi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Xi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xi){return this.instances.has(e)}getOptions(e=Xi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:nL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Xi){return this.component?this.component.multipleInstances?e:Xi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function nL(t){return t===Xi?void 0:t}function rL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new tL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ee;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ee||(Ee={}));const sL={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},oL=Ee.INFO,aL={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},lL=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=aL[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Gh{constructor(e){this.name=e,this._logLevel=oL,this._logHandler=lL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...e),this._logHandler(this,Ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...e),this._logHandler(this,Ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...e),this._logHandler(this,Ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...e),this._logHandler(this,Ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...e),this._logHandler(this,Ee.ERROR,...e)}}const uL=(t,e)=>e.some(n=>t instanceof n);let ME,DE;function cL(){return ME||(ME=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dL(){return DE||(DE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const UA=new WeakMap,ag=new WeakMap,BA=new WeakMap,Cp=new WeakMap,_v=new WeakMap;function hL(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Si(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&UA.set(n,t)}).catch(()=>{}),_v.set(e,t),e}function fL(t){if(ag.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});ag.set(t,e)}let lg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ag.get(t);if(e==="objectStoreNames")return t.objectStoreNames||BA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Si(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function pL(t){lg=t(lg)}function mL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ap(this),e,...n);return BA.set(r,e.sort?e.sort():[e]),Si(r)}:dL().includes(t)?function(...e){return t.apply(Ap(this),e),Si(UA.get(this))}:function(...e){return Si(t.apply(Ap(this),e))}}function gL(t){return typeof t=="function"?mL(t):(t instanceof IDBTransaction&&fL(t),uL(t,cL())?new Proxy(t,lg):t)}function Si(t){if(t instanceof IDBRequest)return hL(t);if(Cp.has(t))return Cp.get(t);const e=gL(t);return e!==t&&(Cp.set(t,e),_v.set(e,t)),e}const Ap=t=>_v.get(t);function $A(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Si(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Si(o.result),l.oldVersion,l.newVersion,Si(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const yL=["get","getKey","getAll","getAllKeys","count"],vL=["put","add","delete","clear"],bp=new Map;function OE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(bp.get(e))return bp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=vL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||yL.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return bp.set(e,s),s}pL(t=>({...t,get:(e,n,r)=>OE(e,n)||t.get(e,n,r),has:(e,n)=>!!OE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(_L(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function _L(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ug="@firebase/app",VE="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr=new Gh("@firebase/app"),EL="@firebase/app-compat",xL="@firebase/analytics-compat",TL="@firebase/analytics",SL="@firebase/app-check-compat",IL="@firebase/app-check",CL="@firebase/auth",AL="@firebase/auth-compat",bL="@firebase/database",RL="@firebase/data-connect",PL="@firebase/database-compat",kL="@firebase/functions",NL="@firebase/functions-compat",ML="@firebase/installations",DL="@firebase/installations-compat",OL="@firebase/messaging",VL="@firebase/messaging-compat",LL="@firebase/performance",FL="@firebase/performance-compat",jL="@firebase/remote-config",UL="@firebase/remote-config-compat",BL="@firebase/storage",$L="@firebase/storage-compat",zL="@firebase/firestore",WL="@firebase/vertexai-preview",HL="@firebase/firestore-compat",qL="firebase",GL="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg="[DEFAULT]",KL={[ug]:"fire-core",[EL]:"fire-core-compat",[TL]:"fire-analytics",[xL]:"fire-analytics-compat",[IL]:"fire-app-check",[SL]:"fire-app-check-compat",[CL]:"fire-auth",[AL]:"fire-auth-compat",[bL]:"fire-rtdb",[RL]:"fire-data-connect",[PL]:"fire-rtdb-compat",[kL]:"fire-fn",[NL]:"fire-fn-compat",[ML]:"fire-iid",[DL]:"fire-iid-compat",[OL]:"fire-fcm",[VL]:"fire-fcm-compat",[LL]:"fire-perf",[FL]:"fire-perf-compat",[jL]:"fire-rc",[UL]:"fire-rc-compat",[BL]:"fire-gcs",[$L]:"fire-gcs-compat",[zL]:"fire-fst",[HL]:"fire-fst-compat",[WL]:"fire-vertex","fire-js":"fire-js",[qL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qd=new Map,QL=new Map,dg=new Map;function LE(t,e){try{t.container.addComponent(e)}catch(n){jr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function hr(t){const e=t.name;if(dg.has(e))return jr.debug(`There were multiple attempts to register component ${e}.`),!1;dg.set(e,t);for(const n of Qd.values())LE(n,t);for(const n of QL.values())LE(n,t);return!0}function ks(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ar(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ii=new Ps("app","Firebase",YL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Hn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ii.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea=GL;function zA(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:cg,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ii.create("bad-app-name",{appName:String(i)});if(n||(n=OA()),!n)throw Ii.create("no-options");const s=Qd.get(i);if(s){if(Ll(n,s.options)&&Ll(r,s.config))return s;throw Ii.create("duplicate-app",{appName:i})}const o=new iL(i);for(const l of dg.values())o.addComponent(l);const a=new XL(n,r,o);return Qd.set(i,a),a}function Ev(t=cg){const e=Qd.get(t);if(!e&&t===cg&&OA())return zA();if(!e)throw Ii.create("no-app",{appName:t});return e}function bn(t,e,n){var r;let i=(r=KL[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),jr.warn(a.join(" "));return}hr(new Hn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JL="firebase-heartbeat-database",ZL=1,Fl="firebase-heartbeat-store";let Rp=null;function WA(){return Rp||(Rp=$A(JL,ZL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Fl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ii.create("idb-open",{originalErrorMessage:t.message})})),Rp}async function eF(t){try{const n=(await WA()).transaction(Fl),r=await n.objectStore(Fl).get(HA(t));return await n.done,r}catch(e){if(e instanceof Xn)jr.warn(e.message);else{const n=Ii.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});jr.warn(n.message)}}}async function FE(t,e){try{const r=(await WA()).transaction(Fl,"readwrite");await r.objectStore(Fl).put(e,HA(t)),await r.done}catch(n){if(n instanceof Xn)jr.warn(n.message);else{const r=Ii.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});jr.warn(r.message)}}}function HA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tF=1024,nF=30*24*60*60*1e3;class rF{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new sF(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=jE();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=nF}),this._storage.overwrite(this._heartbeatsCache))}catch(r){jr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=jE(),{heartbeatsToSend:r,unsentEntries:i}=iF(this._heartbeatsCache.heartbeats),s=Kd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return jr.warn(n),""}}}function jE(){return new Date().toISOString().substring(0,10)}function iF(t,e=tF){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),UE(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),UE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class sF{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return FA()?jA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await eF(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return FE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return FE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function UE(t){return Kd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oF(t){hr(new Hn("platform-logger",e=>new wL(e),"PRIVATE")),hr(new Hn("heartbeat",e=>new rF(e),"PRIVATE")),bn(ug,VE,t),bn(ug,VE,"esm2017"),bn("fire-js","")}oF("");var hg=function(t,e){return hg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},hg(t,e)};function aF(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");hg(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Me=function(){return Me=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Me.apply(this,arguments)};function gu(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function lF(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}function qA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const uF=qA,GA=new Ps("auth","Firebase",qA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yd=new Gh("@firebase/auth");function cF(t,...e){Yd.logLevel<=Ee.WARN&&Yd.warn(`Auth (${ea}): ${t}`,...e)}function id(t,...e){Yd.logLevel<=Ee.ERROR&&Yd.error(`Auth (${ea}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(t,...e){throw Tv(t,...e)}function $n(t,...e){return Tv(t,...e)}function xv(t,e,n){const r=Object.assign(Object.assign({},uF()),{[e]:n});return new Ps("auth","Firebase",r).create(e,{appName:t.name})}function cs(t){return xv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dF(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&fr(t,"argument-error"),xv(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Tv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return GA.create(t,...e)}function he(t,e,...n){if(!t)throw Tv(e,...n)}function br(t){const e="INTERNAL ASSERTION FAILED: "+t;throw id(e),new Error(e)}function Ur(t,e){t||br(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function hF(){return BE()==="http:"||BE()==="https:"}function BE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hF()||LA()||"connection"in navigator)?navigator.onLine:!0}function pF(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ur(n>e,"Short delay should be less than long delay!"),this.isMobile=LV()||UV()}get(){return fF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sv(t,e){Ur(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;br("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;br("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;br("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gF=new yu(3e4,6e4);function Iv(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ta(t,e,n,r,i={}){return QA(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=mu(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},s);return jV()||(u.referrerPolicy="no-referrer"),KA.fetch()(YA(t,t.config.apiHost,n,a),u)})}async function QA(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},mF),e);try{const i=new vF(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Ic(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ic(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Ic(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Ic(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw xv(t,d,u);fr(t,d)}}catch(i){if(i instanceof Xn)throw i;fr(t,"network-request-failed",{message:String(i)})}}async function yF(t,e,n,r,i={}){const s=await ta(t,e,n,r,i);return"mfaPendingCredential"in s&&fr(t,"multi-factor-auth-required",{_serverResponse:s}),s}function YA(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Sv(t.config,i):`${t.config.apiScheme}://${i}`}class vF{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r($n(this.auth,"network-request-failed")),gF.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ic(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=$n(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wF(t,e){return ta(t,"POST","/v1/accounts:delete",e)}async function XA(t,e){return ta(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function al(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function _F(t,e=!1){const n=Ye(t),r=await n.getIdToken(e),i=Cv(r);he(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:al(Pp(i.auth_time)),issuedAtTime:al(Pp(i.iat)),expirationTime:al(Pp(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Pp(t){return Number(t)*1e3}function Cv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return id("JWT malformed, contained fewer than 3 sections"),null;try{const i=MA(n);return i?JSON.parse(i):(id("Failed to decode base64 JWT payload"),null)}catch(i){return id("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function $E(t){const e=Cv(t);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Xn&&EF(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function EF({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xF{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=al(this.lastLoginAt),this.creationTime=al(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xd(t){var e;const n=t.auth,r=await t.getIdToken(),i=await jl(t,XA(n,{idToken:r}));he(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?JA(s.providerUserInfo):[],a=SF(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?u:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new pg(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function TF(t){const e=Ye(t);await Xd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function SF(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function JA(t){return t.map(e=>{var{providerId:n}=e,r=gu(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IF(t,e){const n=await QA(t,{},async()=>{const r=mu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=YA(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",KA.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function CF(t,e){return ta(t,"POST","/v2/accounts:revokeToken",Iv(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$E(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){he(e.length!==0,"internal-error");const n=$E(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(he(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await IF(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new xo;return r&&(he(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(he(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(he(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xo,this.toJSON())}_performRefresh(){return br("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(t,e){he(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Rr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=gu(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new pg(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await jl(this,this.stsTokenManager.getToken(this.auth,e));return he(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return _F(this,e)}reload(){return TF(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Rr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Xd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ar(this.auth.app))return Promise.reject(cs(this.auth));const e=await this.getIdToken();return await jl(this,wF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,w=(o=n.photoURL)!==null&&o!==void 0?o:void 0,_=(a=n.tenantId)!==null&&a!==void 0?a:void 0,I=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,g=(u=n.createdAt)!==null&&u!==void 0?u:void 0,E=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:T,emailVerified:R,isAnonymous:N,providerData:L,stsTokenManager:C}=n;he(T&&C,e,"internal-error");const S=xo.fromJSON(this.name,C);he(typeof T=="string",e,"internal-error"),ti(h,e.name),ti(f,e.name),he(typeof R=="boolean",e,"internal-error"),he(typeof N=="boolean",e,"internal-error"),ti(m,e.name),ti(w,e.name),ti(_,e.name),ti(I,e.name),ti(g,e.name),ti(E,e.name);const A=new Rr({uid:T,auth:e,email:f,emailVerified:R,displayName:h,isAnonymous:N,photoURL:w,phoneNumber:m,tenantId:_,stsTokenManager:S,createdAt:g,lastLoginAt:E});return L&&Array.isArray(L)&&(A.providerData=L.map(P=>Object.assign({},P))),I&&(A._redirectEventId=I),A}static async _fromIdTokenResponse(e,n,r=!1){const i=new xo;i.updateFromServerResponse(n);const s=new Rr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Xd(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];he(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?JA(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new xo;a.updateFromIdToken(r);const l=new Rr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new pg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE=new Map;function Pr(t){Ur(t instanceof Function,"Expected a class definition");let e=zE.get(t);return e?(Ur(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,zE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ZA.type="NONE";const WE=ZA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sd(t,e,n){return`firebase:${t}:${e}:${n}`}class To{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=sd(this.userKey,i.apiKey,s),this.fullPersistenceKey=sd("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Rr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new To(Pr(WE),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Pr(WE);const o=sd(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const d=await u._get(o);if(d){const h=Rr._fromJSON(e,d);u!==s&&(a=h),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new To(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new To(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(rb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(eb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(sb(e))return"Blackberry";if(ob(e))return"Webos";if(tb(e))return"Safari";if((e.includes("chrome/")||nb(e))&&!e.includes("edge/"))return"Chrome";if(ib(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function eb(t=Ft()){return/firefox\//i.test(t)}function tb(t=Ft()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function nb(t=Ft()){return/crios\//i.test(t)}function rb(t=Ft()){return/iemobile/i.test(t)}function ib(t=Ft()){return/android/i.test(t)}function sb(t=Ft()){return/blackberry/i.test(t)}function ob(t=Ft()){return/webos/i.test(t)}function Av(t=Ft()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function AF(t=Ft()){var e;return Av(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function bF(){return BV()&&document.documentMode===10}function ab(t=Ft()){return Av(t)||ib(t)||ob(t)||sb(t)||/windows phone/i.test(t)||rb(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb(t,e=[]){let n;switch(t){case"Browser":n=HE(Ft());break;case"Worker":n=`${HE(Ft())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ea}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RF{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PF(t,e={}){return ta(t,"GET","/v2/passwordPolicy",Iv(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kF=6;class NF{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:kF,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qE(this),this.idTokenSubscription=new qE(this),this.beforeStateQueue=new RF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=GA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Pr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await To.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await XA(this,{idToken:e}),r=await Rr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ar(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Xd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=pF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ar(this.app))return Promise.reject(cs(this));const n=e?Ye(e):null;return n&&he(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ar(this.app)?Promise.reject(cs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ar(this.app)?Promise.reject(cs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Pr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await PF(this),n=new NF(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ps("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await CF(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Pr(e)||this._popupRedirectResolver;he(n,this,"argument-error"),this.redirectPersistenceManager=await To.create(this,[Pr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=lb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&cF(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Kh(t){return Ye(t)}class qE{constructor(e){this.auth=e,this.observer=null,this.addObserver=KV(n=>this.observer=n)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function DF(t){bv=t}function OF(t){return bv.loadJS(t)}function VF(){return bv.gapiScript}function LF(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FF(t,e){const n=ks(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Ll(s,e??{}))return i;fr(i,"already-initialized")}return n.initialize({options:e})}function jF(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Pr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function UF(t,e,n){const r=Kh(t);he(r._canInitEmulator,r,"emulator-config-failed"),he(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=ub(e),{host:o,port:a}=BF(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),$F()}function ub(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function BF(t){const e=ub(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:GE(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:GE(o)}}}function GE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function $F(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return br("not implemented")}_getIdTokenResponse(e){return br("not implemented")}_linkToIdToken(e,n){return br("not implemented")}_getReauthenticationResolver(e){return br("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function So(t,e){return yF(t,"POST","/v1/accounts:signInWithIdp",Iv(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zF="http://localhost";class ws extends cb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ws(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):fr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=gu(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new ws(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return So(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,So(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,So(e,n)}buildRequest(){const e={requestUri:zF,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=mu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu extends Rv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui extends vu{constructor(){super("facebook.com")}static credential(e){return ws._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ui.credential(e.oauthAccessToken)}catch{return null}}}ui.FACEBOOK_SIGN_IN_METHOD="facebook.com";ui.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr extends vu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ws._fromParams({providerId:Sr.PROVIDER_ID,signInMethod:Sr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Sr.credentialFromTaggedObject(e)}static credentialFromError(e){return Sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Sr.credential(n,r)}catch{return null}}}Sr.GOOGLE_SIGN_IN_METHOD="google.com";Sr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci extends vu{constructor(){super("github.com")}static credential(e){return ws._fromParams({providerId:ci.PROVIDER_ID,signInMethod:ci.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ci.credentialFromTaggedObject(e)}static credentialFromError(e){return ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ci.credential(e.oauthAccessToken)}catch{return null}}}ci.GITHUB_SIGN_IN_METHOD="github.com";ci.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di extends vu{constructor(){super("twitter.com")}static credential(e,n){return ws._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return di.credential(n,r)}catch{return null}}}di.TWITTER_SIGN_IN_METHOD="twitter.com";di.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Rr._fromIdTokenResponse(e,r,i),o=KE(r);return new Lo({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=KE(r);return new Lo({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function KE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd extends Xn{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Jd.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Jd(e,n,r,i)}}function db(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Jd._fromErrorAndOperation(t,s,e,r):s})}async function WF(t,e,n=!1){const r=await jl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Lo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HF(t,e,n=!1){const{auth:r}=t;if(Ar(r.app))return Promise.reject(cs(r));const i="reauthenticate";try{const s=await jl(t,db(r,i,e,t),n);he(s.idToken,r,"internal-error");const o=Cv(s.idToken);he(o,r,"internal-error");const{sub:a}=o;return he(t.uid===a,r,"user-mismatch"),Lo._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&fr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qF(t,e,n=!1){if(Ar(t.app))return Promise.reject(cs(t));const r="signIn",i=await db(t,r,e),s=await Lo._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function GF(t,e,n,r){return Ye(t).onIdTokenChanged(e,n,r)}function KF(t,e,n){return Ye(t).beforeAuthStateChanged(e,n)}function QF(t,e,n,r){return Ye(t).onAuthStateChanged(e,n,r)}function YF(t){return Ye(t).signOut()}const Zd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Zd,"1"),this.storage.removeItem(Zd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XF=1e3,JF=10;class fb extends hb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ab(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);bF()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,JF):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},XF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}fb.type="LOCAL";const ZF=fb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb extends hb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}pb.type="SESSION";const mb=pb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ej(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Qh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await ej(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Qh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=Pv("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const f=h;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(){return window}function nj(t){or().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gb(){return typeof or().WorkerGlobalScope<"u"&&typeof or().importScripts=="function"}async function rj(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ij(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function sj(){return gb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb="firebaseLocalStorageDb",oj=1,eh="firebaseLocalStorage",vb="fbase_key";class wu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Yh(t,e){return t.transaction([eh],e?"readwrite":"readonly").objectStore(eh)}function aj(){const t=indexedDB.deleteDatabase(yb);return new wu(t).toPromise()}function mg(){const t=indexedDB.open(yb,oj);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(eh,{keyPath:vb})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(eh)?e(r):(r.close(),await aj(),e(await mg()))})})}async function QE(t,e,n){const r=Yh(t,!0).put({[vb]:e,value:n});return new wu(r).toPromise()}async function lj(t,e){const n=Yh(t,!1).get(e),r=await new wu(n).toPromise();return r===void 0?null:r.value}function YE(t,e){const n=Yh(t,!0).delete(e);return new wu(n).toPromise()}const uj=800,cj=3;class wb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await mg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>cj)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qh._getInstance(sj()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await rj(),!this.activeServiceWorker)return;this.sender=new tj(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ij()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await mg();return await QE(e,Zd,"1"),await YE(e,Zd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>QE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>lj(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>YE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Yh(i,!1).getAll();return new wu(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),uj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}wb.type="LOCAL";const dj=wb;new yu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(t,e){return e?Pr(e):(he(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv extends cb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return So(e,this._buildIdpRequest())}_linkToIdToken(e,n){return So(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return So(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function hj(t){return qF(t.auth,new kv(t),t.bypassAuthState)}function fj(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),HF(n,new kv(t),t.bypassAuthState)}async function pj(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),WF(n,new kv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return hj;case"linkViaPopup":case"linkViaRedirect":return pj;case"reauthViaPopup":case"reauthViaRedirect":return fj;default:fr(this.auth,"internal-error")}}resolve(e){Ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mj=new yu(2e3,1e4);async function gj(t,e,n){if(Ar(t.app))return Promise.reject($n(t,"operation-not-supported-in-this-environment"));const r=Kh(t);dF(t,e,Rv);const i=_b(r,n);return new rs(r,"signInViaPopup",e,i).executeNotNull()}class rs extends Eb{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,rs.currentPopupAction&&rs.currentPopupAction.cancel(),rs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return he(e,this.auth,"internal-error"),e}async onExecution(){Ur(this.filter.length===1,"Popup operations only handle one event");const e=Pv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject($n(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject($n(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,rs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($n(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,mj.get())};e()}}rs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yj="pendingRedirect",od=new Map;class vj extends Eb{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=od.get(this.auth._key());if(!e){try{const r=await wj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}od.set(this.auth._key(),e)}return this.bypassAuthState||od.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function wj(t,e){const n=xj(e),r=Ej(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function _j(t,e){od.set(t._key(),e)}function Ej(t){return Pr(t._redirectPersistence)}function xj(t){return sd(yj,t.config.apiKey,t.name)}async function Tj(t,e,n=!1){if(Ar(t.app))return Promise.reject(cs(t));const r=Kh(t),i=_b(r,e),o=await new vj(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sj=10*60*1e3;class Ij{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Cj(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!xb(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError($n(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Sj&&this.cachedEventUids.clear(),this.cachedEventUids.has(XE(e))}saveEventToCache(e){this.cachedEventUids.add(XE(e)),this.lastProcessedEventTime=Date.now()}}function XE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function xb({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Cj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xb(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aj(t,e={}){return ta(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Rj=/^https?/;async function Pj(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Aj(t);for(const n of e)try{if(kj(n))return}catch{}fr(t,"unauthorized-domain")}function kj(t){const e=fg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Rj.test(n))return!1;if(bj.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nj=new yu(3e4,6e4);function JE(){const t=or().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Mj(t){return new Promise((e,n)=>{var r,i,s;function o(){JE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{JE(),n($n(t,"network-request-failed"))},timeout:Nj.get()})}if(!((i=(r=or().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=or().gapi)===null||s===void 0)&&s.load)o();else{const a=LF("iframefcb");return or()[a]=()=>{gapi.load?o():n($n(t,"network-request-failed"))},OF(`${VF()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw ad=null,e})}let ad=null;function Dj(t){return ad=ad||Mj(t),ad}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oj=new yu(5e3,15e3),Vj="__/auth/iframe",Lj="emulator/auth/iframe",Fj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Uj(t){const e=t.config;he(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Sv(e,Lj):`https://${t.config.authDomain}/${Vj}`,r={apiKey:e.apiKey,appName:t.name,v:ea},i=jj.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${mu(r).slice(1)}`}async function Bj(t){const e=await Dj(t),n=or().gapi;return he(n,t,"internal-error"),e.open({where:document.body,url:Uj(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Fj,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=$n(t,"network-request-failed"),a=or().setTimeout(()=>{s(o)},Oj.get());function l(){or().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $j={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},zj=500,Wj=600,Hj="_blank",qj="http://localhost";class ZE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Gj(t,e,n,r=zj,i=Wj){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},$j),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Ft().toLowerCase();n&&(a=nb(u)?Hj:n),eb(u)&&(e=e||qj,l.scrollbars="yes");const d=Object.entries(l).reduce((f,[m,w])=>`${f}${m}=${w},`,"");if(AF(u)&&a!=="_self")return Kj(e||"",a),new ZE(null);const h=window.open(e||"",a,d);he(h,t,"popup-blocked");try{h.focus()}catch{}return new ZE(h)}function Kj(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qj="__/auth/handler",Yj="emulator/auth/handler",Xj=encodeURIComponent("fac");async function ex(t,e,n,r,i,s){he(t.config.authDomain,t,"auth-domain-config-required"),he(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ea,eventId:i};if(e instanceof Rv){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",GV(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof vu){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),u=l?`#${Xj}=${encodeURIComponent(l)}`:"";return`${Jj(t)}?${mu(a).slice(1)}${u}`}function Jj({config:t}){return t.emulator?Sv(t,Yj):`https://${t.authDomain}/${Qj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kp="webStorageSupport";class Zj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mb,this._completeRedirectFn=Tj,this._overrideRedirectResult=_j}async _openPopup(e,n,r,i){var s;Ur((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await ex(e,n,r,fg(),i);return Gj(e,o,Pv())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await ex(e,n,r,fg(),i);return nj(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Ur(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Bj(e),r=new Ij(e);return n.register("authEvent",i=>(he(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(kp,{type:kp},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[kp];o!==void 0&&n(!!o),fr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Pj(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return ab()||tb()||Av()}}const eU=Zj;var tx="@firebase/auth",nx="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nU(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rU(t){hr(new Hn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;he(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lb(t)},u=new MF(r,i,s,l);return jF(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),hr(new Hn("auth-internal",e=>{const n=Kh(e.getProvider("auth").getImmediate());return(r=>new tU(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),bn(tx,nx,nU(t)),bn(tx,nx,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iU=5*60,sU=VA("authIdTokenMaxAge")||iU;let rx=null;const oU=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>sU)return;const i=n==null?void 0:n.token;rx!==i&&(rx=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function aU(t=Ev()){const e=ks(t,"auth");if(e.isInitialized())return e.getImmediate();const n=FF(t,{popupRedirectResolver:eU,persistence:[dj,ZF,mb]}),r=VA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=oU(s.toString());KF(n,o,()=>o(n.currentUser)),GF(n,a=>o(a))}}const i=DA("auth");return i&&UF(n,`http://${i}`),n}function lU(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}DF({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=$n("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",lU().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rU("Browser");var uU="firebase",cU="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bn(uU,cU,"app");var ix=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ds,Tb;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,S){function A(){}A.prototype=S.prototype,C.D=S.prototype,C.prototype=new A,C.prototype.constructor=C,C.C=function(P,M,V){for(var k=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)k[oe-2]=arguments[oe];return S.prototype[M].apply(P,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,S,A){A||(A=0);var P=Array(16);if(typeof S=="string")for(var M=0;16>M;++M)P[M]=S.charCodeAt(A++)|S.charCodeAt(A++)<<8|S.charCodeAt(A++)<<16|S.charCodeAt(A++)<<24;else for(M=0;16>M;++M)P[M]=S[A++]|S[A++]<<8|S[A++]<<16|S[A++]<<24;S=C.g[0],A=C.g[1],M=C.g[2];var V=C.g[3],k=S+(V^A&(M^V))+P[0]+3614090360&4294967295;S=A+(k<<7&4294967295|k>>>25),k=V+(M^S&(A^M))+P[1]+3905402710&4294967295,V=S+(k<<12&4294967295|k>>>20),k=M+(A^V&(S^A))+P[2]+606105819&4294967295,M=V+(k<<17&4294967295|k>>>15),k=A+(S^M&(V^S))+P[3]+3250441966&4294967295,A=M+(k<<22&4294967295|k>>>10),k=S+(V^A&(M^V))+P[4]+4118548399&4294967295,S=A+(k<<7&4294967295|k>>>25),k=V+(M^S&(A^M))+P[5]+1200080426&4294967295,V=S+(k<<12&4294967295|k>>>20),k=M+(A^V&(S^A))+P[6]+2821735955&4294967295,M=V+(k<<17&4294967295|k>>>15),k=A+(S^M&(V^S))+P[7]+4249261313&4294967295,A=M+(k<<22&4294967295|k>>>10),k=S+(V^A&(M^V))+P[8]+1770035416&4294967295,S=A+(k<<7&4294967295|k>>>25),k=V+(M^S&(A^M))+P[9]+2336552879&4294967295,V=S+(k<<12&4294967295|k>>>20),k=M+(A^V&(S^A))+P[10]+4294925233&4294967295,M=V+(k<<17&4294967295|k>>>15),k=A+(S^M&(V^S))+P[11]+2304563134&4294967295,A=M+(k<<22&4294967295|k>>>10),k=S+(V^A&(M^V))+P[12]+1804603682&4294967295,S=A+(k<<7&4294967295|k>>>25),k=V+(M^S&(A^M))+P[13]+4254626195&4294967295,V=S+(k<<12&4294967295|k>>>20),k=M+(A^V&(S^A))+P[14]+2792965006&4294967295,M=V+(k<<17&4294967295|k>>>15),k=A+(S^M&(V^S))+P[15]+1236535329&4294967295,A=M+(k<<22&4294967295|k>>>10),k=S+(M^V&(A^M))+P[1]+4129170786&4294967295,S=A+(k<<5&4294967295|k>>>27),k=V+(A^M&(S^A))+P[6]+3225465664&4294967295,V=S+(k<<9&4294967295|k>>>23),k=M+(S^A&(V^S))+P[11]+643717713&4294967295,M=V+(k<<14&4294967295|k>>>18),k=A+(V^S&(M^V))+P[0]+3921069994&4294967295,A=M+(k<<20&4294967295|k>>>12),k=S+(M^V&(A^M))+P[5]+3593408605&4294967295,S=A+(k<<5&4294967295|k>>>27),k=V+(A^M&(S^A))+P[10]+38016083&4294967295,V=S+(k<<9&4294967295|k>>>23),k=M+(S^A&(V^S))+P[15]+3634488961&4294967295,M=V+(k<<14&4294967295|k>>>18),k=A+(V^S&(M^V))+P[4]+3889429448&4294967295,A=M+(k<<20&4294967295|k>>>12),k=S+(M^V&(A^M))+P[9]+568446438&4294967295,S=A+(k<<5&4294967295|k>>>27),k=V+(A^M&(S^A))+P[14]+3275163606&4294967295,V=S+(k<<9&4294967295|k>>>23),k=M+(S^A&(V^S))+P[3]+4107603335&4294967295,M=V+(k<<14&4294967295|k>>>18),k=A+(V^S&(M^V))+P[8]+1163531501&4294967295,A=M+(k<<20&4294967295|k>>>12),k=S+(M^V&(A^M))+P[13]+2850285829&4294967295,S=A+(k<<5&4294967295|k>>>27),k=V+(A^M&(S^A))+P[2]+4243563512&4294967295,V=S+(k<<9&4294967295|k>>>23),k=M+(S^A&(V^S))+P[7]+1735328473&4294967295,M=V+(k<<14&4294967295|k>>>18),k=A+(V^S&(M^V))+P[12]+2368359562&4294967295,A=M+(k<<20&4294967295|k>>>12),k=S+(A^M^V)+P[5]+4294588738&4294967295,S=A+(k<<4&4294967295|k>>>28),k=V+(S^A^M)+P[8]+2272392833&4294967295,V=S+(k<<11&4294967295|k>>>21),k=M+(V^S^A)+P[11]+1839030562&4294967295,M=V+(k<<16&4294967295|k>>>16),k=A+(M^V^S)+P[14]+4259657740&4294967295,A=M+(k<<23&4294967295|k>>>9),k=S+(A^M^V)+P[1]+2763975236&4294967295,S=A+(k<<4&4294967295|k>>>28),k=V+(S^A^M)+P[4]+1272893353&4294967295,V=S+(k<<11&4294967295|k>>>21),k=M+(V^S^A)+P[7]+4139469664&4294967295,M=V+(k<<16&4294967295|k>>>16),k=A+(M^V^S)+P[10]+3200236656&4294967295,A=M+(k<<23&4294967295|k>>>9),k=S+(A^M^V)+P[13]+681279174&4294967295,S=A+(k<<4&4294967295|k>>>28),k=V+(S^A^M)+P[0]+3936430074&4294967295,V=S+(k<<11&4294967295|k>>>21),k=M+(V^S^A)+P[3]+3572445317&4294967295,M=V+(k<<16&4294967295|k>>>16),k=A+(M^V^S)+P[6]+76029189&4294967295,A=M+(k<<23&4294967295|k>>>9),k=S+(A^M^V)+P[9]+3654602809&4294967295,S=A+(k<<4&4294967295|k>>>28),k=V+(S^A^M)+P[12]+3873151461&4294967295,V=S+(k<<11&4294967295|k>>>21),k=M+(V^S^A)+P[15]+530742520&4294967295,M=V+(k<<16&4294967295|k>>>16),k=A+(M^V^S)+P[2]+3299628645&4294967295,A=M+(k<<23&4294967295|k>>>9),k=S+(M^(A|~V))+P[0]+4096336452&4294967295,S=A+(k<<6&4294967295|k>>>26),k=V+(A^(S|~M))+P[7]+1126891415&4294967295,V=S+(k<<10&4294967295|k>>>22),k=M+(S^(V|~A))+P[14]+2878612391&4294967295,M=V+(k<<15&4294967295|k>>>17),k=A+(V^(M|~S))+P[5]+4237533241&4294967295,A=M+(k<<21&4294967295|k>>>11),k=S+(M^(A|~V))+P[12]+1700485571&4294967295,S=A+(k<<6&4294967295|k>>>26),k=V+(A^(S|~M))+P[3]+2399980690&4294967295,V=S+(k<<10&4294967295|k>>>22),k=M+(S^(V|~A))+P[10]+4293915773&4294967295,M=V+(k<<15&4294967295|k>>>17),k=A+(V^(M|~S))+P[1]+2240044497&4294967295,A=M+(k<<21&4294967295|k>>>11),k=S+(M^(A|~V))+P[8]+1873313359&4294967295,S=A+(k<<6&4294967295|k>>>26),k=V+(A^(S|~M))+P[15]+4264355552&4294967295,V=S+(k<<10&4294967295|k>>>22),k=M+(S^(V|~A))+P[6]+2734768916&4294967295,M=V+(k<<15&4294967295|k>>>17),k=A+(V^(M|~S))+P[13]+1309151649&4294967295,A=M+(k<<21&4294967295|k>>>11),k=S+(M^(A|~V))+P[4]+4149444226&4294967295,S=A+(k<<6&4294967295|k>>>26),k=V+(A^(S|~M))+P[11]+3174756917&4294967295,V=S+(k<<10&4294967295|k>>>22),k=M+(S^(V|~A))+P[2]+718787259&4294967295,M=V+(k<<15&4294967295|k>>>17),k=A+(V^(M|~S))+P[9]+3951481745&4294967295,C.g[0]=C.g[0]+S&4294967295,C.g[1]=C.g[1]+(M+(k<<21&4294967295|k>>>11))&4294967295,C.g[2]=C.g[2]+M&4294967295,C.g[3]=C.g[3]+V&4294967295}r.prototype.u=function(C,S){S===void 0&&(S=C.length);for(var A=S-this.blockSize,P=this.B,M=this.h,V=0;V<S;){if(M==0)for(;V<=A;)i(this,C,V),V+=this.blockSize;if(typeof C=="string"){for(;V<S;)if(P[M++]=C.charCodeAt(V++),M==this.blockSize){i(this,P),M=0;break}}else for(;V<S;)if(P[M++]=C[V++],M==this.blockSize){i(this,P),M=0;break}}this.h=M,this.o+=S},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var S=1;S<C.length-8;++S)C[S]=0;var A=8*this.o;for(S=C.length-8;S<C.length;++S)C[S]=A&255,A/=256;for(this.u(C),C=Array(16),S=A=0;4>S;++S)for(var P=0;32>P;P+=8)C[A++]=this.g[S]>>>P&255;return C};function s(C,S){var A=a;return Object.prototype.hasOwnProperty.call(A,C)?A[C]:A[C]=S(C)}function o(C,S){this.h=S;for(var A=[],P=!0,M=C.length-1;0<=M;M--){var V=C[M]|0;P&&V==S||(A[M]=V,P=!1)}this.g=A}var a={};function l(C){return-128<=C&&128>C?s(C,function(S){return new o([S|0],0>S?-1:0)}):new o([C|0],0>C?-1:0)}function u(C){if(isNaN(C)||!isFinite(C))return h;if(0>C)return I(u(-C));for(var S=[],A=1,P=0;C>=A;P++)S[P]=C/A|0,A*=4294967296;return new o(S,0)}function d(C,S){if(C.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(C.charAt(0)=="-")return I(d(C.substring(1),S));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=u(Math.pow(S,8)),P=h,M=0;M<C.length;M+=8){var V=Math.min(8,C.length-M),k=parseInt(C.substring(M,M+V),S);8>V?(V=u(Math.pow(S,V)),P=P.j(V).add(u(k))):(P=P.j(A),P=P.add(u(k)))}return P}var h=l(0),f=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(_(this))return-I(this).m();for(var C=0,S=1,A=0;A<this.g.length;A++){var P=this.i(A);C+=(0<=P?P:4294967296+P)*S,S*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(w(this))return"0";if(_(this))return"-"+I(this).toString(C);for(var S=u(Math.pow(C,6)),A=this,P="";;){var M=R(A,S).g;A=g(A,M.j(S));var V=((0<A.g.length?A.g[0]:A.h)>>>0).toString(C);if(A=M,w(A))return V+P;for(;6>V.length;)V="0"+V;P=V+P}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function w(C){if(C.h!=0)return!1;for(var S=0;S<C.g.length;S++)if(C.g[S]!=0)return!1;return!0}function _(C){return C.h==-1}t.l=function(C){return C=g(this,C),_(C)?-1:w(C)?0:1};function I(C){for(var S=C.g.length,A=[],P=0;P<S;P++)A[P]=~C.g[P];return new o(A,~C.h).add(f)}t.abs=function(){return _(this)?I(this):this},t.add=function(C){for(var S=Math.max(this.g.length,C.g.length),A=[],P=0,M=0;M<=S;M++){var V=P+(this.i(M)&65535)+(C.i(M)&65535),k=(V>>>16)+(this.i(M)>>>16)+(C.i(M)>>>16);P=k>>>16,V&=65535,k&=65535,A[M]=k<<16|V}return new o(A,A[A.length-1]&-2147483648?-1:0)};function g(C,S){return C.add(I(S))}t.j=function(C){if(w(this)||w(C))return h;if(_(this))return _(C)?I(this).j(I(C)):I(I(this).j(C));if(_(C))return I(this.j(I(C)));if(0>this.l(m)&&0>C.l(m))return u(this.m()*C.m());for(var S=this.g.length+C.g.length,A=[],P=0;P<2*S;P++)A[P]=0;for(P=0;P<this.g.length;P++)for(var M=0;M<C.g.length;M++){var V=this.i(P)>>>16,k=this.i(P)&65535,oe=C.i(M)>>>16,me=C.i(M)&65535;A[2*P+2*M]+=k*me,E(A,2*P+2*M),A[2*P+2*M+1]+=V*me,E(A,2*P+2*M+1),A[2*P+2*M+1]+=k*oe,E(A,2*P+2*M+1),A[2*P+2*M+2]+=V*oe,E(A,2*P+2*M+2)}for(P=0;P<S;P++)A[P]=A[2*P+1]<<16|A[2*P];for(P=S;P<2*S;P++)A[P]=0;return new o(A,0)};function E(C,S){for(;(C[S]&65535)!=C[S];)C[S+1]+=C[S]>>>16,C[S]&=65535,S++}function T(C,S){this.g=C,this.h=S}function R(C,S){if(w(S))throw Error("division by zero");if(w(C))return new T(h,h);if(_(C))return S=R(I(C),S),new T(I(S.g),I(S.h));if(_(S))return S=R(C,I(S)),new T(I(S.g),S.h);if(30<C.g.length){if(_(C)||_(S))throw Error("slowDivide_ only works with positive integers.");for(var A=f,P=S;0>=P.l(C);)A=N(A),P=N(P);var M=L(A,1),V=L(P,1);for(P=L(P,2),A=L(A,2);!w(P);){var k=V.add(P);0>=k.l(C)&&(M=M.add(A),V=k),P=L(P,1),A=L(A,1)}return S=g(C,M.j(S)),new T(M,S)}for(M=h;0<=C.l(S);){for(A=Math.max(1,Math.floor(C.m()/S.m())),P=Math.ceil(Math.log(A)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),V=u(A),k=V.j(S);_(k)||0<k.l(C);)A-=P,V=u(A),k=V.j(S);w(V)&&(V=f),M=M.add(V),C=g(C,k)}return new T(M,C)}t.A=function(C){return R(this,C).h},t.and=function(C){for(var S=Math.max(this.g.length,C.g.length),A=[],P=0;P<S;P++)A[P]=this.i(P)&C.i(P);return new o(A,this.h&C.h)},t.or=function(C){for(var S=Math.max(this.g.length,C.g.length),A=[],P=0;P<S;P++)A[P]=this.i(P)|C.i(P);return new o(A,this.h|C.h)},t.xor=function(C){for(var S=Math.max(this.g.length,C.g.length),A=[],P=0;P<S;P++)A[P]=this.i(P)^C.i(P);return new o(A,this.h^C.h)};function N(C){for(var S=C.g.length+1,A=[],P=0;P<S;P++)A[P]=C.i(P)<<1|C.i(P-1)>>>31;return new o(A,C.h)}function L(C,S){var A=S>>5;S%=32;for(var P=C.g.length-A,M=[],V=0;V<P;V++)M[V]=0<S?C.i(V+A)>>>S|C.i(V+A+1)<<32-S:C.i(V+A);return new o(M,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Tb=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,ds=o}).apply(typeof ix<"u"?ix:typeof self<"u"?self:typeof window<"u"?window:{});var Cc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Sb,Ga,Ib,ld,gg,Cb,Ab,bb;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,p,v){return c==Array.prototype||c==Object.prototype||(c[p]=v.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Cc=="object"&&Cc];for(var p=0;p<c.length;++p){var v=c[p];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=n(this);function i(c,p){if(p)e:{var v=r;c=c.split(".");for(var b=0;b<c.length-1;b++){var j=c[b];if(!(j in v))break e;v=v[j]}c=c[c.length-1],b=v[c],p=p(b),p!=b&&p!=null&&e(v,c,{configurable:!0,writable:!0,value:p})}}function s(c,p){c instanceof String&&(c+="");var v=0,b=!1,j={next:function(){if(!b&&v<c.length){var U=v++;return{value:p(U,c[U]),done:!1}}return b=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}i("Array.prototype.values",function(c){return c||function(){return s(this,function(p,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var p=typeof c;return p=p!="object"?p:c?Array.isArray(c)?"array":p:"null",p=="array"||p=="object"&&typeof c.length=="number"}function u(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function d(c,p,v){return c.call.apply(c.bind,arguments)}function h(c,p,v){if(!c)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,b),c.apply(p,j)}}return function(){return c.apply(p,arguments)}}function f(c,p,v){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,f.apply(null,arguments)}function m(c,p){var v=Array.prototype.slice.call(arguments,1);return function(){var b=v.slice();return b.push.apply(b,arguments),c.apply(this,b)}}function w(c,p){function v(){}v.prototype=p.prototype,c.aa=p.prototype,c.prototype=new v,c.prototype.constructor=c,c.Qb=function(b,j,U){for(var K=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)K[ke-2]=arguments[ke];return p.prototype[j].apply(b,K)}}function _(c){const p=c.length;if(0<p){const v=Array(p);for(let b=0;b<p;b++)v[b]=c[b];return v}return[]}function I(c,p){for(let v=1;v<arguments.length;v++){const b=arguments[v];if(l(b)){const j=c.length||0,U=b.length||0;c.length=j+U;for(let K=0;K<U;K++)c[j+K]=b[K]}else c.push(b)}}class g{constructor(p,v){this.i=p,this.j=v,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function E(c){return/^[\s\xa0]*$/.test(c)}function T(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function R(c){return R[" "](c),c}R[" "]=function(){};var N=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function L(c,p,v){for(const b in c)p.call(v,c[b],b,c)}function C(c,p){for(const v in c)p.call(void 0,c[v],v,c)}function S(c){const p={};for(const v in c)p[v]=c[v];return p}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(c,p){let v,b;for(let j=1;j<arguments.length;j++){b=arguments[j];for(v in b)c[v]=b[v];for(let U=0;U<A.length;U++)v=A[U],Object.prototype.hasOwnProperty.call(b,v)&&(c[v]=b[v])}}function M(c){var p=1;c=c.split(":");const v=[];for(;0<p&&c.length;)v.push(c.shift()),p--;return c.length&&v.push(c.join(":")),v}function V(c){a.setTimeout(()=>{throw c},0)}function k(){var c=B;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class oe{constructor(){this.h=this.g=null}add(p,v){const b=me.get();b.set(p,v),this.h?this.h.next=b:this.g=b,this.h=b}}var me=new g(()=>new ae,c=>c.reset());class ae{constructor(){this.next=this.g=this.h=null}set(p,v){this.h=p,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let te,F=!1,B=new oe,O=()=>{const c=a.Promise.resolve(void 0);te=()=>{c.then(D)}};var D=()=>{for(var c;c=k();){try{c.h.call(c.g)}catch(v){V(v)}var p=me;p.j(c),100>p.h&&(p.h++,c.next=p.g,p.g=c)}F=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function q(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}q.prototype.h=function(){this.defaultPrevented=!0};var Y=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};a.addEventListener("test",v,p),a.removeEventListener("test",v,p)}catch{}return c}();function ne(c,p){if(q.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var v=this.type=c.type,b=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget){if(N){e:{try{R(p.nodeName);var j=!0;break e}catch{}j=!1}j||(p=null)}}else v=="mouseover"?p=c.fromElement:v=="mouseout"&&(p=c.toElement);this.relatedTarget=p,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:re[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&ne.aa.h.call(this)}}w(ne,q);var re={2:"touch",3:"pen",4:"mouse"};ne.prototype.h=function(){ne.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var G="closure_listenable_"+(1e6*Math.random()|0),ce=0;function de(c,p,v,b,j){this.listener=c,this.proxy=null,this.src=p,this.type=v,this.capture=!!b,this.ha=j,this.key=++ce,this.da=this.fa=!1}function ye(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ve(c){this.src=c,this.g={},this.h=0}ve.prototype.add=function(c,p,v,b,j){var U=c.toString();c=this.g[U],c||(c=this.g[U]=[],this.h++);var K=Pe(c,p,b,j);return-1<K?(p=c[K],v||(p.fa=!1)):(p=new de(p,this.src,U,!!b,j),p.fa=v,c.push(p)),p};function xe(c,p){var v=p.type;if(v in c.g){var b=c.g[v],j=Array.prototype.indexOf.call(b,p,void 0),U;(U=0<=j)&&Array.prototype.splice.call(b,j,1),U&&(ye(p),c.g[v].length==0&&(delete c.g[v],c.h--))}}function Pe(c,p,v,b){for(var j=0;j<c.length;++j){var U=c[j];if(!U.da&&U.listener==p&&U.capture==!!v&&U.ha==b)return j}return-1}var pe="closure_lm_"+(1e6*Math.random()|0),et={};function At(c,p,v,b,j){if(Array.isArray(p)){for(var U=0;U<p.length;U++)At(c,p[U],v,b,j);return null}return v=Wu(v),c&&c[G]?c.K(p,v,u(b)?!!b.capture:!1,j):jt(c,p,v,!1,b,j)}function jt(c,p,v,b,j,U){if(!p)throw Error("Invalid event type");var K=u(j)?!!j.capture:!!j,ke=fa(c);if(ke||(c[pe]=ke=new ve(c)),v=ke.add(p,v,b,K,U),v.proxy)return v;if(b=ln(),v.proxy=b,b.src=c,b.listener=v,c.addEventListener)Y||(j=K),j===void 0&&(j=!1),c.addEventListener(p.toString(),b,j);else if(c.attachEvent)c.attachEvent(zu(p.toString()),b);else if(c.addListener&&c.removeListener)c.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return v}function ln(){function c(v){return p.call(c.src,c.listener,v)}const p=Df;return c}function Ut(c,p,v,b,j){if(Array.isArray(p))for(var U=0;U<p.length;U++)Ut(c,p[U],v,b,j);else b=u(b)?!!b.capture:!!b,v=Wu(v),c&&c[G]?(c=c.i,p=String(p).toString(),p in c.g&&(U=c.g[p],v=Pe(U,v,b,j),-1<v&&(ye(U[v]),Array.prototype.splice.call(U,v,1),U.length==0&&(delete c.g[p],c.h--)))):c&&(c=fa(c))&&(p=c.g[p.toString()],c=-1,p&&(c=Pe(p,v,b,j)),(v=-1<c?p[c]:null)&&Xt(v))}function Xt(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[G])xe(p.i,c);else{var v=c.type,b=c.proxy;p.removeEventListener?p.removeEventListener(v,b,c.capture):p.detachEvent?p.detachEvent(zu(v),b):p.addListener&&p.removeListener&&p.removeListener(b),(v=fa(p))?(xe(v,c),v.h==0&&(v.src=null,p[pe]=null)):ye(c)}}}function zu(c){return c in et?et[c]:et[c]="on"+c}function Df(c,p){if(c.da)c=!0;else{p=new ne(p,this);var v=c.listener,b=c.ha||c.src;c.fa&&Xt(c),c=v.call(b,p)}return c}function fa(c){return c=c[pe],c instanceof ve?c:null}var Vs="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wu(c){return typeof c=="function"?c:(c[Vs]||(c[Vs]=function(p){return c.handleEvent(p)}),c[Vs])}function st(){W.call(this),this.i=new ve(this),this.M=this,this.F=null}w(st,W),st.prototype[G]=!0,st.prototype.removeEventListener=function(c,p,v,b){Ut(this,c,p,v,b)};function pt(c,p){var v,b=c.F;if(b)for(v=[];b;b=b.F)v.push(b);if(c=c.M,b=p.type||p,typeof p=="string")p=new q(p,c);else if(p instanceof q)p.target=p.target||c;else{var j=p;p=new q(b,c),P(p,j)}if(j=!0,v)for(var U=v.length-1;0<=U;U--){var K=p.g=v[U];j=Ls(K,b,!0,p)&&j}if(K=p.g=c,j=Ls(K,b,!0,p)&&j,j=Ls(K,b,!1,p)&&j,v)for(U=0;U<v.length;U++)K=p.g=v[U],j=Ls(K,b,!1,p)&&j}st.prototype.N=function(){if(st.aa.N.call(this),this.i){var c=this.i,p;for(p in c.g){for(var v=c.g[p],b=0;b<v.length;b++)ye(v[b]);delete c.g[p],c.h--}}this.F=null},st.prototype.K=function(c,p,v,b){return this.i.add(String(c),p,!1,v,b)},st.prototype.L=function(c,p,v,b){return this.i.add(String(c),p,!0,v,b)};function Ls(c,p,v,b){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();for(var j=!0,U=0;U<p.length;++U){var K=p[U];if(K&&!K.da&&K.capture==v){var ke=K.listener,mt=K.ha||K.src;K.fa&&xe(c.i,K),j=ke.call(mt,b)!==!1&&j}}return j&&!b.defaultPrevented}function pa(c,p,v){if(typeof c=="function")v&&(c=f(c,v));else if(c&&typeof c.handleEvent=="function")c=f(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(c,p||0)}function ma(c){c.g=pa(()=>{c.g=null,c.i&&(c.i=!1,ma(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class ga extends W{constructor(p,v){super(),this.m=p,this.l=v,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:ma(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $i(c){W.call(this),this.h=c,this.g={}}w($i,W);var Hu=[];function T_(c){L(c.g,function(p,v){this.g.hasOwnProperty(v)&&Xt(p)},c),c.g={}}$i.prototype.N=function(){$i.aa.N.call(this),T_(this)},$i.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Of=a.JSON.stringify,eM=a.JSON.parse,tM=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Vf(){}Vf.prototype.h=null;function S_(c){return c.h||(c.h=c.i())}function I_(){}var ya={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Lf(){q.call(this,"d")}w(Lf,q);function Ff(){q.call(this,"c")}w(Ff,q);var zi={},C_=null;function qu(){return C_=C_||new st}zi.La="serverreachability";function A_(c){q.call(this,zi.La,c)}w(A_,q);function va(c){const p=qu();pt(p,new A_(p))}zi.STAT_EVENT="statevent";function b_(c,p){q.call(this,zi.STAT_EVENT,c),this.stat=p}w(b_,q);function Bt(c){const p=qu();pt(p,new b_(p,c))}zi.Ma="timingevent";function R_(c,p){q.call(this,zi.Ma,c),this.size=p}w(R_,q);function wa(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},p)}function _a(){this.g=!0}_a.prototype.xa=function(){this.g=!1};function nM(c,p,v,b,j,U){c.info(function(){if(c.g)if(U)for(var K="",ke=U.split("&"),mt=0;mt<ke.length;mt++){var Ae=ke[mt].split("=");if(1<Ae.length){var bt=Ae[0];Ae=Ae[1];var Rt=bt.split("_");K=2<=Rt.length&&Rt[1]=="type"?K+(bt+"="+Ae+"&"):K+(bt+"=redacted&")}}else K=null;else K=U;return"XMLHTTP REQ ("+b+") [attempt "+j+"]: "+p+`
`+v+`
`+K})}function rM(c,p,v,b,j,U,K){c.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+j+"]: "+p+`
`+v+`
`+U+" "+K})}function Fs(c,p,v,b){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+sM(c,v)+(b?" "+b:"")})}function iM(c,p){c.info(function(){return"TIMEOUT: "+p})}_a.prototype.info=function(){};function sM(c,p){if(!c.g)return p;if(!p)return null;try{var v=JSON.parse(p);if(v){for(c=0;c<v.length;c++)if(Array.isArray(v[c])){var b=v[c];if(!(2>b.length)){var j=b[1];if(Array.isArray(j)&&!(1>j.length)){var U=j[0];if(U!="noop"&&U!="stop"&&U!="close")for(var K=1;K<j.length;K++)j[K]=""}}}}return Of(v)}catch{return p}}var Gu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},P_={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},jf;function Ku(){}w(Ku,Vf),Ku.prototype.g=function(){return new XMLHttpRequest},Ku.prototype.i=function(){return{}},jf=new Ku;function Xr(c,p,v,b){this.j=c,this.i=p,this.l=v,this.R=b||1,this.U=new $i(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new k_}function k_(){this.i=null,this.g="",this.h=!1}var N_={},Uf={};function Bf(c,p,v){c.L=1,c.v=Ju(vr(p)),c.m=v,c.P=!0,M_(c,null)}function M_(c,p){c.F=Date.now(),Qu(c),c.A=vr(c.v);var v=c.A,b=c.R;Array.isArray(b)||(b=[String(b)]),G_(v.i,"t",b),c.C=0,v=c.j.J,c.h=new k_,c.g=d0(c.j,v?p:null,!c.m),0<c.O&&(c.M=new ga(f(c.Y,c,c.g),c.O)),p=c.U,v=c.g,b=c.ca;var j="readystatechange";Array.isArray(j)||(j&&(Hu[0]=j.toString()),j=Hu);for(var U=0;U<j.length;U++){var K=At(v,j[U],b||p.handleEvent,!1,p.h||p);if(!K)break;p.g[K.key]=K}p=c.H?S(c.H):{},c.m?(c.u||(c.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,p)):(c.u="GET",c.g.ea(c.A,c.u,null,p)),va(),nM(c.i,c.u,c.A,c.l,c.R,c.m)}Xr.prototype.ca=function(c){c=c.target;const p=this.M;p&&wr(c)==3?p.j():this.Y(c)},Xr.prototype.Y=function(c){try{if(c==this.g)e:{const Rt=wr(this.g);var p=this.g.Ba();const Bs=this.g.Z();if(!(3>Rt)&&(Rt!=3||this.g&&(this.h.h||this.g.oa()||e0(this.g)))){this.J||Rt!=4||p==7||(p==8||0>=Bs?va(3):va(2)),$f(this);var v=this.g.Z();this.X=v;t:if(D_(this)){var b=e0(this.g);c="";var j=b.length,U=wr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Wi(this),Ea(this);var K="";break t}this.h.i=new a.TextDecoder}for(p=0;p<j;p++)this.h.h=!0,c+=this.h.i.decode(b[p],{stream:!(U&&p==j-1)});b.length=0,this.h.g+=c,this.C=0,K=this.h.g}else K=this.g.oa();if(this.o=v==200,rM(this.i,this.u,this.A,this.l,this.R,Rt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var ke,mt=this.g;if((ke=mt.g?mt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(ke)){var Ae=ke;break t}}Ae=null}if(v=Ae)Fs(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zf(this,v);else{this.o=!1,this.s=3,Bt(12),Wi(this),Ea(this);break e}}if(this.P){v=!0;let Dn;for(;!this.J&&this.C<K.length;)if(Dn=oM(this,K),Dn==Uf){Rt==4&&(this.s=4,Bt(14),v=!1),Fs(this.i,this.l,null,"[Incomplete Response]");break}else if(Dn==N_){this.s=4,Bt(15),Fs(this.i,this.l,K,"[Invalid Chunk]"),v=!1;break}else Fs(this.i,this.l,Dn,null),zf(this,Dn);if(D_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Rt!=4||K.length!=0||this.h.h||(this.s=1,Bt(16),v=!1),this.o=this.o&&v,!v)Fs(this.i,this.l,K,"[Invalid Chunked Response]"),Wi(this),Ea(this);else if(0<K.length&&!this.W){this.W=!0;var bt=this.j;bt.g==this&&bt.ba&&!bt.M&&(bt.j.info("Great, no buffering proxy detected. Bytes received: "+K.length),Qf(bt),bt.M=!0,Bt(11))}}else Fs(this.i,this.l,K,null),zf(this,K);Rt==4&&Wi(this),this.o&&!this.J&&(Rt==4?a0(this.j,this):(this.o=!1,Qu(this)))}else TM(this.g),v==400&&0<K.indexOf("Unknown SID")?(this.s=3,Bt(12)):(this.s=0,Bt(13)),Wi(this),Ea(this)}}}catch{}finally{}};function D_(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function oM(c,p){var v=c.C,b=p.indexOf(`
`,v);return b==-1?Uf:(v=Number(p.substring(v,b)),isNaN(v)?N_:(b+=1,b+v>p.length?Uf:(p=p.slice(b,b+v),c.C=b+v,p)))}Xr.prototype.cancel=function(){this.J=!0,Wi(this)};function Qu(c){c.S=Date.now()+c.I,O_(c,c.I)}function O_(c,p){if(c.B!=null)throw Error("WatchDog timer not null");c.B=wa(f(c.ba,c),p)}function $f(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Xr.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(iM(this.i,this.A),this.L!=2&&(va(),Bt(17)),Wi(this),this.s=2,Ea(this)):O_(this,this.S-c)};function Ea(c){c.j.G==0||c.J||a0(c.j,c)}function Wi(c){$f(c);var p=c.M;p&&typeof p.ma=="function"&&p.ma(),c.M=null,T_(c.U),c.g&&(p=c.g,c.g=null,p.abort(),p.ma())}function zf(c,p){try{var v=c.j;if(v.G!=0&&(v.g==c||Wf(v.h,c))){if(!c.K&&Wf(v.h,c)&&v.G==3){try{var b=v.Da.g.parse(p)}catch{b=null}if(Array.isArray(b)&&b.length==3){var j=b;if(j[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<c.F)ic(v),nc(v);else break e;Kf(v),Bt(18)}}else v.za=j[1],0<v.za-v.T&&37500>j[2]&&v.F&&v.v==0&&!v.C&&(v.C=wa(f(v.Za,v),6e3));if(1>=F_(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else qi(v,11)}else if((c.K||v.g==c)&&ic(v),!E(p))for(j=v.Da.g.parse(p),p=0;p<j.length;p++){let Ae=j[p];if(v.T=Ae[0],Ae=Ae[1],v.G==2)if(Ae[0]=="c"){v.K=Ae[1],v.ia=Ae[2];const bt=Ae[3];bt!=null&&(v.la=bt,v.j.info("VER="+v.la));const Rt=Ae[4];Rt!=null&&(v.Aa=Rt,v.j.info("SVER="+v.Aa));const Bs=Ae[5];Bs!=null&&typeof Bs=="number"&&0<Bs&&(b=1.5*Bs,v.L=b,v.j.info("backChannelRequestTimeoutMs_="+b)),b=v;const Dn=c.g;if(Dn){const oc=Dn.g?Dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oc){var U=b.h;U.g||oc.indexOf("spdy")==-1&&oc.indexOf("quic")==-1&&oc.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(Hf(U,U.h),U.h=null))}if(b.D){const Yf=Dn.g?Dn.g.getResponseHeader("X-HTTP-Session-Id"):null;Yf&&(b.ya=Yf,Oe(b.I,b.D,Yf))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-c.F,v.j.info("Handshake RTT: "+v.R+"ms")),b=v;var K=c;if(b.qa=c0(b,b.J?b.ia:null,b.W),K.K){j_(b.h,K);var ke=K,mt=b.L;mt&&(ke.I=mt),ke.B&&($f(ke),Qu(ke)),b.g=K}else s0(b);0<v.i.length&&rc(v)}else Ae[0]!="stop"&&Ae[0]!="close"||qi(v,7);else v.G==3&&(Ae[0]=="stop"||Ae[0]=="close"?Ae[0]=="stop"?qi(v,7):Gf(v):Ae[0]!="noop"&&v.l&&v.l.ta(Ae),v.v=0)}}va(4)}catch{}}var aM=class{constructor(c,p){this.g=c,this.map=p}};function V_(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function L_(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function F_(c){return c.h?1:c.g?c.g.size:0}function Wf(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function Hf(c,p){c.g?c.g.add(p):c.h=p}function j_(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}V_.prototype.cancel=function(){if(this.i=U_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function U_(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const v of c.g.values())p=p.concat(v.D);return p}return _(c.i)}function lM(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var p=[],v=c.length,b=0;b<v;b++)p.push(c[b]);return p}p=[],v=0;for(b in c)p[v++]=c[b];return p}function uM(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var p=[];c=c.length;for(var v=0;v<c;v++)p.push(v);return p}p=[],v=0;for(const b in c)p[v++]=b;return p}}}function B_(c,p){if(c.forEach&&typeof c.forEach=="function")c.forEach(p,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,p,void 0);else for(var v=uM(c),b=lM(c),j=b.length,U=0;U<j;U++)p.call(void 0,b[U],v&&v[U],c)}var $_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cM(c,p){if(c){c=c.split("&");for(var v=0;v<c.length;v++){var b=c[v].indexOf("="),j=null;if(0<=b){var U=c[v].substring(0,b);j=c[v].substring(b+1)}else U=c[v];p(U,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Hi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Hi){this.h=c.h,Yu(this,c.j),this.o=c.o,this.g=c.g,Xu(this,c.s),this.l=c.l;var p=c.i,v=new Sa;v.i=p.i,p.g&&(v.g=new Map(p.g),v.h=p.h),z_(this,v),this.m=c.m}else c&&(p=String(c).match($_))?(this.h=!1,Yu(this,p[1]||"",!0),this.o=xa(p[2]||""),this.g=xa(p[3]||"",!0),Xu(this,p[4]),this.l=xa(p[5]||"",!0),z_(this,p[6]||"",!0),this.m=xa(p[7]||"")):(this.h=!1,this.i=new Sa(null,this.h))}Hi.prototype.toString=function(){var c=[],p=this.j;p&&c.push(Ta(p,W_,!0),":");var v=this.g;return(v||p=="file")&&(c.push("//"),(p=this.o)&&c.push(Ta(p,W_,!0),"@"),c.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&c.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(Ta(v,v.charAt(0)=="/"?fM:hM,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",Ta(v,mM)),c.join("")};function vr(c){return new Hi(c)}function Yu(c,p,v){c.j=v?xa(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function Xu(c,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);c.s=p}else c.s=null}function z_(c,p,v){p instanceof Sa?(c.i=p,gM(c.i,c.h)):(v||(p=Ta(p,pM)),c.i=new Sa(p,c.h))}function Oe(c,p,v){c.i.set(p,v)}function Ju(c){return Oe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function xa(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ta(c,p,v){return typeof c=="string"?(c=encodeURI(c).replace(p,dM),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function dM(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var W_=/[#\/\?@]/g,hM=/[#\?:]/g,fM=/[#\?]/g,pM=/[#\?@]/g,mM=/#/g;function Sa(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function Jr(c){c.g||(c.g=new Map,c.h=0,c.i&&cM(c.i,function(p,v){c.add(decodeURIComponent(p.replace(/\+/g," ")),v)}))}t=Sa.prototype,t.add=function(c,p){Jr(this),this.i=null,c=js(this,c);var v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(p),this.h+=1,this};function H_(c,p){Jr(c),p=js(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function q_(c,p){return Jr(c),p=js(c,p),c.g.has(p)}t.forEach=function(c,p){Jr(this),this.g.forEach(function(v,b){v.forEach(function(j){c.call(p,j,b,this)},this)},this)},t.na=function(){Jr(this);const c=Array.from(this.g.values()),p=Array.from(this.g.keys()),v=[];for(let b=0;b<p.length;b++){const j=c[b];for(let U=0;U<j.length;U++)v.push(p[b])}return v},t.V=function(c){Jr(this);let p=[];if(typeof c=="string")q_(this,c)&&(p=p.concat(this.g.get(js(this,c))));else{c=Array.from(this.g.values());for(let v=0;v<c.length;v++)p=p.concat(c[v])}return p},t.set=function(c,p){return Jr(this),this.i=null,c=js(this,c),q_(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},t.get=function(c,p){return c?(c=this.V(c),0<c.length?String(c[0]):p):p};function G_(c,p,v){H_(c,p),0<v.length&&(c.i=null,c.g.set(js(c,p),_(v)),c.h+=v.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(var v=0;v<p.length;v++){var b=p[v];const U=encodeURIComponent(String(b)),K=this.V(b);for(b=0;b<K.length;b++){var j=U;K[b]!==""&&(j+="="+encodeURIComponent(String(K[b]))),c.push(j)}}return this.i=c.join("&")};function js(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function gM(c,p){p&&!c.j&&(Jr(c),c.i=null,c.g.forEach(function(v,b){var j=b.toLowerCase();b!=j&&(H_(this,b),G_(this,j,v))},c)),c.j=p}function yM(c,p){const v=new _a;if(a.Image){const b=new Image;b.onload=m(Zr,v,"TestLoadImage: loaded",!0,p,b),b.onerror=m(Zr,v,"TestLoadImage: error",!1,p,b),b.onabort=m(Zr,v,"TestLoadImage: abort",!1,p,b),b.ontimeout=m(Zr,v,"TestLoadImage: timeout",!1,p,b),a.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=c}else p(!1)}function vM(c,p){const v=new _a,b=new AbortController,j=setTimeout(()=>{b.abort(),Zr(v,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:b.signal}).then(U=>{clearTimeout(j),U.ok?Zr(v,"TestPingServer: ok",!0,p):Zr(v,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(j),Zr(v,"TestPingServer: error",!1,p)})}function Zr(c,p,v,b,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),b(v)}catch{}}function wM(){this.g=new tM}function _M(c,p,v){const b=v||"";try{B_(c,function(j,U){let K=j;u(j)&&(K=Of(j)),p.push(b+U+"="+encodeURIComponent(K))})}catch(j){throw p.push(b+"type="+encodeURIComponent("_badmap")),j}}function Zu(c){this.l=c.Ub||null,this.j=c.eb||!1}w(Zu,Vf),Zu.prototype.g=function(){return new ec(this.l,this.j)},Zu.prototype.i=function(c){return function(){return c}}({});function ec(c,p){st.call(this),this.D=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(ec,st),t=ec.prototype,t.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=p,this.readyState=1,Ca(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(p.body=c),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ia(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ca(this)),this.g&&(this.readyState=3,Ca(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;K_(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function K_(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?Ia(this):Ca(this),this.readyState==3&&K_(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Ia(this))},t.Qa=function(c){this.g&&(this.response=c,Ia(this))},t.ga=function(){this.g&&Ia(this)};function Ia(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ca(c)}t.setRequestHeader=function(c,p){this.u.append(c,p)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var v=p.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=p.next();return c.join(`\r
`)};function Ca(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ec.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Q_(c){let p="";return L(c,function(v,b){p+=b,p+=":",p+=v,p+=`\r
`}),p}function qf(c,p,v){e:{for(b in v){var b=!1;break e}b=!0}b||(v=Q_(v),typeof c=="string"?v!=null&&encodeURIComponent(String(v)):Oe(c,p,v))}function Ge(c){st.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Ge,st);var EM=/^https?$/i,xM=["POST","PUT"];t=Ge.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,p,v,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():jf.g(),this.v=this.o?S_(this.o):S_(jf),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(U){Y_(this,U);return}if(c=v||"",v=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var j in b)v.set(j,b[j]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const U of b.keys())v.set(U,b.get(U));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(v.keys()).find(U=>U.toLowerCase()=="content-type"),j=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(xM,p,void 0))||b||j||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,K]of v)this.g.setRequestHeader(U,K);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Z_(this),this.u=!0,this.g.send(c),this.u=!1}catch(U){Y_(this,U)}};function Y_(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.m=5,X_(c),tc(c)}function X_(c){c.A||(c.A=!0,pt(c,"complete"),pt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,pt(this,"complete"),pt(this,"abort"),tc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tc(this,!0)),Ge.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?J_(this):this.bb())},t.bb=function(){J_(this)};function J_(c){if(c.h&&typeof o<"u"&&(!c.v[1]||wr(c)!=4||c.Z()!=2)){if(c.u&&wr(c)==4)pa(c.Ea,0,c);else if(pt(c,"readystatechange"),wr(c)==4){c.h=!1;try{const K=c.Z();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var v;if(!(v=p)){var b;if(b=K===0){var j=String(c.D).match($_)[1]||null;!j&&a.self&&a.self.location&&(j=a.self.location.protocol.slice(0,-1)),b=!EM.test(j?j.toLowerCase():"")}v=b}if(v)pt(c,"complete"),pt(c,"success");else{c.m=6;try{var U=2<wr(c)?c.g.statusText:""}catch{U=""}c.l=U+" ["+c.Z()+"]",X_(c)}}finally{tc(c)}}}}function tc(c,p){if(c.g){Z_(c);const v=c.g,b=c.v[0]?()=>{}:null;c.g=null,c.v=null,p||pt(c,"ready");try{v.onreadystatechange=b}catch{}}}function Z_(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function wr(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<wr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),eM(p)}};function e0(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function TM(c){const p={};c=(c.g&&2<=wr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<c.length;b++){if(E(c[b]))continue;var v=M(c[b]);const j=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const U=p[j]||[];p[j]=U,U.push(v)}C(p,function(b){return b.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Aa(c,p,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||p}function t0(c){this.Aa=0,this.i=[],this.j=new _a,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Aa("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Aa("baseRetryDelayMs",5e3,c),this.cb=Aa("retryDelaySeedMs",1e4,c),this.Wa=Aa("forwardChannelMaxRetries",2,c),this.wa=Aa("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new V_(c&&c.concurrentRequestLimit),this.Da=new wM,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=t0.prototype,t.la=8,t.G=1,t.connect=function(c,p,v,b){Bt(0),this.W=c,this.H=p||{},v&&b!==void 0&&(this.H.OSID=v,this.H.OAID=b),this.F=this.X,this.I=c0(this,null,this.W),rc(this)};function Gf(c){if(n0(c),c.G==3){var p=c.U++,v=vr(c.I);if(Oe(v,"SID",c.K),Oe(v,"RID",p),Oe(v,"TYPE","terminate"),ba(c,v),p=new Xr(c,c.j,p),p.L=2,p.v=Ju(vr(v)),v=!1,a.navigator&&a.navigator.sendBeacon)try{v=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!v&&a.Image&&(new Image().src=p.v,v=!0),v||(p.g=d0(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Qu(p)}u0(c)}function nc(c){c.g&&(Qf(c),c.g.cancel(),c.g=null)}function n0(c){nc(c),c.u&&(a.clearTimeout(c.u),c.u=null),ic(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function rc(c){if(!L_(c.h)&&!c.s){c.s=!0;var p=c.Ga;te||O(),F||(te(),F=!0),B.add(p,c),c.B=0}}function SM(c,p){return F_(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=p.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=wa(f(c.Ga,c,p),l0(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const j=new Xr(this,this.j,c);let U=this.o;if(this.S&&(U?(U=S(U),P(U,this.S)):U=this.S),this.m!==null||this.O||(j.H=U,U=null),this.P)e:{for(var p=0,v=0;v<this.i.length;v++){t:{var b=this.i[v];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(p+=b,4096<p){p=v;break e}if(p===4096||v===this.i.length-1){p=v+1;break e}}p=1e3}else p=1e3;p=i0(this,j,p),v=vr(this.I),Oe(v,"RID",c),Oe(v,"CVER",22),this.D&&Oe(v,"X-HTTP-Session-Id",this.D),ba(this,v),U&&(this.O?p="headers="+encodeURIComponent(String(Q_(U)))+"&"+p:this.m&&qf(v,this.m,U)),Hf(this.h,j),this.Ua&&Oe(v,"TYPE","init"),this.P?(Oe(v,"$req",p),Oe(v,"SID","null"),j.T=!0,Bf(j,v,null)):Bf(j,v,p),this.G=2}}else this.G==3&&(c?r0(this,c):this.i.length==0||L_(this.h)||r0(this))};function r0(c,p){var v;p?v=p.l:v=c.U++;const b=vr(c.I);Oe(b,"SID",c.K),Oe(b,"RID",v),Oe(b,"AID",c.T),ba(c,b),c.m&&c.o&&qf(b,c.m,c.o),v=new Xr(c,c.j,v,c.B+1),c.m===null&&(v.H=c.o),p&&(c.i=p.D.concat(c.i)),p=i0(c,v,1e3),v.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Hf(c.h,v),Bf(v,b,p)}function ba(c,p){c.H&&L(c.H,function(v,b){Oe(p,b,v)}),c.l&&B_({},function(v,b){Oe(p,b,v)})}function i0(c,p,v){v=Math.min(c.i.length,v);var b=c.l?f(c.l.Na,c.l,c):null;e:{var j=c.i;let U=-1;for(;;){const K=["count="+v];U==-1?0<v?(U=j[0].g,K.push("ofs="+U)):U=0:K.push("ofs="+U);let ke=!0;for(let mt=0;mt<v;mt++){let Ae=j[mt].g;const bt=j[mt].map;if(Ae-=U,0>Ae)U=Math.max(0,j[mt].g-100),ke=!1;else try{_M(bt,K,"req"+Ae+"_")}catch{b&&b(bt)}}if(ke){b=K.join("&");break e}}}return c=c.i.splice(0,v),p.D=c,b}function s0(c){if(!c.g&&!c.u){c.Y=1;var p=c.Fa;te||O(),F||(te(),F=!0),B.add(p,c),c.v=0}}function Kf(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=wa(f(c.Fa,c),l0(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,o0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=wa(f(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Bt(10),nc(this),o0(this))};function Qf(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function o0(c){c.g=new Xr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var p=vr(c.qa);Oe(p,"RID","rpc"),Oe(p,"SID",c.K),Oe(p,"AID",c.T),Oe(p,"CI",c.F?"0":"1"),!c.F&&c.ja&&Oe(p,"TO",c.ja),Oe(p,"TYPE","xmlhttp"),ba(c,p),c.m&&c.o&&qf(p,c.m,c.o),c.L&&(c.g.I=c.L);var v=c.g;c=c.ia,v.L=1,v.v=Ju(vr(p)),v.m=null,v.P=!0,M_(v,c)}t.Za=function(){this.C!=null&&(this.C=null,nc(this),Kf(this),Bt(19))};function ic(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function a0(c,p){var v=null;if(c.g==p){ic(c),Qf(c),c.g=null;var b=2}else if(Wf(c.h,p))v=p.D,j_(c.h,p),b=1;else return;if(c.G!=0){if(p.o)if(b==1){v=p.m?p.m.length:0,p=Date.now()-p.F;var j=c.B;b=qu(),pt(b,new R_(b,v)),rc(c)}else s0(c);else if(j=p.s,j==3||j==0&&0<p.X||!(b==1&&SM(c,p)||b==2&&Kf(c)))switch(v&&0<v.length&&(p=c.h,p.i=p.i.concat(v)),j){case 1:qi(c,5);break;case 4:qi(c,10);break;case 3:qi(c,6);break;default:qi(c,2)}}}function l0(c,p){let v=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(v*=2),v*p}function qi(c,p){if(c.j.info("Error code "+p),p==2){var v=f(c.fb,c),b=c.Xa;const j=!b;b=new Hi(b||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Yu(b,"https"),Ju(b),j?yM(b.toString(),v):vM(b.toString(),v)}else Bt(2);c.G=0,c.l&&c.l.sa(p),u0(c),n0(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Bt(2)):(this.j.info("Failed to ping google.com"),Bt(1))};function u0(c){if(c.G=0,c.ka=[],c.l){const p=U_(c.h);(p.length!=0||c.i.length!=0)&&(I(c.ka,p),I(c.ka,c.i),c.h.i.length=0,_(c.i),c.i.length=0),c.l.ra()}}function c0(c,p,v){var b=v instanceof Hi?vr(v):new Hi(v);if(b.g!="")p&&(b.g=p+"."+b.g),Xu(b,b.s);else{var j=a.location;b=j.protocol,p=p?p+"."+j.hostname:j.hostname,j=+j.port;var U=new Hi(null);b&&Yu(U,b),p&&(U.g=p),j&&Xu(U,j),v&&(U.l=v),b=U}return v=c.D,p=c.ya,v&&p&&Oe(b,v,p),Oe(b,"VER",c.la),ba(c,b),b}function d0(c,p,v){if(p&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Ca&&!c.pa?new Ge(new Zu({eb:v})):new Ge(c.pa),p.Ha(c.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function h0(){}t=h0.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function sc(){}sc.prototype.g=function(c,p){return new un(c,p)};function un(c,p){st.call(this),this.g=new t0(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(c?c["X-WebChannel-Client-Profile"]=p.va:c={"X-WebChannel-Client-Profile":p.va}),this.g.S=c,(c=p&&p.Sb)&&!E(c)&&(this.g.m=c),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!E(p)&&(this.g.D=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new Us(this)}w(un,st),un.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){Gf(this.g)},un.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.u&&(v={},v.__data__=Of(c),c=v);p.i.push(new aM(p.Ya++,c)),p.G==3&&rc(p)},un.prototype.N=function(){this.g.l=null,delete this.j,Gf(this.g),delete this.g,un.aa.N.call(this)};function f0(c){Lf.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){e:{for(const v in p){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}w(f0,Lf);function p0(){Ff.call(this),this.status=1}w(p0,Ff);function Us(c){this.g=c}w(Us,h0),Us.prototype.ua=function(){pt(this.g,"a")},Us.prototype.ta=function(c){pt(this.g,new f0(c))},Us.prototype.sa=function(c){pt(this.g,new p0)},Us.prototype.ra=function(){pt(this.g,"b")},sc.prototype.createWebChannel=sc.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,bb=function(){return new sc},Ab=function(){return qu()},Cb=zi,gg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Gu.NO_ERROR=0,Gu.TIMEOUT=8,Gu.HTTP_ERROR=6,ld=Gu,P_.COMPLETE="complete",Ib=P_,I_.EventType=ya,ya.OPEN="a",ya.CLOSE="b",ya.ERROR="c",ya.MESSAGE="d",st.prototype.listen=st.prototype.K,Ga=I_,Ge.prototype.listenOnce=Ge.prototype.L,Ge.prototype.getLastError=Ge.prototype.Ka,Ge.prototype.getLastErrorCode=Ge.prototype.Ba,Ge.prototype.getStatus=Ge.prototype.Z,Ge.prototype.getResponseJson=Ge.prototype.Oa,Ge.prototype.getResponseText=Ge.prototype.oa,Ge.prototype.send=Ge.prototype.ea,Ge.prototype.setWithCredentials=Ge.prototype.Ha,Sb=Ge}).apply(typeof Cc<"u"?Cc:typeof self<"u"?self:typeof window<"u"?window:{});const sx="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mt.UNAUTHENTICATED=new Mt(null),Mt.GOOGLE_CREDENTIALS=new Mt("google-credentials-uid"),Mt.FIRST_PARTY=new Mt("first-party-uid"),Mt.MOCK_USER=new Mt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let na="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s=new Gh("@firebase/firestore");function Fa(){return _s.logLevel}function ee(t,...e){if(_s.logLevel<=Ee.DEBUG){const n=e.map(Nv);_s.debug(`Firestore (${na}): ${t}`,...n)}}function Br(t,...e){if(_s.logLevel<=Ee.ERROR){const n=e.map(Nv);_s.error(`Firestore (${na}): ${t}`,...n)}}function Fo(t,...e){if(_s.logLevel<=Ee.WARN){const n=e.map(Nv);_s.warn(`Firestore (${na}): ${t}`,...n)}}function Nv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function se(t="Unexpected state"){const e=`FIRESTORE (${na}) INTERNAL ASSERTION FAILED: `+t;throw Br(e),new Error(e)}function Ce(t,e){t||se()}function fe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends Xn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class dU{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Mt.UNAUTHENTICATED))}shutdown(){}}class hU{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class fU{constructor(e){this.t=e,this.currentUser=Mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ce(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new ar;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ar,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ar)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ce(typeof r.accessToken=="string"),new Rb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ce(e===null||typeof e=="string"),new Mt(e)}}class pU{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Mt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class mU{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new pU(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class gU{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yU{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ce(this.o===void 0);const r=s=>{s.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ee("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ce(typeof n.token=="string"),this.R=n.token,new gU(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vU(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=vU(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function be(t,e){return t<e?-1:t>e?1:0}function jo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Q($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Q($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ut.fromMillis(Date.now())}static fromDate(e){return ut.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ut(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?be(this.nanoseconds,e.nanoseconds):be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ue(e)}static min(){return new ue(new ut(0,0))}static max(){return new ue(new ut(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,n,r){n===void 0?n=0:n>e.length&&se(),r===void 0?r=e.length-n:r>e.length-n&&se(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ul.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ul?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ne extends Ul{construct(e,n,r){return new Ne(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Q($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ne(n)}static emptyPath(){return new Ne([])}}const wU=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wt extends Ul{construct(e,n,r){return new wt(e,n,r)}static isValidIdentifier(e){return wU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new wt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Q($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Q($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Q($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Q($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new wt(n)}static emptyPath(){return new wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.path=e}static fromPath(e){return new ie(Ne.fromString(e))}static fromName(e){return new ie(Ne.fromString(e).popFirst(5))}static empty(){return new ie(Ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ne.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ne.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new Ne(e.slice()))}}function _U(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ue.fromTimestamp(r===1e9?new ut(n+1,0):new ut(n,r));return new Ri(i,ie.empty(),e)}function EU(t){return new Ri(t.readTime,t.key,-1)}class Ri{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ri(ue.min(),ie.empty(),-1)}static max(){return new Ri(ue.max(),ie.empty(),-1)}}function xU(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ie.comparator(t.documentKey,e.documentKey),n!==0?n:be(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class SU{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _u(t){if(t.code!==$.FAILED_PRECONDITION||t.message!==TU)throw t;ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&se(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new z((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof z?n:z.resolve(n)}catch(n){return z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):z.reject(n)}static resolve(e){return new z((n,r)=>{n(e)})}static reject(e){return new z((n,r)=>{r(e)})}static waitFor(e){return new z((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=z.resolve(!1);for(const r of e)n=n.next(i=>i?z.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new z((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(d=>{o[u]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new z((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function IU(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Eu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Mv.oe=-1;function xu(t){return t==null}function th(t){return t===0&&1/t==-1/0}function CU(t){return typeof t=="number"&&Number.isInteger(t)&&!th(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ox(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ns(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function kb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e,n){this.comparator=e,this.root=n||vt.EMPTY}insert(e,n){return new qe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,vt.BLACK,null,null))}remove(e){return new qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ac(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ac(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ac(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ac(this.root,e,this.comparator,!0)}}class Ac{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??vt.RED,this.left=i??vt.EMPTY,this.right=s??vt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new vt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return vt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return vt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw se();const e=this.left.check();if(e!==this.right.check())throw se();return e+(this.isRed()?0:1)}}vt.EMPTY=null,vt.RED=!0,vt.BLACK=!1;vt.EMPTY=new class{constructor(){this.size=0}get key(){throw se()}get value(){throw se()}get color(){throw se()}get left(){throw se()}get right(){throw se()}copy(e,n,r,i,s){return this}insert(e,n,r){return new vt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.comparator=e,this.data=new qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ax(this.data.getIterator())}getIteratorFrom(e){return new ax(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof xt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new xt(this.comparator);return n.data=e,n}}class ax{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.fields=e,e.sort(wt.comparator)}static empty(){return new fn([])}unionWith(e){let n=new xt(wt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new fn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return jo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Nb("Invalid base64 string: "+s):s}}(e);return new It(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new It(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}It.EMPTY_BYTE_STRING=new It("");const AU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pi(t){if(Ce(!!t),typeof t=="string"){let e=0;const n=AU.exec(t);if(Ce(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Je(t.seconds),nanos:Je(t.nanos)}}function Je(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Es(t){return typeof t=="string"?It.fromBase64String(t):It.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dv(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Ov(t){const e=t.mapValue.fields.__previous_value__;return Dv(e)?Ov(e):e}function Bl(t){const e=Pi(t.mapValue.fields.__local_write_time__.timestampValue);return new ut(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bU{constructor(e,n,r,i,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class $l{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new $l("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof $l&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bc={mapValue:{}};function xs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Dv(t)?4:PU(t)?9007199254740991:RU(t)?10:11:se()}function pr(t,e){if(t===e)return!0;const n=xs(t);if(n!==xs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Bl(t).isEqual(Bl(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Pi(i.timestampValue),a=Pi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Es(i.bytesValue).isEqual(Es(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Je(i.geoPointValue.latitude)===Je(s.geoPointValue.latitude)&&Je(i.geoPointValue.longitude)===Je(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Je(i.integerValue)===Je(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Je(i.doubleValue),a=Je(s.doubleValue);return o===a?th(o)===th(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return jo(t.arrayValue.values||[],e.arrayValue.values||[],pr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(ox(o)!==ox(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!pr(o[l],a[l])))return!1;return!0}(t,e);default:return se()}}function zl(t,e){return(t.values||[]).find(n=>pr(n,e))!==void 0}function Uo(t,e){if(t===e)return 0;const n=xs(t),r=xs(e);if(n!==r)return be(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return be(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Je(s.integerValue||s.doubleValue),l=Je(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return lx(t.timestampValue,e.timestampValue);case 4:return lx(Bl(t),Bl(e));case 5:return be(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Es(s),l=Es(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const d=be(a[u],l[u]);if(d!==0)return d}return be(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=be(Je(s.latitude),Je(o.latitude));return a!==0?a:be(Je(s.longitude),Je(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ux(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,d;const h=s.fields||{},f=o.fields||{},m=(a=h.value)===null||a===void 0?void 0:a.arrayValue,w=(l=f.value)===null||l===void 0?void 0:l.arrayValue,_=be(((u=m==null?void 0:m.values)===null||u===void 0?void 0:u.length)||0,((d=w==null?void 0:w.values)===null||d===void 0?void 0:d.length)||0);return _!==0?_:ux(m,w)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===bc.mapValue&&o===bc.mapValue)return 0;if(s===bc.mapValue)return 1;if(o===bc.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const f=be(l[h],d[h]);if(f!==0)return f;const m=Uo(a[l[h]],u[d[h]]);if(m!==0)return m}return be(l.length,d.length)}(t.mapValue,e.mapValue);default:throw se()}}function lx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return be(t,e);const n=Pi(t),r=Pi(e),i=be(n.seconds,r.seconds);return i!==0?i:be(n.nanos,r.nanos)}function ux(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Uo(n[i],r[i]);if(s)return s}return be(n.length,r.length)}function Bo(t){return yg(t)}function yg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Pi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Es(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ie.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=yg(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${yg(n.fields[o])}`;return i+"}"}(t.mapValue):se()}function cx(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function vg(t){return!!t&&"integerValue"in t}function Vv(t){return!!t&&"arrayValue"in t}function dx(t){return!!t&&"nullValue"in t}function hx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ud(t){return!!t&&"mapValue"in t}function RU(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ll(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ns(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ll(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ll(t.arrayValue.values[n]);return e}return Object.assign({},t)}function PU(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.value=e}static empty(){return new zt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ud(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ll(n)}setAll(e){let n=wt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=ll(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());ud(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return pr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];ud(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ns(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new zt(ll(this.value))}}function Mb(t){const e=[];return Ns(t.fields,(n,r)=>{const i=new wt([n]);if(ud(r)){const s=Mb(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new fn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ht(e,0,ue.min(),ue.min(),ue.min(),zt.empty(),0)}static newFoundDocument(e,n,r,i){return new ht(e,1,n,ue.min(),r,i,0)}static newNoDocument(e,n){return new ht(e,2,n,ue.min(),ue.min(),zt.empty(),0)}static newUnknownDocument(e,n){return new ht(e,3,n,ue.min(),ue.min(),zt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e,n){this.position=e,this.inclusive=n}}function fx(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ie.comparator(ie.fromName(o.referenceValue),n.key):r=Uo(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function px(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!pr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,n="asc"){this.field=e,this.dir=n}}function kU(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{}class it extends Db{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new MU(e,n,r):n==="array-contains"?new VU(e,r):n==="in"?new LU(e,r):n==="not-in"?new FU(e,r):n==="array-contains-any"?new jU(e,r):new it(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new DU(e,r):new OU(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Uo(n,this.value)):n!==null&&xs(this.value)===xs(n)&&this.matchesComparison(Uo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return se()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qn extends Db{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new qn(e,n)}matches(e){return Ob(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Ob(t){return t.op==="and"}function Vb(t){return NU(t)&&Ob(t)}function NU(t){for(const e of t.filters)if(e instanceof qn)return!1;return!0}function wg(t){if(t instanceof it)return t.field.canonicalString()+t.op.toString()+Bo(t.value);if(Vb(t))return t.filters.map(e=>wg(e)).join(",");{const e=t.filters.map(n=>wg(n)).join(",");return`${t.op}(${e})`}}function Lb(t,e){return t instanceof it?function(r,i){return i instanceof it&&r.op===i.op&&r.field.isEqual(i.field)&&pr(r.value,i.value)}(t,e):t instanceof qn?function(r,i){return i instanceof qn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&Lb(o,i.filters[a]),!0):!1}(t,e):void se()}function Fb(t){return t instanceof it?function(n){return`${n.field.canonicalString()} ${n.op} ${Bo(n.value)}`}(t):t instanceof qn?function(n){return n.op.toString()+" {"+n.getFilters().map(Fb).join(" ,")+"}"}(t):"Filter"}class MU extends it{constructor(e,n,r){super(e,n,r),this.key=ie.fromName(r.referenceValue)}matches(e){const n=ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class DU extends it{constructor(e,n){super(e,"in",n),this.keys=jb("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class OU extends it{constructor(e,n){super(e,"not-in",n),this.keys=jb("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function jb(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ie.fromName(r.referenceValue))}class VU extends it{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Vv(n)&&zl(n.arrayValue,this.value)}}class LU extends it{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&zl(this.value.arrayValue,n)}}class FU extends it{constructor(e,n){super(e,"not-in",n)}matches(e){if(zl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!zl(this.value.arrayValue,n)}}class jU extends it{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Vv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>zl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UU{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function mx(t,e=null,n=[],r=[],i=null,s=null,o=null){return new UU(t,e,n,r,i,s,o)}function Lv(t){const e=fe(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>wg(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),xu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Bo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Bo(r)).join(",")),e.ue=n}return e.ue}function Fv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!kU(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Lb(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!px(t.startAt,e.startAt)&&px(t.endAt,e.endAt)}function _g(t){return ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function BU(t,e,n,r,i,s,o,a){return new ra(t,e,n,r,i,s,o,a)}function Xh(t){return new ra(t)}function gx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Ub(t){return t.collectionGroup!==null}function ul(t){const e=fe(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new xt(wt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Wl(s,r))}),n.has(wt.keyField().canonicalString())||e.ce.push(new Wl(wt.keyField(),r))}return e.ce}function lr(t){const e=fe(t);return e.le||(e.le=$U(e,ul(t))),e.le}function $U(t,e){if(t.limitType==="F")return mx(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Wl(i.field,s)});const n=t.endAt?new nh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new nh(t.startAt.position,t.startAt.inclusive):null;return mx(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Eg(t,e){const n=t.filters.concat([e]);return new ra(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function rh(t,e,n){return new ra(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Jh(t,e){return Fv(lr(t),lr(e))&&t.limitType===e.limitType}function Bb(t){return`${Lv(lr(t))}|lt:${t.limitType}`}function Gs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Fb(i)).join(", ")}]`),xu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Bo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Bo(i)).join(",")),`Target(${r})`}(lr(t))}; limitType=${t.limitType})`}function Zh(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ie.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of ul(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=fx(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,ul(r),i)||r.endAt&&!function(o,a,l){const u=fx(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,ul(r),i))}(t,e)}function zU(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function $b(t){return(e,n)=>{let r=!1;for(const i of ul(t)){const s=WU(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function WU(t,e,n){const r=t.field.isKeyField()?ie.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?Uo(l,u):se()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return se()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ns(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return kb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HU=new qe(ie.comparator);function $r(){return HU}const zb=new qe(ie.comparator);function Ka(...t){let e=zb;for(const n of t)e=e.insert(n.key,n);return e}function Wb(t){let e=zb;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function is(){return cl()}function Hb(){return cl()}function cl(){return new ia(t=>t.toString(),(t,e)=>t.isEqual(e))}const qU=new qe(ie.comparator),GU=new xt(ie.comparator);function _e(...t){let e=GU;for(const n of t)e=e.add(n);return e}const KU=new xt(be);function QU(){return KU}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:th(e)?"-0":e}}function qb(t){return{integerValue:""+t}}function YU(t,e){return CU(e)?qb(e):jv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(){this._=void 0}}function XU(t,e,n){return t instanceof Hl?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Dv(s)&&(s=Ov(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof ql?Kb(t,e):t instanceof Gl?Qb(t,e):function(i,s){const o=Gb(i,s),a=yx(o)+yx(i.Pe);return vg(o)&&vg(i.Pe)?qb(a):jv(i.serializer,a)}(t,e)}function JU(t,e,n){return t instanceof ql?Kb(t,e):t instanceof Gl?Qb(t,e):n}function Gb(t,e){return t instanceof ih?function(r){return vg(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Hl extends ef{}class ql extends ef{constructor(e){super(),this.elements=e}}function Kb(t,e){const n=Yb(e);for(const r of t.elements)n.some(i=>pr(i,r))||n.push(r);return{arrayValue:{values:n}}}class Gl extends ef{constructor(e){super(),this.elements=e}}function Qb(t,e){let n=Yb(e);for(const r of t.elements)n=n.filter(i=>!pr(i,r));return{arrayValue:{values:n}}}class ih extends ef{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function yx(t){return Je(t.integerValue||t.doubleValue)}function Yb(t){return Vv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZU{constructor(e,n){this.field=e,this.transform=n}}function e4(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ql&&i instanceof ql||r instanceof Gl&&i instanceof Gl?jo(r.elements,i.elements,pr):r instanceof ih&&i instanceof ih?pr(r.Pe,i.Pe):r instanceof Hl&&i instanceof Hl}(t.transform,e.transform)}class t4{constructor(e,n){this.version=e,this.transformResults=n}}class _t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new _t}static exists(e){return new _t(void 0,e)}static updateTime(e){return new _t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function cd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class tf{}function Xb(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new nf(t.key,_t.none()):new Tu(t.key,t.data,_t.none());{const n=t.data,r=zt.empty();let i=new xt(wt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ui(t.key,r,new fn(i.toArray()),_t.none())}}function n4(t,e,n){t instanceof Tu?function(i,s,o){const a=i.value.clone(),l=wx(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ui?function(i,s,o){if(!cd(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=wx(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(Jb(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function dl(t,e,n,r){return t instanceof Tu?function(s,o,a,l){if(!cd(s.precondition,o))return a;const u=s.value.clone(),d=_x(s.fieldTransforms,l,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ui?function(s,o,a,l){if(!cd(s.precondition,o))return a;const u=_x(s.fieldTransforms,l,o),d=o.data;return d.setAll(Jb(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return cd(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function r4(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=Gb(r.transform,i||null);s!=null&&(n===null&&(n=zt.empty()),n.set(r.field,s))}return n||null}function vx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&jo(r,i,(s,o)=>e4(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Tu extends tf{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ui extends tf{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Jb(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function wx(t,e,n){const r=new Map;Ce(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,JU(o,a,n[i]))}return r}function _x(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,XU(s,o,e))}return r}class nf extends tf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Zb extends tf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&n4(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=dl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=dl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Hb();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=Xb(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ue.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),_e())}isEqual(e){return this.batchId===e.batchId&&jo(this.mutations,e.mutations,(n,r)=>vx(n,r))&&jo(this.baseMutations,e.baseMutations,(n,r)=>vx(n,r))}}class Uv{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ce(e.mutations.length===r.length);let i=function(){return qU}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Uv(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt,Te;function eR(t){switch(t){default:return se();case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0}}function tR(t){if(t===void 0)return Br("GRPC error has no .code"),$.UNKNOWN;switch(t){case tt.OK:return $.OK;case tt.CANCELLED:return $.CANCELLED;case tt.UNKNOWN:return $.UNKNOWN;case tt.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case tt.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case tt.INTERNAL:return $.INTERNAL;case tt.UNAVAILABLE:return $.UNAVAILABLE;case tt.UNAUTHENTICATED:return $.UNAUTHENTICATED;case tt.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case tt.NOT_FOUND:return $.NOT_FOUND;case tt.ALREADY_EXISTS:return $.ALREADY_EXISTS;case tt.PERMISSION_DENIED:return $.PERMISSION_DENIED;case tt.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case tt.ABORTED:return $.ABORTED;case tt.OUT_OF_RANGE:return $.OUT_OF_RANGE;case tt.UNIMPLEMENTED:return $.UNIMPLEMENTED;case tt.DATA_LOSS:return $.DATA_LOSS;default:return se()}}(Te=tt||(tt={}))[Te.OK=0]="OK",Te[Te.CANCELLED=1]="CANCELLED",Te[Te.UNKNOWN=2]="UNKNOWN",Te[Te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Te[Te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Te[Te.NOT_FOUND=5]="NOT_FOUND",Te[Te.ALREADY_EXISTS=6]="ALREADY_EXISTS",Te[Te.PERMISSION_DENIED=7]="PERMISSION_DENIED",Te[Te.UNAUTHENTICATED=16]="UNAUTHENTICATED",Te[Te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Te[Te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Te[Te.ABORTED=10]="ABORTED",Te[Te.OUT_OF_RANGE=11]="OUT_OF_RANGE",Te[Te.UNIMPLEMENTED=12]="UNIMPLEMENTED",Te[Te.INTERNAL=13]="INTERNAL",Te[Te.UNAVAILABLE=14]="UNAVAILABLE",Te[Te.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l4=new ds([4294967295,4294967295],0);function Ex(t){const e=a4().encode(t),n=new Tb;return n.update(e),new Uint8Array(n.digest())}function xx(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ds([n,r],0),new ds([i,s],0)]}class Bv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Qa(`Invalid padding: ${n}`);if(r<0)throw new Qa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Qa(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Qa(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ds.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(ds.fromNumber(r)));return i.compare(l4)===1&&(i=new ds([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Ex(e),[r,i]=xx(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Bv(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=Ex(e),[r,i]=xx(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Qa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Su.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new rf(ue.min(),i,new qe(be),$r(),_e())}}class Su{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Su(r,n,_e(),_e(),_e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class nR{constructor(e,n){this.targetId=e,this.me=n}}class rR{constructor(e,n,r=It.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Tx{constructor(){this.fe=0,this.ge=Ix(),this.pe=It.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=_e(),n=_e(),r=_e();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:se()}}),new Su(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Ix()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ce(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class u4{constructor(e){this.Le=e,this.Be=new Map,this.ke=$r(),this.qe=Sx(),this.Qe=new qe(be)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:se()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(_g(s))if(r===0){const o=new ie(s.path);this.Ue(n,o,ht.newNoDocument(o,ue.min()))}else Ce(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Es(r).toUint8Array()}catch(l){if(l instanceof Nb)return Fo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Bv(o,i,s)}catch(l){return Fo(l instanceof Qa?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&_g(a.target)){const l=new ie(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,ht.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=_e();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new rf(e,n,this.Qe,this.ke,r);return this.ke=$r(),this.qe=Sx(),this.Qe=new qe(be),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Tx,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new xt(be),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ee("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Tx),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Sx(){return new qe(ie.comparator)}function Ix(){return new qe(ie.comparator)}const c4={asc:"ASCENDING",desc:"DESCENDING"},d4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},h4={and:"AND",or:"OR"};class f4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function xg(t,e){return t.useProto3Json||xu(e)?e:{value:e}}function sh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function iR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function p4(t,e){return sh(t,e.toTimestamp())}function mn(t){return Ce(!!t),ue.fromTimestamp(function(n){const r=Pi(n);return new ut(r.seconds,r.nanos)}(t))}function $v(t,e){return Tg(t,e).canonicalString()}function Tg(t,e){const n=function(i){return new Ne(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function sR(t){const e=Ne.fromString(t);return Ce(dR(e)),e}function oh(t,e){return $v(t.databaseId,e.path)}function hl(t,e){const n=sR(e);if(n.get(1)!==t.databaseId.projectId)throw new Q($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Q($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ie(aR(n))}function oR(t,e){return $v(t.databaseId,e)}function m4(t){const e=sR(t);return e.length===4?Ne.emptyPath():aR(e)}function Sg(t){return new Ne(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function aR(t){return Ce(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Cx(t,e,n){return{name:oh(t,e),fields:n.value.mapValue.fields}}function g4(t,e){return"found"in e?function(r,i){Ce(!!i.found),i.found.name,i.found.updateTime;const s=hl(r,i.found.name),o=mn(i.found.updateTime),a=i.found.createTime?mn(i.found.createTime):ue.min(),l=new zt({mapValue:{fields:i.found.fields}});return ht.newFoundDocument(s,o,a,l)}(t,e):"missing"in e?function(r,i){Ce(!!i.missing),Ce(!!i.readTime);const s=hl(r,i.missing),o=mn(i.readTime);return ht.newNoDocument(s,o)}(t,e):se()}function y4(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:se()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(Ce(d===void 0||typeof d=="string"),It.fromBase64String(d||"")):(Ce(d===void 0||d instanceof Buffer||d instanceof Uint8Array),It.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const d=u.code===void 0?$.UNKNOWN:tR(u.code);return new Q(d,u.message||"")}(o);n=new rR(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=hl(t,r.document.name),s=mn(r.document.updateTime),o=r.document.createTime?mn(r.document.createTime):ue.min(),a=new zt({mapValue:{fields:r.document.fields}}),l=ht.newFoundDocument(i,s,o,a),u=r.targetIds||[],d=r.removedTargetIds||[];n=new dd(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=hl(t,r.document),s=r.readTime?mn(r.readTime):ue.min(),o=ht.newNoDocument(i,s),a=r.removedTargetIds||[];n=new dd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=hl(t,r.document),s=r.removedTargetIds||[];n=new dd([],s,i,null)}else{if(!("filter"in e))return se();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new o4(i,s),a=r.targetId;n=new nR(a,o)}}return n}function lR(t,e){let n;if(e instanceof Tu)n={update:Cx(t,e.key,e.value)};else if(e instanceof nf)n={delete:oh(t,e.key)};else if(e instanceof Ui)n={update:Cx(t,e.key,e.data),updateMask:C4(e.fieldMask)};else{if(!(e instanceof Zb))return se();n={verify:oh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Hl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ql)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Gl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ih)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw se()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:p4(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:se()}(t,e.precondition)),n}function v4(t,e){return t&&t.length>0?(Ce(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?mn(i.updateTime):mn(s);return o.isEqual(ue.min())&&(o=mn(s)),new t4(o,i.transformResults||[])}(n,e))):[]}function w4(t,e){return{documents:[oR(t,e.path)]}}function _4(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=oR(t,i);const s=function(u){if(u.length!==0)return cR(qn.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(d=>function(f){return{field:Ks(f.field),direction:T4(f.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=xg(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function E4(t){let e=m4(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ce(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(h){const f=uR(h);return f instanceof qn&&Vb(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(w){return new Wl(Qs(w.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,xu(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){const f=!!h.before,m=h.values||[];return new nh(m,f)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const f=!h.before,m=h.values||[];return new nh(m,f)}(n.endAt)),BU(e,i,o,s,a,"F",l,u)}function x4(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return se()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function uR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Qs(n.unaryFilter.field);return it.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Qs(n.unaryFilter.field);return it.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Qs(n.unaryFilter.field);return it.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Qs(n.unaryFilter.field);return it.create(o,"!=",{nullValue:"NULL_VALUE"});default:return se()}}(t):t.fieldFilter!==void 0?function(n){return it.create(Qs(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return se()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return qn.create(n.compositeFilter.filters.map(r=>uR(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return se()}}(n.compositeFilter.op))}(t):se()}function T4(t){return c4[t]}function S4(t){return d4[t]}function I4(t){return h4[t]}function Ks(t){return{fieldPath:t.canonicalString()}}function Qs(t){return wt.fromServerFormat(t.fieldPath)}function cR(t){return t instanceof it?function(n){if(n.op==="=="){if(hx(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NAN"}};if(dx(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(hx(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NOT_NAN"}};if(dx(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ks(n.field),op:S4(n.op),value:n.value}}}(t):t instanceof qn?function(n){const r=n.getFilters().map(i=>cR(i));return r.length===1?r[0]:{compositeFilter:{op:I4(n.op),filters:r}}}(t):se()}function C4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function dR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,n,r,i,s=ue.min(),o=ue.min(),a=It.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new pi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new pi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new pi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new pi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(e){this.ct=e}}function b4(t){const e=E4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?rh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(){this.un=new P4}addToCollectionParentIndex(e,n){return this.un.add(n),z.resolve()}getCollectionParents(e,n){return z.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return z.resolve()}deleteFieldIndex(e,n){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,n){return z.resolve()}getDocumentsMatchingTarget(e,n){return z.resolve(null)}getIndexType(e,n){return z.resolve(0)}getFieldIndexes(e,n){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,n){return z.resolve(Ri.min())}getMinOffsetFromCollectionGroup(e,n){return z.resolve(Ri.min())}updateCollectionGroup(e,n,r){return z.resolve()}updateIndexEntries(e,n){return z.resolve()}}class P4{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new xt(Ne.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new xt(Ne.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new $o(0)}static kn(){return new $o(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(){this.changes=new ia(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ht.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&dl(r.mutation,i,fn.empty(),ut.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,_e()).next(()=>r))}getLocalViewOfDocuments(e,n,r=_e()){const i=is();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Ka();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=is();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,_e()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=$r();const o=cl(),a=function(){return cl()}();return n.forEach((l,u)=>{const d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof Ui)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),dl(d.mutation,u,d.mutation.getFieldMask(),ut.now())):o.set(u.key,fn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>{var h;return a.set(u,new N4(d,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=cl();let i=new qe((o,a)=>o-a),s=_e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let d=r.get(l)||fn.empty();d=a.applyToLocalView(u,d),r.set(l,d);const h=(i.get(a.batchId)||_e()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,d=l.value,h=Hb();d.forEach(f=>{if(!s.has(f)){const m=Xb(n.get(f),r.get(f));m!==null&&h.set(f,m),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return z.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ie.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Ub(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):z.resolve(is());let a=-1,l=s;return o.next(u=>z.forEach(u,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?z.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{l=l.insert(d,f)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,_e())).next(d=>({batchId:a,changes:Wb(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ie(n)).next(r=>{let i=Ka();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Ka();return this.indexManager.getCollectionParents(e,s).next(a=>z.forEach(a,l=>{const u=function(h,f){return new ra(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,ht.newInvalidDocument(d)))});let a=Ka();return o.forEach((l,u)=>{const d=s.get(l);d!==void 0&&dl(d.mutation,u,fn.empty(),ut.now()),Zh(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return z.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:mn(i.createTime)}}(n)),z.resolve()}getNamedQuery(e,n){return z.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:b4(i.bundledQuery),readTime:mn(i.readTime)}}(n)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(){this.overlays=new qe(ie.comparator),this.Ir=new Map}getOverlay(e,n){return z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=is();return z.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),z.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),z.resolve()}getOverlaysForCollection(e,n,r){const i=is(),s=n.length+1,o=new ie(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return z.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new qe((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=s.get(u.largestBatchId);d===null&&(d=is(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=is(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return z.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new s4(n,r));let s=this.Ir.get(n);s===void 0&&(s=_e(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(){this.sessionToken=It.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(){this.Tr=new xt(ct.Er),this.dr=new xt(ct.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new ct(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new ct(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ie(new Ne([])),r=new ct(n,e),i=new ct(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ie(new Ne([])),r=new ct(n,e),i=new ct(n,e+1);let s=_e();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new ct(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ct{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ie.comparator(e.key,n.key)||be(e.wr,n.wr)}static Ar(e,n){return be(e.wr,n.wr)||ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new xt(ct.Er)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new i4(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new ct(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return z.resolve(o)}lookupMutationBatch(e,n){return z.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return z.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ct(n,0),i=new ct(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),z.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new xt(be);return n.forEach(i=>{const s=new ct(i,0),o=new ct(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),z.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ie.isDocumentKey(s)||(s=s.child(""));const o=new ct(new ie(s),0);let a=new xt(be);return this.br.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.wr)),!0)},o),z.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ce(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return z.forEach(n.mutations,i=>{const s=new ct(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new ct(n,0),i=this.br.firstAfterOrEqual(r);return z.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(e){this.Mr=e,this.docs=function(){return new qe(ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return z.resolve(r?r.document.mutableCopy():ht.newInvalidDocument(n))}getEntries(e,n){let r=$r();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ht.newInvalidDocument(i))}),z.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=$r();const o=n.path,a=new ie(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||xU(EU(d),r)<=0||(i.has(d.key)||Zh(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return z.resolve(s)}getAllFromCollectionGroup(e,n,r,i){se()}Or(e,n){return z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new j4(this)}getSize(e){return z.resolve(this.size)}}class j4 extends k4{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),z.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(e){this.persistence=e,this.Nr=new ia(n=>Lv(n),Fv),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.Lr=0,this.Br=new zv,this.targetCount=0,this.kr=$o.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),z.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new $o(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,z.resolve()}updateTargetData(e,n){return this.Kn(n),z.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),z.waitFor(s).next(()=>i)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return z.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),z.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),z.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),z.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return z.resolve(r)}containsKey(e,n){return z.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Mv(0),this.Kr=!1,this.Kr=!0,this.$r=new V4,this.referenceDelegate=e(this),this.Ur=new U4(this),this.indexManager=new R4,this.remoteDocumentCache=function(i){return new F4(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new A4(n),this.Gr=new D4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new O4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new L4(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){ee("MemoryPersistence","Starting transaction:",e);const i=new $4(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return z.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class $4 extends SU{constructor(e){super(),this.currentSequenceNumber=e}}class Wv{constructor(e){this.persistence=e,this.Jr=new zv,this.Yr=null}static Zr(e){return new Wv(e)}get Xr(){if(this.Yr)return this.Yr;throw se()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),z.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),z.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.Xr,r=>{const i=ie.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,ue.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return z.or([()=>z.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=_e(),i=_e();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Hv(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return $V()?8:IU(Ft())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new z4;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Fa()<=Ee.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",Gs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),z.resolve()):(Fa()<=Ee.DEBUG&&ee("QueryEngine","Query:",Gs(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Fa()<=Ee.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",Gs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,lr(n))):z.resolve())}Yi(e,n){if(gx(n))return z.resolve(null);let r=lr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=rh(n,null,"F"),r=lr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=_e(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ts(n,a);return this.ns(n,u,o,l.readTime)?this.Yi(e,rh(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,r,i){return gx(n)||i.isEqual(ue.min())?z.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?z.resolve(null):(Fa()<=Ee.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Gs(n)),this.rs(e,o,n,_U(i,-1)).next(a=>a))})}ts(e,n){let r=new xt($b(e));return n.forEach((i,s)=>{Zh(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Fa()<=Ee.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",Gs(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ri.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new qe(be),this._s=new ia(s=>Lv(s),Fv),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new M4(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function q4(t,e,n,r){return new H4(t,e,n,r)}async function hR(t,e){const n=fe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=_e();for(const u of i){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of s){a.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function G4(t,e){const n=fe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,d){const h=u.batch,f=h.keys();let m=z.resolve();return f.forEach(w=>{m=m.next(()=>d.getEntry(l,w)).next(_=>{const I=u.docVersions.get(w);Ce(I!==null),_.version.compareTo(I)<0&&(h.applyToRemoteDocument(_,u),_.isValidDocument()&&(_.setReadTime(u.commitVersion),d.addEntry(_)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=_e();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function fR(t){const e=fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function K4(t,e){const n=fe(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((d,h)=>{const f=i.get(h);if(!f)return;a.push(n.Ur.removeMatchingKeys(s,d.removedDocuments,h).next(()=>n.Ur.addMatchingKeys(s,d.addedDocuments,h)));let m=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(It.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),i=i.insert(h,m),function(_,I,g){return _.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:g.addedDocuments.size+g.modifiedDocuments.size+g.removedDocuments.size>0}(f,m,d)&&a.push(n.Ur.updateTargetData(s,m))});let l=$r(),u=_e();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(Q4(s,o,e.documentUpdates).next(d=>{l=d.Ps,u=d.Is})),!r.isEqual(ue.min())){const d=n.Ur.getLastRemoteSnapshotVersion(s).next(h=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return z.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.os=i,s))}function Q4(t,e,n){let r=_e(),i=_e();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=$r();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ue.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ee("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function Y4(t,e){const n=fe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function X4(t,e){const n=fe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,z.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new pi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Ig(t,e,n){const r=fe(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Eu(o))throw o;ee("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Ax(t,e,n){const r=fe(t);let i=ue.min(),s=_e();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,d){const h=fe(l),f=h._s.get(d);return f!==void 0?z.resolve(h.os.get(f)):h.Ur.getTargetData(u,d)}(r,o,lr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:ue.min(),n?s:_e())).next(a=>(J4(r,zU(e),a),{documents:a,Ts:s})))}function J4(t,e,n){let r=t.us.get(e)||ue.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class bx{constructor(){this.activeTargetIds=QU()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Z4{constructor(){this.so=new bx,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new bx,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eB{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ee("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ee("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rc=null;function Np(){return Rc===null?Rc=function(){return 268435456+Math.round(2147483648*Math.random())}():Rc++,"0x"+Rc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nB{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nt="WebChannelConnection";class rB extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=Np(),l=this.xo(n,r.toUriEncodedString());ee("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(n,l,u,i).then(d=>(ee("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Fo("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",i),d})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+na}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=tB[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Np();return new Promise((o,a)=>{const l=new Sb;l.setWithCredentials(!0),l.listenOnce(Ib.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ld.NO_ERROR:const d=l.getResponseJson();ee(Nt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case ld.TIMEOUT:ee(Nt,`RPC '${e}' ${s} timed out`),a(new Q($.DEADLINE_EXCEEDED,"Request time out"));break;case ld.HTTP_ERROR:const h=l.getStatus();if(ee(Nt,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const w=function(I){const g=I.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(g)>=0?g:$.UNKNOWN}(m.status);a(new Q(w,m.message))}else a(new Q($.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Q($.UNAVAILABLE,"Connection failed."));break;default:se()}}finally{ee(Nt,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);ee(Nt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}Bo(e,n,r){const i=Np(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=bb(),a=Ab(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=s.join("");ee(Nt,`Creating RPC '${e}' stream ${i}: ${d}`,l);const h=o.createWebChannel(d,l);let f=!1,m=!1;const w=new nB({Io:I=>{m?ee(Nt,`Not sending because RPC '${e}' stream ${i} is closed:`,I):(f||(ee(Nt,`Opening RPC '${e}' stream ${i} transport.`),h.open(),f=!0),ee(Nt,`RPC '${e}' stream ${i} sending:`,I),h.send(I))},To:()=>h.close()}),_=(I,g,E)=>{I.listen(g,T=>{try{E(T)}catch(R){setTimeout(()=>{throw R},0)}})};return _(h,Ga.EventType.OPEN,()=>{m||(ee(Nt,`RPC '${e}' stream ${i} transport opened.`),w.yo())}),_(h,Ga.EventType.CLOSE,()=>{m||(m=!0,ee(Nt,`RPC '${e}' stream ${i} transport closed`),w.So())}),_(h,Ga.EventType.ERROR,I=>{m||(m=!0,Fo(Nt,`RPC '${e}' stream ${i} transport errored:`,I),w.So(new Q($.UNAVAILABLE,"The operation could not be completed")))}),_(h,Ga.EventType.MESSAGE,I=>{var g;if(!m){const E=I.data[0];Ce(!!E);const T=E,R=T.error||((g=T[0])===null||g===void 0?void 0:g.error);if(R){ee(Nt,`RPC '${e}' stream ${i} received error:`,R);const N=R.status;let L=function(A){const P=tt[A];if(P!==void 0)return tR(P)}(N),C=R.message;L===void 0&&(L=$.INTERNAL,C="Unknown error status: "+N+" with message "+R.message),m=!0,w.So(new Q(L,C)),h.close()}else ee(Nt,`RPC '${e}' stream ${i} received:`,E),w.bo(E)}}),_(a,Cb.STAT_EVENT,I=>{I.stat===gg.PROXY?ee(Nt,`RPC '${e}' stream ${i} detected buffering proxy`):I.stat===gg.NOPROXY&&ee(Nt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.wo()},0),w}}function Mp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sf(t){return new f4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&ee("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new qv(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(Br(n.toString()),Br("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new Q($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ee("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ee("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class iB extends pR{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=y4(this.serializer,e),r=function(s){if(!("targetChange"in s))return ue.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ue.min():o.readTime?mn(o.readTime):ue.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Sg(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=_g(l)?{documents:w4(s,l)}:{query:_4(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=iR(s,o.resumeToken);const u=xg(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ue.min())>0){a.readTime=sh(s,o.snapshotVersion.toTimestamp());const u=xg(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=x4(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Sg(this.serializer),n.removeTarget=e,this.a_(n)}}class sB extends pR{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ce(!!e.streamToken),this.lastStreamToken=e.streamToken,Ce(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ce(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=v4(e.writeResults,e.commitTime),r=mn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Sg(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>lR(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oB extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Q($.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Tg(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Q($.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Tg(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q($.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class aB{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Br(n),this.D_=!1):ee("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lB{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{Ms(this)&&(ee("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=fe(l);u.L_.add(4),await Iu(u),u.q_.set("Unknown"),u.L_.delete(4),await of(u)}(this))})}),this.q_=new aB(r,i)}}async function of(t){if(Ms(t))for(const e of t.B_)await e(!0)}async function Iu(t){for(const e of t.B_)await e(!1)}function mR(t,e){const n=fe(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Yv(n)?Qv(n):sa(n).r_()&&Kv(n,e))}function Gv(t,e){const n=fe(t),r=sa(n);n.N_.delete(e),r.r_()&&gR(n,e),n.N_.size===0&&(r.r_()?r.o_():Ms(n)&&n.q_.set("Unknown"))}function Kv(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}sa(t).A_(e)}function gR(t,e){t.Q_.xe(e),sa(t).R_(e)}function Qv(t){t.Q_=new u4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),sa(t).start(),t.q_.v_()}function Yv(t){return Ms(t)&&!sa(t).n_()&&t.N_.size>0}function Ms(t){return fe(t).L_.size===0}function yR(t){t.Q_=void 0}async function uB(t){t.q_.set("Online")}async function cB(t){t.N_.forEach((e,n)=>{Kv(t,e)})}async function dB(t,e){yR(t),Yv(t)?(t.q_.M_(e),Qv(t)):t.q_.set("Unknown")}async function hB(t,e,n){if(t.q_.set("Online"),e instanceof rR&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){ee("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ah(t,r)}else if(e instanceof dd?t.Q_.Ke(e):e instanceof nR?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ue.min()))try{const r=await fR(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.N_.get(u);d&&s.N_.set(u,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const d=s.N_.get(l);if(!d)return;s.N_.set(l,d.withResumeToken(It.EMPTY_BYTE_STRING,d.snapshotVersion)),gR(s,l);const h=new pi(d.target,l,u,d.sequenceNumber);Kv(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ee("RemoteStore","Failed to raise snapshot:",r),await ah(t,r)}}async function ah(t,e,n){if(!Eu(e))throw e;t.L_.add(1),await Iu(t),t.q_.set("Offline"),n||(n=()=>fR(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ee("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await of(t)})}function vR(t,e){return e().catch(n=>ah(t,n,e))}async function af(t){const e=fe(t),n=ki(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;fB(e);)try{const i=await Y4(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,pB(e,i)}catch(i){await ah(e,i)}wR(e)&&_R(e)}function fB(t){return Ms(t)&&t.O_.length<10}function pB(t,e){t.O_.push(e);const n=ki(t);n.r_()&&n.V_&&n.m_(e.mutations)}function wR(t){return Ms(t)&&!ki(t).n_()&&t.O_.length>0}function _R(t){ki(t).start()}async function mB(t){ki(t).p_()}async function gB(t){const e=ki(t);for(const n of t.O_)e.m_(n.mutations)}async function yB(t,e,n){const r=t.O_.shift(),i=Uv.from(r,e,n);await vR(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await af(t)}async function vB(t,e){e&&ki(t).V_&&await async function(r,i){if(function(o){return eR(o)&&o!==$.ABORTED}(i.code)){const s=r.O_.shift();ki(r).s_(),await vR(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await af(r)}}(t,e),wR(t)&&_R(t)}async function Px(t,e){const n=fe(t);n.asyncQueue.verifyOperationInProgress(),ee("RemoteStore","RemoteStore received new credentials");const r=Ms(n);n.L_.add(3),await Iu(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await of(n)}async function wB(t,e){const n=fe(t);e?(n.L_.delete(2),await of(n)):e||(n.L_.add(2),await Iu(n),n.q_.set("Unknown"))}function sa(t){return t.K_||(t.K_=function(n,r,i){const s=fe(n);return s.w_(),new iB(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:uB.bind(null,t),Ro:cB.bind(null,t),mo:dB.bind(null,t),d_:hB.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Yv(t)?Qv(t):t.q_.set("Unknown")):(await t.K_.stop(),yR(t))})),t.K_}function ki(t){return t.U_||(t.U_=function(n,r,i){const s=fe(n);return s.w_(),new sB(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:mB.bind(null,t),mo:vB.bind(null,t),f_:gB.bind(null,t),g_:yB.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await af(t)):(await t.U_.stop(),t.O_.length>0&&(ee("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ar,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Xv(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jv(t,e){if(Br("AsyncQueue",`${e}: ${t}`),Eu(t))return new Q($.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ie.comparator(n.key,r.key):(n,r)=>ie.comparator(n.key,r.key),this.keyedMap=Ka(),this.sortedSet=new qe(this.comparator)}static emptySet(e){return new Io(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Io)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Io;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(){this.W_=new qe(ie.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):se():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class zo{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new zo(e,n,Io.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _B{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class EB{constructor(){this.queries=Nx(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=fe(n),s=i.queries;i.queries=Nx(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new Q($.ABORTED,"Firestore shutting down"))}}function Nx(){return new ia(t=>Bb(t),Jh)}async function Zv(t,e){const n=fe(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new _B,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Jv(o,`Initialization of query '${Gs(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&tw(n)}async function ew(t,e){const n=fe(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function xB(t,e){const n=fe(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&tw(n)}function TB(t,e,n){const r=fe(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function tw(t){t.Y_.forEach(e=>{e.next()})}var Cg,Mx;(Mx=Cg||(Cg={})).ea="default",Mx.Cache="cache";class nw{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new zo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=zo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Cg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e){this.key=e}}class xR{constructor(e){this.key=e}}class SB{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=_e(),this.mutatedKeys=_e(),this.Aa=$b(e),this.Ra=new Io(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new kx,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const f=i.get(d),m=Zh(this.query,h)?h:null,w=!!f&&this.mutatedKeys.has(f.key),_=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let I=!1;f&&m?f.data.isEqual(m.data)?w!==_&&(r.track({type:3,doc:m}),I=!0):this.ga(f,m)||(r.track({type:2,doc:m}),I=!0,(l&&this.Aa(m,l)>0||u&&this.Aa(m,u)<0)&&(a=!0)):!f&&m?(r.track({type:0,doc:m}),I=!0):f&&!m&&(r.track({type:1,doc:f}),I=!0,(l||u)&&(a=!0)),I&&(m?(o=o.add(m),s=_?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,h)=>function(m,w){const _=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return se()}};return _(m)-_(w)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new zo(this.query,e.Ra,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new kx,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=_e(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new xR(r))}),this.da.forEach(r=>{e.has(r)||n.push(new ER(r))}),n}ba(e){this.Ta=e.Ts,this.da=_e();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return zo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class IB{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class CB{constructor(e){this.key=e,this.va=!1}}class AB{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ia(a=>Bb(a),Jh),this.Ma=new Map,this.xa=new Set,this.Oa=new qe(ie.comparator),this.Na=new Map,this.La=new zv,this.Ba={},this.ka=new Map,this.qa=$o.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function bB(t,e,n=!0){const r=bR(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await TR(r,e,n,!0),i}async function RB(t,e){const n=bR(t);await TR(n,e,!0,!1)}async function TR(t,e,n,r){const i=await X4(t.localStore,lr(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await PB(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&mR(t.remoteStore,i),a}async function PB(t,e,n,r,i){t.Ka=(h,f,m)=>async function(_,I,g,E){let T=I.view.ma(g);T.ns&&(T=await Ax(_.localStore,I.query,!1).then(({documents:C})=>I.view.ma(C,T)));const R=E&&E.targetChanges.get(I.targetId),N=E&&E.targetMismatches.get(I.targetId)!=null,L=I.view.applyChanges(T,_.isPrimaryClient,R,N);return Ox(_,I.targetId,L.wa),L.snapshot}(t,h,f,m);const s=await Ax(t.localStore,e,!0),o=new SB(e,s.Ts),a=o.ma(s.documents),l=Su.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);Ox(t,n,u.wa);const d=new IB(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function kB(t,e,n){const r=fe(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Jh(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ig(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Gv(r.remoteStore,i.targetId),Ag(r,i.targetId)}).catch(_u)):(Ag(r,i.targetId),await Ig(r.localStore,i.targetId,!0))}async function NB(t,e){const n=fe(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Gv(n.remoteStore,r.targetId))}async function MB(t,e,n){const r=UB(t);try{const i=await function(o,a){const l=fe(o),u=ut.now(),d=a.reduce((m,w)=>m.add(w.key),_e());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let w=$r(),_=_e();return l.cs.getEntries(m,d).next(I=>{w=I,w.forEach((g,E)=>{E.isValidDocument()||(_=_.add(g))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,w)).next(I=>{h=I;const g=[];for(const E of a){const T=r4(E,h.get(E.key).overlayedDocument);T!=null&&g.push(new Ui(E.key,T,Mb(T.value.mapValue),_t.exists(!0)))}return l.mutationQueue.addMutationBatch(m,u,g,a)}).next(I=>{f=I;const g=I.applyToLocalDocumentSet(h,_);return l.documentOverlayCache.saveOverlays(m,I.batchId,g)})}).then(()=>({batchId:f.batchId,changes:Wb(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Ba[o.currentUser.toKey()];u||(u=new qe(be)),u=u.insert(a,l),o.Ba[o.currentUser.toKey()]=u}(r,i.batchId,n),await Cu(r,i.changes),await af(r.remoteStore)}catch(i){const s=Jv(i,"Failed to persist write");n.reject(s)}}async function SR(t,e){const n=fe(t);try{const r=await K4(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(Ce(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Ce(o.va):i.removedDocuments.size>0&&(Ce(o.va),o.va=!1))}),await Cu(n,r,e)}catch(r){await _u(r)}}function Dx(t,e,n){const r=fe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=fe(o);l.onlineState=a;let u=!1;l.queries.forEach((d,h)=>{for(const f of h.j_)f.Z_(a)&&(u=!0)}),u&&tw(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function DB(t,e,n){const r=fe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new qe(ie.comparator);o=o.insert(s,ht.newNoDocument(s,ue.min()));const a=_e().add(s),l=new rf(ue.min(),new Map,new qe(be),o,a);await SR(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),rw(r)}else await Ig(r.localStore,e,!1).then(()=>Ag(r,e,n)).catch(_u)}async function OB(t,e){const n=fe(t),r=e.batch.batchId;try{const i=await G4(n.localStore,e);CR(n,r,null),IR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Cu(n,i)}catch(i){await _u(i)}}async function VB(t,e,n){const r=fe(t);try{const i=await function(o,a){const l=fe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,a).next(h=>(Ce(h!==null),d=h.keys(),l.mutationQueue.removeMutationBatch(u,h))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(r.localStore,e);CR(r,e,n),IR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Cu(r,i)}catch(i){await _u(i)}}function IR(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function CR(t,e,n){const r=fe(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Ag(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||AR(t,r)})}function AR(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Gv(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),rw(t))}function Ox(t,e,n){for(const r of n)r instanceof ER?(t.La.addReference(r.key,e),LB(t,r)):r instanceof xR?(ee("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||AR(t,r.key)):se()}function LB(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(ee("SyncEngine","New document in limbo: "+n),t.xa.add(r),rw(t))}function rw(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ie(Ne.fromString(e)),r=t.qa.next();t.Na.set(r,new CB(n)),t.Oa=t.Oa.insert(n,r),mR(t.remoteStore,new pi(lr(Xh(n.path)),r,"TargetPurposeLimboResolution",Mv.oe))}}async function Cu(t,e,n){const r=fe(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){i.push(u);const h=Hv.Wi(l.targetId,u);s.push(h)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,u){const d=fe(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>z.forEach(u,f=>z.forEach(f.$i,m=>d.persistence.referenceDelegate.addReference(h,f.targetId,m)).next(()=>z.forEach(f.Ui,m=>d.persistence.referenceDelegate.removeReference(h,f.targetId,m)))))}catch(h){if(!Eu(h))throw h;ee("LocalStore","Failed to update sequence numbers: "+h)}for(const h of u){const f=h.targetId;if(!h.fromCache){const m=d.os.get(f),w=m.snapshotVersion,_=m.withLastLimboFreeSnapshotVersion(w);d.os=d.os.insert(f,_)}}}(r.localStore,s))}async function FB(t,e){const n=fe(t);if(!n.currentUser.isEqual(e)){ee("SyncEngine","User change. New user:",e.toKey());const r=await hR(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new Q($.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Cu(n,r.hs)}}function jB(t,e){const n=fe(t),r=n.Na.get(e);if(r&&r.va)return _e().add(r.key);{let i=_e();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function bR(t){const e=fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=SR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=DB.bind(null,e),e.Ca.d_=xB.bind(null,e.eventManager),e.Ca.$a=TB.bind(null,e.eventManager),e}function UB(t){const e=fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=VB.bind(null,e),e}class lh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=sf(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return q4(this.persistence,new W4,e.initialUser,this.serializer)}Ga(e){return new B4(Wv.Zr,this.serializer)}Wa(e){return new Z4}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}lh.provider={build:()=>new lh};class bg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Dx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=FB.bind(null,this.syncEngine),await wB(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new EB}()}createDatastore(e){const n=sf(e.databaseInfo.databaseId),r=function(s){return new rB(s)}(e.databaseInfo);return function(s,o,a,l){return new oB(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new lB(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Dx(this.syncEngine,n,0),function(){return Rx.D()?new Rx:new eB}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,d){const h=new AB(i,s,o,a,l,u);return d&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=fe(i);ee("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Iu(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}bg.provider={build:()=>new bg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Br("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BB{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Q($.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(i,s){const o=fe(i),a={documents:s.map(h=>oh(o.serializer,h))},l=await o.Lo("BatchGetDocuments",o.serializer.databaseId,Ne.emptyPath(),a,s.length),u=new Map;l.forEach(h=>{const f=g4(o.serializer,h);u.set(f.key.toString(),f)});const d=[];return s.forEach(h=>{const f=u.get(h.toString());Ce(!!f),d.push(f)}),d}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new nf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=ie.fromPath(r);this.mutations.push(new Zb(i,this.precondition(i)))}),await async function(r,i){const s=fe(r),o={writes:i.map(a=>lR(s.serializer,a))};await s.Mo("Commit",s.serializer.databaseId,Ne.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw se();n=ue.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new Q($.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ue.min())?_t.exists(!1):_t.updateTime(n):_t.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ue.min()))throw new Q($.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return _t.updateTime(n)}return _t.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $B{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this._u=r.maxAttempts,this.t_=new qv(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new BB(this.datastore),n=this.cu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const n=this.updateFunction(e);return!xu(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!eR(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zB{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Mt.UNAUTHENTICATED,this.clientId=Pb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{ee("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ee("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ar;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Jv(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Dp(t,e){t.asyncQueue.verifyOperationInProgress(),ee("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await hR(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Vx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await WB(t);ee("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Px(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Px(e.remoteStore,i)),t._onlineComponents=e}async function WB(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ee("FirestoreClient","Using user provided OfflineComponentProvider");try{await Dp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===$.FAILED_PRECONDITION||i.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Fo("Error using user provided cache. Falling back to memory cache: "+n),await Dp(t,new lh)}}else ee("FirestoreClient","Using default OfflineComponentProvider"),await Dp(t,new lh);return t._offlineComponents}async function sw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ee("FirestoreClient","Using user provided OnlineComponentProvider"),await Vx(t,t._uninitializedComponentsProvider._online)):(ee("FirestoreClient","Using default OnlineComponentProvider"),await Vx(t,new bg))),t._onlineComponents}function HB(t){return sw(t).then(e=>e.syncEngine)}function qB(t){return sw(t).then(e=>e.datastore)}async function uh(t){const e=await sw(t),n=e.eventManager;return n.onListen=bB.bind(null,e.syncEngine),n.onUnlisten=kB.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=RB.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=NB.bind(null,e.syncEngine),n}function GB(t,e,n={}){const r=new ar;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const d=new iw({next:f=>{d.Za(),o.enqueueAndForget(()=>ew(s,h));const m=f.docs.has(a);!m&&f.fromCache?u.reject(new Q($.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&l&&l.source==="server"?u.reject(new Q($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),h=new nw(Xh(a.path),d,{includeMetadataChanges:!0,_a:!0});return Zv(s,h)}(await uh(t),t.asyncQueue,e,n,r)),r.promise}function KB(t,e,n={}){const r=new ar;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const d=new iw({next:f=>{d.Za(),o.enqueueAndForget(()=>ew(s,h)),f.fromCache&&l.source==="server"?u.reject(new Q($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),h=new nw(a,d,{includeMetadataChanges:!0,_a:!0});return Zv(s,h)}(await uh(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PR(t,e,n){if(!n)throw new Q($.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function QB(t,e,n,r){if(e===!0&&r===!0)throw new Q($.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Fx(t){if(!ie.isDocumentKey(t))throw new Q($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function jx(t){if(ie.isDocumentKey(t))throw new Q($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function lf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":se()}function qt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=lf(t);throw new Q($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Q($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Q($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}QB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=RR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Q($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Q($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Q($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class uf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ux({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ux(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new dU;switch(r.type){case"firstParty":return new mU(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Lx.get(n);r&&(ee("ComponentProvider","Removing Datastore"),Lx.delete(n),r.terminate())}(this),Promise.resolve()}}function YB(t,e,n,r={}){var i;const s=(t=qt(t,uf))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Fo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Mt.MOCK_USER;else{a=VV(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new Q($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Mt(u)}t._authCredentials=new hU(new Rb(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Yr(this.firestore,e,this._query)}}class Tt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ci(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tt(this.firestore,e,this._key)}}class Ci extends Yr{constructor(e,n,r){super(e,n,Xh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tt(this.firestore,null,new ie(e))}withConverter(e){return new Ci(this.firestore,e,this._path)}}function Mr(t,e,...n){if(t=Ye(t),PR("collection","path",e),t instanceof uf){const r=Ne.fromString(e,...n);return jx(r),new Ci(t,null,r)}{if(!(t instanceof Tt||t instanceof Ci))throw new Q($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ne.fromString(e,...n));return jx(r),new Ci(t.firestore,null,r)}}function Ot(t,e,...n){if(t=Ye(t),arguments.length===1&&(e=Pb.newId()),PR("doc","path",e),t instanceof uf){const r=Ne.fromString(e,...n);return Fx(r),new Tt(t,null,new ie(r))}{if(!(t instanceof Tt||t instanceof Ci))throw new Q($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ne.fromString(e,...n));return Fx(r),new Tt(t.firestore,t instanceof Ci?t.converter:null,new ie(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new qv(this,"async_queue_retry"),this.Vu=()=>{const r=Mp();r&&ee("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Mp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Mp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new ar;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Eu(e))throw e;ee("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Br("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Xv.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&se()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function $x(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class mr extends uf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Bx,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Bx(e),this._firestoreClient=void 0,await e}}}function XB(t,e){const n=typeof t=="object"?t:Ev(),r=typeof t=="string"?t:"(default)",i=ks(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=DV("firestore");s&&YB(i,...s)}return i}function Au(t){if(t._terminated)throw new Q($.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||JB(t),t._firestoreClient}function JB(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,u,d){return new bU(a,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,RR(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new zB(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ts(It.fromBase64String(e))}catch(n){throw new Q($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ts(It.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Q($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Q($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Q($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return be(this._lat,e._lat)||be(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZB=/^__.*__$/;class e${constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ui(e,this.data,this.fieldMask,n,this.fieldTransforms):new Tu(e,this.data,n,this.fieldTransforms)}}class kR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ui(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function NR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw se()}}class lw{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new lw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return ch(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(NR(this.Cu)&&ZB.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class t${constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||sf(e)}Qu(e,n,r,i=!1){return new lw({Cu:e,methodName:n,qu:r,path:wt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ru(t){const e=t._freezeSettings(),n=sf(t._databaseId);return new t$(t._databaseId,!!e.ignoreUndefinedProperties,n)}function uw(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);dw("Data must be an object, but it was:",o,r);const a=OR(r,o);let l,u;if(s.merge)l=new fn(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const f=Rg(e,h,n);if(!o.contains(f))throw new Q($.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);LR(d,f)||d.push(f)}l=new fn(d),u=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=o.fieldTransforms;return new e$(new zt(a),l,u)}class df extends cf{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof df}}class cw extends cf{_toFieldTransform(e){return new ZU(e.path,new Hl)}isEqual(e){return e instanceof cw}}function MR(t,e,n,r){const i=t.Qu(1,e,n);dw("Data must be an object, but it was:",i,r);const s=[],o=zt.empty();Ns(r,(l,u)=>{const d=hw(e,l,n);u=Ye(u);const h=i.Nu(d);if(u instanceof df)s.push(d);else{const f=Pu(u,h);f!=null&&(s.push(d),o.set(d,f))}});const a=new fn(s);return new kR(o,a,i.fieldTransforms)}function DR(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[Rg(e,r,n)],l=[i];if(s.length%2!=0)throw new Q($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(Rg(e,s[f])),l.push(s[f+1]);const u=[],d=zt.empty();for(let f=a.length-1;f>=0;--f)if(!LR(u,a[f])){const m=a[f];let w=l[f];w=Ye(w);const _=o.Nu(m);if(w instanceof df)u.push(m);else{const I=Pu(w,_);I!=null&&(u.push(m),d.set(m,I))}}const h=new fn(u);return new kR(d,h,o.fieldTransforms)}function n$(t,e,n,r=!1){return Pu(n,t.Qu(r?4:3,e))}function Pu(t,e){if(VR(t=Ye(t)))return dw("Unsupported field value:",e,t),OR(t,e);if(t instanceof cf)return function(r,i){if(!NR(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Pu(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ye(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return YU(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=ut.fromDate(r);return{timestampValue:sh(i.serializer,s)}}if(r instanceof ut){const s=new ut(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:sh(i.serializer,s)}}if(r instanceof ow)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ts)return{bytesValue:iR(i.serializer,r._byteString)};if(r instanceof Tt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:$v(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof aw)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return jv(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${lf(r)}`)}(t,e)}function OR(t,e){const n={};return kb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ns(t,(r,i)=>{const s=Pu(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function VR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ut||t instanceof ow||t instanceof Ts||t instanceof Tt||t instanceof cf||t instanceof aw)}function dw(t,e,n){if(!VR(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=lf(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Rg(t,e,n){if((e=Ye(e))instanceof bu)return e._internalPath;if(typeof e=="string")return hw(t,e);throw ch("Field path arguments must be of type string or ",t,!1,void 0,n)}const r$=new RegExp("[~\\*/\\[\\]]");function hw(t,e,n){if(e.search(r$)>=0)throw ch(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new bu(...e.split("."))._internalPath}catch{throw ch(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ch(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Q($.INVALID_ARGUMENT,a+t+l)}function LR(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Tt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new i$(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(hf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class i$ extends dh{data(){return super.data()}}function hf(t,e){return typeof e=="string"?hw(t,e):e instanceof bu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Q($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fw{}class pw extends fw{}function Ss(t,e,...n){let r=[];e instanceof fw&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof mw).length,a=s.filter(l=>l instanceof ff).length;if(o>1||o>0&&a>0)throw new Q($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class ff extends pw{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ff(e,n,r)}_apply(e){const n=this._parse(e);return UR(e._query,n),new Yr(e.firestore,e.converter,Eg(e._query,n))}_parse(e){const n=Ru(e.firestore);return function(s,o,a,l,u,d,h){let f;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Q($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Wx(h,d);const m=[];for(const w of h)m.push(zx(l,s,w));f={arrayValue:{values:m}}}else f=zx(l,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Wx(h,d),f=n$(a,o,h,d==="in"||d==="not-in");return it.create(u,d,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Kl(t,e,n){const r=e,i=hf("where",t);return ff._create(i,r,n)}class mw extends fw{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new mw(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:qn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)UR(o,l),o=Eg(o,l)}(e._query,n),new Yr(e.firestore,e.converter,Eg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class gw extends pw{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new gw(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new Q($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Q($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Wl(s,o)}(e._query,this._field,this._direction);return new Yr(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new ra(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function jR(t,e="asc"){const n=e,r=hf("orderBy",t);return gw._create(r,n)}class yw extends pw{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new yw(e,n,r)}_apply(e){return new Yr(e.firestore,e.converter,rh(e._query,this._limit,this._limitType))}}function s$(t){return yw._create("limit",t,"F")}function zx(t,e,n){if(typeof(n=Ye(n))=="string"){if(n==="")throw new Q($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ub(e)&&n.indexOf("/")!==-1)throw new Q($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ne.fromString(n));if(!ie.isDocumentKey(r))throw new Q($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return cx(t,new ie(r))}if(n instanceof Tt)return cx(t,n._key);throw new Q($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${lf(n)}.`)}function Wx(t,e){if(!Array.isArray(t)||t.length===0)throw new Q($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function UR(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Q($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Q($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class BR{convertValue(e,n="none"){switch(xs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Es(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw se()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ns(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Je(o.doubleValue));return new aw(s)}convertGeoPoint(e){return new ow(Je(e.latitude),Je(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ov(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Bl(e));default:return null}}convertTimestamp(e){const n=Pi(e);return new ut(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ne.fromString(e);Ce(dR(r));const i=new $l(r.get(1),r.get(3)),s=new ie(r.popFirst(5));return i.isEqual(n)||Br(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vw(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class o$ extends BR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ts(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Tt(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ww extends dh{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new hd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(hf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class hd extends ww{data(e={}){return super.data(e)}}class $R{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new lo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new hd(this._firestore,this._userDataWriter,r.key,r,new lo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Q($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new hd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new lo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new hd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new lo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:a$(a.type),doc:l,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function a$(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return se()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Co(t){t=qt(t,Tt);const e=qt(t.firestore,mr);return GB(Au(e),t._key).then(n=>WR(e,t,n))}class pf extends BR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ts(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Tt(this.firestore,null,n)}}function ku(t){t=qt(t,Yr);const e=qt(t.firestore,mr),n=Au(e),r=new pf(e);return FR(t._query),KB(n,t._query).then(i=>new $R(e,r,t,i))}function Op(t,e,n){t=qt(t,Tt);const r=qt(t.firestore,mr),i=vw(t.converter,e,n);return mf(r,[uw(Ru(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,_t.none())])}function l$(t,e,n,...r){t=qt(t,Tt);const i=qt(t.firestore,mr),s=Ru(i);let o;return o=typeof(e=Ye(e))=="string"||e instanceof bu?DR(s,"updateDoc",t._key,e,n,r):MR(s,"updateDoc",t._key,e),mf(i,[o.toMutation(t._key,_t.exists(!0))])}function mi(t){return mf(qt(t.firestore,mr),[new nf(t._key,_t.none())])}function Hx(t,e){const n=qt(t.firestore,mr),r=Ot(t),i=vw(t.converter,e);return mf(n,[uw(Ru(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,_t.exists(!1))]).then(()=>r)}function zR(t,...e){var n,r,i;t=Ye(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||$x(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if($x(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let l,u,d;if(t instanceof Tt)u=qt(t.firestore,mr),d=Xh(t._key.path),l={next:h=>{e[o]&&e[o](WR(u,t,h))},error:e[o+1],complete:e[o+2]};else{const h=qt(t,Yr);u=qt(h.firestore,mr),d=h._query;const f=new pf(u);l={next:m=>{e[o]&&e[o](new $R(u,f,h,m))},error:e[o+1],complete:e[o+2]},FR(t._query)}return function(f,m,w,_){const I=new iw(_),g=new nw(m,I,w);return f.asyncQueue.enqueueAndForget(async()=>Zv(await uh(f),g)),()=>{I.Za(),f.asyncQueue.enqueueAndForget(async()=>ew(await uh(f),g))}}(Au(u),d,a,l)}function mf(t,e){return function(r,i){const s=new ar;return r.asyncQueue.enqueueAndForget(async()=>MB(await HB(r),i,s)),s.promise}(Au(t),e)}function WR(t,e,n){const r=n.docs.get(e._key),i=new pf(t);return new ww(t,i,e._key,r,new lo(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u$={maxAttempts:5};function ja(t,e){if((t=Ye(t)).firestore!==e)throw new Q($.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c$ extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Ru(n)}get(n){const r=ja(n,this._firestore),i=new o$(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return se();const o=s[0];if(o.isFoundDocument())return new dh(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new dh(this._firestore,i,r._key,null,r.converter);throw se()})}set(n,r,i){const s=ja(n,this._firestore),o=vw(s.converter,r,i),a=uw(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){const o=ja(n,this._firestore);let a;return a=typeof(r=Ye(r))=="string"||r instanceof bu?DR(this._dataReader,"Transaction.update",o._key,r,i,s):MR(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=ja(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=ja(e,this._firestore),r=new pf(this._firestore);return super.get(e).then(i=>new ww(this._firestore,r,n._key,i._document,new lo(!1,!1),n.converter))}}function d$(t,e,n){t=qt(t,mr);const r=Object.assign(Object.assign({},u$),n);return function(s){if(s.maxAttempts<1)throw new Q($.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new ar;return s.asyncQueue.enqueueAndForget(async()=>{const u=await qB(s);new $B(s.asyncQueue,u,a,o,l).au()}),l.promise}(Au(t),i=>e(new c$(t,i)),r)}function HR(){return new cw("serverTimestamp")}(function(e,n=!0){(function(i){na=i})(ea),hr(new Hn("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new mr(new fU(r.getProvider("auth-internal")),new yU(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Q($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $l(u.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),bn(sx,"4.7.3",e),bn(sx,"4.7.3","esm2017")})();const qR="@firebase/installations",_w="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR=1e4,KR=`w:${_w}`,QR="FIS_v2",h$="https://firebaseinstallations.googleapis.com/v1",f$=60*60*1e3,p$="installations",m$="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g$={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Is=new Ps(p$,m$,g$);function YR(t){return t instanceof Xn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XR({projectId:t}){return`${h$}/projects/${t}/installations`}function JR(t){return{token:t.token,requestStatus:2,expiresIn:v$(t.expiresIn),creationTime:Date.now()}}async function ZR(t,e){const r=(await e.json()).error;return Is.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function eP({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function y$(t,{refreshToken:e}){const n=eP(t);return n.append("Authorization",w$(e)),n}async function tP(t){const e=await t();return e.status>=500&&e.status<600?t():e}function v$(t){return Number(t.replace("s","000"))}function w$(t){return`${QR} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _$({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=XR(t),i=eP(t),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={fid:n,authVersion:QR,appId:t.appId,sdkVersion:KR},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await tP(()=>fetch(r,a));if(l.ok){const u=await l.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:JR(u.authToken)}}else throw await ZR("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nP(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E$(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x$=/^[cdef][\w-]{21}$/,Pg="";function T$(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=S$(t);return x$.test(n)?n:Pg}catch{return Pg}}function S$(t){return E$(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gf(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP=new Map;function iP(t,e){const n=gf(t);sP(n,e),I$(n,e)}function sP(t,e){const n=rP.get(t);if(n)for(const r of n)r(e)}function I$(t,e){const n=C$();n&&n.postMessage({key:t,fid:e}),A$()}let ss=null;function C$(){return!ss&&"BroadcastChannel"in self&&(ss=new BroadcastChannel("[Firebase] FID Change"),ss.onmessage=t=>{sP(t.data.key,t.data.fid)}),ss}function A$(){rP.size===0&&ss&&(ss.close(),ss=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b$="firebase-installations-database",R$=1,Cs="firebase-installations-store";let Vp=null;function Ew(){return Vp||(Vp=$A(b$,R$,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Cs)}}})),Vp}async function hh(t,e){const n=gf(t),i=(await Ew()).transaction(Cs,"readwrite"),s=i.objectStore(Cs),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&iP(t,e.fid),e}async function oP(t){const e=gf(t),r=(await Ew()).transaction(Cs,"readwrite");await r.objectStore(Cs).delete(e),await r.done}async function yf(t,e){const n=gf(t),i=(await Ew()).transaction(Cs,"readwrite"),s=i.objectStore(Cs),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&iP(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xw(t){let e;const n=await yf(t.appConfig,r=>{const i=P$(r),s=k$(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===Pg?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function P$(t){const e=t||{fid:T$(),registrationStatus:0};return aP(e)}function k$(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Is.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=N$(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:M$(t)}:{installationEntry:e}}async function N$(t,e){try{const n=await _$(t,e);return hh(t.appConfig,n)}catch(n){throw YR(n)&&n.customData.serverCode===409?await oP(t.appConfig):await hh(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function M$(t){let e=await qx(t.appConfig);for(;e.registrationStatus===1;)await nP(100),e=await qx(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await xw(t);return r||n}return e}function qx(t){return yf(t,e=>{if(!e)throw Is.create("installation-not-found");return aP(e)})}function aP(t){return D$(t)?{fid:t.fid,registrationStatus:0}:t}function D$(t){return t.registrationStatus===1&&t.registrationTime+GR<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O$({appConfig:t,heartbeatServiceProvider:e},n){const r=V$(t,n),i=y$(t,n),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={installation:{sdkVersion:KR,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await tP(()=>fetch(r,a));if(l.ok){const u=await l.json();return JR(u)}else throw await ZR("Generate Auth Token",l)}function V$(t,{fid:e}){return`${XR(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tw(t,e=!1){let n;const r=await yf(t.appConfig,s=>{if(!lP(s))throw Is.create("not-registered");const o=s.authToken;if(!e&&j$(o))return s;if(o.requestStatus===1)return n=L$(t,e),s;{if(!navigator.onLine)throw Is.create("app-offline");const a=B$(s);return n=F$(t,a),a}});return n?await n:r.authToken}async function L$(t,e){let n=await Gx(t.appConfig);for(;n.authToken.requestStatus===1;)await nP(100),n=await Gx(t.appConfig);const r=n.authToken;return r.requestStatus===0?Tw(t,e):r}function Gx(t){return yf(t,e=>{if(!lP(e))throw Is.create("not-registered");const n=e.authToken;return $$(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function F$(t,e){try{const n=await O$(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await hh(t.appConfig,r),n}catch(n){if(YR(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await oP(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await hh(t.appConfig,r)}throw n}}function lP(t){return t!==void 0&&t.registrationStatus===2}function j$(t){return t.requestStatus===2&&!U$(t)}function U$(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+f$}function B$(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function $$(t){return t.requestStatus===1&&t.requestTime+GR<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z$(t){const e=t,{installationEntry:n,registrationPromise:r}=await xw(e);return r?r.catch(console.error):Tw(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W$(t,e=!1){const n=t;return await H$(n),(await Tw(n,e)).token}async function H$(t){const{registrationPromise:e}=await xw(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q$(t){if(!t||!t.options)throw Lp("App Configuration");if(!t.name)throw Lp("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Lp(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Lp(t){return Is.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP="installations",G$="installations-internal",K$=t=>{const e=t.getProvider("app").getImmediate(),n=q$(e),r=ks(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},Q$=t=>{const e=t.getProvider("app").getImmediate(),n=ks(e,uP).getImmediate();return{getId:()=>z$(n),getToken:i=>W$(n,i)}};function Y$(){hr(new Hn(uP,K$,"PUBLIC")),hr(new Hn(G$,Q$,"PRIVATE"))}Y$();bn(qR,_w);bn(qR,_w,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fh="analytics",X$="firebase_id",J$="origin",Z$=60*1e3,ez="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Sw="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on=new Gh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tz={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},gn=new Ps("analytics","Analytics",tz);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nz(t){if(!t.startsWith(Sw)){const e=gn.create("invalid-gtag-resource",{gtagURL:t});return on.warn(e.message),""}return t}function cP(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function rz(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function iz(t,e){const n=rz("firebase-js-sdk-policy",{createScriptURL:nz}),r=document.createElement("script"),i=`${Sw}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function sz(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function oz(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const l=(await cP(n)).find(u=>u.measurementId===i);l&&await e[l.appId]}}catch(a){on.error(a)}t("config",i,s)}async function az(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await cP(n);for(const l of o){const u=a.find(h=>h.measurementId===l),d=u&&e[u.appId];if(d)s.push(d);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){on.error(s)}}function lz(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[a,l]=o;await az(t,e,n,a,l)}else if(s==="config"){const[a,l]=o;await oz(t,e,n,r,a,l)}else if(s==="consent"){const[a,l]=o;t("consent",a,l)}else if(s==="get"){const[a,l,u]=o;t("get",a,l,u)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){on.error(a)}}return i}function uz(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=lz(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function cz(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Sw)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dz=30,hz=1e3;class fz{constructor(e={},n=hz){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const dP=new fz;function pz(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function mz(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:pz(r)},s=ez.replace("{app-id}",n),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw gn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function gz(t,e=dP,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw gn.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw gn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new wz;return setTimeout(async()=>{a.abort()},Z$),hP({appId:r,apiKey:i,measurementId:s},o,a,e)}async function hP(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=dP){var s;const{appId:o,measurementId:a}=t;try{await yz(r,e)}catch(l){if(a)return on.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await mz(t);return i.deleteThrottleMetadata(o),l}catch(l){const u=l;if(!vz(u)){if(i.deleteThrottleMetadata(o),a)return on.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:a};throw l}const d=Number((s=u==null?void 0:u.customData)===null||s===void 0?void 0:s.httpStatus)===503?NE(n,i.intervalMillis,dz):NE(n,i.intervalMillis),h={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return i.setThrottleMetadata(o,h),on.debug(`Calling attemptFetch again in ${d} millis`),hP(t,h,r,i)}}function yz(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(gn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function vz(t){if(!(t instanceof Xn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class wz{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function _z(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ez(){if(FA())try{await jA()}catch(t){return on.warn(gn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return on.warn(gn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function xz(t,e,n,r,i,s,o){var a;const l=gz(t);l.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&on.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>on.error(m)),e.push(l);const u=Ez().then(m=>{if(m)return r.getId()}),[d,h]=await Promise.all([l,u]);cz(s)||iz(s,d.measurementId),i("js",new Date);const f=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return f[J$]="firebase",f.update=!0,h!=null&&(f[X$]=h),i("config",d.measurementId,f),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tz{constructor(e){this.app=e}_delete(){return delete fl[this.app.options.appId],Promise.resolve()}}let fl={},Kx=[];const Qx={};let Fp="dataLayer",Sz="gtag",Yx,fP,Xx=!1;function Iz(){const t=[];if(LA()&&t.push("This is a browser extension environment."),zV()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=gn.create("invalid-analytics-context",{errorInfo:e});on.warn(n.message)}}function Cz(t,e,n){Iz();const r=t.options.appId;if(!r)throw gn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)on.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw gn.create("no-api-key");if(fl[r]!=null)throw gn.create("already-exists",{id:r});if(!Xx){sz(Fp);const{wrappedGtag:s,gtagCore:o}=uz(fl,Kx,Qx,Fp,Sz);fP=s,Yx=o,Xx=!0}return fl[r]=xz(t,Kx,Qx,e,Yx,Fp,n),new Tz(t)}function Az(t=Ev()){t=Ye(t);const e=ks(t,fh);return e.isInitialized()?e.getImmediate():bz(t)}function bz(t,e={}){const n=ks(t,fh);if(n.isInitialized()){const i=n.getImmediate();if(Ll(e,n.getOptions()))return i;throw gn.create("already-initialized")}return n.initialize({options:e})}function Rz(t,e,n,r){t=Ye(t),_z(fP,fl[t.app.options.appId],e,n,r).catch(i=>on.error(i))}const Jx="@firebase/analytics",Zx="0.10.8";function Pz(){hr(new Hn(fh,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return Cz(r,i,n)},"PUBLIC")),hr(new Hn("analytics-internal",t,"PRIVATE")),bn(Jx,Zx),bn(Jx,Zx,"esm2017");function t(e){try{const n=e.getProvider(fh).getImmediate();return{logEvent:(r,i,s)=>Rz(n,r,i,s)}}catch(n){throw gn.create("interop-component-reg-failed",{reason:n})}}}Pz();const kz={apiKey:"AIzaSyBuB1qo6t7mfdBPVkSKS04reB4nCDJzGeE",authDomain:"surchop-9d786.firebaseapp.com",projectId:"surchop-9d786",storageBucket:"surchop-9d786.firebasestorage.app",messagingSenderId:"584554467419",appId:"1:584554467419:web:7237cbf2bf4a9f761e2f7e",measurementId:"G-QBMK24EM00"},Iw=zA(kz),Fe=XB(Iw),Cw=aU(Iw),Nz=new Sr;Az(Iw);const Mz=()=>gj(Cw,Nz),Dz=()=>YF(Cw);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oz=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Vz=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),eT=t=>{const e=Vz(t);return e.charAt(0).toUpperCase()+e.slice(1)},pP=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),Lz=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Fz={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jz=y.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>y.createElement("svg",{ref:l,...Fz,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:pP("lucide",i),...!s&&!Lz(a)&&{"aria-hidden":"true"},...a},[...o.map(([u,d])=>y.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=(t,e)=>{const n=y.forwardRef(({className:r,...i},s)=>y.createElement(jz,{ref:s,iconNode:e,className:pP(`lucide-${Oz(eT(t))}`,`lucide-${t}`,r),...i}));return n.displayName=eT(t),n};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uz=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Bz=Ct("arrow-left",Uz);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $z=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],zz=Ct("camera",$z);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wz=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Hz=Ct("check",Wz);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qz=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Gz=Ct("chevron-right",qz);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Qz=Ct("circle",Kz);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yz=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Xz=Ct("ellipsis-vertical",Yz);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jz=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],Zz=Ct("flag",Jz);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],t3=Ct("heart",e3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],tT=Ct("house",n3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],i3=Ct("log-out",r3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],nT=Ct("play",s3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],a3=Ct("search",o3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],u3=Ct("share-2",l3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Pc=Ct("square-check-big",c3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],mP=Ct("trash-2",d3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],rT=Ct("user-plus",h3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],p3=Ct("x",f3);function m3(){const[t,e]=y.useState(null),[n,r]=y.useState(!1);if(y.useEffect(()=>{(()=>{const a=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;r(a)})(),window.addEventListener("appinstalled",()=>{console.log(" App installe"),r(!0)});const o=a=>{a.preventDefault(),e(a)};return window.addEventListener("beforeinstallprompt",o),()=>{window.removeEventListener("beforeinstallprompt",o),window.removeEventListener("appinstalled",()=>r(!0))}},[]),n||!t)return null;const i=async()=>{t.prompt();const{outcome:s}=await t.userChoice;s==="accepted"?(console.log("Utilisateur a accept linstallation "),r(!0)):console.log("Utilisateur a refus linstallation "),e(null)};return x.jsx("button",{onClick:i,className:"px-3 py-1 rounded-full bg-primary text-primary-foreground text-sm hover:opacity-90 transition",children:"Installer lapp"})}function g3({user:t}){const e=Qr(),n=(t==null?void 0:t.uid)==="EuindCjjeTYx5ABLPCRWdflHy2c2",r=e.pathname==="/jouer",i=({to:o,label:a,icon:l,accent:u=!1})=>{const d=e.pathname===o;return x.jsxs(Eo,{to:o,className:`flex items-center gap-2 px-3 py-2 rounded-md text-sm font-medium transition
          ${d?"bg-primary/10 text-primary":"text-foreground/70 hover:bg-muted hover:text-foreground"}
          ${u?"text-primary font-semibold":""}`,children:[x.jsx(l,{size:16}),a]})},s=({to:o,label:a,icon:l})=>{const u=e.pathname===o;return x.jsxs(Eo,{to:o,className:`flex flex-col items-center justify-center flex-1 py-1.5 text-[11px] transition
                    ${u?"text-primary":"text-muted-foreground hover:text-foreground"}`,children:[x.jsx(l,{size:18}),x.jsx("span",{className:"mt-0.5",children:a})]})};return x.jsxs(x.Fragment,{children:[x.jsx("header",{className:"sticky top-0 z-10 bg-background/80 backdrop-blur-md border-b border-border",children:x.jsxs("div",{className:"max-w-5xl mx-auto px-4 h-14 flex items-center justify-between",children:[x.jsxs(Eo,{to:"/",className:"font-semibold text-base sm:text-lg flex items-center gap-2 text-primary",children:[x.jsx(t3,{className:"text-primary",size:18}),"SURCHOPE"]}),x.jsxs("nav",{className:"hidden md:flex items-center gap-1",children:[x.jsx(i,{to:"/",label:"Couples",icon:tT}),t&&x.jsx(i,{to:"/mes-votes",label:"Mes votes",icon:Pc}),x.jsx(i,{to:"/jouer",label:"Jouer",icon:nT,accent:!0}),t&&x.jsx(i,{to:"/ajouter-couple",label:"Ajouter",icon:rT}),n&&x.jsx(i,{to:"/valider-couples",label:" valider",icon:Pc})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[t?x.jsxs(x.Fragment,{children:[x.jsx("img",{className:"w-8 h-8 rounded-full border border-border object-cover",src:t.photoURL??"",alt:t.displayName??"Avatar"}),x.jsxs("button",{className:"hidden sm:flex items-center gap-1 text-sm text-muted-foreground hover:text-foreground underline-offset-2 hover:underline transition",onClick:()=>Dz(),title:"Se dconnecter",children:[x.jsx(i3,{size:16,className:"text-muted-foreground"}),"Dconnexion"]})]}):x.jsx("button",{className:"px-3 py-1 rounded-full bg-primary text-primary-foreground text-sm hover:opacity-90 transition",onClick:()=>Mz(),children:"Se connecter"}),x.jsx("div",{className:"flex sm:hidden",children:x.jsx(m3,{})})]})]})}),!r&&x.jsx("nav",{className:"md:hidden fixed bottom-0 inset-x-0 z-50 bg-background/95 border-t border-border backdrop-blur",children:x.jsxs("div",{className:"max-w-5xl mx-auto flex items-center justify-around px-2",children:[x.jsx(s,{to:"/",label:"Couples",icon:tT}),t&&x.jsx(s,{to:"/mes-votes",label:"Mes votes",icon:Pc}),x.jsx(s,{to:"/jouer",label:"Jouer",icon:nT}),t&&x.jsx(s,{to:"/ajouter-couple",label:"Ajouter",icon:rT}),n&&x.jsx(s,{to:"/valider-couples",label:"Valider",icon:Pc})]})})]})}const Aw=y.createContext({});function bw(t){const e=y.useRef(null);return e.current===null&&(e.current=t()),e.current}const Rw=typeof window<"u",gP=Rw?y.useLayoutEffect:y.useEffect,vf=y.createContext(null);function Pw(t,e){t.indexOf(e)===-1&&t.push(e)}function kw(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const zr=(t,e,n)=>n>e?e:n<t?t:n;let Nw=()=>{};const Wr={},yP=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function vP(t){return typeof t=="object"&&t!==null}const wP=t=>/^0[^.\s]+$/u.test(t);function Mw(t){let e;return()=>(e===void 0&&(e=t()),e)}const Rn=t=>t,y3=(t,e)=>n=>e(t(n)),Nu=(...t)=>t.reduce(y3),Ql=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class Dw{constructor(){this.subscriptions=[]}add(e){return Pw(this.subscriptions,e),()=>kw(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ur=t=>t*1e3,Cn=t=>t/1e3;function _P(t,e){return e?t*(1e3/e):0}const EP=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,v3=1e-7,w3=12;function _3(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=EP(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>v3&&++a<w3);return o}function Mu(t,e,n,r){if(t===e&&n===r)return Rn;const i=s=>_3(s,0,1,t,n);return s=>s===0||s===1?s:EP(i(s),e,r)}const xP=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,TP=t=>e=>1-t(1-e),SP=Mu(.33,1.53,.69,.99),Ow=TP(SP),IP=xP(Ow),CP=t=>(t*=2)<1?.5*Ow(t):.5*(2-Math.pow(2,-10*(t-1))),Vw=t=>1-Math.sin(Math.acos(t)),AP=TP(Vw),bP=xP(Vw),E3=Mu(.42,0,1,1),x3=Mu(0,0,.58,1),RP=Mu(.42,0,.58,1),T3=t=>Array.isArray(t)&&typeof t[0]!="number",PP=t=>Array.isArray(t)&&typeof t[0]=="number",S3={linear:Rn,easeIn:E3,easeInOut:RP,easeOut:x3,circIn:Vw,circInOut:bP,circOut:AP,backIn:Ow,backInOut:IP,backOut:SP,anticipate:CP},I3=t=>typeof t=="string",iT=t=>{if(PP(t)){Nw(t.length===4);const[e,n,r,i]=t;return Mu(e,n,r,i)}else if(I3(t))return S3[t];return t},kc=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function C3(t,e){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(d){o.has(d)&&(u.schedule(d),t()),d(a)}const u={schedule:(d,h=!1,f=!1)=>{const w=f&&i?n:r;return h&&o.add(d),w.has(d)||w.add(d),d},cancel:d=>{r.delete(d),o.delete(d)},process:d=>{if(a=d,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(l),n.clear(),i=!1,s&&(s=!1,u.process(d))}};return u}const A3=40;function kP(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=kc.reduce((T,R)=>(T[R]=C3(s),T),{}),{setup:a,read:l,resolveKeyframes:u,preUpdate:d,update:h,preRender:f,render:m,postRender:w}=o,_=()=>{const T=Wr.useManualTiming?i.timestamp:performance.now();n=!1,Wr.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(T-i.timestamp,A3),1)),i.timestamp=T,i.isProcessing=!0,a.process(i),l.process(i),u.process(i),d.process(i),h.process(i),f.process(i),m.process(i),w.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(_))},I=()=>{n=!0,r=!0,i.isProcessing||t(_)};return{schedule:kc.reduce((T,R)=>{const N=o[R];return T[R]=(L,C=!1,S=!1)=>(n||I(),N.schedule(L,C,S)),T},{}),cancel:T=>{for(let R=0;R<kc.length;R++)o[kc[R]].cancel(T)},state:i,steps:o}}const{schedule:Ue,cancel:Ni,state:yt,steps:jp}=kP(typeof requestAnimationFrame<"u"?requestAnimationFrame:Rn,!0);let fd;function b3(){fd=void 0}const tn={now:()=>(fd===void 0&&tn.set(yt.isProcessing||Wr.useManualTiming?yt.timestamp:performance.now()),fd),set:t=>{fd=t,queueMicrotask(b3)}},NP=t=>e=>typeof e=="string"&&e.startsWith(t),Lw=NP("--"),R3=NP("var(--"),Fw=t=>R3(t)?P3.test(t.split("/*")[0].trim()):!1,P3=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,oa={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Yl={...oa,transform:t=>zr(0,1,t)},Nc={...oa,default:1},pl=t=>Math.round(t*1e5)/1e5,jw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function k3(t){return t==null}const N3=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Uw=(t,e)=>n=>!!(typeof n=="string"&&N3.test(n)&&n.startsWith(t)||e&&!k3(n)&&Object.prototype.hasOwnProperty.call(n,e)),MP=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(jw);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},M3=t=>zr(0,255,t),Up={...oa,transform:t=>Math.round(M3(t))},os={test:Uw("rgb","red"),parse:MP("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Up.transform(t)+", "+Up.transform(e)+", "+Up.transform(n)+", "+pl(Yl.transform(r))+")"};function D3(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const kg={test:Uw("#"),parse:D3,transform:os.transform},Du=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ri=Du("deg"),cr=Du("%"),le=Du("px"),O3=Du("vh"),V3=Du("vw"),sT={...cr,parse:t=>cr.parse(t)/100,transform:t=>cr.transform(t*100)},uo={test:Uw("hsl","hue"),parse:MP("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+cr.transform(pl(e))+", "+cr.transform(pl(n))+", "+pl(Yl.transform(r))+")"},nt={test:t=>os.test(t)||kg.test(t)||uo.test(t),parse:t=>os.test(t)?os.parse(t):uo.test(t)?uo.parse(t):kg.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?os.transform(t):uo.transform(t),getAnimatableNone:t=>{const e=nt.parse(t);return e.alpha=0,nt.transform(e)}},L3=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function F3(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(jw))==null?void 0:e.length)||0)+(((n=t.match(L3))==null?void 0:n.length)||0)>0}const DP="number",OP="color",j3="var",U3="var(",oT="${}",B3=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Xl(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(B3,l=>(nt.test(l)?(r.color.push(s),i.push(OP),n.push(nt.parse(l))):l.startsWith(U3)?(r.var.push(s),i.push(j3),n.push(l)):(r.number.push(s),i.push(DP),n.push(parseFloat(l))),++s,oT)).split(oT);return{values:n,split:a,indexes:r,types:i}}function VP(t){return Xl(t).values}function LP(t){const{split:e,types:n}=Xl(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===DP?s+=pl(i[o]):a===OP?s+=nt.transform(i[o]):s+=i[o]}return s}}const $3=t=>typeof t=="number"?0:nt.test(t)?nt.getAnimatableNone(t):t;function z3(t){const e=VP(t);return LP(t)(e.map($3))}const Mi={test:F3,parse:VP,createTransformer:LP,getAnimatableNone:z3};function Bp(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function W3({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=Bp(l,a,t+1/3),s=Bp(l,a,t),o=Bp(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function ph(t,e){return n=>n>0?e:t}const ze=(t,e,n)=>t+(e-t)*n,$p=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},H3=[kg,os,uo],q3=t=>H3.find(e=>e.test(t));function aT(t){const e=q3(t);if(!e)return!1;let n=e.parse(t);return e===uo&&(n=W3(n)),n}const lT=(t,e)=>{const n=aT(t),r=aT(e);if(!n||!r)return ph(t,e);const i={...n};return s=>(i.red=$p(n.red,r.red,s),i.green=$p(n.green,r.green,s),i.blue=$p(n.blue,r.blue,s),i.alpha=ze(n.alpha,r.alpha,s),os.transform(i))},Ng=new Set(["none","hidden"]);function G3(t,e){return Ng.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function K3(t,e){return n=>ze(t,e,n)}function Bw(t){return typeof t=="number"?K3:typeof t=="string"?Fw(t)?ph:nt.test(t)?lT:X3:Array.isArray(t)?FP:typeof t=="object"?nt.test(t)?lT:Q3:ph}function FP(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>Bw(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function Q3(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=Bw(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function Y3(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],o=t.indexes[s][r[s]],a=t.values[o]??0;n[i]=a,r[s]++}return n}const X3=(t,e)=>{const n=Mi.createTransformer(e),r=Xl(t),i=Xl(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Ng.has(t)&&!i.values.length||Ng.has(e)&&!r.values.length?G3(t,e):Nu(FP(Y3(r,i),i.values),n):ph(t,e)};function jP(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?ze(t,e,n):Bw(t)(t,e)}const J3=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Ue.update(e,n),stop:()=>Ni(e),now:()=>yt.isProcessing?yt.timestamp:tn.now()}},UP=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},mh=2e4;function $w(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<mh;)e+=n,r=t.next(e);return e>=mh?1/0:e}function Z3(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min($w(r),mh);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:Cn(i)}}const e5=5;function BP(t,e,n){const r=Math.max(e-e5,0);return _P(n-t(r),e-r)}const Ke={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},zp=.001;function t5({duration:t=Ke.duration,bounce:e=Ke.bounce,velocity:n=Ke.velocity,mass:r=Ke.mass}){let i,s,o=1-e;o=zr(Ke.minDamping,Ke.maxDamping,o),t=zr(Ke.minDuration,Ke.maxDuration,Cn(t)),o<1?(i=u=>{const d=u*o,h=d*t,f=d-n,m=Mg(u,o),w=Math.exp(-h);return zp-f/m*w},s=u=>{const h=u*o*t,f=h*n+n,m=Math.pow(o,2)*Math.pow(u,2)*t,w=Math.exp(-h),_=Mg(Math.pow(u,2),o);return(-i(u)+zp>0?-1:1)*((f-m)*w)/_}):(i=u=>{const d=Math.exp(-u*t),h=(u-n)*t+1;return-zp+d*h},s=u=>{const d=Math.exp(-u*t),h=(n-u)*(t*t);return d*h});const a=5/t,l=r5(i,s,a);if(t=ur(t),isNaN(l))return{stiffness:Ke.stiffness,damping:Ke.damping,duration:t};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:t}}}const n5=12;function r5(t,e,n){let r=n;for(let i=1;i<n5;i++)r=r-t(r)/e(r);return r}function Mg(t,e){return t*Math.sqrt(1-e*e)}const i5=["duration","bounce"],s5=["stiffness","damping","mass"];function uT(t,e){return e.some(n=>t[n]!==void 0)}function o5(t){let e={velocity:Ke.velocity,stiffness:Ke.stiffness,damping:Ke.damping,mass:Ke.mass,isResolvedFromDuration:!1,...t};if(!uT(t,s5)&&uT(t,i5))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*zr(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Ke.mass,stiffness:i,damping:s}}else{const n=t5(t);e={...e,...n,mass:Ke.mass},e.isResolvedFromDuration=!0}return e}function gh(t=Ke.visualDuration,e=Ke.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:u,mass:d,duration:h,velocity:f,isResolvedFromDuration:m}=o5({...n,velocity:-Cn(n.velocity||0)}),w=f||0,_=u/(2*Math.sqrt(l*d)),I=o-s,g=Cn(Math.sqrt(l/d)),E=Math.abs(I)<5;r||(r=E?Ke.restSpeed.granular:Ke.restSpeed.default),i||(i=E?Ke.restDelta.granular:Ke.restDelta.default);let T;if(_<1){const N=Mg(g,_);T=L=>{const C=Math.exp(-_*g*L);return o-C*((w+_*g*I)/N*Math.sin(N*L)+I*Math.cos(N*L))}}else if(_===1)T=N=>o-Math.exp(-g*N)*(I+(w+g*I)*N);else{const N=g*Math.sqrt(_*_-1);T=L=>{const C=Math.exp(-_*g*L),S=Math.min(N*L,300);return o-C*((w+_*g*I)*Math.sinh(S)+N*I*Math.cosh(S))/N}}const R={calculatedDuration:m&&h||null,next:N=>{const L=T(N);if(m)a.done=N>=h;else{let C=N===0?w:0;_<1&&(C=N===0?ur(w):BP(T,N,L));const S=Math.abs(C)<=r,A=Math.abs(o-L)<=i;a.done=S&&A}return a.value=a.done?o:L,a},toString:()=>{const N=Math.min($w(R),mh),L=UP(C=>R.next(N*C).value,N,30);return N+"ms "+L},toTransition:()=>{}};return R}gh.applyToOptions=t=>{const e=Z3(t,100,gh);return t.ease=e.ease,t.duration=ur(e.duration),t.type="keyframes",t};function Dg({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:d}){const h=t[0],f={done:!1,value:h},m=S=>a!==void 0&&S<a||l!==void 0&&S>l,w=S=>a===void 0?l:l===void 0||Math.abs(a-S)<Math.abs(l-S)?a:l;let _=n*e;const I=h+_,g=o===void 0?I:o(I);g!==I&&(_=g-h);const E=S=>-_*Math.exp(-S/r),T=S=>g+E(S),R=S=>{const A=E(S),P=T(S);f.done=Math.abs(A)<=u,f.value=f.done?g:P};let N,L;const C=S=>{m(f.value)&&(N=S,L=gh({keyframes:[f.value,w(f.value)],velocity:BP(T,S,f.value),damping:i,stiffness:s,restDelta:u,restSpeed:d}))};return C(0),{calculatedDuration:null,next:S=>{let A=!1;return!L&&N===void 0&&(A=!0,R(S),C(S)),N!==void 0&&S>=N?L.next(S-N):(!A&&R(S),f)}}}function a5(t,e,n){const r=[],i=n||Wr.mix||jP,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Rn:e;a=Nu(l,a)}r.push(a)}return r}function l5(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(Nw(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=a5(e,r,i),l=a.length,u=d=>{if(o&&d<t[0])return e[0];let h=0;if(l>1)for(;h<t.length-2&&!(d<t[h+1]);h++);const f=Ql(t[h],t[h+1],d);return a[h](f)};return n?d=>u(zr(t[0],t[s-1],d)):u}function u5(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Ql(0,e,r);t.push(ze(n,1,i))}}function c5(t){const e=[0];return u5(e,t.length-1),e}function d5(t,e){return t.map(n=>n*e)}function h5(t,e){return t.map(()=>e||RP).splice(0,t.length-1)}function ml({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=T3(r)?r.map(iT):iT(r),s={done:!1,value:e[0]},o=d5(n&&n.length===e.length?n:c5(e),t),a=l5(o,e,{ease:Array.isArray(i)?i:h5(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const f5=t=>t!==null;function zw(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter(f5),a=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const p5={decay:Dg,inertia:Dg,tween:ml,keyframes:ml,spring:gh};function $P(t){typeof t.type=="string"&&(t.type=p5[t.type])}class Ww{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const m5=t=>t/100;class Hw extends Ww{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==tn.now()&&this.tick(tn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;$P(e);const{type:n=ml,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=e;let{keyframes:a}=e;const l=n||ml;l!==ml&&typeof a[0]!="number"&&(this.mixKeyframes=Nu(m5,jP(a[0],a[1])),a=[0,100]);const u=l({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=$w(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=u}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:d,repeat:h,repeatType:f,repeatDelay:m,type:w,onUpdate:_,finalKeyframe:I}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const g=this.currentTime-u*(this.playbackSpeed>=0?1:-1),E=this.playbackSpeed>=0?g<0:g>i;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let T=this.currentTime,R=r;if(h){const S=Math.min(this.currentTime,i)/a;let A=Math.floor(S),P=S%1;!P&&S>=1&&(P=1),P===1&&A--,A=Math.min(A,h+1),!!(A%2)&&(f==="reverse"?(P=1-P,m&&(P-=m/a)):f==="mirror"&&(R=o)),T=zr(0,1,P)*a}const N=E?{done:!1,value:d[0]}:R.next(T);s&&(N.value=s(N.value));let{done:L}=N;!E&&l!==null&&(L=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&L);return C&&w!==Dg&&(N.value=zw(d,this.options,I,this.speed)),_&&_(N.value),C&&this.finish(),N}then(e,n){return this.finished.then(e,n)}get duration(){return Cn(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Cn(e)}get time(){return Cn(this.currentTime)}set time(e){var n;e=ur(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(tn.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Cn(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=J3,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(tn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function g5(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const as=t=>t*180/Math.PI,Og=t=>{const e=as(Math.atan2(t[1],t[0]));return Vg(e)},y5={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Og,rotateZ:Og,skewX:t=>as(Math.atan(t[1])),skewY:t=>as(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Vg=t=>(t=t%360,t<0&&(t+=360),t),cT=Og,dT=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),hT=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),v5={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:dT,scaleY:hT,scale:t=>(dT(t)+hT(t))/2,rotateX:t=>Vg(as(Math.atan2(t[6],t[5]))),rotateY:t=>Vg(as(Math.atan2(-t[2],t[0]))),rotateZ:cT,rotate:cT,skewX:t=>as(Math.atan(t[4])),skewY:t=>as(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Lg(t){return t.includes("scale")?1:0}function Fg(t,e){if(!t||t==="none")return Lg(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=v5,i=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=y5,i=a}if(!i)return Lg(e);const s=r[e],o=i[1].split(",").map(_5);return typeof s=="function"?s(o):o[s]}const w5=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Fg(n,e)};function _5(t){return parseFloat(t.trim())}const aa=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],la=new Set(aa),fT=t=>t===oa||t===le,E5=new Set(["x","y","z"]),x5=aa.filter(t=>!E5.has(t));function T5(t){const e=[];return x5.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const hs={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Fg(e,"x"),y:(t,{transform:e})=>Fg(e,"y")};hs.translateX=hs.x;hs.translateY=hs.y;const fs=new Set;let jg=!1,Ug=!1,Bg=!1;function zP(){if(Ug){const t=Array.from(fs).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=T5(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))==null||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Ug=!1,jg=!1,fs.forEach(t=>t.complete(Bg)),fs.clear()}function WP(){fs.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Ug=!0)})}function S5(){Bg=!0,WP(),zP(),Bg=!1}class qw{constructor(e,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(fs.add(this),jg||(jg=!0,Ue.read(WP),Ue.resolveKeyframes(zP))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const a=r.readValue(n,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}g5(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),fs.delete(this)}cancel(){this.state==="scheduled"&&(fs.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const I5=t=>t.startsWith("--");function C5(t,e,n){I5(e)?t.style.setProperty(e,n):t.style[e]=n}const A5=Mw(()=>window.ScrollTimeline!==void 0),b5={};function R5(t,e){const n=Mw(t);return()=>b5[e]??n()}const HP=R5(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ya=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,pT={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ya([0,.65,.55,1]),circOut:Ya([.55,0,1,.45]),backIn:Ya([.31,.01,.66,-.59]),backOut:Ya([.33,1.53,.69,.99])};function qP(t,e){if(t)return typeof t=="function"?HP()?UP(t,e):"ease-out":PP(t)?Ya(t):Array.isArray(t)?t.map(n=>qP(n,e)||pT.easeOut):pT[t]}function P5(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:l}={},u=void 0){const d={[e]:n};l&&(d.offset=l);const h=qP(a,i);Array.isArray(h)&&(d.easing=h);const f={delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return u&&(f.pseudoElement=u),t.animate(d,f)}function GP(t){return typeof t=="function"&&"applyToOptions"in t}function k5({type:t,...e}){return GP(t)&&HP()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class N5 extends Ww{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,Nw(typeof e.type!="string");const u=k5(e);this.animation=P5(n,r,i,u,s),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const d=zw(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(d):C5(n,r,d),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Cn(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Cn(e)}get time(){return Cn(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=ur(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&A5()?(this.animation.timeline=e,Rn):n(this)}}const KP={anticipate:CP,backInOut:IP,circInOut:bP};function M5(t){return t in KP}function D5(t){typeof t.ease=="string"&&M5(t.ease)&&(t.ease=KP[t.ease])}const mT=10;class O5 extends N5{constructor(e){D5(e),$P(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new Hw({...o,autoplay:!1}),l=ur(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-mT).value,a.sample(l).value,mT),a.stop()}}const gT=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Mi.test(t)||t==="0")&&!t.startsWith("url("));function V5(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function L5(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=gT(i,e),a=gT(s,e);return!o||!a?!1:V5(t)||(n==="spring"||GP(n))&&r}function $g(t){t.duration=0,t.type="keyframes"}const F5=new Set(["opacity","clipPath","filter","transform"]),j5=Mw(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function U5(t){var d;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=t;if(!(((d=e==null?void 0:e.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=e.owner.getProps();return j5()&&n&&F5.has(n)&&(n!=="transform"||!u)&&!l&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const B5=40;class $5 extends Ww{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:l,motionValue:u,element:d,...h}){var w;super(),this.stop=()=>{var _,I;this._animation&&(this._animation.stop(),(_=this.stopTimeline)==null||_.call(this)),(I=this.keyframeResolver)==null||I.cancel()},this.createdAt=tn.now();const f={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:l,motionValue:u,element:d,...h},m=(d==null?void 0:d.KeyframeResolver)||qw;this.keyframeResolver=new m(a,(_,I,g)=>this.onKeyframesResolved(_,I,f,!g),l,u,d),(w=this.keyframeResolver)==null||w.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:l,isHandoff:u,onUpdate:d}=r;this.resolvedAt=tn.now(),L5(e,s,o,a)||((Wr.instantAnimations||!l)&&(d==null||d(zw(e,r,n))),e[0]=e[e.length-1],$g(r),r.repeat=0);const f={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>B5?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},m=!u&&U5(f)?new O5({...f,element:f.motionValue.owner.current}):new Hw(f);m.finished.then(()=>this.notifyFinished()).catch(Rn),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),S5()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const z5=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function W5(t){const e=z5.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function QP(t,e,n=1){const[r,i]=W5(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return yP(o)?parseFloat(o):o}return Fw(i)?QP(i,e,n+1):i}function Gw(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const YP=new Set(["width","height","top","left","right","bottom",...aa]),H5={test:t=>t==="auto",parse:t=>t},XP=t=>e=>e.test(t),JP=[oa,le,cr,ri,V3,O3,H5],yT=t=>JP.find(XP(t));function q5(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||wP(t):!0}const G5=new Set(["brightness","contrast","saturate","opacity"]);function K5(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(jw)||[];if(!r)return t;const i=n.replace(r,"");let s=G5.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const Q5=/\b([a-z-]*)\(.*?\)/gu,zg={...Mi,getAnimatableNone:t=>{const e=t.match(Q5);return e?e.map(K5).join(" "):t}},vT={...oa,transform:Math.round},Y5={rotate:ri,rotateX:ri,rotateY:ri,rotateZ:ri,scale:Nc,scaleX:Nc,scaleY:Nc,scaleZ:Nc,skew:ri,skewX:ri,skewY:ri,distance:le,translateX:le,translateY:le,translateZ:le,x:le,y:le,z:le,perspective:le,transformPerspective:le,opacity:Yl,originX:sT,originY:sT,originZ:le},Kw={borderWidth:le,borderTopWidth:le,borderRightWidth:le,borderBottomWidth:le,borderLeftWidth:le,borderRadius:le,radius:le,borderTopLeftRadius:le,borderTopRightRadius:le,borderBottomRightRadius:le,borderBottomLeftRadius:le,width:le,maxWidth:le,height:le,maxHeight:le,top:le,right:le,bottom:le,left:le,padding:le,paddingTop:le,paddingRight:le,paddingBottom:le,paddingLeft:le,margin:le,marginTop:le,marginRight:le,marginBottom:le,marginLeft:le,backgroundPositionX:le,backgroundPositionY:le,...Y5,zIndex:vT,fillOpacity:Yl,strokeOpacity:Yl,numOctaves:vT},X5={...Kw,color:nt,backgroundColor:nt,outlineColor:nt,fill:nt,stroke:nt,borderColor:nt,borderTopColor:nt,borderRightColor:nt,borderBottomColor:nt,borderLeftColor:nt,filter:zg,WebkitFilter:zg},ZP=t=>X5[t];function e1(t,e){let n=ZP(t);return n!==zg&&(n=Mi),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const J5=new Set(["auto","none","0"]);function Z5(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!J5.has(s)&&Xl(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=e1(n,i)}class e9 extends qw{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),Fw(u))){const d=QP(u,n.current);d!==void 0&&(e[l]=d),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!YP.has(r)||e.length!==2)return;const[i,s]=e,o=yT(i),a=yT(s);if(o!==a)if(fT(o)&&fT(a))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else hs[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||q5(e[i]))&&r.push(i);r.length&&Z5(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=hs[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var a;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=hs[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,u])=>{e.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function t9(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const t1=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function n1(t){return vP(t)&&"offsetHeight"in t}const wT=30,n9=t=>!isNaN(parseFloat(t));class r9{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=tn.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=tn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=n9(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Dw);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ue.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=tn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>wT)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,wT);return _P(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Wo(t,e){return new r9(t,e)}const{schedule:Qw}=kP(queueMicrotask,!1),Vn={x:!1,y:!1};function r1(){return Vn.x||Vn.y}function i9(t){return t==="x"||t==="y"?Vn[t]?null:(Vn[t]=!0,()=>{Vn[t]=!1}):Vn.x||Vn.y?null:(Vn.x=Vn.y=!0,()=>{Vn.x=Vn.y=!1})}function i1(t,e){const n=t9(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function _T(t){return!(t.pointerType==="touch"||r1())}function s9(t,e,n={}){const[r,i,s]=i1(t,n),o=a=>{if(!_T(a))return;const{target:l}=a,u=e(l,a);if(typeof u!="function"||!l)return;const d=h=>{_T(h)&&(u(h),l.removeEventListener("pointerleave",d))};l.addEventListener("pointerleave",d,i)};return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const s1=(t,e)=>e?t===e?!0:s1(t,e.parentElement):!1,Yw=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,o9=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function a9(t){return o9.has(t.tagName)||t.tabIndex!==-1}const pd=new WeakSet;function ET(t){return e=>{e.key==="Enter"&&t(e)}}function Wp(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const l9=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=ET(()=>{if(pd.has(n))return;Wp(n,"down");const i=ET(()=>{Wp(n,"up")}),s=()=>Wp(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function xT(t){return Yw(t)&&!r1()}function u9(t,e,n={}){const[r,i,s]=i1(t,n),o=a=>{const l=a.currentTarget;if(!xT(a))return;pd.add(l);const u=e(l,a),d=(m,w)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),pd.has(l)&&pd.delete(l),xT(m)&&typeof u=="function"&&u(m,{success:w})},h=m=>{d(m,l===window||l===document||n.useGlobalTarget||s1(l,m.target))},f=m=>{d(m,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",f,i)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),n1(a)&&(a.addEventListener("focus",u=>l9(u,i)),!a9(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function o1(t){return vP(t)&&"ownerSVGElement"in t}function c9(t){return o1(t)&&t.tagName==="svg"}const Vt=t=>!!(t&&t.getVelocity),d9=[...JP,nt,Mi],h9=t=>d9.find(XP(t)),Xw=y.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function TT(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function f9(...t){return e=>{let n=!1;const r=t.map(i=>{const s=TT(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():TT(t[i],null)}}}}function p9(...t){return y.useCallback(f9(...t),t)}class m9 extends y.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=n1(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function g9({children:t,isPresent:e,anchorX:n,root:r}){const i=y.useId(),s=y.useRef(null),o=y.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=y.useContext(Xw),l=p9(s,t==null?void 0:t.ref);return y.useInsertionEffect(()=>{const{width:u,height:d,top:h,left:f,right:m}=o.current;if(e||!s.current||!u||!d)return;const w=n==="left"?`left: ${f}`:`right: ${m}`;s.current.dataset.motionPopId=i;const _=document.createElement("style");a&&(_.nonce=a);const I=r??document.head;return I.appendChild(_),_.sheet&&_.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${d}px !important;
            ${w}px !important;
            top: ${h}px !important;
          }
        `),()=>{I.contains(_)&&I.removeChild(_)}},[e]),x.jsx(m9,{isPresent:e,childRef:s,sizeRef:o,children:y.cloneElement(t,{ref:l})})}const y9=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:a,root:l})=>{const u=bw(v9),d=y.useId();let h=!0,f=y.useMemo(()=>(h=!1,{id:d,initial:e,isPresent:n,custom:i,onExitComplete:m=>{u.set(m,!0);for(const w of u.values())if(!w)return;r&&r()},register:m=>(u.set(m,!1),()=>u.delete(m))}),[n,u,r]);return s&&h&&(f={...f}),y.useMemo(()=>{u.forEach((m,w)=>u.set(w,!1))},[n]),y.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),o==="popLayout"&&(t=x.jsx(g9,{isPresent:n,anchorX:a,root:l,children:t})),x.jsx(vf.Provider,{value:f,children:t})};function v9(){return new Map}function a1(t=!0){const e=y.useContext(vf);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=y.useId();y.useEffect(()=>{if(t)return i(s)},[t]);const o=y.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const Mc=t=>t.key||"";function ST(t){const e=[];return y.Children.forEach(t,n=>{y.isValidElement(n)&&e.push(n)}),e}const yh=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:a="left",root:l})=>{const[u,d]=a1(o),h=y.useMemo(()=>ST(t),[t]),f=o&&!u?[]:h.map(Mc),m=y.useRef(!0),w=y.useRef(h),_=bw(()=>new Map),[I,g]=y.useState(h),[E,T]=y.useState(h);gP(()=>{m.current=!1,w.current=h;for(let L=0;L<E.length;L++){const C=Mc(E[L]);f.includes(C)?_.delete(C):_.get(C)!==!0&&_.set(C,!1)}},[E,f.length,f.join("-")]);const R=[];if(h!==I){let L=[...h];for(let C=0;C<E.length;C++){const S=E[C],A=Mc(S);f.includes(A)||(L.splice(C,0,S),R.push(S))}return s==="wait"&&R.length&&(L=R),T(ST(L)),g(h),null}const{forceRender:N}=y.useContext(Aw);return x.jsx(x.Fragment,{children:E.map(L=>{const C=Mc(L),S=o&&!u?!1:h===E||f.includes(C),A=()=>{if(_.has(C))_.set(C,!0);else return;let P=!0;_.forEach(M=>{M||(P=!1)}),P&&(N==null||N(),T(w.current),o&&(d==null||d()),r&&r())};return x.jsx(y9,{isPresent:S,initial:!m.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,root:l,onExitComplete:S?void 0:A,anchorX:a,children:L},C)})})},l1=y.createContext({strict:!1}),IT={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ho={};for(const t in IT)Ho[t]={isEnabled:e=>IT[t].some(n=>!!e[n])};function w9(t){for(const e in t)Ho[e]={...Ho[e],...t[e]}}const _9=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function vh(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||_9.has(t)}let u1=t=>!vh(t);function E9(t){typeof t=="function"&&(u1=e=>e.startsWith("on")?!vh(e):t(e))}try{E9(require("@emotion/is-prop-valid").default)}catch{}function x9(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(u1(i)||n===!0&&vh(i)||!e&&!vh(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const wf=y.createContext({});function _f(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Jl(t){return typeof t=="string"||Array.isArray(t)}const Jw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Zw=["initial",...Jw];function Ef(t){return _f(t.animate)||Zw.some(e=>Jl(t[e]))}function c1(t){return!!(Ef(t)||t.variants)}function T9(t,e){if(Ef(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Jl(n)?n:void 0,animate:Jl(r)?r:void 0}}return t.inherit!==!1?e:{}}function S9(t){const{initial:e,animate:n}=T9(t,y.useContext(wf));return y.useMemo(()=>({initial:e,animate:n}),[CT(e),CT(n)])}function CT(t){return Array.isArray(t)?t.join(" "):t}const Zl={};function I9(t){for(const e in t)Zl[e]=t[e],Lw(e)&&(Zl[e].isCSSVariable=!0)}function d1(t,{layout:e,layoutId:n}){return la.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Zl[t]||t==="opacity")}const C9={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},A9=aa.length;function b9(t,e,n){let r="",i=!0;for(let s=0;s<A9;s++){const o=aa[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const u=t1(a,Kw[o]);if(!l){i=!1;const d=C9[o]||o;r+=`${d}(${u}) `}n&&(e[o]=u)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function e_(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const u=e[l];if(la.has(l)){o=!0;continue}else if(Lw(l)){i[l]=u;continue}else{const d=t1(u,Kw[l]);l.startsWith("origin")?(a=!0,s[l]=d):r[l]=d}}if(e.transform||(o||n?r.transform=b9(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:d=0}=s;r.transformOrigin=`${l} ${u} ${d}`}}const t_=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function h1(t,e,n){for(const r in e)!Vt(e[r])&&!d1(r,n)&&(t[r]=e[r])}function R9({transformTemplate:t},e){return y.useMemo(()=>{const n=t_();return e_(n,e,t),Object.assign({},n.vars,n.style)},[e])}function P9(t,e){const n=t.style||{},r={};return h1(r,n,t),Object.assign(r,R9(t,e)),r}function k9(t,e){const n={},r=P9(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const N9={offset:"stroke-dashoffset",array:"stroke-dasharray"},M9={offset:"strokeDashoffset",array:"strokeDasharray"};function D9(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?N9:M9;t[s.offset]=le.transform(-r);const o=le.transform(e),a=le.transform(n);t[s.array]=`${o} ${a}`}function f1(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...a},l,u,d){if(e_(t,a,u),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:f}=t;h.transform&&(f.transform=h.transform,delete h.transform),(f.transform||h.transformOrigin)&&(f.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),f.transform&&(f.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),i!==void 0&&D9(h,i,s,o,!1)}const p1=()=>({...t_(),attrs:{}}),m1=t=>typeof t=="string"&&t.toLowerCase()==="svg";function O9(t,e,n,r){const i=y.useMemo(()=>{const s=p1();return f1(s,e,m1(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};h1(s,t.style,t),i.style={...s,...i.style}}return i}const V9=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function n_(t){return typeof t!="string"||t.includes("-")?!1:!!(V9.indexOf(t)>-1||/[A-Z]/u.test(t))}function L9(t,e,n,{latestValues:r},i,s=!1){const a=(n_(t)?O9:k9)(e,r,i,t),l=x9(e,typeof t=="string",s),u=t!==y.Fragment?{...l,...a,ref:n}:{},{children:d}=e,h=y.useMemo(()=>Vt(d)?d.get():d,[d]);return y.createElement(t,{...u,children:h})}function AT(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function r_(t,e,n,r){if(typeof e=="function"){const[i,s]=AT(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=AT(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function md(t){return Vt(t)?t.get():t}function F9({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:j9(n,r,i,t),renderState:e()}}function j9(t,e,n,r){const i={},s=r(t,{});for(const f in s)i[f]=md(s[f]);let{initial:o,animate:a}=t;const l=Ef(t),u=c1(t);e&&u&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let d=n?n.initial===!1:!1;d=d||o===!1;const h=d?a:o;if(h&&typeof h!="boolean"&&!_f(h)){const f=Array.isArray(h)?h:[h];for(let m=0;m<f.length;m++){const w=r_(t,f[m]);if(w){const{transitionEnd:_,transition:I,...g}=w;for(const E in g){let T=g[E];if(Array.isArray(T)){const R=d?T.length-1:0;T=T[R]}T!==null&&(i[E]=T)}for(const E in _)i[E]=_[E]}}}return i}const g1=t=>(e,n)=>{const r=y.useContext(wf),i=y.useContext(vf),s=()=>F9(t,e,r,i);return n?s():bw(s)};function i_(t,e,n){var s;const{style:r}=t,i={};for(const o in r)(Vt(r[o])||e.style&&Vt(e.style[o])||d1(o,t)||((s=n==null?void 0:n.getValue(o))==null?void 0:s.liveStyle)!==void 0)&&(i[o]=r[o]);return i}const U9=g1({scrapeMotionValuesFromProps:i_,createRenderState:t_});function y1(t,e,n){const r=i_(t,e,n);for(const i in t)if(Vt(t[i])||Vt(e[i])){const s=aa.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}const B9=g1({scrapeMotionValuesFromProps:y1,createRenderState:p1}),$9=Symbol.for("motionComponentSymbol");function co(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function z9(t,e,n){return y.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):co(n)&&(n.current=r))},[e])}const s_=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),W9="framerAppearId",v1="data-"+s_(W9),w1=y.createContext({});function H9(t,e,n,r,i){var _,I;const{visualElement:s}=y.useContext(wf),o=y.useContext(l1),a=y.useContext(vf),l=y.useContext(Xw).reducedMotion,u=y.useRef(null);r=r||o.renderer,!u.current&&r&&(u.current=r(t,{visualState:e,parent:s,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const d=u.current,h=y.useContext(w1);d&&!d.projection&&i&&(d.type==="html"||d.type==="svg")&&q9(u.current,n,i,h);const f=y.useRef(!1);y.useInsertionEffect(()=>{d&&f.current&&d.update(n,a)});const m=n[v1],w=y.useRef(!!m&&!((_=window.MotionHandoffIsComplete)!=null&&_.call(window,m))&&((I=window.MotionHasOptimisedAnimation)==null?void 0:I.call(window,m)));return gP(()=>{d&&(f.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),w.current&&d.animationState&&d.animationState.animateChanges())}),y.useEffect(()=>{d&&(!w.current&&d.animationState&&d.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var g;(g=window.MotionHandoffMarkAsComplete)==null||g.call(window,m)}),w.current=!1),d.enteringChildren=void 0)}),d}function q9(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u,layoutCrossfade:d}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:_1(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&co(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:l,layoutRoot:u})}function _1(t){if(t)return t.options.allowProjection!==!1?t.projection:_1(t.parent)}function Hp(t,{forwardMotionProps:e=!1}={},n,r){n&&w9(n);const i=n_(t)?B9:U9;function s(a,l){let u;const d={...y.useContext(Xw),...a,layoutId:G9(a)},{isStatic:h}=d,f=S9(a),m=i(a,h);if(!h&&Rw){K9();const w=Q9(d);u=w.MeasureLayout,f.visualElement=H9(t,m,d,r,w.ProjectionNode)}return x.jsxs(wf.Provider,{value:f,children:[u&&f.visualElement?x.jsx(u,{visualElement:f.visualElement,...d}):null,L9(t,a,z9(m,f.visualElement,l),m,h,e)]})}s.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=y.forwardRef(s);return o[$9]=t,o}function G9({layoutId:t}){const e=y.useContext(Aw).id;return e&&t!==void 0?e+"-"+t:t}function K9(t,e){y.useContext(l1).strict}function Q9(t){const{drag:e,layout:n}=Ho;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function Y9(t,e){if(typeof Proxy>"u")return Hp;const n=new Map,r=(s,o)=>Hp(s,o,t,e),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,Hp(o,void 0,t,e)),n.get(o))})}function E1({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function X9({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function J9(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function qp(t){return t===void 0||t===1}function Wg({scale:t,scaleX:e,scaleY:n}){return!qp(t)||!qp(e)||!qp(n)}function Ji(t){return Wg(t)||x1(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function x1(t){return bT(t.x)||bT(t.y)}function bT(t){return t&&t!=="0%"}function wh(t,e,n){const r=t-n,i=e*r;return n+i}function RT(t,e,n,r,i){return i!==void 0&&(t=wh(t,i,r)),wh(t,n,r)+e}function Hg(t,e=0,n=1,r,i){t.min=RT(t.min,e,n,r,i),t.max=RT(t.max,e,n,r,i)}function T1(t,{x:e,y:n}){Hg(t.x,e.translate,e.scale,e.originPoint),Hg(t.y,n.translate,n.scale,n.originPoint)}const PT=.999999999999,kT=1.0000000000001;function Z9(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&fo(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,T1(t,o)),r&&Ji(s.latestValues)&&fo(t,s.latestValues))}e.x<kT&&e.x>PT&&(e.x=1),e.y<kT&&e.y>PT&&(e.y=1)}function ho(t,e){t.min=t.min+e,t.max=t.max+e}function NT(t,e,n,r,i=.5){const s=ze(t.min,t.max,i);Hg(t,e,n,s,r)}function fo(t,e){NT(t.x,e.x,e.scaleX,e.scale,e.originX),NT(t.y,e.y,e.scaleY,e.scale,e.originY)}function S1(t,e){return E1(J9(t.getBoundingClientRect(),e))}function e6(t,e,n){const r=S1(t,n),{scroll:i}=e;return i&&(ho(r.x,i.offset.x),ho(r.y,i.offset.y)),r}const MT=()=>({translate:0,scale:1,origin:0,originPoint:0}),po=()=>({x:MT(),y:MT()}),DT=()=>({min:0,max:0}),Xe=()=>({x:DT(),y:DT()}),qg={current:null},I1={current:!1};function t6(){if(I1.current=!0,!!Rw)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>qg.current=t.matches;t.addEventListener("change",e),e()}else qg.current=!1}const n6=new WeakMap;function r6(t,e,n){for(const r in e){const i=e[r],s=n[r];if(Vt(i))t.addValue(r,i);else if(Vt(s))t.addValue(r,Wo(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,Wo(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const OT=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class i6{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=qw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=tn.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,Ue.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=Ef(n),this.isVariantNode=c1(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in h){const m=h[f];l[f]!==void 0&&Vt(m)&&m.set(l[f])}}mount(e){var n;this.current=e,n6.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),I1.current||t6(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:qg.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Ni(this.notifyUpdate),Ni(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=la.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Ue.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ho){const n=Ho[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Xe()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<OT.length;r++){const i=OT[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=r6(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Wo(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(yP(r)||wP(r))?r=parseFloat(r):!h9(r)&&Mi.test(n)&&(r=e1(e,n)),this.setBaseTarget(e,Vt(r)?r.get():r)),Vt(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=r_(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Vt(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Dw),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){Qw.render(this.render)}}class C1 extends i6{constructor(){super(...arguments),this.KeyframeResolver=e9}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Vt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function A1(t,{style:e,vars:n},r,i){const s=t.style;let o;for(o in e)s[o]=e[o];i==null||i.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function s6(t){return window.getComputedStyle(t)}class o6 extends C1{constructor(){super(...arguments),this.type="html",this.renderInstance=A1}readValueFromInstance(e,n){var r;if(la.has(n))return(r=this.projection)!=null&&r.isProjecting?Lg(n):w5(e,n);{const i=s6(e),s=(Lw(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return S1(e,n)}build(e,n,r){e_(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return i_(e,n,r)}}const b1=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function a6(t,e,n,r){A1(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(b1.has(i)?i:s_(i),e.attrs[i])}class l6 extends C1{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Xe}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(la.has(n)){const r=ZP(n);return r&&r.default||0}return n=b1.has(n)?n:s_(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return y1(e,n,r)}build(e,n,r){f1(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){a6(e,n,r,i)}mount(e){this.isSVGTag=m1(e.tagName),super.mount(e)}}const u6=(t,e)=>n_(t)?new l6(e):new o6(e,{allowProjection:t!==y.Fragment});function Ao(t,e,n){const r=t.getProps();return r_(r,e,n!==void 0?n:r.custom,t)}const Gg=t=>Array.isArray(t);function c6(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Wo(n))}function d6(t){return Gg(t)?t[t.length-1]||0:t}function h6(t,e){const n=Ao(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=d6(s[o]);c6(t,o,a)}}function f6(t){return!!(Vt(t)&&t.add)}function Kg(t,e){const n=t.getValue("willChange");if(f6(n))return n.add(e);if(!n&&Wr.WillChange){const r=new Wr.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function R1(t){return t.props[v1]}const p6=t=>t!==null;function m6(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(p6),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[s]}const g6={type:"spring",stiffness:500,damping:25,restSpeed:10},y6=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),v6={type:"keyframes",duration:.8},w6={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},_6=(t,{keyframes:e})=>e.length>2?v6:la.has(t)?t.startsWith("scale")?y6(e[1]):g6:w6;function E6({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:u,...d}){return!!Object.keys(d).length}const o_=(t,e,n,r={},i,s)=>o=>{const a=Gw(r,t)||{},l=a.delay||r.delay||0;let{elapsed:u=0}=r;u=u-ur(l);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-u,onUpdate:f=>{e.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};E6(a)||Object.assign(d,_6(t,d)),d.duration&&(d.duration=ur(d.duration)),d.repeatDelay&&(d.repeatDelay=ur(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&($g(d),d.delay===0&&(h=!0)),(Wr.instantAnimations||Wr.skipAnimations)&&(h=!0,$g(d),d.delay=0),d.allowFlatten=!a.type&&!a.ease,h&&!s&&e.get()!==void 0){const f=m6(d.keyframes,a);if(f!==void 0){Ue.update(()=>{d.onUpdate(f),d.onComplete()});return}}return a.isSync?new Hw(d):new $5(d)};function x6({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function P1(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=e;r&&(s=r);const l=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const d in a){const h=t.getValue(d,t.latestValues[d]??null),f=a[d];if(f===void 0||u&&x6(u,d))continue;const m={delay:n,...Gw(s||{},d)},w=h.get();if(w!==void 0&&!h.isAnimating&&!Array.isArray(f)&&f===w&&!m.velocity)continue;let _=!1;if(window.MotionHandoffAnimation){const g=R1(t);if(g){const E=window.MotionHandoffAnimation(g,d,Ue);E!==null&&(m.startTime=E,_=!0)}}Kg(t,d),h.start(o_(d,h,f,t.shouldReduceMotion&&YP.has(d)?{type:!1}:m,t,_));const I=h.animation;I&&l.push(I)}return o&&Promise.all(l).then(()=>{Ue.update(()=>{o&&h6(t,o)})}),l}function k1(t,e,n,r=0,i=1){const s=Array.from(t).sort((u,d)=>u.sortNodePosition(d)).indexOf(e),o=t.size,a=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:a-s*r}function Qg(t,e,n={}){var l;const r=Ao(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(P1(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:f}=i;return T6(t,e,u,d,h,f,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[u,d]=a==="beforeChildren"?[s,o]:[o,s];return u().then(()=>d())}else return Promise.all([s(),o(n.delay)])}function T6(t,e,n=0,r=0,i=0,s=1,o){const a=[];for(const l of t.variantChildren)l.notify("AnimationStart",e),a.push(Qg(l,e,{...o,delay:n+(typeof r=="function"?0:r)+k1(t.variantChildren,l,r,i,s)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(a)}function S6(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>Qg(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=Qg(t,e,n);else{const i=typeof e=="function"?Ao(t,e,n.custom):e;r=Promise.all(P1(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function N1(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const I6=Zw.length;function M1(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?M1(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<I6;n++){const r=Zw[n],i=t.props[r];(Jl(i)||i===!1)&&(e[r]=i)}return e}const C6=[...Jw].reverse(),A6=Jw.length;function b6(t){return e=>Promise.all(e.map(({animation:n,options:r})=>S6(t,n,r)))}function R6(t){let e=b6(t),n=VT(),r=!0;const i=l=>(u,d)=>{var f;const h=Ao(t,d,l==="exit"?(f=t.presenceContext)==null?void 0:f.custom:void 0);if(h){const{transition:m,transitionEnd:w,..._}=h;u={...u,..._,...w}}return u};function s(l){e=l(t)}function o(l){const{props:u}=t,d=M1(t.parent)||{},h=[],f=new Set;let m={},w=1/0;for(let I=0;I<A6;I++){const g=C6[I],E=n[g],T=u[g]!==void 0?u[g]:d[g],R=Jl(T),N=g===l?E.isActive:null;N===!1&&(w=I);let L=T===d[g]&&T!==u[g]&&R;if(L&&r&&t.manuallyAnimateOnMount&&(L=!1),E.protectedKeys={...m},!E.isActive&&N===null||!T&&!E.prevProp||_f(T)||typeof T=="boolean")continue;const C=P6(E.prevProp,T);let S=C||g===l&&E.isActive&&!L&&R||I>w&&R,A=!1;const P=Array.isArray(T)?T:[T];let M=P.reduce(i(g),{});N===!1&&(M={});const{prevResolvedValues:V={}}=E,k={...V,...M},oe=te=>{S=!0,f.has(te)&&(A=!0,f.delete(te)),E.needsAnimating[te]=!0;const F=t.getValue(te);F&&(F.liveStyle=!1)};for(const te in k){const F=M[te],B=V[te];if(m.hasOwnProperty(te))continue;let O=!1;Gg(F)&&Gg(B)?O=!N1(F,B):O=F!==B,O?F!=null?oe(te):f.add(te):F!==void 0&&f.has(te)?oe(te):E.protectedKeys[te]=!0}E.prevProp=T,E.prevResolvedValues=M,E.isActive&&(m={...m,...M}),r&&t.blockInitialAnimation&&(S=!1);const me=L&&C;S&&(!me||A)&&h.push(...P.map(te=>{const F={type:g};if(typeof te=="string"&&r&&!me&&t.manuallyAnimateOnMount&&t.parent){const{parent:B}=t,O=Ao(B,te);if(B.enteringChildren&&O){const{delayChildren:D}=O.transition||{};F.delay=k1(B.enteringChildren,t,D)}}return{animation:te,options:F}}))}if(f.size){const I={};if(typeof u.initial!="boolean"){const g=Ao(t,Array.isArray(u.initial)?u.initial[0]:u.initial);g&&g.transition&&(I.transition=g.transition)}f.forEach(g=>{const E=t.getBaseTarget(g),T=t.getValue(g);T&&(T.liveStyle=!0),I[g]=E??null}),h.push({animation:I})}let _=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(_=!1),r=!1,_?e(h):Promise.resolve()}function a(l,u){var h;if(n[l].isActive===u)return Promise.resolve();(h=t.variantChildren)==null||h.forEach(f=>{var m;return(m=f.animationState)==null?void 0:m.setActive(l,u)}),n[l].isActive=u;const d=o(l);for(const f in n)n[f].protectedKeys={};return d}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=VT()}}}function P6(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!N1(e,t):!1}function Gi(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function VT(){return{animate:Gi(!0),whileInView:Gi(),whileHover:Gi(),whileTap:Gi(),whileDrag:Gi(),whileFocus:Gi(),exit:Gi()}}class Bi{constructor(e){this.isMounted=!1,this.node=e}update(){}}class k6 extends Bi{constructor(e){super(e),e.animationState||(e.animationState=R6(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();_f(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let N6=0;class M6 extends Bi{constructor(){super(...arguments),this.id=N6++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const D6={animation:{Feature:k6},exit:{Feature:M6}};function eu(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Ou(t){return{point:{x:t.pageX,y:t.pageY}}}const O6=t=>e=>Yw(e)&&t(e,Ou(e));function gl(t,e,n,r){return eu(t,e,O6(n),r)}const D1=1e-4,V6=1-D1,L6=1+D1,O1=.01,F6=0-O1,j6=0+O1;function Wt(t){return t.max-t.min}function U6(t,e,n){return Math.abs(t-e)<=n}function LT(t,e,n,r=.5){t.origin=r,t.originPoint=ze(e.min,e.max,t.origin),t.scale=Wt(n)/Wt(e),t.translate=ze(n.min,n.max,t.origin)-t.originPoint,(t.scale>=V6&&t.scale<=L6||isNaN(t.scale))&&(t.scale=1),(t.translate>=F6&&t.translate<=j6||isNaN(t.translate))&&(t.translate=0)}function yl(t,e,n,r){LT(t.x,e.x,n.x,r?r.originX:void 0),LT(t.y,e.y,n.y,r?r.originY:void 0)}function FT(t,e,n){t.min=n.min+e.min,t.max=t.min+Wt(e)}function B6(t,e,n){FT(t.x,e.x,n.x),FT(t.y,e.y,n.y)}function jT(t,e,n){t.min=e.min-n.min,t.max=t.min+Wt(e)}function vl(t,e,n){jT(t.x,e.x,n.x),jT(t.y,e.y,n.y)}function xn(t){return[t("x"),t("y")]}const V1=({current:t})=>t?t.ownerDocument.defaultView:null,UT=(t,e)=>Math.abs(t-e);function $6(t,e){const n=UT(t.x,e.x),r=UT(t.y,e.y);return Math.sqrt(n**2+r**2)}class L1{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=Kp(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,w=$6(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!m&&!w)return;const{point:_}=f,{timestamp:I}=yt;this.history.push({..._,timestamp:I});const{onStart:g,onMove:E}=this.handlers;m||(g&&g(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),E&&E(this.lastMoveEvent,f)},this.handlePointerMove=(f,m)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=Gp(m,this.transformPagePoint),Ue.update(this.updatePoint,!0)},this.handlePointerUp=(f,m)=>{this.end();const{onEnd:w,onSessionEnd:_,resumeAnimation:I}=this.handlers;if(this.dragSnapToOrigin&&I&&I(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Kp(f.type==="pointercancel"?this.lastMoveEventInfo:Gp(m,this.transformPagePoint),this.history);this.startEvent&&w&&w(f,g),_&&_(f,g)},!Yw(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const a=Ou(e),l=Gp(a,this.transformPagePoint),{point:u}=l,{timestamp:d}=yt;this.history=[{...u,timestamp:d}];const{onSessionStart:h}=n;h&&h(e,Kp(l,this.history)),this.removeListeners=Nu(gl(this.contextWindow,"pointermove",this.handlePointerMove),gl(this.contextWindow,"pointerup",this.handlePointerUp),gl(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ni(this.updatePoint)}}function Gp(t,e){return e?{point:e(t.point)}:t}function BT(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Kp({point:t},e){return{point:t,delta:BT(t,F1(e)),offset:BT(t,z6(e)),velocity:W6(e,.1)}}function z6(t){return t[0]}function F1(t){return t[t.length-1]}function W6(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=F1(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>ur(e)));)n--;if(!r)return{x:0,y:0};const s=Cn(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function H6(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?ze(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?ze(n,t,r.max):Math.min(t,n)),t}function $T(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function q6(t,{top:e,left:n,bottom:r,right:i}){return{x:$T(t.x,n,i),y:$T(t.y,e,r)}}function zT(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function G6(t,e){return{x:zT(t.x,e.x),y:zT(t.y,e.y)}}function K6(t,e){let n=.5;const r=Wt(t),i=Wt(e);return i>r?n=Ql(e.min,e.max-r,t.min):r>i&&(n=Ql(t.min,t.max-i,e.min)),zr(0,1,n)}function Q6(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Yg=.35;function Y6(t=Yg){return t===!1?t=0:t===!0&&(t=Yg),{x:WT(t,"left","right"),y:WT(t,"top","bottom")}}function WT(t,e,n){return{min:HT(t,e),max:HT(t,n)}}function HT(t,e){return typeof t=="number"?t:t[e]||0}const X6=new WeakMap;class J6{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Xe(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Ou(h).point)},o=(h,f)=>{const{drag:m,dragPropagation:w,onDragStart:_}=this.getProps();if(m&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=i9(m),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),xn(g=>{let E=this.getAxisMotionValue(g).get()||0;if(cr.test(E)){const{projection:T}=this.visualElement;if(T&&T.layout){const R=T.layout.layoutBox[g];R&&(E=Wt(R)*(parseFloat(E)/100))}}this.originPoint[g]=E}),_&&Ue.postRender(()=>_(h,f)),Kg(this.visualElement,"transform");const{animationState:I}=this.visualElement;I&&I.setActive("whileDrag",!0)},a=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f;const{dragPropagation:m,dragDirectionLock:w,onDirectionLock:_,onDrag:I}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:g}=f;if(w&&this.currentDirection===null){this.currentDirection=Z6(g),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",f.point,g),this.updateAxis("y",f.point,g),this.visualElement.render(),I&&I(h,f)},l=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f,this.stop(h,f),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>xn(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)==null?void 0:f.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new L1(e,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:r,contextWindow:V1(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&Ue.postRender(()=>a(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Dc(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=H6(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&co(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=q6(r.layoutBox,e):this.constraints=!1,this.elastic=Y6(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&xn(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=Q6(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!co(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=e6(r,i.root,this.visualElement.getTransformPagePoint());let o=G6(i.layout.layoutBox,s);if(n){const a=n(X9(o));this.hasMutatedConstraints=!!a,a&&(o=E1(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=xn(d=>{if(!Dc(d,n,this.currentDirection))return;let h=l&&l[d]||{};o&&(h={min:0,max:0});const f=i?200:1e6,m=i?40:1e7,w={type:"inertia",velocity:r?e[d]:0,bounceStiffness:f,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(d,w)});return Promise.all(u).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Kg(this.visualElement,e),r.start(o_(e,r,0,n,this.visualElement,!1))}stopAnimation(){xn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){xn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){xn(n=>{const{drag:r}=this.getProps();if(!Dc(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-ze(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!co(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};xn(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=K6({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),xn(o=>{if(!Dc(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(ze(l,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;X6.set(this.visualElement,this);const e=this.visualElement.current,n=gl(e,"pointerdown",l=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();co(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Ue.read(r);const o=eu(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(xn(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=l[d].translate,h.set(h.get()+l[d].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=Yg,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Dc(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Z6(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class eW extends Bi{constructor(e){super(e),this.removeGroupControls=Rn,this.removeListeners=Rn,this.controls=new J6(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Rn}unmount(){this.removeGroupControls(),this.removeListeners()}}const qT=t=>(e,n)=>{t&&Ue.postRender(()=>t(e,n))};class tW extends Bi{constructor(){super(...arguments),this.removePointerDownListener=Rn}onPointerDown(e){this.session=new L1(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:V1(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:qT(e),onStart:qT(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Ue.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=gl(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const gd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function GT(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Ua={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(le.test(t))t=parseFloat(t);else return t;const n=GT(t,e.target.x),r=GT(t,e.target.y);return`${n}% ${r}%`}},nW={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Mi.parse(t);if(i.length>5)return r;const s=Mi.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const u=ze(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),s(i)}};let Qp=!1;class rW extends y.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;I9(iW),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),Qp&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),gd.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,Qp=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Ue.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Qw.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;Qp=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function j1(t){const[e,n]=a1(),r=y.useContext(Aw);return x.jsx(rW,{...t,layoutGroup:r,switchLayoutGroup:y.useContext(w1),isPresent:e,safeToRemove:n})}const iW={borderRadius:{...Ua,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ua,borderTopRightRadius:Ua,borderBottomLeftRadius:Ua,borderBottomRightRadius:Ua,boxShadow:nW};function sW(t,e,n){const r=Vt(t)?t:Wo(t);return r.start(o_("",r,e,n)),r.animation}const oW=(t,e)=>t.depth-e.depth;class aW{constructor(){this.children=[],this.isDirty=!1}add(e){Pw(this.children,e),this.isDirty=!0}remove(e){kw(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(oW),this.isDirty=!1,this.children.forEach(e)}}function lW(t,e){const n=tn.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(Ni(r),t(s-e))};return Ue.setup(r,!0),()=>Ni(r)}const U1=["TopLeft","TopRight","BottomLeft","BottomRight"],uW=U1.length,KT=t=>typeof t=="string"?parseFloat(t):t,QT=t=>typeof t=="number"||le.test(t);function cW(t,e,n,r,i,s){i?(t.opacity=ze(0,n.opacity??1,dW(r)),t.opacityExit=ze(e.opacity??1,0,hW(r))):s&&(t.opacity=ze(e.opacity??1,n.opacity??1,r));for(let o=0;o<uW;o++){const a=`border${U1[o]}Radius`;let l=YT(e,a),u=YT(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||QT(l)===QT(u)?(t[a]=Math.max(ze(KT(l),KT(u),r),0),(cr.test(u)||cr.test(l))&&(t[a]+="%")):t[a]=u}(e.rotate||n.rotate)&&(t.rotate=ze(e.rotate||0,n.rotate||0,r))}function YT(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const dW=B1(0,.5,AP),hW=B1(.5,.95,Rn);function B1(t,e,n){return r=>r<t?0:r>e?1:n(Ql(t,e,r))}function XT(t,e){t.min=e.min,t.max=e.max}function En(t,e){XT(t.x,e.x),XT(t.y,e.y)}function JT(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function ZT(t,e,n,r,i){return t-=e,t=wh(t,1/n,r),i!==void 0&&(t=wh(t,1/i,r)),t}function fW(t,e=0,n=1,r=.5,i,s=t,o=t){if(cr.test(e)&&(e=parseFloat(e),e=ze(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=ze(s.min,s.max,r);t===s&&(a-=e),t.min=ZT(t.min,e,n,a,i),t.max=ZT(t.max,e,n,a,i)}function eS(t,e,[n,r,i],s,o){fW(t,e[n],e[r],e[i],e.scale,s,o)}const pW=["x","scaleX","originX"],mW=["y","scaleY","originY"];function tS(t,e,n,r){eS(t.x,e,pW,n?n.x:void 0,r?r.x:void 0),eS(t.y,e,mW,n?n.y:void 0,r?r.y:void 0)}function nS(t){return t.translate===0&&t.scale===1}function $1(t){return nS(t.x)&&nS(t.y)}function rS(t,e){return t.min===e.min&&t.max===e.max}function gW(t,e){return rS(t.x,e.x)&&rS(t.y,e.y)}function iS(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function z1(t,e){return iS(t.x,e.x)&&iS(t.y,e.y)}function sS(t){return Wt(t.x)/Wt(t.y)}function oS(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class yW{constructor(){this.members=[]}add(e){Pw(this.members,e),e.scheduleRender()}remove(e){if(kw(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function vW(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:h,rotateY:f,skewX:m,skewY:w}=n;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),f&&(r+=`rotateY(${f}deg) `),m&&(r+=`skewX(${m}deg) `),w&&(r+=`skewY(${w}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const Yp=["","X","Y","Z"],wW=1e3;let _W=0;function Xp(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function W1(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=R1(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ue,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&W1(r)}function H1({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=_W++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(TW),this.nodes.forEach(AW),this.nodes.forEach(bW),this.nodes.forEach(SW)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new aW)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Dw),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=o1(o)&&!c9(o),this.instance=o;const{layoutId:a,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),t){let d,h=0;const f=()=>this.root.updateBlockedByResize=!1;Ue.read(()=>{h=window.innerWidth}),t(o,()=>{const m=window.innerWidth;m!==h&&(h=m,this.root.updateBlockedByResize=!0,d&&d(),d=lW(f,250),gd.hasAnimatedSinceResize&&(gd.hasAnimatedSinceResize=!1,this.nodes.forEach(uS)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&u&&(a||l)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:f,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||u.getDefaultTransition()||MW,{onLayoutAnimationStart:_,onLayoutAnimationComplete:I}=u.getProps(),g=!this.targetLayout||!z1(this.targetLayout,m),E=!h&&f;if(this.options.layoutRoot||this.resumeFrom||E||h&&(g||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const T={...Gw(w,"layout"),onPlay:_,onComplete:I};(u.shouldReduceMotion||this.options.layoutRoot)&&(T.delay=0,T.type=!1),this.startAnimation(T),this.setAnimationOrigin(d,E)}else h||uS(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ni(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(RW),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&W1(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(aS);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(lS);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(CW),this.nodes.forEach(EW),this.nodes.forEach(xW)):this.nodes.forEach(lS),this.clearAllSnapshots();const a=tn.now();yt.delta=zr(0,1e3/60,a-yt.timestamp),yt.timestamp=a,yt.isProcessing=!0,jp.update.process(yt),jp.preRender.process(yt),jp.render.process(yt),yt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Qw.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(IW),this.sharedNodes.forEach(PW)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ue.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ue.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Wt(this.snapshot.measuredBox.x)&&!Wt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Xe(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!$1(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&this.instance&&(a||Ji(this.latestValues)||d)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),DW(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return Xe();const a=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(OW))){const{scroll:d}=this.root;d&&(ho(a.x,d.offset.x),ho(a.y,d.offset.y))}return a}removeElementScroll(o){var l;const a=Xe();if(En(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:f}=d;d!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&En(a,o),ho(a.x,h.offset.x),ho(a.y,h.offset.y))}return a}applyTransform(o,a=!1){const l=Xe();En(l,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&fo(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Ji(d.latestValues)&&fo(l,d.latestValues)}return Ji(this.latestValues)&&fo(l,this.latestValues),l}removeTransform(o){const a=Xe();En(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Ji(u.latestValues))continue;Wg(u.latestValues)&&u.updateSnapshot();const d=Xe(),h=u.measurePageBox();En(d,h),tS(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Ji(this.latestValues)&&tS(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==yt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var f;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(f=this.parent)!=null&&f.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=yt.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Xe(),this.relativeTargetOrigin=Xe(),vl(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),En(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Xe(),this.targetWithTransforms=Xe()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),B6(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):En(this.target,this.layout.layoutBox),T1(this.target,this.targetDelta)):En(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Xe(),this.relativeTargetOrigin=Xe(),vl(this.relativeTargetOrigin,this.target,m.target),En(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Wg(this.parent.latestValues)||x1(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var w;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(w=this.parent)!=null&&w.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===yt.timestamp&&(l=!1),l)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;En(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;Z9(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Xe());const{target:m}=o;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(JT(this.prevProjectionDelta.x,this.projectionDelta.x),JT(this.prevProjectionDelta.y,this.projectionDelta.y)),yl(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!oS(this.projectionDelta.x,this.prevProjectionDelta.x)||!oS(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=po(),this.projectionDelta=po(),this.projectionDeltaWithTransform=po()}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},d={...this.latestValues},h=po();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=Xe(),m=l?l.source:void 0,w=this.layout?this.layout.source:void 0,_=m!==w,I=this.getStack(),g=!I||I.members.length<=1,E=!!(_&&!g&&this.options.crossfade===!0&&!this.path.some(NW));this.animationProgress=0;let T;this.mixTargetDelta=R=>{const N=R/1e3;cS(h.x,o.x,N),cS(h.y,o.y,N),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(vl(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),kW(this.relativeTarget,this.relativeTargetOrigin,f,N),T&&gW(this.relativeTarget,T)&&(this.isProjectionDirty=!1),T||(T=Xe()),En(T,this.relativeTarget)),_&&(this.animationValues=d,cW(d,u,this.latestValues,N,E,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,u;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(u=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||u.stop(),this.pendingAnimation&&(Ni(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ue.update(()=>{gd.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Wo(0)),this.currentAnimation=sW(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),o.onUpdate&&o.onUpdate(d)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(wW),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:d}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&q1(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Xe();const h=Wt(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const f=Wt(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}En(a,l),fo(a,d),yl(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new yW),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&Xp("z",o,u,this.animationValues);for(let d=0;d<Yp.length;d++)Xp(`rotate${Yp[d]}`,o,u,this.animationValues),Xp(`skew${Yp[d]}`,o,u,this.animationValues);o.render();for(const d in u)o.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=md(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=md(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Ji(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=vW(this.projectionDeltaWithTransform,this.treeScale,d);l&&(h=l(d,h)),o.transform=h;const{x:f,y:m}=this.projectionDelta;o.transformOrigin=`${f.origin*100}% ${m.origin*100}% 0`,u.animationValues?o.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:o.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const w in Zl){if(d[w]===void 0)continue;const{correct:_,applyTo:I,isCSSVariable:g}=Zl[w],E=h==="none"?d[w]:_(d[w],u);if(I){const T=I.length;for(let R=0;R<T;R++)o[I[R]]=E}else g?this.options.visualElement.renderState.vars[w]=E:o[w]=E}this.options.layoutId&&(o.pointerEvents=u===this?md(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(aS),this.root.sharedNodes.clear()}}}function EW(t){t.updateLayout()}function xW(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?xn(h=>{const f=o?e.measuredBox[h]:e.layoutBox[h],m=Wt(f);f.min=r[h].min,f.max=f.min+m}):q1(s,e.layoutBox,r)&&xn(h=>{const f=o?e.measuredBox[h]:e.layoutBox[h],m=Wt(r[h]);f.max=f.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+m)});const a=po();yl(a,r,e.layoutBox);const l=po();o?yl(l,t.applyTransform(i,!0),e.measuredBox):yl(l,r,e.layoutBox);const u=!$1(a);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:m}=h;if(f&&m){const w=Xe();vl(w,e.layoutBox,f.layoutBox);const _=Xe();vl(_,r,m.layoutBox),z1(w,_)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=_,t.relativeTargetOrigin=w,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function TW(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function SW(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function IW(t){t.clearSnapshot()}function aS(t){t.clearMeasurements()}function lS(t){t.isLayoutDirty=!1}function CW(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function uS(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function AW(t){t.resolveTargetDelta()}function bW(t){t.calcProjection()}function RW(t){t.resetSkewAndRotation()}function PW(t){t.removeLeadSnapshot()}function cS(t,e,n){t.translate=ze(e.translate,0,n),t.scale=ze(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function dS(t,e,n,r){t.min=ze(e.min,n.min,r),t.max=ze(e.max,n.max,r)}function kW(t,e,n,r){dS(t.x,e.x,n.x,r),dS(t.y,e.y,n.y,r)}function NW(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const MW={duration:.45,ease:[.4,0,.1,1]},hS=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),fS=hS("applewebkit/")&&!hS("chrome/")?Math.round:Rn;function pS(t){t.min=fS(t.min),t.max=fS(t.max)}function DW(t){pS(t.x),pS(t.y)}function q1(t,e,n){return t==="position"||t==="preserve-aspect"&&!U6(sS(e),sS(n),.2)}function OW(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const VW=H1({attachResizeListener:(t,e)=>eu(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Jp={current:void 0},G1=H1({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Jp.current){const t=new VW({});t.mount(window),t.setOptions({layoutScroll:!0}),Jp.current=t}return Jp.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),LW={pan:{Feature:tW},drag:{Feature:eW,ProjectionNode:G1,MeasureLayout:j1}};function mS(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Ue.postRender(()=>s(e,Ou(e)))}class FW extends Bi{mount(){const{current:e}=this.node;e&&(this.unmount=s9(e,(n,r)=>(mS(this.node,r,"Start"),i=>mS(this.node,i,"End"))))}unmount(){}}class jW extends Bi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Nu(eu(this.node.current,"focus",()=>this.onFocus()),eu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function gS(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Ue.postRender(()=>s(e,Ou(e)))}class UW extends Bi{mount(){const{current:e}=this.node;e&&(this.unmount=u9(e,(n,r)=>(gS(this.node,r,"Start"),(i,{success:s})=>gS(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Xg=new WeakMap,Zp=new WeakMap,BW=t=>{const e=Xg.get(t.target);e&&e(t)},$W=t=>{t.forEach(BW)};function zW({root:t,...e}){const n=t||document;Zp.has(n)||Zp.set(n,{});const r=Zp.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver($W,{root:t,...e})),r[i]}function WW(t,e,n){const r=zW(e);return Xg.set(t,n),r.observe(t),()=>{Xg.delete(t),r.unobserve(t)}}const HW={some:0,all:1};class qW extends Bi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:HW[i]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=u?d:h;f&&f(l)};return WW(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(GW(e,n))&&this.startObserver()}unmount(){}}function GW({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const KW={inView:{Feature:qW},tap:{Feature:UW},focus:{Feature:jW},hover:{Feature:FW}},QW={layout:{ProjectionNode:G1,MeasureLayout:j1}},YW={...D6,...KW,...LW,...QW},nr=Y9(YW,u6);function xf(){return x.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-primary bg-transparent",children:[x.jsx(nr.img,{src:"/icons/favicon.svg",alt:"Surchope",className:"w-40 h-40 drop-shadow-[0_4px_10px_hsl(var(--primary)/0.4)]",animate:{scale:[1,1.15,1],opacity:[.8,1,.8]},transition:{duration:1.2,ease:"easeInOut",repeat:1/0}}),x.jsx(nr.p,{className:"mt-10 text-xl sm:text-2xl font-semibold text-primary drop-shadow-sm",initial:{opacity:0},animate:{opacity:1},transition:{duration:1.3,repeat:1/0,repeatType:"reverse"},children:"a surchope fort "})]})}function XW({name:t,onClose:e}){const[n,r]=y.useState(!0),[i,s]=y.useState(null);return y.useEffect(()=>{if(!t)return;(async()=>{var a,l,u;try{const d=await fetch(`https://fr.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(t)}`);if(!d.ok)throw new Error("Pas d'info trouve");const h=await d.json();s({title:h.title,summary:h.extract,image:(a=h.thumbnail)==null?void 0:a.source,source:(u=(l=h.content_urls)==null?void 0:l.desktop)==null?void 0:u.page})}catch{s(null)}finally{r(!1)}})()},[t]),x.jsx(yh,{children:x.jsx(nr.div,{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,children:x.jsxs(nr.div,{className:"bg-card text-card-foreground border border-border rounded-2xl p-6 max-w-sm w-full shadow-lg relative overflow-hidden animate-fadeIn",initial:{opacity:0,scale:.9,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:10},transition:{duration:.25,ease:"easeOut"},onClick:o=>o.stopPropagation(),children:[x.jsx("button",{onClick:e,className:"absolute top-3 right-3 p-1 rounded-full text-muted-foreground hover:text-foreground hover:bg-muted transition focus:outline-none focus:ring-2 focus:ring-[hsl(var(--primary))] focus:ring-offset-2",title:"Fermer",children:x.jsx(p3,{size:18})}),x.jsx("div",{className:"min-h-[250px] flex flex-col items-center justify-center text-center",children:x.jsx(yh,{mode:"wait",children:n?x.jsx(nr.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:x.jsx(xf,{})},"loader"):i?x.jsxs(nr.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"flex flex-col items-center text-center",children:[i.image&&x.jsx("img",{src:i.image,alt:i.title,className:"max-w-full max-h-64 rounded-lg mb-3 object-contain border border-border"}),x.jsx("h2",{className:"text-lg font-semibold text-primary mb-1",children:i.title}),x.jsxs("p",{className:"text-sm text-muted-foreground mb-3 leading-relaxed",children:[i.summary.slice(0,200),"..."]}),x.jsx("a",{href:i.source,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:text-primary/80 text-sm font-medium underline underline-offset-2 transition",children:"Voir sur Wikipdia"})]},"content"):x.jsx(nr.p,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center text-muted-foreground",children:"Aucune information trouve "},"noinfo")})})]},"modal")},"backdrop")})}function JW({couple:t,user:e,onDelete:n,compact:r}){const i=(e==null?void 0:e.uid)==="EuindCjjeTYx5ABLPCRWdflHy2c2",s=async o=>{o.stopPropagation();const l=`${window.location.origin}/couple/${t.id}`,u=` Vote pour ce couple sur Surchope : ${t.personA.display_name} & ${t.personB.display_name} `;if(navigator.share)try{await navigator.share({title:"Surchope ",text:u,url:l});return}catch(d){console.log("Partage annul :",d)}};return x.jsxs("div",{className:"flex items-center gap-3 opacity-80 hover:opacity-100 transition",children:[i&&n&&x.jsx("button",{onClick:o=>{o.stopPropagation(),confirm("Supprimer ce couple et les donnes associes ?")&&n(t.id,e.uid)},title:"Supprimer ce couple",className:"p-1.5 rounded-full text-destructive/80 hover:text-destructive focus:outline-none focus:ring-2 focus:ring-[hsl(var(--destructive))]/40 transition active:scale-95",children:x.jsx(mP,{size:18})}),!r&&x.jsx("button",{onClick:s,title:"Partager",className:"p-1.5 rounded-full text-primary hover:text-primary/80 hover:bg-primary/10 transition active:scale-95 focus:outline-none focus:ring-2 focus:ring-[hsl(var(--primary))]/40",children:x.jsx(u3,{size:20,strokeWidth:2.1})})]})}function ZW({couple:t}){const[e,n]=y.useState(0),r=t.countA||0,i=t.countB||0,s=Math.max(1,r+i),o=r/s*100,a=i/s*100,l=r>i,u=i>r,d=Math.max(o,a);return y.useEffect(()=>{const h=e,f=d,m=1e3,w=performance.now(),_=I=>{const g=I-w,E=Math.min(g/m,1),T=1-Math.cos(E*Math.PI/2);n(h+(f-h)*T),E<1&&requestAnimationFrame(_)};requestAnimationFrame(_)},[d]),x.jsxs("div",{className:"w-full mt-3 select-none",children:[x.jsx("div",{className:"relative w-full h-4 bg-muted rounded-full overflow-hidden shadow-inner",children:x.jsx("div",{className:"absolute top-0 bottom-0 bg-primary transition-all duration-300 ease-out rounded-full",style:{width:`${e}%`,left:l?0:void 0,right:u?0:void 0}})}),x.jsx("div",{className:"text-xs mt-2 text-center text-muted-foreground",children:r===i?x.jsx("span",{className:"italic",children:"galit parfaite "}):x.jsxs(x.Fragment,{children:[x.jsx("span",{className:"font-semibold text-primary",children:l?t.personA.display_name:t.personB.display_name})," ","surchope "," ",x.jsxs("span",{className:"text-foreground font-medium",children:[Math.round(d)," %"]})]})})]})}function eH({couple:t,myChoice:e,onlyMyVotes:n,onSelectPerson:r}){const i=(o,a)=>{const l=a==="A"?"ring-primary bg-primary/25 text-primary":"ring-secondary bg-secondary/25 text-secondary";return x.jsxs("div",{className:"flex items-center gap-2 flex-col cursor-pointer relative",onClick:()=>r(o.display_name),children:[x.jsx("div",{className:`absolute w-32 h-32 md:w-40 md:h-40 rounded-full blur-md animate-pulse-ring -z-10 ${l}`}),x.jsx("div",{className:"relative flex items-center justify-center",children:x.jsx("div",{className:"relative w-32 h-32 md:w-40 md:h-40 rounded-full overflow-hidden flex items-center justify-center transition-transform duration-300 bg-muted hover:scale-105 shadow-lg ring-4 ring-white",style:{zIndex:1},children:o.image_url?x.jsx("img",{src:o.image_url,alt:o.display_name,className:"object-cover w-full h-full"}):x.jsx("span",{className:"text-lg font-semibold text-muted-foreground",children:o.display_name[0]})})}),x.jsx("div",{className:"font-medium text-base text-center transition-colors duration-200",children:o.display_name})]},a)},s=e==="A"?`${t.personA.display_name} surchope `:e==="B"?`${t.personB.display_name} surchope `:"galit parfaite ";return x.jsxs(x.Fragment,{children:[x.jsx("style",{children:`
          @keyframes pulse-ring {
            0% { transform: scale(0.9); opacity: 0.6; }
            50% { transform: scale(1.1); opacity: 1; }
            100% { transform: scale(0.9); opacity: 0.6; }
          }
          .animate-pulse-ring {
            animation: pulse-ring 1.6s infinite ease-in-out;
          }
        `}),x.jsxs("div",{className:"flex-1 flex items-center justify-center gap-4 relative",children:[i(t.personA,"A"),x.jsx("span",{className:"text-muted-foreground text-lg font-semibold select-none",children:"vs"}),i(t.personB,"B")]}),x.jsx("div",{className:"w-48 mt-3",children:n?x.jsxs("div",{className:"text-xs text-center text-muted-foreground italic",children:["Pour toi, ",x.jsx("span",{className:"text-primary font-medium",children:s})]}):x.jsx(ZW,{couple:t})})]})}function tH({couple:t,user:e,canVote:n,myChoice:r,onVote:i}){const[s,o]=y.useState(null),a=h=>{!n||!i||(o(h),i(t,h),setTimeout(()=>o(null),700))},l="flex-1 px-3 py-2 rounded-full border font-medium text-sm transition-all duration-200 ease-out active:scale-95 text-center focus:outline-none focus:ring-2 focus:ring-[hsl(var(--primary))]/50 focus:ring-offset-2",u=n?"":"opacity-60 cursor-not-allowed",d=h=>s!==h?"":h==="tie"?"animate-[pop_0.4s_ease-out] bg-secondary/10 border-secondary text-secondary":"animate-[pop_0.4s_ease-out] bg-primary/10 border-primary text-primary shadow-sm";return x.jsxs(x.Fragment,{children:[x.jsx("style",{children:`
          @keyframes pop {
            0% { transform: scale(1); }
            50% { transform: scale(1.12); }
            100% { transform: scale(1); }
          }
        `}),x.jsxs("div",{className:"mt-4 flex gap-3 justify-center w-full",children:[x.jsx("button",{disabled:!n,onClick:()=>a("A"),className:`${l} ${r==="A"?"bg-primary/10 border-primary text-primary":"bg-background border-border text-foreground hover:bg-muted"} ${d("A")} ${u}`,children:t.personA.display_name}),x.jsx("button",{disabled:!n,onClick:()=>a("tie"),className:`${l} max-w-[120px] ${r==="tie"?"bg-secondary/10 border-secondary text-secondary":"bg-background border-border text-muted-foreground hover:bg-muted"} ${d("tie")} ${u}`,children:"galit"}),x.jsx("button",{disabled:!n,onClick:()=>a("B"),className:`${l} ${r==="B"?"bg-primary/10 border-primary text-primary":"bg-background border-border text-foreground hover:bg-muted"} ${d("B")} ${u}`,children:t.personB.display_name})]})]})}function Se(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function yS(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Tf(...t){return e=>{let n=!1;const r=t.map(i=>{const s=yS(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():yS(t[i],null)}}}}function an(...t){return y.useCallback(Tf(...t),t)}function Vu(t,e=[]){let n=[];function r(s,o){const a=y.createContext(o),l=n.length;n=[...n,o];const u=h=>{var g;const{scope:f,children:m,...w}=h,_=((g=f==null?void 0:f[t])==null?void 0:g[l])||a,I=y.useMemo(()=>w,Object.values(w));return x.jsx(_.Provider,{value:I,children:m})};u.displayName=s+"Provider";function d(h,f){var _;const m=((_=f==null?void 0:f[t])==null?void 0:_[l])||a,w=y.useContext(m);if(w)return w;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return[u,d]}const i=()=>{const s=n.map(o=>y.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return y.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,nH(i,...e)]}function nH(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:u})=>{const h=l(s)[`__scope${u}`];return{...a,...h}},{});return y.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var Di=globalThis!=null&&globalThis.document?y.useLayoutEffect:()=>{},rH=fI[" useInsertionEffect ".trim().toString()]||Di;function K1({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,s,o]=iH({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:i;{const d=y.useRef(t!==void 0);y.useEffect(()=>{const h=d.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const u=y.useCallback(d=>{var h;if(a){const f=sH(d)?d(t):d;f!==t&&((h=o.current)==null||h.call(o,f))}else s(d)},[a,t,s,o]);return[l,u]}function iH({defaultProp:t,onChange:e}){const[n,r]=y.useState(t),i=y.useRef(n),s=y.useRef(e);return rH(()=>{s.current=e},[e]),y.useEffect(()=>{var o;i.current!==n&&((o=s.current)==null||o.call(s,n),i.current=n)},[n,i]),[n,r,s]}function sH(t){return typeof t=="function"}function _h(t){const e=oH(t),n=y.forwardRef((r,i)=>{const{children:s,...o}=r,a=y.Children.toArray(s),l=a.find(lH);if(l){const u=l.props.children,d=a.map(h=>h===l?y.Children.count(u)>1?y.Children.only(null):y.isValidElement(u)?u.props.children:null:h);return x.jsx(e,{...o,ref:i,children:y.isValidElement(u)?y.cloneElement(u,void 0,d):null})}return x.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function oH(t){const e=y.forwardRef((n,r)=>{const{children:i,...s}=n;if(y.isValidElement(i)){const o=cH(i),a=uH(s,i.props);return i.type!==y.Fragment&&(a.ref=r?Tf(r,o):o),y.cloneElement(i,a)}return y.Children.count(i)>1?y.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var aH=Symbol("radix.slottable");function lH(t){return y.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===aH}function uH(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function cH(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var dH=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Qt=dH.reduce((t,e)=>{const n=_h(`Primitive.${e}`),r=y.forwardRef((i,s)=>{const{asChild:o,...a}=i,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),x.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function Q1(t,e){t&&zh.flushSync(()=>t.dispatchEvent(e))}function Y1(t){const e=t+"CollectionProvider",[n,r]=Vu(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=_=>{const{scope:I,children:g}=_,E=Er.useRef(null),T=Er.useRef(new Map).current;return x.jsx(i,{scope:I,itemMap:T,collectionRef:E,children:g})};o.displayName=e;const a=t+"CollectionSlot",l=_h(a),u=Er.forwardRef((_,I)=>{const{scope:g,children:E}=_,T=s(a,g),R=an(I,T.collectionRef);return x.jsx(l,{ref:R,children:E})});u.displayName=a;const d=t+"CollectionItemSlot",h="data-radix-collection-item",f=_h(d),m=Er.forwardRef((_,I)=>{const{scope:g,children:E,...T}=_,R=Er.useRef(null),N=an(I,R),L=s(d,g);return Er.useEffect(()=>(L.itemMap.set(R,{ref:R,...T}),()=>void L.itemMap.delete(R))),x.jsx(f,{[h]:"",ref:N,children:E})});m.displayName=d;function w(_){const I=s(t+"CollectionConsumer",_);return Er.useCallback(()=>{const E=I.collectionRef.current;if(!E)return[];const T=Array.from(E.querySelectorAll(`[${h}]`));return Array.from(I.itemMap.values()).sort((L,C)=>T.indexOf(L.ref.current)-T.indexOf(C.ref.current))},[I.collectionRef,I.itemMap])}return[{Provider:o,Slot:u,ItemSlot:m},w,r]}var hH=y.createContext(void 0);function X1(t){const e=y.useContext(hH);return t||e||"ltr"}function Hr(t){const e=y.useRef(t);return y.useEffect(()=>{e.current=t}),y.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function fH(t,e=globalThis==null?void 0:globalThis.document){const n=Hr(t);y.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var pH="DismissableLayer",Jg="dismissableLayer.update",mH="dismissableLayer.pointerDownOutside",gH="dismissableLayer.focusOutside",vS,J1=y.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Z1=y.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,u=y.useContext(J1),[d,h]=y.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=y.useState({}),w=an(e,C=>h(C)),_=Array.from(u.layers),[I]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),g=_.indexOf(I),E=d?_.indexOf(d):-1,T=u.layersWithOutsidePointerEventsDisabled.size>0,R=E>=g,N=wH(C=>{const S=C.target,A=[...u.branches].some(P=>P.contains(S));!R||A||(i==null||i(C),o==null||o(C),C.defaultPrevented||a==null||a())},f),L=_H(C=>{const S=C.target;[...u.branches].some(P=>P.contains(S))||(s==null||s(C),o==null||o(C),C.defaultPrevented||a==null||a())},f);return fH(C=>{E===u.layers.size-1&&(r==null||r(C),!C.defaultPrevented&&a&&(C.preventDefault(),a()))},f),y.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(vS=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),wS(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=vS)}},[d,f,n,u]),y.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),wS())},[d,u]),y.useEffect(()=>{const C=()=>m({});return document.addEventListener(Jg,C),()=>document.removeEventListener(Jg,C)},[]),x.jsx(Qt.div,{...l,ref:w,style:{pointerEvents:T?R?"auto":"none":void 0,...t.style},onFocusCapture:Se(t.onFocusCapture,L.onFocusCapture),onBlurCapture:Se(t.onBlurCapture,L.onBlurCapture),onPointerDownCapture:Se(t.onPointerDownCapture,N.onPointerDownCapture)})});Z1.displayName=pH;var yH="DismissableLayerBranch",vH=y.forwardRef((t,e)=>{const n=y.useContext(J1),r=y.useRef(null),i=an(e,r);return y.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),x.jsx(Qt.div,{...t,ref:i})});vH.displayName=yH;function wH(t,e=globalThis==null?void 0:globalThis.document){const n=Hr(t),r=y.useRef(!1),i=y.useRef(()=>{});return y.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){ek(mH,n,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function _H(t,e=globalThis==null?void 0:globalThis.document){const n=Hr(t),r=y.useRef(!1);return y.useEffect(()=>{const i=s=>{s.target&&!r.current&&ek(gH,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function wS(){const t=new CustomEvent(Jg);document.dispatchEvent(t)}function ek(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?Q1(i,s):i.dispatchEvent(s)}var em=0;function EH(){y.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??_S()),document.body.insertAdjacentElement("beforeend",t[1]??_S()),em++,()=>{em===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),em--}},[])}function _S(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var tm="focusScope.autoFocusOnMount",nm="focusScope.autoFocusOnUnmount",ES={bubbles:!1,cancelable:!0},xH="FocusScope",tk=y.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,l]=y.useState(null),u=Hr(i),d=Hr(s),h=y.useRef(null),f=an(e,_=>l(_)),m=y.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;y.useEffect(()=>{if(r){let _=function(T){if(m.paused||!a)return;const R=T.target;a.contains(R)?h.current=R:ii(h.current,{select:!0})},I=function(T){if(m.paused||!a)return;const R=T.relatedTarget;R!==null&&(a.contains(R)||ii(h.current,{select:!0}))},g=function(T){if(document.activeElement===document.body)for(const N of T)N.removedNodes.length>0&&ii(a)};document.addEventListener("focusin",_),document.addEventListener("focusout",I);const E=new MutationObserver(g);return a&&E.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",_),document.removeEventListener("focusout",I),E.disconnect()}}},[r,a,m.paused]),y.useEffect(()=>{if(a){TS.add(m);const _=document.activeElement;if(!a.contains(_)){const g=new CustomEvent(tm,ES);a.addEventListener(tm,u),a.dispatchEvent(g),g.defaultPrevented||(TH(bH(nk(a)),{select:!0}),document.activeElement===_&&ii(a))}return()=>{a.removeEventListener(tm,u),setTimeout(()=>{const g=new CustomEvent(nm,ES);a.addEventListener(nm,d),a.dispatchEvent(g),g.defaultPrevented||ii(_??document.body,{select:!0}),a.removeEventListener(nm,d),TS.remove(m)},0)}}},[a,u,d,m]);const w=y.useCallback(_=>{if(!n&&!r||m.paused)return;const I=_.key==="Tab"&&!_.altKey&&!_.ctrlKey&&!_.metaKey,g=document.activeElement;if(I&&g){const E=_.currentTarget,[T,R]=SH(E);T&&R?!_.shiftKey&&g===R?(_.preventDefault(),n&&ii(T,{select:!0})):_.shiftKey&&g===T&&(_.preventDefault(),n&&ii(R,{select:!0})):g===E&&_.preventDefault()}},[n,r,m.paused]);return x.jsx(Qt.div,{tabIndex:-1,...o,ref:f,onKeyDown:w})});tk.displayName=xH;function TH(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(ii(r,{select:e}),document.activeElement!==n)return}function SH(t){const e=nk(t),n=xS(e,t),r=xS(e.reverse(),t);return[n,r]}function nk(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function xS(t,e){for(const n of t)if(!IH(n,{upTo:e}))return n}function IH(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function CH(t){return t instanceof HTMLInputElement&&"select"in t}function ii(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&CH(t)&&e&&t.select()}}var TS=AH();function AH(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=SS(t,e),t.unshift(e)},remove(e){var n;t=SS(t,e),(n=t[0])==null||n.resume()}}}function SS(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function bH(t){return t.filter(e=>e.tagName!=="A")}var RH=fI[" useId ".trim().toString()]||(()=>{}),PH=0;function Zg(t){const[e,n]=y.useState(RH());return Di(()=>{n(r=>r??String(PH++))},[t]),e?`radix-${e}`:""}const kH=["top","right","bottom","left"],Oi=Math.min,dn=Math.max,Eh=Math.round,Oc=Math.floor,dr=t=>({x:t,y:t}),NH={left:"right",right:"left",bottom:"top",top:"bottom"},MH={start:"end",end:"start"};function ey(t,e,n){return dn(t,Oi(e,n))}function qr(t,e){return typeof t=="function"?t(e):t}function Gr(t){return t.split("-")[0]}function ua(t){return t.split("-")[1]}function a_(t){return t==="x"?"y":"x"}function l_(t){return t==="y"?"height":"width"}const DH=new Set(["top","bottom"]);function rr(t){return DH.has(Gr(t))?"y":"x"}function u_(t){return a_(rr(t))}function OH(t,e,n){n===void 0&&(n=!1);const r=ua(t),i=u_(t),s=l_(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=xh(o)),[o,xh(o)]}function VH(t){const e=xh(t);return[ty(t),e,ty(e)]}function ty(t){return t.replace(/start|end/g,e=>MH[e])}const IS=["left","right"],CS=["right","left"],LH=["top","bottom"],FH=["bottom","top"];function jH(t,e,n){switch(t){case"top":case"bottom":return n?e?CS:IS:e?IS:CS;case"left":case"right":return e?LH:FH;default:return[]}}function UH(t,e,n,r){const i=ua(t);let s=jH(Gr(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(ty)))),s}function xh(t){return t.replace(/left|right|bottom|top/g,e=>NH[e])}function BH(t){return{top:0,right:0,bottom:0,left:0,...t}}function rk(t){return typeof t!="number"?BH(t):{top:t,right:t,bottom:t,left:t}}function Th(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function AS(t,e,n){let{reference:r,floating:i}=t;const s=rr(e),o=u_(e),a=l_(o),l=Gr(e),u=s==="y",d=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,f=r[a]/2-i[a]/2;let m;switch(l){case"top":m={x:d,y:r.y-i.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:h};break;case"left":m={x:r.x-i.width,y:h};break;default:m={x:r.x,y:r.y}}switch(ua(e)){case"start":m[o]-=f*(n&&u?-1:1);break;case"end":m[o]+=f*(n&&u?-1:1);break}return m}const $H=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:d,y:h}=AS(u,r,l),f=r,m={},w=0;for(let _=0;_<a.length;_++){const{name:I,fn:g}=a[_],{x:E,y:T,data:R,reset:N}=await g({x:d,y:h,initialPlacement:r,placement:f,strategy:i,middlewareData:m,rects:u,platform:o,elements:{reference:t,floating:e}});d=E??d,h=T??h,m={...m,[I]:{...m[I],...R}},N&&w<=50&&(w++,typeof N=="object"&&(N.placement&&(f=N.placement),N.rects&&(u=N.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):N.rects),{x:d,y:h}=AS(u,f,l)),_=-1)}return{x:d,y:h,placement:f,strategy:i,middlewareData:m}};async function tu(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:m=0}=qr(e,t),w=rk(m),I=a[f?h==="floating"?"reference":"floating":h],g=Th(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(I)))==null||n?I:I.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:d,strategy:l})),E=h==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,T=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),R=await(s.isElement==null?void 0:s.isElement(T))?await(s.getScale==null?void 0:s.getScale(T))||{x:1,y:1}:{x:1,y:1},N=Th(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:E,offsetParent:T,strategy:l}):E);return{top:(g.top-N.top+w.top)/R.y,bottom:(N.bottom-g.bottom+w.bottom)/R.y,left:(g.left-N.left+w.left)/R.x,right:(N.right-g.right+w.right)/R.x}}const zH=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:u,padding:d=0}=qr(t,e)||{};if(u==null)return{};const h=rk(d),f={x:n,y:r},m=u_(i),w=l_(m),_=await o.getDimensions(u),I=m==="y",g=I?"top":"left",E=I?"bottom":"right",T=I?"clientHeight":"clientWidth",R=s.reference[w]+s.reference[m]-f[m]-s.floating[w],N=f[m]-s.reference[m],L=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let C=L?L[T]:0;(!C||!await(o.isElement==null?void 0:o.isElement(L)))&&(C=a.floating[T]||s.floating[w]);const S=R/2-N/2,A=C/2-_[w]/2-1,P=Oi(h[g],A),M=Oi(h[E],A),V=P,k=C-_[w]-M,oe=C/2-_[w]/2+S,me=ey(V,oe,k),ae=!l.arrow&&ua(i)!=null&&oe!==me&&s.reference[w]/2-(oe<V?P:M)-_[w]/2<0,te=ae?oe<V?oe-V:oe-k:0;return{[m]:f[m]+te,data:{[m]:me,centerOffset:oe-me-te,...ae&&{alignmentOffset:te}},reset:ae}}}),WH=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:u}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:_=!0,...I}=qr(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const g=Gr(i),E=rr(a),T=Gr(a)===a,R=await(l.isRTL==null?void 0:l.isRTL(u.floating)),N=f||(T||!_?[xh(a)]:VH(a)),L=w!=="none";!f&&L&&N.push(...UH(a,_,w,R));const C=[a,...N],S=await tu(e,I),A=[];let P=((r=s.flip)==null?void 0:r.overflows)||[];if(d&&A.push(S[g]),h){const oe=OH(i,o,R);A.push(S[oe[0]],S[oe[1]])}if(P=[...P,{placement:i,overflows:A}],!A.every(oe=>oe<=0)){var M,V;const oe=(((M=s.flip)==null?void 0:M.index)||0)+1,me=C[oe];if(me&&(!(h==="alignment"?E!==rr(me):!1)||P.every(F=>rr(F.placement)===E?F.overflows[0]>0:!0)))return{data:{index:oe,overflows:P},reset:{placement:me}};let ae=(V=P.filter(te=>te.overflows[0]<=0).sort((te,F)=>te.overflows[1]-F.overflows[1])[0])==null?void 0:V.placement;if(!ae)switch(m){case"bestFit":{var k;const te=(k=P.filter(F=>{if(L){const B=rr(F.placement);return B===E||B==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(B=>B>0).reduce((B,O)=>B+O,0)]).sort((F,B)=>F[1]-B[1])[0])==null?void 0:k[0];te&&(ae=te);break}case"initialPlacement":ae=a;break}if(i!==ae)return{reset:{placement:ae}}}return{}}}};function bS(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function RS(t){return kH.some(e=>t[e]>=0)}const HH=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=qr(t,e);switch(r){case"referenceHidden":{const s=await tu(e,{...i,elementContext:"reference"}),o=bS(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:RS(o)}}}case"escaped":{const s=await tu(e,{...i,altBoundary:!0}),o=bS(s,n.floating);return{data:{escapedOffsets:o,escaped:RS(o)}}}default:return{}}}}},ik=new Set(["left","top"]);async function qH(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Gr(n),a=ua(n),l=rr(n)==="y",u=ik.has(o)?-1:1,d=s&&l?-1:1,h=qr(e,t);let{mainAxis:f,crossAxis:m,alignmentAxis:w}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof w=="number"&&(m=a==="end"?w*-1:w),l?{x:m*d,y:f*u}:{x:f*u,y:m*d}}const GH=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await qH(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},KH=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:I=>{let{x:g,y:E}=I;return{x:g,y:E}}},...l}=qr(t,e),u={x:n,y:r},d=await tu(e,l),h=rr(Gr(i)),f=a_(h);let m=u[f],w=u[h];if(s){const I=f==="y"?"top":"left",g=f==="y"?"bottom":"right",E=m+d[I],T=m-d[g];m=ey(E,m,T)}if(o){const I=h==="y"?"top":"left",g=h==="y"?"bottom":"right",E=w+d[I],T=w-d[g];w=ey(E,w,T)}const _=a.fn({...e,[f]:m,[h]:w});return{..._,data:{x:_.x-n,y:_.y-r,enabled:{[f]:s,[h]:o}}}}}},QH=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=qr(t,e),d={x:n,y:r},h=rr(i),f=a_(h);let m=d[f],w=d[h];const _=qr(a,e),I=typeof _=="number"?{mainAxis:_,crossAxis:0}:{mainAxis:0,crossAxis:0,..._};if(l){const T=f==="y"?"height":"width",R=s.reference[f]-s.floating[T]+I.mainAxis,N=s.reference[f]+s.reference[T]-I.mainAxis;m<R?m=R:m>N&&(m=N)}if(u){var g,E;const T=f==="y"?"width":"height",R=ik.has(Gr(i)),N=s.reference[h]-s.floating[T]+(R&&((g=o.offset)==null?void 0:g[h])||0)+(R?0:I.crossAxis),L=s.reference[h]+s.reference[T]+(R?0:((E=o.offset)==null?void 0:E[h])||0)-(R?I.crossAxis:0);w<N?w=N:w>L&&(w=L)}return{[f]:m,[h]:w}}}},YH=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...u}=qr(t,e),d=await tu(e,u),h=Gr(i),f=ua(i),m=rr(i)==="y",{width:w,height:_}=s.floating;let I,g;h==="top"||h==="bottom"?(I=h,g=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(g=h,I=f==="end"?"top":"bottom");const E=_-d.top-d.bottom,T=w-d.left-d.right,R=Oi(_-d[I],E),N=Oi(w-d[g],T),L=!e.middlewareData.shift;let C=R,S=N;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(S=T),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(C=E),L&&!f){const P=dn(d.left,0),M=dn(d.right,0),V=dn(d.top,0),k=dn(d.bottom,0);m?S=w-2*(P!==0||M!==0?P+M:dn(d.left,d.right)):C=_-2*(V!==0||k!==0?V+k:dn(d.top,d.bottom))}await l({...e,availableWidth:S,availableHeight:C});const A=await o.getDimensions(a.floating);return w!==A.width||_!==A.height?{reset:{rects:!0}}:{}}}};function Sf(){return typeof window<"u"}function ca(t){return sk(t)?(t.nodeName||"").toLowerCase():"#document"}function yn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function yr(t){var e;return(e=(sk(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function sk(t){return Sf()?t instanceof Node||t instanceof yn(t).Node:!1}function Gn(t){return Sf()?t instanceof Element||t instanceof yn(t).Element:!1}function gr(t){return Sf()?t instanceof HTMLElement||t instanceof yn(t).HTMLElement:!1}function PS(t){return!Sf()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof yn(t).ShadowRoot}const XH=new Set(["inline","contents"]);function Lu(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Kn(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!XH.has(i)}const JH=new Set(["table","td","th"]);function ZH(t){return JH.has(ca(t))}const eq=[":popover-open",":modal"];function If(t){return eq.some(e=>{try{return t.matches(e)}catch{return!1}})}const tq=["transform","translate","scale","rotate","perspective"],nq=["transform","translate","scale","rotate","perspective","filter"],rq=["paint","layout","strict","content"];function c_(t){const e=d_(),n=Gn(t)?Kn(t):t;return tq.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||nq.some(r=>(n.willChange||"").includes(r))||rq.some(r=>(n.contain||"").includes(r))}function iq(t){let e=Vi(t);for(;gr(e)&&!qo(e);){if(c_(e))return e;if(If(e))return null;e=Vi(e)}return null}function d_(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const sq=new Set(["html","body","#document"]);function qo(t){return sq.has(ca(t))}function Kn(t){return yn(t).getComputedStyle(t)}function Cf(t){return Gn(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Vi(t){if(ca(t)==="html")return t;const e=t.assignedSlot||t.parentNode||PS(t)&&t.host||yr(t);return PS(e)?e.host:e}function ok(t){const e=Vi(t);return qo(e)?t.ownerDocument?t.ownerDocument.body:t.body:gr(e)&&Lu(e)?e:ok(e)}function nu(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=ok(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=yn(i);if(s){const a=ny(o);return e.concat(o,o.visualViewport||[],Lu(i)?i:[],a&&n?nu(a):[])}return e.concat(i,nu(i,[],n))}function ny(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function ak(t){const e=Kn(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=gr(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=Eh(n)!==s||Eh(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function h_(t){return Gn(t)?t:t.contextElement}function bo(t){const e=h_(t);if(!gr(e))return dr(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=ak(e);let o=(s?Eh(n.width):n.width)/r,a=(s?Eh(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const oq=dr(0);function lk(t){const e=yn(t);return!d_()||!e.visualViewport?oq:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function aq(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==yn(t)?!1:e}function As(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=h_(t);let o=dr(1);e&&(r?Gn(r)&&(o=bo(r)):o=bo(t));const a=aq(s,n,r)?lk(s):dr(0);let l=(i.left+a.x)/o.x,u=(i.top+a.y)/o.y,d=i.width/o.x,h=i.height/o.y;if(s){const f=yn(s),m=r&&Gn(r)?yn(r):r;let w=f,_=ny(w);for(;_&&r&&m!==w;){const I=bo(_),g=_.getBoundingClientRect(),E=Kn(_),T=g.left+(_.clientLeft+parseFloat(E.paddingLeft))*I.x,R=g.top+(_.clientTop+parseFloat(E.paddingTop))*I.y;l*=I.x,u*=I.y,d*=I.x,h*=I.y,l+=T,u+=R,w=yn(_),_=ny(w)}}return Th({width:d,height:h,x:l,y:u})}function Af(t,e){const n=Cf(t).scrollLeft;return e?e.left+n:As(yr(t)).left+n}function uk(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-Af(t,n),i=n.top+e.scrollTop;return{x:r,y:i}}function lq(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=yr(r),a=e?If(e.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},u=dr(1);const d=dr(0),h=gr(r);if((h||!h&&!s)&&((ca(r)!=="body"||Lu(o))&&(l=Cf(r)),gr(r))){const m=As(r);u=bo(r),d.x=m.x+r.clientLeft,d.y=m.y+r.clientTop}const f=o&&!h&&!s?uk(o,l):dr(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+d.x+f.x,y:n.y*u.y-l.scrollTop*u.y+d.y+f.y}}function uq(t){return Array.from(t.getClientRects())}function cq(t){const e=yr(t),n=Cf(t),r=t.ownerDocument.body,i=dn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=dn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Af(t);const a=-n.scrollTop;return Kn(r).direction==="rtl"&&(o+=dn(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}const kS=25;function dq(t,e){const n=yn(t),r=yr(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const d=d_();(!d||d&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}const u=Af(r);if(u<=0){const d=r.ownerDocument,h=d.body,f=getComputedStyle(h),m=d.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,w=Math.abs(r.clientWidth-h.clientWidth-m);w<=kS&&(s-=w)}else u<=kS&&(s+=u);return{width:s,height:o,x:a,y:l}}const hq=new Set(["absolute","fixed"]);function fq(t,e){const n=As(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=gr(t)?bo(t):dr(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,u=r*s.y;return{width:o,height:a,x:l,y:u}}function NS(t,e,n){let r;if(e==="viewport")r=dq(t,n);else if(e==="document")r=cq(yr(t));else if(Gn(e))r=fq(e,n);else{const i=lk(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Th(r)}function ck(t,e){const n=Vi(t);return n===e||!Gn(n)||qo(n)?!1:Kn(n).position==="fixed"||ck(n,e)}function pq(t,e){const n=e.get(t);if(n)return n;let r=nu(t,[],!1).filter(a=>Gn(a)&&ca(a)!=="body"),i=null;const s=Kn(t).position==="fixed";let o=s?Vi(t):t;for(;Gn(o)&&!qo(o);){const a=Kn(o),l=c_(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&hq.has(i.position)||Lu(o)&&!l&&ck(t,o))?r=r.filter(d=>d!==o):i=a,o=Vi(o)}return e.set(t,r),r}function mq(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?If(e)?[]:pq(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((u,d)=>{const h=NS(e,d,i);return u.top=dn(h.top,u.top),u.right=Oi(h.right,u.right),u.bottom=Oi(h.bottom,u.bottom),u.left=dn(h.left,u.left),u},NS(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function gq(t){const{width:e,height:n}=ak(t);return{width:e,height:n}}function yq(t,e,n){const r=gr(e),i=yr(e),s=n==="fixed",o=As(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=dr(0);function u(){l.x=Af(i)}if(r||!r&&!s)if((ca(e)!=="body"||Lu(i))&&(a=Cf(e)),r){const m=As(e,!0,s,e);l.x=m.x+e.clientLeft,l.y=m.y+e.clientTop}else i&&u();s&&!r&&i&&u();const d=i&&!r&&!s?uk(i,a):dr(0),h=o.left+a.scrollLeft-l.x-d.x,f=o.top+a.scrollTop-l.y-d.y;return{x:h,y:f,width:o.width,height:o.height}}function rm(t){return Kn(t).position==="static"}function MS(t,e){if(!gr(t)||Kn(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return yr(t)===n&&(n=n.ownerDocument.body),n}function dk(t,e){const n=yn(t);if(If(t))return n;if(!gr(t)){let i=Vi(t);for(;i&&!qo(i);){if(Gn(i)&&!rm(i))return i;i=Vi(i)}return n}let r=MS(t,e);for(;r&&ZH(r)&&rm(r);)r=MS(r,e);return r&&qo(r)&&rm(r)&&!c_(r)?n:r||iq(t)||n}const vq=async function(t){const e=this.getOffsetParent||dk,n=this.getDimensions,r=await n(t.floating);return{reference:yq(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function wq(t){return Kn(t).direction==="rtl"}const _q={convertOffsetParentRelativeRectToViewportRelativeRect:lq,getDocumentElement:yr,getClippingRect:mq,getOffsetParent:dk,getElementRects:vq,getClientRects:uq,getDimensions:gq,getScale:bo,isElement:Gn,isRTL:wq};function hk(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Eq(t,e){let n=null,r;const i=yr(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const u=t.getBoundingClientRect(),{left:d,top:h,width:f,height:m}=u;if(a||e(),!f||!m)return;const w=Oc(h),_=Oc(i.clientWidth-(d+f)),I=Oc(i.clientHeight-(h+m)),g=Oc(d),T={rootMargin:-w+"px "+-_+"px "+-I+"px "+-g+"px",threshold:dn(0,Oi(1,l))||1};let R=!0;function N(L){const C=L[0].intersectionRatio;if(C!==l){if(!R)return o();C?o(!1,C):r=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!hk(u,t.getBoundingClientRect())&&o(),R=!1}try{n=new IntersectionObserver(N,{...T,root:i.ownerDocument})}catch{n=new IntersectionObserver(N,T)}n.observe(t)}return o(!0),s}function xq(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=h_(t),d=i||s?[...u?nu(u):[],...nu(e)]:[];d.forEach(g=>{i&&g.addEventListener("scroll",n,{passive:!0}),s&&g.addEventListener("resize",n)});const h=u&&a?Eq(u,n):null;let f=-1,m=null;o&&(m=new ResizeObserver(g=>{let[E]=g;E&&E.target===u&&m&&(m.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var T;(T=m)==null||T.observe(e)})),n()}),u&&!l&&m.observe(u),m.observe(e));let w,_=l?As(t):null;l&&I();function I(){const g=As(t);_&&!hk(_,g)&&n(),_=g,w=requestAnimationFrame(I)}return n(),()=>{var g;d.forEach(E=>{i&&E.removeEventListener("scroll",n),s&&E.removeEventListener("resize",n)}),h==null||h(),(g=m)==null||g.disconnect(),m=null,l&&cancelAnimationFrame(w)}}const Tq=GH,Sq=KH,Iq=WH,Cq=YH,Aq=HH,DS=zH,bq=QH,Rq=(t,e,n)=>{const r=new Map,i={platform:_q,...n},s={...i.platform,_c:r};return $H(t,e,{...i,platform:s})};var Pq=typeof document<"u",kq=function(){},yd=Pq?y.useLayoutEffect:kq;function Sh(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Sh(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!Sh(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function fk(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function OS(t,e){const n=fk(t);return Math.round(e*n)/n}function im(t){const e=y.useRef(t);return yd(()=>{e.current=t}),e}function Nq(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:u}=t,[d,h]=y.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,m]=y.useState(r);Sh(f,r)||m(r);const[w,_]=y.useState(null),[I,g]=y.useState(null),E=y.useCallback(F=>{F!==L.current&&(L.current=F,_(F))},[]),T=y.useCallback(F=>{F!==C.current&&(C.current=F,g(F))},[]),R=s||w,N=o||I,L=y.useRef(null),C=y.useRef(null),S=y.useRef(d),A=l!=null,P=im(l),M=im(i),V=im(u),k=y.useCallback(()=>{if(!L.current||!C.current)return;const F={placement:e,strategy:n,middleware:f};M.current&&(F.platform=M.current),Rq(L.current,C.current,F).then(B=>{const O={...B,isPositioned:V.current!==!1};oe.current&&!Sh(S.current,O)&&(S.current=O,zh.flushSync(()=>{h(O)}))})},[f,e,n,M,V]);yd(()=>{u===!1&&S.current.isPositioned&&(S.current.isPositioned=!1,h(F=>({...F,isPositioned:!1})))},[u]);const oe=y.useRef(!1);yd(()=>(oe.current=!0,()=>{oe.current=!1}),[]),yd(()=>{if(R&&(L.current=R),N&&(C.current=N),R&&N){if(P.current)return P.current(R,N,k);k()}},[R,N,k,P,A]);const me=y.useMemo(()=>({reference:L,floating:C,setReference:E,setFloating:T}),[E,T]),ae=y.useMemo(()=>({reference:R,floating:N}),[R,N]),te=y.useMemo(()=>{const F={position:n,left:0,top:0};if(!ae.floating)return F;const B=OS(ae.floating,d.x),O=OS(ae.floating,d.y);return a?{...F,transform:"translate("+B+"px, "+O+"px)",...fk(ae.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:B,top:O}},[n,a,ae.floating,d.x,d.y]);return y.useMemo(()=>({...d,update:k,refs:me,elements:ae,floatingStyles:te}),[d,k,me,ae,te])}const Mq=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?DS({element:r.current,padding:i}).fn(n):{}:r?DS({element:r,padding:i}).fn(n):{}}}},Dq=(t,e)=>({...Tq(t),options:[t,e]}),Oq=(t,e)=>({...Sq(t),options:[t,e]}),Vq=(t,e)=>({...bq(t),options:[t,e]}),Lq=(t,e)=>({...Iq(t),options:[t,e]}),Fq=(t,e)=>({...Cq(t),options:[t,e]}),jq=(t,e)=>({...Aq(t),options:[t,e]}),Uq=(t,e)=>({...Mq(t),options:[t,e]});var Bq="Arrow",pk=y.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...s}=t;return x.jsx(Qt.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:x.jsx("polygon",{points:"0,0 30,0 15,10"})})});pk.displayName=Bq;var $q=pk;function zq(t){const[e,n]=y.useState(void 0);return Di(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,u=Array.isArray(l)?l[0]:l;o=u.inlineSize,a=u.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var f_="Popper",[mk,gk]=Vu(f_),[Wq,yk]=mk(f_),vk=t=>{const{__scopePopper:e,children:n}=t,[r,i]=y.useState(null);return x.jsx(Wq,{scope:e,anchor:r,onAnchorChange:i,children:n})};vk.displayName=f_;var wk="PopperAnchor",_k=y.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=yk(wk,n),o=y.useRef(null),a=an(e,o),l=y.useRef(null);return y.useEffect(()=>{const u=l.current;l.current=(r==null?void 0:r.current)||o.current,u!==l.current&&s.onAnchorChange(l.current)}),r?null:x.jsx(Qt.div,{...i,ref:a})});_k.displayName=wk;var p_="PopperContent",[Hq,qq]=mk(p_),Ek=y.forwardRef((t,e)=>{var G,ce,de,ye,ve,xe;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:m="optimized",onPlaced:w,..._}=t,I=yk(p_,n),[g,E]=y.useState(null),T=an(e,Pe=>E(Pe)),[R,N]=y.useState(null),L=zq(R),C=(L==null?void 0:L.width)??0,S=(L==null?void 0:L.height)??0,A=r+(s!=="center"?"-"+s:""),P=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},M=Array.isArray(u)?u:[u],V=M.length>0,k={padding:P,boundary:M.filter(Kq),altBoundary:V},{refs:oe,floatingStyles:me,placement:ae,isPositioned:te,middlewareData:F}=Nq({strategy:"fixed",placement:A,whileElementsMounted:(...Pe)=>xq(...Pe,{animationFrame:m==="always"}),elements:{reference:I.anchor},middleware:[Dq({mainAxis:i+S,alignmentAxis:o}),l&&Oq({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?Vq():void 0,...k}),l&&Lq({...k}),Fq({...k,apply:({elements:Pe,rects:pe,availableWidth:et,availableHeight:At})=>{const{width:jt,height:ln}=pe.reference,Ut=Pe.floating.style;Ut.setProperty("--radix-popper-available-width",`${et}px`),Ut.setProperty("--radix-popper-available-height",`${At}px`),Ut.setProperty("--radix-popper-anchor-width",`${jt}px`),Ut.setProperty("--radix-popper-anchor-height",`${ln}px`)}}),R&&Uq({element:R,padding:a}),Qq({arrowWidth:C,arrowHeight:S}),f&&jq({strategy:"referenceHidden",...k})]}),[B,O]=Sk(ae),D=Hr(w);Di(()=>{te&&(D==null||D())},[te,D]);const W=(G=F.arrow)==null?void 0:G.x,q=(ce=F.arrow)==null?void 0:ce.y,Y=((de=F.arrow)==null?void 0:de.centerOffset)!==0,[ne,re]=y.useState();return Di(()=>{g&&re(window.getComputedStyle(g).zIndex)},[g]),x.jsx("div",{ref:oe.setFloating,"data-radix-popper-content-wrapper":"",style:{...me,transform:te?me.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ne,"--radix-popper-transform-origin":[(ye=F.transformOrigin)==null?void 0:ye.x,(ve=F.transformOrigin)==null?void 0:ve.y].join(" "),...((xe=F.hide)==null?void 0:xe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:x.jsx(Hq,{scope:n,placedSide:B,onArrowChange:N,arrowX:W,arrowY:q,shouldHideArrow:Y,children:x.jsx(Qt.div,{"data-side":B,"data-align":O,..._,ref:T,style:{..._.style,animation:te?void 0:"none"}})})})});Ek.displayName=p_;var xk="PopperArrow",Gq={top:"bottom",right:"left",bottom:"top",left:"right"},Tk=y.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,s=qq(xk,r),o=Gq[s.placedSide];return x.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:x.jsx($q,{...i,ref:n,style:{...i.style,display:"block"}})})});Tk.displayName=xk;function Kq(t){return t!==null}var Qq=t=>({name:"transformOrigin",options:t,fn(e){var I,g,E;const{placement:n,rects:r,middlewareData:i}=e,o=((I=i.arrow)==null?void 0:I.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[u,d]=Sk(n),h={start:"0%",center:"50%",end:"100%"}[d],f=(((g=i.arrow)==null?void 0:g.x)??0)+a/2,m=(((E=i.arrow)==null?void 0:E.y)??0)+l/2;let w="",_="";return u==="bottom"?(w=o?h:`${f}px`,_=`${-l}px`):u==="top"?(w=o?h:`${f}px`,_=`${r.floating.height+l}px`):u==="right"?(w=`${-l}px`,_=o?h:`${m}px`):u==="left"&&(w=`${r.floating.width+l}px`,_=o?h:`${m}px`),{data:{x:w,y:_}}}});function Sk(t){const[e,n="center"]=t.split("-");return[e,n]}var Yq=vk,Xq=_k,Jq=Ek,Zq=Tk,eG="Portal",Ik=y.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[i,s]=y.useState(!1);Di(()=>s(!0),[]);const o=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?J2.createPortal(x.jsx(Qt.div,{...r,ref:e}),o):null});Ik.displayName=eG;function tG(t,e){return y.useReducer((n,r)=>e[n][r]??n,t)}var Fu=t=>{const{present:e,children:n}=t,r=nG(e),i=typeof n=="function"?n({present:r.isPresent}):y.Children.only(n),s=an(r.ref,rG(i));return typeof n=="function"||r.isPresent?y.cloneElement(i,{ref:s}):null};Fu.displayName="Presence";function nG(t){const[e,n]=y.useState(),r=y.useRef(null),i=y.useRef(t),s=y.useRef("none"),o=t?"mounted":"unmounted",[a,l]=tG(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return y.useEffect(()=>{const u=Vc(r.current);s.current=a==="mounted"?u:"none"},[a]),Di(()=>{const u=r.current,d=i.current;if(d!==t){const f=s.current,m=Vc(u);t?l("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(d&&f!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),Di(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,h=m=>{const _=Vc(r.current).includes(CSS.escape(m.animationName));if(m.target===e&&_&&(l("ANIMATION_END"),!i.current)){const I=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=I)})}},f=m=>{m.target===e&&(s.current=Vc(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:y.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function Vc(t){return(t==null?void 0:t.animationName)||"none"}function rG(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var sm="rovingFocusGroup.onEntryFocus",iG={bubbles:!1,cancelable:!0},ju="RovingFocusGroup",[ry,Ck,sG]=Y1(ju),[oG,Ak]=Vu(ju,[sG]),[aG,lG]=oG(ju),bk=y.forwardRef((t,e)=>x.jsx(ry.Provider,{scope:t.__scopeRovingFocusGroup,children:x.jsx(ry.Slot,{scope:t.__scopeRovingFocusGroup,children:x.jsx(uG,{...t,ref:e})})}));bk.displayName=ju;var uG=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=t,f=y.useRef(null),m=an(e,f),w=X1(s),[_,I]=K1({prop:o,defaultProp:a??null,onChange:l,caller:ju}),[g,E]=y.useState(!1),T=Hr(u),R=Ck(n),N=y.useRef(!1),[L,C]=y.useState(0);return y.useEffect(()=>{const S=f.current;if(S)return S.addEventListener(sm,T),()=>S.removeEventListener(sm,T)},[T]),x.jsx(aG,{scope:n,orientation:r,dir:w,loop:i,currentTabStopId:_,onItemFocus:y.useCallback(S=>I(S),[I]),onItemShiftTab:y.useCallback(()=>E(!0),[]),onFocusableItemAdd:y.useCallback(()=>C(S=>S+1),[]),onFocusableItemRemove:y.useCallback(()=>C(S=>S-1),[]),children:x.jsx(Qt.div,{tabIndex:g||L===0?-1:0,"data-orientation":r,...h,ref:m,style:{outline:"none",...t.style},onMouseDown:Se(t.onMouseDown,()=>{N.current=!0}),onFocus:Se(t.onFocus,S=>{const A=!N.current;if(S.target===S.currentTarget&&A&&!g){const P=new CustomEvent(sm,iG);if(S.currentTarget.dispatchEvent(P),!P.defaultPrevented){const M=R().filter(ae=>ae.focusable),V=M.find(ae=>ae.active),k=M.find(ae=>ae.id===_),me=[V,k,...M].filter(Boolean).map(ae=>ae.ref.current);kk(me,d)}}N.current=!1}),onBlur:Se(t.onBlur,()=>E(!1))})})}),Rk="RovingFocusGroupItem",Pk=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,children:o,...a}=t,l=Zg(),u=s||l,d=lG(Rk,n),h=d.currentTabStopId===u,f=Ck(n),{onFocusableItemAdd:m,onFocusableItemRemove:w,currentTabStopId:_}=d;return y.useEffect(()=>{if(r)return m(),()=>w()},[r,m,w]),x.jsx(ry.ItemSlot,{scope:n,id:u,focusable:r,active:i,children:x.jsx(Qt.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...a,ref:e,onMouseDown:Se(t.onMouseDown,I=>{r?d.onItemFocus(u):I.preventDefault()}),onFocus:Se(t.onFocus,()=>d.onItemFocus(u)),onKeyDown:Se(t.onKeyDown,I=>{if(I.key==="Tab"&&I.shiftKey){d.onItemShiftTab();return}if(I.target!==I.currentTarget)return;const g=hG(I,d.orientation,d.dir);if(g!==void 0){if(I.metaKey||I.ctrlKey||I.altKey||I.shiftKey)return;I.preventDefault();let T=f().filter(R=>R.focusable).map(R=>R.ref.current);if(g==="last")T.reverse();else if(g==="prev"||g==="next"){g==="prev"&&T.reverse();const R=T.indexOf(I.currentTarget);T=d.loop?fG(T,R+1):T.slice(R+1)}setTimeout(()=>kk(T))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:_!=null}):o})})});Pk.displayName=Rk;var cG={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function dG(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function hG(t,e,n){const r=dG(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return cG[r]}function kk(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function fG(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var pG=bk,mG=Pk,gG=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},zs=new WeakMap,Lc=new WeakMap,Fc={},om=0,Nk=function(t){return t&&(t.host||Nk(t.parentNode))},yG=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=Nk(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},vG=function(t,e,n,r){var i=yG(e,Array.isArray(t)?t:[t]);Fc[n]||(Fc[n]=new WeakMap);var s=Fc[n],o=[],a=new Set,l=new Set(i),u=function(h){!h||a.has(h)||(a.add(h),u(h.parentNode))};i.forEach(u);var d=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(f){if(a.has(f))d(f);else try{var m=f.getAttribute(r),w=m!==null&&m!=="false",_=(zs.get(f)||0)+1,I=(s.get(f)||0)+1;zs.set(f,_),s.set(f,I),o.push(f),_===1&&w&&Lc.set(f,!0),I===1&&f.setAttribute(n,"true"),w||f.setAttribute(r,"true")}catch(g){console.error("aria-hidden: cannot operate on ",f,g)}})};return d(e),a.clear(),om++,function(){o.forEach(function(h){var f=zs.get(h)-1,m=s.get(h)-1;zs.set(h,f),s.set(h,m),f||(Lc.has(h)||h.removeAttribute(r),Lc.delete(h)),m||h.removeAttribute(n)}),om--,om||(zs=new WeakMap,zs=new WeakMap,Lc=new WeakMap,Fc={})}},wG=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=gG(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),vG(r,i,n,"aria-hidden")):function(){return null}},vd="right-scroll-bar-position",wd="width-before-scroll-bar",_G="with-scroll-bars-hidden",EG="--removed-body-scroll-bar-size";function am(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function xG(t,e){var n=y.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var TG=typeof window<"u"?y.useLayoutEffect:y.useEffect,VS=new WeakMap;function SG(t,e){var n=xG(null,function(r){return t.forEach(function(i){return am(i,r)})});return TG(function(){var r=VS.get(n);if(r){var i=new Set(r),s=new Set(t),o=n.current;i.forEach(function(a){s.has(a)||am(a,null)}),s.forEach(function(a){i.has(a)||am(a,o)})}VS.set(n,t)},[t]),n}function IG(t){return t}function CG(t,e){e===void 0&&(e=IG);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var d=o;o=[],d.forEach(s)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),n}}}};return i}function AG(t){t===void 0&&(t={});var e=CG(null);return e.options=Me({async:!0,ssr:!1},t),e}var Mk=function(t){var e=t.sideCar,n=gu(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return y.createElement(r,Me({},n))};Mk.isSideCarExport=!0;function bG(t,e){return t.useMedium(e),Mk}var Dk=AG(),lm=function(){},bf=y.forwardRef(function(t,e){var n=y.useRef(null),r=y.useState({onScrollCapture:lm,onWheelCapture:lm,onTouchMoveCapture:lm}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,l=t.className,u=t.removeScrollBar,d=t.enabled,h=t.shards,f=t.sideCar,m=t.noRelative,w=t.noIsolation,_=t.inert,I=t.allowPinchZoom,g=t.as,E=g===void 0?"div":g,T=t.gapMode,R=gu(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=f,L=SG([n,e]),C=Me(Me({},R),i);return y.createElement(y.Fragment,null,d&&y.createElement(N,{sideCar:Dk,removeScrollBar:u,shards:h,noRelative:m,noIsolation:w,inert:_,setCallbacks:s,allowPinchZoom:!!I,lockRef:n,gapMode:T}),o?y.cloneElement(y.Children.only(a),Me(Me({},C),{ref:L})):y.createElement(E,Me({},C,{className:l,ref:L}),a))});bf.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};bf.classNames={fullWidth:wd,zeroRight:vd};var RG=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function PG(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=RG();return e&&t.setAttribute("nonce",e),t}function kG(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function NG(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var MG=function(){var t=0,e=null;return{add:function(n){t==0&&(e=PG())&&(kG(e,n),NG(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},DG=function(){var t=MG();return function(e,n){y.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},Ok=function(){var t=DG(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},OG={left:0,top:0,right:0,gap:0},um=function(t){return parseInt(t||"",10)||0},VG=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[um(n),um(r),um(i)]},LG=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return OG;var e=VG(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},FG=Ok(),Ro="data-scroll-locked",jG=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(_G,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Ro,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(vd,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(wd,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(vd," .").concat(vd,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(wd," .").concat(wd,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Ro,`] {
    `).concat(EG,": ").concat(a,`px;
  }
`)},LS=function(){var t=parseInt(document.body.getAttribute(Ro)||"0",10);return isFinite(t)?t:0},UG=function(){y.useEffect(function(){return document.body.setAttribute(Ro,(LS()+1).toString()),function(){var t=LS()-1;t<=0?document.body.removeAttribute(Ro):document.body.setAttribute(Ro,t.toString())}},[])},BG=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;UG();var s=y.useMemo(function(){return LG(i)},[i]);return y.createElement(FG,{styles:jG(s,!e,i,n?"":"!important")})},iy=!1;if(typeof window<"u")try{var jc=Object.defineProperty({},"passive",{get:function(){return iy=!0,!0}});window.addEventListener("test",jc,jc),window.removeEventListener("test",jc,jc)}catch{iy=!1}var Ws=iy?{passive:!1}:!1,$G=function(t){return t.tagName==="TEXTAREA"},Vk=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!$G(t)&&n[e]==="visible")},zG=function(t){return Vk(t,"overflowY")},WG=function(t){return Vk(t,"overflowX")},FS=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=Lk(t,r);if(i){var s=Fk(t,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},HG=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},qG=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},Lk=function(t,e){return t==="v"?zG(e):WG(e)},Fk=function(t,e){return t==="v"?HG(e):qG(e)},GG=function(t,e){return t==="h"&&e==="rtl"?-1:1},KG=function(t,e,n,r,i){var s=GG(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,l=e.contains(a),u=!1,d=o>0,h=0,f=0;do{if(!a)break;var m=Fk(t,a),w=m[0],_=m[1],I=m[2],g=_-I-s*w;(w||g)&&Lk(t,a)&&(h+=g,f+=w);var E=a.parentNode;a=E&&E.nodeType===Node.DOCUMENT_FRAGMENT_NODE?E.host:E}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&Math.abs(h)<1||!d&&Math.abs(f)<1)&&(u=!0),u},Uc=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},jS=function(t){return[t.deltaX,t.deltaY]},US=function(t){return t&&"current"in t?t.current:t},QG=function(t,e){return t[0]===e[0]&&t[1]===e[1]},YG=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},XG=0,Hs=[];function JG(t){var e=y.useRef([]),n=y.useRef([0,0]),r=y.useRef(),i=y.useState(XG++)[0],s=y.useState(Ok)[0],o=y.useRef(t);y.useEffect(function(){o.current=t},[t]),y.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var _=lF([t.lockRef.current],(t.shards||[]).map(US),!0).filter(Boolean);return _.forEach(function(I){return I.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),_.forEach(function(I){return I.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=y.useCallback(function(_,I){if("touches"in _&&_.touches.length===2||_.type==="wheel"&&_.ctrlKey)return!o.current.allowPinchZoom;var g=Uc(_),E=n.current,T="deltaX"in _?_.deltaX:E[0]-g[0],R="deltaY"in _?_.deltaY:E[1]-g[1],N,L=_.target,C=Math.abs(T)>Math.abs(R)?"h":"v";if("touches"in _&&C==="h"&&L.type==="range")return!1;var S=FS(C,L);if(!S)return!0;if(S?N=C:(N=C==="v"?"h":"v",S=FS(C,L)),!S)return!1;if(!r.current&&"changedTouches"in _&&(T||R)&&(r.current=N),!N)return!0;var A=r.current||N;return KG(A,I,_,A==="h"?T:R)},[]),l=y.useCallback(function(_){var I=_;if(!(!Hs.length||Hs[Hs.length-1]!==s)){var g="deltaY"in I?jS(I):Uc(I),E=e.current.filter(function(N){return N.name===I.type&&(N.target===I.target||I.target===N.shadowParent)&&QG(N.delta,g)})[0];if(E&&E.should){I.cancelable&&I.preventDefault();return}if(!E){var T=(o.current.shards||[]).map(US).filter(Boolean).filter(function(N){return N.contains(I.target)}),R=T.length>0?a(I,T[0]):!o.current.noIsolation;R&&I.cancelable&&I.preventDefault()}}},[]),u=y.useCallback(function(_,I,g,E){var T={name:_,delta:I,target:g,should:E,shadowParent:ZG(g)};e.current.push(T),setTimeout(function(){e.current=e.current.filter(function(R){return R!==T})},1)},[]),d=y.useCallback(function(_){n.current=Uc(_),r.current=void 0},[]),h=y.useCallback(function(_){u(_.type,jS(_),_.target,a(_,t.lockRef.current))},[]),f=y.useCallback(function(_){u(_.type,Uc(_),_.target,a(_,t.lockRef.current))},[]);y.useEffect(function(){return Hs.push(s),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Ws),document.addEventListener("touchmove",l,Ws),document.addEventListener("touchstart",d,Ws),function(){Hs=Hs.filter(function(_){return _!==s}),document.removeEventListener("wheel",l,Ws),document.removeEventListener("touchmove",l,Ws),document.removeEventListener("touchstart",d,Ws)}},[]);var m=t.removeScrollBar,w=t.inert;return y.createElement(y.Fragment,null,w?y.createElement(s,{styles:YG(i)}):null,m?y.createElement(BG,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function ZG(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const eK=bG(Dk,JG);var jk=y.forwardRef(function(t,e){return y.createElement(bf,Me({},t,{ref:e,sideCar:eK}))});jk.classNames=bf.classNames;var sy=["Enter"," "],tK=["ArrowDown","PageUp","Home"],Uk=["ArrowUp","PageDown","End"],nK=[...tK,...Uk],rK={ltr:[...sy,"ArrowRight"],rtl:[...sy,"ArrowLeft"]},iK={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Uu="Menu",[ru,sK,oK]=Y1(Uu),[Ds,Bk]=Vu(Uu,[oK,gk,Ak]),Rf=gk(),$k=Ak(),[aK,Os]=Ds(Uu),[lK,Bu]=Ds(Uu),zk=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:i,onOpenChange:s,modal:o=!0}=t,a=Rf(e),[l,u]=y.useState(null),d=y.useRef(!1),h=Hr(s),f=X1(i);return y.useEffect(()=>{const m=()=>{d.current=!0,document.addEventListener("pointerdown",w,{capture:!0,once:!0}),document.addEventListener("pointermove",w,{capture:!0,once:!0})},w=()=>d.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",w,{capture:!0}),document.removeEventListener("pointermove",w,{capture:!0})}},[]),x.jsx(Yq,{...a,children:x.jsx(aK,{scope:e,open:n,onOpenChange:h,content:l,onContentChange:u,children:x.jsx(lK,{scope:e,onClose:y.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:f,modal:o,children:r})})})};zk.displayName=Uu;var uK="MenuAnchor",m_=y.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=Rf(n);return x.jsx(Xq,{...i,...r,ref:e})});m_.displayName=uK;var g_="MenuPortal",[cK,Wk]=Ds(g_,{forceMount:void 0}),Hk=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:i}=t,s=Os(g_,e);return x.jsx(cK,{scope:e,forceMount:n,children:x.jsx(Fu,{present:n||s.open,children:x.jsx(Ik,{asChild:!0,container:i,children:r})})})};Hk.displayName=g_;var Pn="MenuContent",[dK,y_]=Ds(Pn),qk=y.forwardRef((t,e)=>{const n=Wk(Pn,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=Os(Pn,t.__scopeMenu),o=Bu(Pn,t.__scopeMenu);return x.jsx(ru.Provider,{scope:t.__scopeMenu,children:x.jsx(Fu,{present:r||s.open,children:x.jsx(ru.Slot,{scope:t.__scopeMenu,children:o.modal?x.jsx(hK,{...i,ref:e}):x.jsx(fK,{...i,ref:e})})})})}),hK=y.forwardRef((t,e)=>{const n=Os(Pn,t.__scopeMenu),r=y.useRef(null),i=an(e,r);return y.useEffect(()=>{const s=r.current;if(s)return wG(s)},[]),x.jsx(v_,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Se(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),fK=y.forwardRef((t,e)=>{const n=Os(Pn,t.__scopeMenu);return x.jsx(v_,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),pK=_h("MenuContent.ScrollLock"),v_=y.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:f,onDismiss:m,disableOutsideScroll:w,..._}=t,I=Os(Pn,n),g=Bu(Pn,n),E=Rf(n),T=$k(n),R=sK(n),[N,L]=y.useState(null),C=y.useRef(null),S=an(e,C,I.onContentChange),A=y.useRef(0),P=y.useRef(""),M=y.useRef(0),V=y.useRef(null),k=y.useRef("right"),oe=y.useRef(0),me=w?jk:y.Fragment,ae=w?{as:pK,allowPinchZoom:!0}:void 0,te=B=>{var G,ce;const O=P.current+B,D=R().filter(de=>!de.disabled),W=document.activeElement,q=(G=D.find(de=>de.ref.current===W))==null?void 0:G.textValue,Y=D.map(de=>de.textValue),ne=CK(Y,O,q),re=(ce=D.find(de=>de.textValue===ne))==null?void 0:ce.ref.current;(function de(ye){P.current=ye,window.clearTimeout(A.current),ye!==""&&(A.current=window.setTimeout(()=>de(""),1e3))})(O),re&&setTimeout(()=>re.focus())};y.useEffect(()=>()=>window.clearTimeout(A.current),[]),EH();const F=y.useCallback(B=>{var D,W;return k.current===((D=V.current)==null?void 0:D.side)&&bK(B,(W=V.current)==null?void 0:W.area)},[]);return x.jsx(dK,{scope:n,searchRef:P,onItemEnter:y.useCallback(B=>{F(B)&&B.preventDefault()},[F]),onItemLeave:y.useCallback(B=>{var O;F(B)||((O=C.current)==null||O.focus(),L(null))},[F]),onTriggerLeave:y.useCallback(B=>{F(B)&&B.preventDefault()},[F]),pointerGraceTimerRef:M,onPointerGraceIntentChange:y.useCallback(B=>{V.current=B},[]),children:x.jsx(me,{...ae,children:x.jsx(tk,{asChild:!0,trapped:i,onMountAutoFocus:Se(s,B=>{var O;B.preventDefault(),(O=C.current)==null||O.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:x.jsx(Z1,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:f,onDismiss:m,children:x.jsx(pG,{asChild:!0,...T,dir:g.dir,orientation:"vertical",loop:r,currentTabStopId:N,onCurrentTabStopIdChange:L,onEntryFocus:Se(l,B=>{g.isUsingKeyboardRef.current||B.preventDefault()}),preventScrollOnEntryFocus:!0,children:x.jsx(Jq,{role:"menu","aria-orientation":"vertical","data-state":lN(I.open),"data-radix-menu-content":"",dir:g.dir,...E,..._,ref:S,style:{outline:"none",..._.style},onKeyDown:Se(_.onKeyDown,B=>{const D=B.target.closest("[data-radix-menu-content]")===B.currentTarget,W=B.ctrlKey||B.altKey||B.metaKey,q=B.key.length===1;D&&(B.key==="Tab"&&B.preventDefault(),!W&&q&&te(B.key));const Y=C.current;if(B.target!==Y||!nK.includes(B.key))return;B.preventDefault();const re=R().filter(G=>!G.disabled).map(G=>G.ref.current);Uk.includes(B.key)&&re.reverse(),SK(re)}),onBlur:Se(t.onBlur,B=>{B.currentTarget.contains(B.target)||(window.clearTimeout(A.current),P.current="")}),onPointerMove:Se(t.onPointerMove,iu(B=>{const O=B.target,D=oe.current!==B.clientX;if(B.currentTarget.contains(O)&&D){const W=B.clientX>oe.current?"right":"left";k.current=W,oe.current=B.clientX}}))})})})})})})});qk.displayName=Pn;var mK="MenuGroup",w_=y.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return x.jsx(Qt.div,{role:"group",...r,ref:e})});w_.displayName=mK;var gK="MenuLabel",Gk=y.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return x.jsx(Qt.div,{...r,ref:e})});Gk.displayName=gK;var Ih="MenuItem",BS="menu.itemSelect",Pf=y.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...i}=t,s=y.useRef(null),o=Bu(Ih,t.__scopeMenu),a=y_(Ih,t.__scopeMenu),l=an(e,s),u=y.useRef(!1),d=()=>{const h=s.current;if(!n&&h){const f=new CustomEvent(BS,{bubbles:!0,cancelable:!0});h.addEventListener(BS,m=>r==null?void 0:r(m),{once:!0}),Q1(h,f),f.defaultPrevented?u.current=!1:o.onClose()}};return x.jsx(Kk,{...i,ref:l,disabled:n,onClick:Se(t.onClick,d),onPointerDown:h=>{var f;(f=t.onPointerDown)==null||f.call(t,h),u.current=!0},onPointerUp:Se(t.onPointerUp,h=>{var f;u.current||(f=h.currentTarget)==null||f.click()}),onKeyDown:Se(t.onKeyDown,h=>{const f=a.searchRef.current!=="";n||f&&h.key===" "||sy.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});Pf.displayName=Ih;var Kk=y.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...s}=t,o=y_(Ih,n),a=$k(n),l=y.useRef(null),u=an(e,l),[d,h]=y.useState(!1),[f,m]=y.useState("");return y.useEffect(()=>{const w=l.current;w&&m((w.textContent??"").trim())},[s.children]),x.jsx(ru.ItemSlot,{scope:n,disabled:r,textValue:i??f,children:x.jsx(mG,{asChild:!0,...a,focusable:!r,children:x.jsx(Qt.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:u,onPointerMove:Se(t.onPointerMove,iu(w=>{r?o.onItemLeave(w):(o.onItemEnter(w),w.defaultPrevented||w.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Se(t.onPointerLeave,iu(w=>o.onItemLeave(w))),onFocus:Se(t.onFocus,()=>h(!0)),onBlur:Se(t.onBlur,()=>h(!1))})})})}),yK="MenuCheckboxItem",Qk=y.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...i}=t;return x.jsx(eN,{scope:t.__scopeMenu,checked:n,children:x.jsx(Pf,{role:"menuitemcheckbox","aria-checked":Ch(n)?"mixed":n,...i,ref:e,"data-state":E_(n),onSelect:Se(i.onSelect,()=>r==null?void 0:r(Ch(n)?!0:!n),{checkForDefaultPrevented:!1})})})});Qk.displayName=yK;var Yk="MenuRadioGroup",[vK,wK]=Ds(Yk,{value:void 0,onValueChange:()=>{}}),Xk=y.forwardRef((t,e)=>{const{value:n,onValueChange:r,...i}=t,s=Hr(r);return x.jsx(vK,{scope:t.__scopeMenu,value:n,onValueChange:s,children:x.jsx(w_,{...i,ref:e})})});Xk.displayName=Yk;var Jk="MenuRadioItem",Zk=y.forwardRef((t,e)=>{const{value:n,...r}=t,i=wK(Jk,t.__scopeMenu),s=n===i.value;return x.jsx(eN,{scope:t.__scopeMenu,checked:s,children:x.jsx(Pf,{role:"menuitemradio","aria-checked":s,...r,ref:e,"data-state":E_(s),onSelect:Se(r.onSelect,()=>{var o;return(o=i.onValueChange)==null?void 0:o.call(i,n)},{checkForDefaultPrevented:!1})})})});Zk.displayName=Jk;var __="MenuItemIndicator",[eN,_K]=Ds(__,{checked:!1}),tN=y.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...i}=t,s=_K(__,n);return x.jsx(Fu,{present:r||Ch(s.checked)||s.checked===!0,children:x.jsx(Qt.span,{...i,ref:e,"data-state":E_(s.checked)})})});tN.displayName=__;var EK="MenuSeparator",nN=y.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return x.jsx(Qt.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});nN.displayName=EK;var xK="MenuArrow",rN=y.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=Rf(n);return x.jsx(Zq,{...i,...r,ref:e})});rN.displayName=xK;var TK="MenuSub",[Z7,iN]=Ds(TK),Xa="MenuSubTrigger",sN=y.forwardRef((t,e)=>{const n=Os(Xa,t.__scopeMenu),r=Bu(Xa,t.__scopeMenu),i=iN(Xa,t.__scopeMenu),s=y_(Xa,t.__scopeMenu),o=y.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,u={__scopeMenu:t.__scopeMenu},d=y.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return y.useEffect(()=>d,[d]),y.useEffect(()=>{const h=a.current;return()=>{window.clearTimeout(h),l(null)}},[a,l]),x.jsx(m_,{asChild:!0,...u,children:x.jsx(Kk,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":lN(n.open),...t,ref:Tf(e,i.onTriggerChange),onClick:h=>{var f;(f=t.onClick)==null||f.call(t,h),!(t.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Se(t.onPointerMove,iu(h=>{s.onItemEnter(h),!h.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:Se(t.onPointerLeave,iu(h=>{var m,w;d();const f=(m=n.content)==null?void 0:m.getBoundingClientRect();if(f){const _=(w=n.content)==null?void 0:w.dataset.side,I=_==="right",g=I?-5:5,E=f[I?"left":"right"],T=f[I?"right":"left"];s.onPointerGraceIntentChange({area:[{x:h.clientX+g,y:h.clientY},{x:E,y:f.top},{x:T,y:f.top},{x:T,y:f.bottom},{x:E,y:f.bottom}],side:_}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(h),h.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:Se(t.onKeyDown,h=>{var m;const f=s.searchRef.current!=="";t.disabled||f&&h.key===" "||rK[r.dir].includes(h.key)&&(n.onOpenChange(!0),(m=n.content)==null||m.focus(),h.preventDefault())})})})});sN.displayName=Xa;var oN="MenuSubContent",aN=y.forwardRef((t,e)=>{const n=Wk(Pn,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=Os(Pn,t.__scopeMenu),o=Bu(Pn,t.__scopeMenu),a=iN(oN,t.__scopeMenu),l=y.useRef(null),u=an(e,l);return x.jsx(ru.Provider,{scope:t.__scopeMenu,children:x.jsx(Fu,{present:r||s.open,children:x.jsx(ru.Slot,{scope:t.__scopeMenu,children:x.jsx(v_,{id:a.contentId,"aria-labelledby":a.triggerId,...i,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;o.isUsingKeyboardRef.current&&((h=l.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:Se(t.onFocusOutside,d=>{d.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:Se(t.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:Se(t.onKeyDown,d=>{var m;const h=d.currentTarget.contains(d.target),f=iK[o.dir].includes(d.key);h&&f&&(s.onOpenChange(!1),(m=a.trigger)==null||m.focus(),d.preventDefault())})})})})})});aN.displayName=oN;function lN(t){return t?"open":"closed"}function Ch(t){return t==="indeterminate"}function E_(t){return Ch(t)?"indeterminate":t?"checked":"unchecked"}function SK(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function IK(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function CK(t,e,n){const i=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=IK(t,Math.max(s,0));i.length===1&&(o=o.filter(u=>u!==n));const l=o.find(u=>u.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function AK(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],l=e[o],u=a.x,d=a.y,h=l.x,f=l.y;d>r!=f>r&&n<(h-u)*(r-d)/(f-d)+u&&(i=!i)}return i}function bK(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return AK(n,e)}function iu(t){return e=>e.pointerType==="mouse"?t(e):void 0}var RK=zk,PK=m_,kK=Hk,NK=qk,MK=w_,DK=Gk,OK=Pf,VK=Qk,LK=Xk,FK=Zk,jK=tN,UK=nN,BK=rN,$K=sN,zK=aN,kf="DropdownMenu",[WK]=Vu(kf,[Bk]),Yt=Bk(),[HK,uN]=WK(kf),cN=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:i,defaultOpen:s,onOpenChange:o,modal:a=!0}=t,l=Yt(e),u=y.useRef(null),[d,h]=K1({prop:i,defaultProp:s??!1,onChange:o,caller:kf});return x.jsx(HK,{scope:e,triggerId:Zg(),triggerRef:u,contentId:Zg(),open:d,onOpenChange:h,onOpenToggle:y.useCallback(()=>h(f=>!f),[h]),modal:a,children:x.jsx(RK,{...l,open:d,onOpenChange:h,dir:r,modal:a,children:n})})};cN.displayName=kf;var dN="DropdownMenuTrigger",hN=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=t,s=uN(dN,n),o=Yt(n);return x.jsx(PK,{asChild:!0,...o,children:x.jsx(Qt.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:Tf(e,s.triggerRef),onPointerDown:Se(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:Se(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});hN.displayName=dN;var qK="DropdownMenuPortal",fN=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Yt(e);return x.jsx(kK,{...r,...n})};fN.displayName=qK;var pN="DropdownMenuContent",mN=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=uN(pN,n),s=Yt(n),o=y.useRef(!1);return x.jsx(NK,{id:i.contentId,"aria-labelledby":i.triggerId,...s,...r,ref:e,onCloseAutoFocus:Se(t.onCloseAutoFocus,a=>{var l;o.current||(l=i.triggerRef.current)==null||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:Se(t.onInteractOutside,a=>{const l=a.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,d=l.button===2||u;(!i.modal||d)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});mN.displayName=pN;var GK="DropdownMenuGroup",KK=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Yt(n);return x.jsx(MK,{...i,...r,ref:e})});KK.displayName=GK;var QK="DropdownMenuLabel",gN=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Yt(n);return x.jsx(DK,{...i,...r,ref:e})});gN.displayName=QK;var YK="DropdownMenuItem",yN=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Yt(n);return x.jsx(OK,{...i,...r,ref:e})});yN.displayName=YK;var XK="DropdownMenuCheckboxItem",vN=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Yt(n);return x.jsx(VK,{...i,...r,ref:e})});vN.displayName=XK;var JK="DropdownMenuRadioGroup",ZK=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Yt(n);return x.jsx(LK,{...i,...r,ref:e})});ZK.displayName=JK;var e8="DropdownMenuRadioItem",wN=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Yt(n);return x.jsx(FK,{...i,...r,ref:e})});wN.displayName=e8;var t8="DropdownMenuItemIndicator",_N=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Yt(n);return x.jsx(jK,{...i,...r,ref:e})});_N.displayName=t8;var n8="DropdownMenuSeparator",EN=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Yt(n);return x.jsx(UK,{...i,...r,ref:e})});EN.displayName=n8;var r8="DropdownMenuArrow",i8=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Yt(n);return x.jsx(BK,{...i,...r,ref:e})});i8.displayName=r8;var s8="DropdownMenuSubTrigger",xN=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Yt(n);return x.jsx($K,{...i,...r,ref:e})});xN.displayName=s8;var o8="DropdownMenuSubContent",TN=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Yt(n);return x.jsx(zK,{...i,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});TN.displayName=o8;var a8=cN,l8=hN,u8=fN,SN=mN,IN=gN,CN=yN,AN=vN,bN=wN,RN=_N,PN=EN,kN=xN,NN=TN;function MN(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=MN(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function c8(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=MN(t))&&(r&&(r+=" "),r+=e);return r}const x_="-",d8=t=>{const e=f8(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(x_);return a[0]===""&&a.length!==1&&a.shift(),DN(a,e)||h8(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},DN=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?DN(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(x_);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId},$S=/^\[(.+)\]$/,h8=t=>{if($S.test(t)){const e=$S.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},f8=t=>{const{theme:e,classGroups:n}=t,r={nextPart:new Map,validators:[]};for(const i in n)oy(n[i],r,i,e);return r},oy=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:zS(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(p8(i)){oy(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{oy(o,zS(e,s),n,r)})})},zS=(t,e)=>{let n=t;return e.split(x_).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},p8=t=>t.isThemeGetter,m8=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,o)=>{n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}},ay="!",ly=":",g8=ly.length,y8=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=i=>{const s=[];let o=0,a=0,l=0,u;for(let w=0;w<i.length;w++){let _=i[w];if(o===0&&a===0){if(_===ly){s.push(i.slice(l,w)),l=w+g8;continue}if(_==="/"){u=w;continue}}_==="["?o++:_==="]"?o--:_==="("?a++:_===")"&&a--}const d=s.length===0?i:i.substring(l),h=v8(d),f=h!==d,m=u&&u>l?u-l:void 0;return{modifiers:s,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:m}};if(e){const i=e+ly,s=r;r=o=>o.startsWith(i)?s(o.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(n){const i=r;r=s=>n({className:s,parseClassName:i})}return r},v8=t=>t.endsWith(ay)?t.substring(0,t.length-1):t.startsWith(ay)?t.substring(1):t,w8=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const i=[];let s=[];return r.forEach(o=>{o[0]==="["||e[o]?(i.push(...s.sort(),o),s=[]):s.push(o)}),i.push(...s.sort()),i}},_8=t=>({cache:m8(t.cacheSize),parseClassName:y8(t),sortModifiers:w8(t),...d8(t)}),E8=/\s+/,x8=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:s}=e,o=[],a=t.trim().split(E8);let l="";for(let u=a.length-1;u>=0;u-=1){const d=a[u],{isExternal:h,modifiers:f,hasImportantModifier:m,baseClassName:w,maybePostfixModifierPosition:_}=n(d);if(h){l=d+(l.length>0?" "+l:l);continue}let I=!!_,g=r(I?w.substring(0,_):w);if(!g){if(!I){l=d+(l.length>0?" "+l:l);continue}if(g=r(w),!g){l=d+(l.length>0?" "+l:l);continue}I=!1}const E=s(f).join(":"),T=m?E+ay:E,R=T+g;if(o.includes(R))continue;o.push(R);const N=i(g,I);for(let L=0;L<N.length;++L){const C=N[L];o.push(T+C)}l=d+(l.length>0?" "+l:l)}return l};function T8(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=ON(e))&&(r&&(r+=" "),r+=n);return r}const ON=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=ON(t[r]))&&(n&&(n+=" "),n+=e);return n};function S8(t,...e){let n,r,i,s=o;function o(l){const u=e.reduce((d,h)=>h(d),t());return n=_8(u),r=n.cache.get,i=n.cache.set,s=a,a(l)}function a(l){const u=r(l);if(u)return u;const d=x8(l,n);return i(l,d),d}return function(){return s(T8.apply(null,arguments))}}const ot=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},VN=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,LN=/^\((?:(\w[\w-]*):)?(.+)\)$/i,I8=/^\d+\/\d+$/,C8=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,A8=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,b8=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,R8=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,P8=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,qs=t=>I8.test(t),ge=t=>!!t&&!Number.isNaN(Number(t)),ni=t=>!!t&&Number.isInteger(Number(t)),cm=t=>t.endsWith("%")&&ge(t.slice(0,-1)),_r=t=>C8.test(t),k8=()=>!0,N8=t=>A8.test(t)&&!b8.test(t),FN=()=>!1,M8=t=>R8.test(t),D8=t=>P8.test(t),O8=t=>!J(t)&&!Z(t),V8=t=>da(t,BN,FN),J=t=>VN.test(t),Ki=t=>da(t,$N,N8),dm=t=>da(t,B8,ge),WS=t=>da(t,jN,FN),L8=t=>da(t,UN,D8),Bc=t=>da(t,zN,M8),Z=t=>LN.test(t),Ba=t=>ha(t,$N),F8=t=>ha(t,$8),HS=t=>ha(t,jN),j8=t=>ha(t,BN),U8=t=>ha(t,UN),$c=t=>ha(t,zN,!0),da=(t,e,n)=>{const r=VN.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},ha=(t,e,n=!1)=>{const r=LN.exec(t);return r?r[1]?e(r[1]):n:!1},jN=t=>t==="position"||t==="percentage",UN=t=>t==="image"||t==="url",BN=t=>t==="length"||t==="size"||t==="bg-size",$N=t=>t==="length",B8=t=>t==="number",$8=t=>t==="family-name",zN=t=>t==="shadow",z8=()=>{const t=ot("color"),e=ot("font"),n=ot("text"),r=ot("font-weight"),i=ot("tracking"),s=ot("leading"),o=ot("breakpoint"),a=ot("container"),l=ot("spacing"),u=ot("radius"),d=ot("shadow"),h=ot("inset-shadow"),f=ot("text-shadow"),m=ot("drop-shadow"),w=ot("blur"),_=ot("perspective"),I=ot("aspect"),g=ot("ease"),E=ot("animate"),T=()=>["auto","avoid","all","avoid-page","page","left","right","column"],R=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],N=()=>[...R(),Z,J],L=()=>["auto","hidden","clip","visible","scroll"],C=()=>["auto","contain","none"],S=()=>[Z,J,l],A=()=>[qs,"full","auto",...S()],P=()=>[ni,"none","subgrid",Z,J],M=()=>["auto",{span:["full",ni,Z,J]},ni,Z,J],V=()=>[ni,"auto",Z,J],k=()=>["auto","min","max","fr",Z,J],oe=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],me=()=>["start","end","center","stretch","center-safe","end-safe"],ae=()=>["auto",...S()],te=()=>[qs,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...S()],F=()=>[t,Z,J],B=()=>[...R(),HS,WS,{position:[Z,J]}],O=()=>["no-repeat",{repeat:["","x","y","space","round"]}],D=()=>["auto","cover","contain",j8,V8,{size:[Z,J]}],W=()=>[cm,Ba,Ki],q=()=>["","none","full",u,Z,J],Y=()=>["",ge,Ba,Ki],ne=()=>["solid","dashed","dotted","double"],re=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],G=()=>[ge,cm,HS,WS],ce=()=>["","none",w,Z,J],de=()=>["none",ge,Z,J],ye=()=>["none",ge,Z,J],ve=()=>[ge,Z,J],xe=()=>[qs,"full",...S()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[_r],breakpoint:[_r],color:[k8],container:[_r],"drop-shadow":[_r],ease:["in","out","in-out"],font:[O8],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[_r],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[_r],shadow:[_r],spacing:["px",ge],text:[_r],"text-shadow":[_r],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",qs,J,Z,I]}],container:["container"],columns:[{columns:[ge,J,Z,a]}],"break-after":[{"break-after":T()}],"break-before":[{"break-before":T()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:N()}],overflow:[{overflow:L()}],"overflow-x":[{"overflow-x":L()}],"overflow-y":[{"overflow-y":L()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:A()}],"inset-x":[{"inset-x":A()}],"inset-y":[{"inset-y":A()}],start:[{start:A()}],end:[{end:A()}],top:[{top:A()}],right:[{right:A()}],bottom:[{bottom:A()}],left:[{left:A()}],visibility:["visible","invisible","collapse"],z:[{z:[ni,"auto",Z,J]}],basis:[{basis:[qs,"full","auto",a,...S()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ge,qs,"auto","initial","none",J]}],grow:[{grow:["",ge,Z,J]}],shrink:[{shrink:["",ge,Z,J]}],order:[{order:[ni,"first","last","none",Z,J]}],"grid-cols":[{"grid-cols":P()}],"col-start-end":[{col:M()}],"col-start":[{"col-start":V()}],"col-end":[{"col-end":V()}],"grid-rows":[{"grid-rows":P()}],"row-start-end":[{row:M()}],"row-start":[{"row-start":V()}],"row-end":[{"row-end":V()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":k()}],"auto-rows":[{"auto-rows":k()}],gap:[{gap:S()}],"gap-x":[{"gap-x":S()}],"gap-y":[{"gap-y":S()}],"justify-content":[{justify:[...oe(),"normal"]}],"justify-items":[{"justify-items":[...me(),"normal"]}],"justify-self":[{"justify-self":["auto",...me()]}],"align-content":[{content:["normal",...oe()]}],"align-items":[{items:[...me(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...me(),{baseline:["","last"]}]}],"place-content":[{"place-content":oe()}],"place-items":[{"place-items":[...me(),"baseline"]}],"place-self":[{"place-self":["auto",...me()]}],p:[{p:S()}],px:[{px:S()}],py:[{py:S()}],ps:[{ps:S()}],pe:[{pe:S()}],pt:[{pt:S()}],pr:[{pr:S()}],pb:[{pb:S()}],pl:[{pl:S()}],m:[{m:ae()}],mx:[{mx:ae()}],my:[{my:ae()}],ms:[{ms:ae()}],me:[{me:ae()}],mt:[{mt:ae()}],mr:[{mr:ae()}],mb:[{mb:ae()}],ml:[{ml:ae()}],"space-x":[{"space-x":S()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":S()}],"space-y-reverse":["space-y-reverse"],size:[{size:te()}],w:[{w:[a,"screen",...te()]}],"min-w":[{"min-w":[a,"screen","none",...te()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[o]},...te()]}],h:[{h:["screen","lh",...te()]}],"min-h":[{"min-h":["screen","lh","none",...te()]}],"max-h":[{"max-h":["screen","lh",...te()]}],"font-size":[{text:["base",n,Ba,Ki]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Z,dm]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",cm,J]}],"font-family":[{font:[F8,J,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,Z,J]}],"line-clamp":[{"line-clamp":[ge,"none",Z,dm]}],leading:[{leading:[s,...S()]}],"list-image":[{"list-image":["none",Z,J]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Z,J]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:F()}],"text-color":[{text:F()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ne(),"wavy"]}],"text-decoration-thickness":[{decoration:[ge,"from-font","auto",Z,Ki]}],"text-decoration-color":[{decoration:F()}],"underline-offset":[{"underline-offset":[ge,"auto",Z,J]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:S()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Z,J]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Z,J]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:B()}],"bg-repeat":[{bg:O()}],"bg-size":[{bg:D()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ni,Z,J],radial:["",Z,J],conic:[ni,Z,J]},U8,L8]}],"bg-color":[{bg:F()}],"gradient-from-pos":[{from:W()}],"gradient-via-pos":[{via:W()}],"gradient-to-pos":[{to:W()}],"gradient-from":[{from:F()}],"gradient-via":[{via:F()}],"gradient-to":[{to:F()}],rounded:[{rounded:q()}],"rounded-s":[{"rounded-s":q()}],"rounded-e":[{"rounded-e":q()}],"rounded-t":[{"rounded-t":q()}],"rounded-r":[{"rounded-r":q()}],"rounded-b":[{"rounded-b":q()}],"rounded-l":[{"rounded-l":q()}],"rounded-ss":[{"rounded-ss":q()}],"rounded-se":[{"rounded-se":q()}],"rounded-ee":[{"rounded-ee":q()}],"rounded-es":[{"rounded-es":q()}],"rounded-tl":[{"rounded-tl":q()}],"rounded-tr":[{"rounded-tr":q()}],"rounded-br":[{"rounded-br":q()}],"rounded-bl":[{"rounded-bl":q()}],"border-w":[{border:Y()}],"border-w-x":[{"border-x":Y()}],"border-w-y":[{"border-y":Y()}],"border-w-s":[{"border-s":Y()}],"border-w-e":[{"border-e":Y()}],"border-w-t":[{"border-t":Y()}],"border-w-r":[{"border-r":Y()}],"border-w-b":[{"border-b":Y()}],"border-w-l":[{"border-l":Y()}],"divide-x":[{"divide-x":Y()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Y()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ne(),"hidden","none"]}],"divide-style":[{divide:[...ne(),"hidden","none"]}],"border-color":[{border:F()}],"border-color-x":[{"border-x":F()}],"border-color-y":[{"border-y":F()}],"border-color-s":[{"border-s":F()}],"border-color-e":[{"border-e":F()}],"border-color-t":[{"border-t":F()}],"border-color-r":[{"border-r":F()}],"border-color-b":[{"border-b":F()}],"border-color-l":[{"border-l":F()}],"divide-color":[{divide:F()}],"outline-style":[{outline:[...ne(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ge,Z,J]}],"outline-w":[{outline:["",ge,Ba,Ki]}],"outline-color":[{outline:F()}],shadow:[{shadow:["","none",d,$c,Bc]}],"shadow-color":[{shadow:F()}],"inset-shadow":[{"inset-shadow":["none",h,$c,Bc]}],"inset-shadow-color":[{"inset-shadow":F()}],"ring-w":[{ring:Y()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:F()}],"ring-offset-w":[{"ring-offset":[ge,Ki]}],"ring-offset-color":[{"ring-offset":F()}],"inset-ring-w":[{"inset-ring":Y()}],"inset-ring-color":[{"inset-ring":F()}],"text-shadow":[{"text-shadow":["none",f,$c,Bc]}],"text-shadow-color":[{"text-shadow":F()}],opacity:[{opacity:[ge,Z,J]}],"mix-blend":[{"mix-blend":[...re(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":re()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ge]}],"mask-image-linear-from-pos":[{"mask-linear-from":G()}],"mask-image-linear-to-pos":[{"mask-linear-to":G()}],"mask-image-linear-from-color":[{"mask-linear-from":F()}],"mask-image-linear-to-color":[{"mask-linear-to":F()}],"mask-image-t-from-pos":[{"mask-t-from":G()}],"mask-image-t-to-pos":[{"mask-t-to":G()}],"mask-image-t-from-color":[{"mask-t-from":F()}],"mask-image-t-to-color":[{"mask-t-to":F()}],"mask-image-r-from-pos":[{"mask-r-from":G()}],"mask-image-r-to-pos":[{"mask-r-to":G()}],"mask-image-r-from-color":[{"mask-r-from":F()}],"mask-image-r-to-color":[{"mask-r-to":F()}],"mask-image-b-from-pos":[{"mask-b-from":G()}],"mask-image-b-to-pos":[{"mask-b-to":G()}],"mask-image-b-from-color":[{"mask-b-from":F()}],"mask-image-b-to-color":[{"mask-b-to":F()}],"mask-image-l-from-pos":[{"mask-l-from":G()}],"mask-image-l-to-pos":[{"mask-l-to":G()}],"mask-image-l-from-color":[{"mask-l-from":F()}],"mask-image-l-to-color":[{"mask-l-to":F()}],"mask-image-x-from-pos":[{"mask-x-from":G()}],"mask-image-x-to-pos":[{"mask-x-to":G()}],"mask-image-x-from-color":[{"mask-x-from":F()}],"mask-image-x-to-color":[{"mask-x-to":F()}],"mask-image-y-from-pos":[{"mask-y-from":G()}],"mask-image-y-to-pos":[{"mask-y-to":G()}],"mask-image-y-from-color":[{"mask-y-from":F()}],"mask-image-y-to-color":[{"mask-y-to":F()}],"mask-image-radial":[{"mask-radial":[Z,J]}],"mask-image-radial-from-pos":[{"mask-radial-from":G()}],"mask-image-radial-to-pos":[{"mask-radial-to":G()}],"mask-image-radial-from-color":[{"mask-radial-from":F()}],"mask-image-radial-to-color":[{"mask-radial-to":F()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":R()}],"mask-image-conic-pos":[{"mask-conic":[ge]}],"mask-image-conic-from-pos":[{"mask-conic-from":G()}],"mask-image-conic-to-pos":[{"mask-conic-to":G()}],"mask-image-conic-from-color":[{"mask-conic-from":F()}],"mask-image-conic-to-color":[{"mask-conic-to":F()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:B()}],"mask-repeat":[{mask:O()}],"mask-size":[{mask:D()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Z,J]}],filter:[{filter:["","none",Z,J]}],blur:[{blur:ce()}],brightness:[{brightness:[ge,Z,J]}],contrast:[{contrast:[ge,Z,J]}],"drop-shadow":[{"drop-shadow":["","none",m,$c,Bc]}],"drop-shadow-color":[{"drop-shadow":F()}],grayscale:[{grayscale:["",ge,Z,J]}],"hue-rotate":[{"hue-rotate":[ge,Z,J]}],invert:[{invert:["",ge,Z,J]}],saturate:[{saturate:[ge,Z,J]}],sepia:[{sepia:["",ge,Z,J]}],"backdrop-filter":[{"backdrop-filter":["","none",Z,J]}],"backdrop-blur":[{"backdrop-blur":ce()}],"backdrop-brightness":[{"backdrop-brightness":[ge,Z,J]}],"backdrop-contrast":[{"backdrop-contrast":[ge,Z,J]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ge,Z,J]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ge,Z,J]}],"backdrop-invert":[{"backdrop-invert":["",ge,Z,J]}],"backdrop-opacity":[{"backdrop-opacity":[ge,Z,J]}],"backdrop-saturate":[{"backdrop-saturate":[ge,Z,J]}],"backdrop-sepia":[{"backdrop-sepia":["",ge,Z,J]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":S()}],"border-spacing-x":[{"border-spacing-x":S()}],"border-spacing-y":[{"border-spacing-y":S()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Z,J]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ge,"initial",Z,J]}],ease:[{ease:["linear","initial",g,Z,J]}],delay:[{delay:[ge,Z,J]}],animate:[{animate:["none",E,Z,J]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[_,Z,J]}],"perspective-origin":[{"perspective-origin":N()}],rotate:[{rotate:de()}],"rotate-x":[{"rotate-x":de()}],"rotate-y":[{"rotate-y":de()}],"rotate-z":[{"rotate-z":de()}],scale:[{scale:ye()}],"scale-x":[{"scale-x":ye()}],"scale-y":[{"scale-y":ye()}],"scale-z":[{"scale-z":ye()}],"scale-3d":["scale-3d"],skew:[{skew:ve()}],"skew-x":[{"skew-x":ve()}],"skew-y":[{"skew-y":ve()}],transform:[{transform:[Z,J,"","none","gpu","cpu"]}],"transform-origin":[{origin:N()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:xe()}],"translate-x":[{"translate-x":xe()}],"translate-y":[{"translate-y":xe()}],"translate-z":[{"translate-z":xe()}],"translate-none":["translate-none"],accent:[{accent:F()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:F()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Z,J]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":S()}],"scroll-mx":[{"scroll-mx":S()}],"scroll-my":[{"scroll-my":S()}],"scroll-ms":[{"scroll-ms":S()}],"scroll-me":[{"scroll-me":S()}],"scroll-mt":[{"scroll-mt":S()}],"scroll-mr":[{"scroll-mr":S()}],"scroll-mb":[{"scroll-mb":S()}],"scroll-ml":[{"scroll-ml":S()}],"scroll-p":[{"scroll-p":S()}],"scroll-px":[{"scroll-px":S()}],"scroll-py":[{"scroll-py":S()}],"scroll-ps":[{"scroll-ps":S()}],"scroll-pe":[{"scroll-pe":S()}],"scroll-pt":[{"scroll-pt":S()}],"scroll-pr":[{"scroll-pr":S()}],"scroll-pb":[{"scroll-pb":S()}],"scroll-pl":[{"scroll-pl":S()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Z,J]}],fill:[{fill:["none",...F()]}],"stroke-w":[{stroke:[ge,Ba,Ki,dm]}],stroke:[{stroke:["none",...F()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},W8=S8(z8);function Mn(...t){return W8(c8(t))}const H8=a8,q8=l8,G8=y.forwardRef(({className:t,inset:e,children:n,...r},i)=>x.jsxs(kN,{ref:i,className:Mn("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",t),...r,children:[n,x.jsx(Gz,{className:"ml-auto"})]}));G8.displayName=kN.displayName;const K8=y.forwardRef(({className:t,...e},n)=>x.jsx(NN,{ref:n,className:Mn("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...e}));K8.displayName=NN.displayName;const WN=y.forwardRef(({className:t,sideOffset:e=4,...n},r)=>x.jsx(u8,{children:x.jsx(SN,{ref:r,sideOffset:e,className:Mn("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...n})}));WN.displayName=SN.displayName;const HN=y.forwardRef(({className:t,inset:e,...n},r)=>x.jsx(CN,{ref:r,className:Mn("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",e&&"pl-8",t),...n}));HN.displayName=CN.displayName;const Q8=y.forwardRef(({className:t,children:e,checked:n,...r},i)=>x.jsxs(AN,{ref:i,className:Mn("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[x.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:x.jsx(RN,{children:x.jsx(Hz,{className:"h-4 w-4"})})}),e]}));Q8.displayName=AN.displayName;const Y8=y.forwardRef(({className:t,children:e,...n},r)=>x.jsxs(bN,{ref:r,className:Mn("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[x.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:x.jsx(RN,{children:x.jsx(Qz,{className:"h-2 w-2 fill-current"})})}),e]}));Y8.displayName=bN.displayName;const X8=y.forwardRef(({className:t,inset:e,...n},r)=>x.jsx(IN,{ref:r,className:Mn("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));X8.displayName=IN.displayName;const J8=y.forwardRef(({className:t,...e},n)=>x.jsx(PN,{ref:n,className:Mn("-mx-1 my-1 h-px bg-muted",t),...e}));J8.displayName=PN.displayName;function Z8({user:t,couple:e}){const n=()=>{if(!window.confirm(`Souhaites-tu signaler le couple "${e.personA.display_name} et ${e.personB.display_name}" ?`))return;const i=t.displayName??"Utilisateur anonyme",s=`Signalement d'un couple : ${e.personA.display_name} & ${e.personB.display_name}`,o=`
Bonjour,

Un utilisateur a signal un couple sur Surchope :

 Utilisateur : ${i}
 Lien : https://surchope.fr/couple/${e.id}
 Raison : ( complter)

Merci.
    `.trim(),a=`mailto:contact@surchope.fr?subject=${encodeURIComponent(s)}&body=${encodeURIComponent(o)}`;window.location.href=a};return x.jsxs(H8,{children:[x.jsx(q8,{asChild:!0,children:x.jsx("button",{className:"p-2 rounded-full text-muted-foreground hover:text-foreground hover:bg-muted transition focus:outline-none focus:ring-2 focus:ring-[hsl(var(--primary))] focus:ring-offset-2",title:"Plus doptions",children:x.jsx(Xz,{size:18})})}),x.jsx(WN,{align:"end",sideOffset:6,className:"bg-card text-card-foreground border border-border rounded-lg shadow-md p-1",children:x.jsxs(HN,{onClick:n,className:"flex items-center gap-2 px-3 py-2 rounded-md cursor-pointer text-muted-foreground hover:text-foreground hover:bg-muted transition",children:[x.jsx(Zz,{size:14,className:"text-amber-500"}),x.jsx("span",{children:"Signaler ce couple"})]})})]})}function Nf({couple:t,user:e,myChoice:n,onVote:r,compact:i=!1,onlyMyVotes:s=!1,onDelete:o}){const[a,l]=y.useState(null);return x.jsxs("div",{className:"relative p-4 rounded-2xl bg-card text-card-foreground border border-border shadow-sm hover:shadow-md transition-all duration-200",children:[x.jsxs("div",{className:"flex justify-between items-start mb-3",children:[x.jsx(JW,{couple:t,user:e,onDelete:o,compact:i}),e&&!i&&x.jsx(Z8,{user:e,couple:t})]}),x.jsx("div",{className:"flex flex-col items-center gap-4",children:x.jsx(eH,{couple:t,myChoice:n,onlyMyVotes:s,onSelectPerson:l})}),!i&&x.jsx("div",{className:"mt-3",children:x.jsx(tH,{couple:t,user:e,canVote:!!e&&!!r,myChoice:n,onVote:r})}),!e&&!i&&x.jsx("div",{className:"mt-4 text-center",children:x.jsx("div",{className:"inline-block bg-primary/10 text-primary text-sm font-medium px-3 py-2 rounded-full shadow-sm",children:"Connecte-toi pour voter"})}),a&&x.jsx(XW,{name:a,onClose:()=>l(null)})]})}function su({children:t,variant:e="primary",size:n="md",fullWidth:r=!1,className:i,...s}){const o="inline-flex items-center justify-center font-medium rounded-full transition active:scale-95 focus:outline-none focus:ring-2 focus:ring-offset-2",a={primary:"bg-primary text-primary-foreground hover:opacity-90 focus:ring-[hsl(var(--primary))]",secondary:"bg-secondary text-secondary-foreground hover:opacity-90 focus:ring-[hsl(var(--secondary))]",outline:"border border-border text-foreground hover:bg-muted focus:ring-[hsl(var(--ring))]",ghost:"text-foreground/70 hover:bg-muted focus:ring-[hsl(var(--ring))]"},l={sm:"px-3 py-1 text-sm",md:"px-4 py-2 text-sm",lg:"px-5 py-2.5 text-base"};return x.jsx("button",{className:Mn(o,a[e],l[n],r&&"w-full",i),...s,children:t})}function e7({onClose:t}){return x.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",children:x.jsxs("div",{className:"bg-card text-card-foreground border border-border rounded-2xl p-6 max-w-sm mx-4 text-center shadow-lg animate-fadeIn",children:[x.jsx("h2",{className:"text-xl font-semibold text-primary mb-3",children:"Bienvenue sur Surchope "}),x.jsxs("p",{className:"text-sm text-muted-foreground leading-relaxed mb-5",children:["Ici, on ",x.jsx("span",{className:"font-semibold text-primary",children:"surchope"})," : cest quand on est en couple avec quelquun de plus attractif que soi  celui ou celle qui a un peu trop bien russi son coup ",x.jsx("br",{}),"Tout a avec humour et bienveillance "]}),x.jsx(su,{onClick:t,variant:"primary",size:"sm",className:"rounded-full px-5",children:"Jai compris"})]})})}function uy(){return x.jsx("footer",{className:"text-center text-xs text-muted-foreground mt-10 pt-4 border-t border-border italic",children:"Surchoper : cest quand on est en couple avec quelquun dun peu trop canon pour soi "})}function qN({value:t,onChange:e,placeholder:n="Rechercher...",className:r}){return x.jsxs("div",{className:Mn("relative w-full sm:w-80 flex items-center",r),children:[x.jsx(a3,{size:18,className:"absolute left-3 text-muted-foreground/80 pointer-events-none"}),x.jsx("input",{type:"text",value:t,onChange:i=>e(i.target.value),placeholder:n,className:"w-full border border-border rounded-full pl-10 pr-4 py-2 text-sm bg-background text-foreground shadow-sm focus:outline-none focus:ring-2 focus:ring-[hsl(var(--primary))] placeholder:text-muted-foreground/60"})]})}function t7({user:t,couples:e,myVotes:n,onVote:r,loading:i,deleteCouple:s}){const[o,a]=y.useState(""),[l,u]=y.useState(!1),[d,h]=y.useState([]);y.useEffect(()=>{if(d.length===0&&e.length>0){const m=[...e].sort((w,_)=>{const I=!!n[w.id],g=!!n[_.id];return I===g?0:I?1:-1});h(m);return}d.length>0&&e.length>0&&h(m=>{const w=[...m];return e.forEach(_=>{const I=w.findIndex(g=>g.id===_.id);I!==-1?w[I]={...w[I],..._}:w.push(_)}),w.filter(_=>e.some(I=>I.id===_.id))})},[e,n]),y.useEffect(()=>{localStorage.getItem("surchope_intro_seen")||(u(!0),localStorage.setItem("surchope_intro_seen","true"))},[]);const f=y.useMemo(()=>{const m=o.trim().toLowerCase();return d.filter(w=>m===""?!0:`${w.personA.display_name} ${w.personB.display_name}`.toLowerCase().includes(m))},[d,o]);return x.jsxs("main",{className:"max-w-5xl mx-auto px-4 py-6 space-y-6 relative text-foreground",children:[l&&x.jsx(e7,{onClose:()=>u(!1)}),i?x.jsx(xf,{}):x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-3",children:x.jsx(qN,{value:o,onChange:a,placeholder:"Rechercher un couple ou un prnom..."})}),f.length===0?x.jsx("p",{className:"text-center text-muted-foreground mt-6",children:"Aucun couple trouv "}):x.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-2 gap-4 pb-24",children:f.map(m=>x.jsx(Nf,{couple:m,user:t,myChoice:n[m.id],onVote:r,onlyMyVotes:!1,onDelete:s},m.id))})]}),x.jsx(uy,{})]})}function qS({children:t,className:e}){return x.jsx("div",{className:Mn("bg-card text-card-foreground border border-border rounded-2xl shadow-sm hover:shadow-md transition p-4",e),children:t})}function n7({icon:t,label:e,onClick:n,color:r="default",className:i}){const s={default:"bg-muted hover:bg-muted/80 text-foreground/80 focus:ring-[hsl(var(--ring))]",primary:"bg-primary text-primary-foreground hover:opacity-90 focus:ring-[hsl(var(--primary))]",secondary:"bg-secondary text-secondary-foreground hover:opacity-90 focus:ring-[hsl(var(--secondary))]"};return x.jsx("button",{onClick:n,title:e,className:Mn("flex items-center justify-center rounded-full p-2 transition focus:outline-none focus:ring-2 focus:ring-offset-2 active:scale-95",s[r],i),children:x.jsx(t,{size:18})})}function ou({to:t="/",label:e="Retour  la liste",className:n}){return x.jsx("div",{className:`flex justify-center ${n??""}`,children:x.jsx(Eo,{to:t,children:x.jsxs(su,{variant:"outline",size:"sm",className:"group flex items-center gap-2 px-4 py-2 rounded-full shadow-sm hover:bg-muted transition",children:[x.jsx(Bz,{size:16,className:"text-primary transition-transform group-hover:-translate-x-1"}),x.jsx("span",{children:e})]})})})}function r7({user:t,couples:e,votesAll:n}){fu();const[r,i]=y.useState(!0),[s,o]=y.useState([]);y.useEffect(()=>{(async()=>{if(!t){o([]),i(!1);return}const l=Ss(Mr(Fe,"votes"),Kl("uid","==",t.uid),jR("updatedAt","desc")),u=await ku(l),d=[];u.forEach(h=>{var I,g;const f=h.data(),m=e.find(E=>E.id===f.couple_id);if(!m)return;let w;f.people_voted_id==="tie"?w="tie":w=f.people_voted_id===m.personA.id?"A":"B";const _=(g=(I=f.updatedAt)==null?void 0:I.toDate)==null?void 0:g.call(I);d.push({id:h.id,couple:m,choice:w,updatedAt:_})}),o(d),i(!1)})()},[t,e]);const a=async l=>{if(confirm("Supprimer ce vote ?"))try{await mi(Ot(Fe,"votes",l)),o(u=>u.filter(d=>d.id!==l))}catch(u){console.error("Erreur suppression vote:",u),alert("Erreur lors de la suppression du vote.")}};return t?x.jsxs("main",{className:"max-w-5xl mx-auto px-4 py-6 space-y-4 text-foreground",children:[x.jsx("h2",{className:"text-lg font-semibold mb-4 text-primary",children:"Mon historique"}),r&&x.jsx(xf,{}),!r&&s.length===0&&x.jsx("div",{className:"text-muted-foreground text-sm",children:"Tu nas encore vot pour aucun couple "}),x.jsx(yh,{children:!r&&s.map(l=>x.jsx(nr.div,{layout:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},children:x.jsxs(qS,{className:"relative p-3 flex flex-col gap-2",children:[x.jsx("div",{className:"",children:x.jsx(n7,{icon:mP,label:"Supprimer ce vote",color:"default",onClick:()=>a(l.id)})}),x.jsx(Nf,{couple:l.couple,user:t,myChoice:l.choice,onlyMyVotes:!0,compact:!0})]})},l.id))})]}):x.jsx("main",{className:"max-w-5xl mx-auto px-4 py-10",children:x.jsxs(qS,{className:"p-6 text-center bg-card text-card-foreground",children:[x.jsx("h2",{className:"text-lg font-semibold mb-2 text-primary",children:"Mes votes"}),x.jsx("p",{className:"text-muted-foreground",children:"Connecte-toi pour voir ton historique de votes."}),x.jsx(ou,{to:"/",label:"Retour  la liste",className:"mt-8"})]})})}var GS=!1,Zi,cy,dy,_d,Ed,GN,xd,hy,fy,py,KN,my,gy,QN,YN;function Jt(){if(!GS){GS=!0;var t=navigator.userAgent,e=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(t),n=/(Mac OS X)|(Windows)|(Linux)/.exec(t);if(my=/\b(iPhone|iP[ao]d)/.exec(t),gy=/\b(iP[ao]d)/.exec(t),py=/Android/i.exec(t),QN=/FBAN\/\w+;/i.exec(t),YN=/Mobile/i.exec(t),KN=!!/Win64/.exec(t),e){Zi=e[1]?parseFloat(e[1]):e[5]?parseFloat(e[5]):NaN,Zi&&document&&document.documentMode&&(Zi=document.documentMode);var r=/(?:Trident\/(\d+.\d+))/.exec(t);GN=r?parseFloat(r[1])+4:Zi,cy=e[2]?parseFloat(e[2]):NaN,dy=e[3]?parseFloat(e[3]):NaN,_d=e[4]?parseFloat(e[4]):NaN,_d?(e=/(?:Chrome\/(\d+\.\d+))/.exec(t),Ed=e&&e[1]?parseFloat(e[1]):NaN):Ed=NaN}else Zi=cy=dy=Ed=_d=NaN;if(n){if(n[1]){var i=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(t);xd=i?parseFloat(i[1].replace("_",".")):!0}else xd=!1;hy=!!n[2],fy=!!n[3]}else xd=hy=fy=!1}}var yy={ie:function(){return Jt()||Zi},ieCompatibilityMode:function(){return Jt()||GN>Zi},ie64:function(){return yy.ie()&&KN},firefox:function(){return Jt()||cy},opera:function(){return Jt()||dy},webkit:function(){return Jt()||_d},safari:function(){return yy.webkit()},chrome:function(){return Jt()||Ed},windows:function(){return Jt()||hy},osx:function(){return Jt()||xd},linux:function(){return Jt()||fy},iphone:function(){return Jt()||my},mobile:function(){return Jt()||my||gy||py||YN},nativeApp:function(){return Jt()||QN},android:function(){return Jt()||py},ipad:function(){return Jt()||gy}},i7=yy,s7=!!(typeof window<"u"&&window.document&&window.document.createElement),o7={canUseDOM:s7},a7=o7,XN=a7,JN;XN.canUseDOM&&(JN=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function l7(t,e){if(!XN.canUseDOM||e&&!("addEventListener"in document))return!1;var n="on"+t,r=n in document;if(!r){var i=document.createElement("div");i.setAttribute(n,"return;"),r=typeof i[n]=="function"}return!r&&JN&&t==="wheel"&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var u7=l7,c7=i7,d7=u7,KS=10,QS=40,YS=800;function ZN(t){var e=0,n=0,r=0,i=0;return"detail"in t&&(n=t.detail),"wheelDelta"in t&&(n=-t.wheelDelta/120),"wheelDeltaY"in t&&(n=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=n,n=0),r=e*KS,i=n*KS,"deltaY"in t&&(i=t.deltaY),"deltaX"in t&&(r=t.deltaX),(r||i)&&t.deltaMode&&(t.deltaMode==1?(r*=QS,i*=QS):(r*=YS,i*=YS)),r&&!e&&(e=r<1?-1:1),i&&!n&&(n=i<1?-1:1),{spinX:e,spinY:n,pixelX:r,pixelY:i}}ZN.getEventType=function(){return c7.firefox()?"DOMMouseScroll":d7("wheel")?"wheel":"mousewheel"};var h7=ZN,f7=h7;const p7=vy(f7);function m7(t,e,n,r,i,s){s===void 0&&(s=0);var o=Go(t,e,s),a=o.width,l=o.height,u=Math.min(a,n),d=Math.min(l,r);return u>d*i?{width:d*i,height:d}:{width:u,height:u/i}}function g7(t){return t.width>t.height?t.width/t.naturalWidth:t.height/t.naturalHeight}function $a(t,e,n,r,i){i===void 0&&(i=0);var s=Go(e.width,e.height,i),o=s.width,a=s.height;return{x:XS(t.x,o,n.width,r),y:XS(t.y,a,n.height,r)}}function XS(t,e,n,r){var i=e*r/2-n/2;return Mf(t,-i,i)}function JS(t,e){return Math.sqrt(Math.pow(t.y-e.y,2)+Math.pow(t.x-e.x,2))}function ZS(t,e){return Math.atan2(e.y-t.y,e.x-t.x)*180/Math.PI}function y7(t,e,n,r,i,s,o){s===void 0&&(s=0),o===void 0&&(o=!0);var a=o?v7:w7,l=Go(e.width,e.height,s),u=Go(e.naturalWidth,e.naturalHeight,s),d={x:a(100,((l.width-n.width/i)/2-t.x/i)/l.width*100),y:a(100,((l.height-n.height/i)/2-t.y/i)/l.height*100),width:a(100,n.width/l.width*100/i),height:a(100,n.height/l.height*100/i)},h=Math.round(a(u.width,d.width*u.width/100)),f=Math.round(a(u.height,d.height*u.height/100)),m=u.width>=u.height*r,w=m?{width:Math.round(f*r),height:f}:{width:h,height:Math.round(h/r)},_=Me(Me({},w),{x:Math.round(a(u.width-w.width,d.x*u.width/100)),y:Math.round(a(u.height-w.height,d.y*u.height/100))});return{croppedAreaPercentages:d,croppedAreaPixels:_}}function v7(t,e){return Math.min(t,Math.max(0,e))}function w7(t,e){return e}function _7(t,e,n,r,i,s){var o=Go(e.width,e.height,n),a=Mf(r.width/o.width*(100/t.width),i,s),l={x:a*o.width/2-r.width/2-o.width*a*(t.x/100),y:a*o.height/2-r.height/2-o.height*a*(t.y/100)};return{crop:l,zoom:a}}function E7(t,e,n){var r=g7(e);return n.height>n.width?n.height/(t.height*r):n.width/(t.width*r)}function x7(t,e,n,r,i,s){n===void 0&&(n=0);var o=Go(e.naturalWidth,e.naturalHeight,n),a=Mf(E7(t,e,r),i,s),l=r.height>r.width?r.height/t.height:r.width/t.width,u={x:((o.width-t.width)/2-t.x)*l,y:((o.height-t.height)/2-t.y)*l};return{crop:u,zoom:a}}function eI(t,e){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}function T7(t){return t*Math.PI/180}function Go(t,e,n){var r=T7(n);return{width:Math.abs(Math.cos(r)*t)+Math.abs(Math.sin(r)*e),height:Math.abs(Math.sin(r)*t)+Math.abs(Math.cos(r)*e)}}function Mf(t,e,n){return Math.min(Math.max(t,e),n)}function zc(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.filter(function(n){return typeof n=="string"&&n.length>0}).join(" ").trim()}var S7=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,I7=1,C7=3,A7=1,b7=function(t){aF(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.cropperRef=y.createRef(),n.imageRef=y.createRef(),n.videoRef=y.createRef(),n.containerPosition={x:0,y:0},n.containerRef=null,n.styleRef=null,n.containerRect=null,n.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},n.dragStartPosition={x:0,y:0},n.dragStartCrop={x:0,y:0},n.gestureZoomStart=0,n.gestureRotationStart=0,n.isTouching=!1,n.lastPinchDistance=0,n.lastPinchRotation=0,n.rafDragTimeout=null,n.rafPinchTimeout=null,n.wheelTimer=null,n.currentDoc=typeof document<"u"?document:null,n.currentWindow=typeof window<"u"?window:null,n.resizeObserver=null,n.previousCropSize=null,n.isInitialized=!1,n.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},n.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!n.containerRef)){var r=!0;n.resizeObserver=new window.ResizeObserver(function(i){if(r){r=!1;return}n.computeSizes()}),n.resizeObserver.observe(n.containerRef)}},n.preventZoomSafari=function(r){return r.preventDefault()},n.cleanEvents=function(){n.currentDoc&&(n.currentDoc.removeEventListener("mousemove",n.onMouseMove),n.currentDoc.removeEventListener("mouseup",n.onDragStopped),n.currentDoc.removeEventListener("touchmove",n.onTouchMove),n.currentDoc.removeEventListener("touchend",n.onDragStopped),n.currentDoc.removeEventListener("gesturechange",n.onGestureChange),n.currentDoc.removeEventListener("gestureend",n.onGestureEnd),n.currentDoc.removeEventListener("scroll",n.onScroll))},n.clearScrollEvent=function(){n.containerRef&&n.containerRef.removeEventListener("wheel",n.onWheel),n.wheelTimer&&clearTimeout(n.wheelTimer)},n.onMediaLoad=function(){var r=n.computeSizes();r&&(n.previousCropSize=r,n.emitCropData(),n.setInitialCrop(r),n.isInitialized=!0),n.props.onMediaLoaded&&n.props.onMediaLoaded(n.mediaSize)},n.setInitialCrop=function(r){if(n.props.initialCroppedAreaPercentages){var i=_7(n.props.initialCroppedAreaPercentages,n.mediaSize,n.props.rotation,r,n.props.minZoom,n.props.maxZoom),s=i.crop,o=i.zoom;n.props.onCropChange(s),n.props.onZoomChange&&n.props.onZoomChange(o)}else if(n.props.initialCroppedAreaPixels){var a=x7(n.props.initialCroppedAreaPixels,n.mediaSize,n.props.rotation,r,n.props.minZoom,n.props.maxZoom),s=a.crop,o=a.zoom;n.props.onCropChange(s),n.props.onZoomChange&&n.props.onZoomChange(o)}},n.computeSizes=function(){var r,i,s,o,a,l,u=n.imageRef.current||n.videoRef.current;if(u&&n.containerRef){n.containerRect=n.containerRef.getBoundingClientRect(),n.saveContainerPosition();var d=n.containerRect.width/n.containerRect.height,h=((r=n.imageRef.current)===null||r===void 0?void 0:r.naturalWidth)||((i=n.videoRef.current)===null||i===void 0?void 0:i.videoWidth)||0,f=((s=n.imageRef.current)===null||s===void 0?void 0:s.naturalHeight)||((o=n.videoRef.current)===null||o===void 0?void 0:o.videoHeight)||0,m=u.offsetWidth<h||u.offsetHeight<f,w=h/f,_=void 0;if(m)switch(n.state.mediaObjectFit){default:case"contain":_=d>w?{width:n.containerRect.height*w,height:n.containerRect.height}:{width:n.containerRect.width,height:n.containerRect.width/w};break;case"horizontal-cover":_={width:n.containerRect.width,height:n.containerRect.width/w};break;case"vertical-cover":_={width:n.containerRect.height*w,height:n.containerRect.height};break}else _={width:u.offsetWidth,height:u.offsetHeight};n.mediaSize=Me(Me({},_),{naturalWidth:h,naturalHeight:f}),n.props.setMediaSize&&n.props.setMediaSize(n.mediaSize);var I=n.props.cropSize?n.props.cropSize:m7(n.mediaSize.width,n.mediaSize.height,n.containerRect.width,n.containerRect.height,n.props.aspect,n.props.rotation);return(((a=n.state.cropSize)===null||a===void 0?void 0:a.height)!==I.height||((l=n.state.cropSize)===null||l===void 0?void 0:l.width)!==I.width)&&n.props.onCropSizeChange&&n.props.onCropSizeChange(I),n.setState({cropSize:I},n.recomputeCropPosition),n.props.setCropSize&&n.props.setCropSize(I),I}},n.saveContainerPosition=function(){if(n.containerRef){var r=n.containerRef.getBoundingClientRect();n.containerPosition={x:r.left,y:r.top}}},n.onMouseDown=function(r){n.currentDoc&&(r.preventDefault(),n.currentDoc.addEventListener("mousemove",n.onMouseMove),n.currentDoc.addEventListener("mouseup",n.onDragStopped),n.saveContainerPosition(),n.onDragStart(e.getMousePoint(r)))},n.onMouseMove=function(r){return n.onDrag(e.getMousePoint(r))},n.onScroll=function(r){n.currentDoc&&(r.preventDefault(),n.saveContainerPosition())},n.onTouchStart=function(r){n.currentDoc&&(n.isTouching=!0,!(n.props.onTouchRequest&&!n.props.onTouchRequest(r))&&(n.currentDoc.addEventListener("touchmove",n.onTouchMove,{passive:!1}),n.currentDoc.addEventListener("touchend",n.onDragStopped),n.saveContainerPosition(),r.touches.length===2?n.onPinchStart(r):r.touches.length===1&&n.onDragStart(e.getTouchPoint(r.touches[0]))))},n.onTouchMove=function(r){r.preventDefault(),r.touches.length===2?n.onPinchMove(r):r.touches.length===1&&n.onDrag(e.getTouchPoint(r.touches[0]))},n.onGestureStart=function(r){n.currentDoc&&(r.preventDefault(),n.currentDoc.addEventListener("gesturechange",n.onGestureChange),n.currentDoc.addEventListener("gestureend",n.onGestureEnd),n.gestureZoomStart=n.props.zoom,n.gestureRotationStart=n.props.rotation)},n.onGestureChange=function(r){if(r.preventDefault(),!n.isTouching){var i=e.getMousePoint(r),s=n.gestureZoomStart-1+r.scale;if(n.setNewZoom(s,i,{shouldUpdatePosition:!0}),n.props.onRotationChange){var o=n.gestureRotationStart+r.rotation;n.props.onRotationChange(o)}}},n.onGestureEnd=function(r){n.cleanEvents()},n.onDragStart=function(r){var i,s,o=r.x,a=r.y;n.dragStartPosition={x:o,y:a},n.dragStartCrop=Me({},n.props.crop),(s=(i=n.props).onInteractionStart)===null||s===void 0||s.call(i)},n.onDrag=function(r){var i=r.x,s=r.y;n.currentWindow&&(n.rafDragTimeout&&n.currentWindow.cancelAnimationFrame(n.rafDragTimeout),n.rafDragTimeout=n.currentWindow.requestAnimationFrame(function(){if(n.state.cropSize&&!(i===void 0||s===void 0)){var o=i-n.dragStartPosition.x,a=s-n.dragStartPosition.y,l={x:n.dragStartCrop.x+o,y:n.dragStartCrop.y+a},u=n.props.restrictPosition?$a(l,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):l;n.props.onCropChange(u)}}))},n.onDragStopped=function(){var r,i;n.isTouching=!1,n.cleanEvents(),n.emitCropData(),(i=(r=n.props).onInteractionEnd)===null||i===void 0||i.call(r)},n.onWheel=function(r){if(n.currentWindow&&!(n.props.onWheelRequest&&!n.props.onWheelRequest(r))){r.preventDefault();var i=e.getMousePoint(r),s=p7(r).pixelY,o=n.props.zoom-s*n.props.zoomSpeed/200;n.setNewZoom(o,i,{shouldUpdatePosition:!0}),n.state.hasWheelJustStarted||n.setState({hasWheelJustStarted:!0},function(){var a,l;return(l=(a=n.props).onInteractionStart)===null||l===void 0?void 0:l.call(a)}),n.wheelTimer&&clearTimeout(n.wheelTimer),n.wheelTimer=n.currentWindow.setTimeout(function(){return n.setState({hasWheelJustStarted:!1},function(){var a,l;return(l=(a=n.props).onInteractionEnd)===null||l===void 0?void 0:l.call(a)})},250)}},n.getPointOnContainer=function(r,i){var s=r.x,o=r.y;if(!n.containerRect)throw new Error("The Cropper is not mounted");return{x:n.containerRect.width/2-(s-i.x),y:n.containerRect.height/2-(o-i.y)}},n.getPointOnMedia=function(r){var i=r.x,s=r.y,o=n.props,a=o.crop,l=o.zoom;return{x:(i+a.x)/l,y:(s+a.y)/l}},n.setNewZoom=function(r,i,s){var o=s===void 0?{}:s,a=o.shouldUpdatePosition,l=a===void 0?!0:a;if(!(!n.state.cropSize||!n.props.onZoomChange)){var u=Mf(r,n.props.minZoom,n.props.maxZoom);if(l){var d=n.getPointOnContainer(i,n.containerPosition),h=n.getPointOnMedia(d),f={x:h.x*u-d.x,y:h.y*u-d.y},m=n.props.restrictPosition?$a(f,n.mediaSize,n.state.cropSize,u,n.props.rotation):f;n.props.onCropChange(m)}n.props.onZoomChange(u)}},n.getCropData=function(){if(!n.state.cropSize)return null;var r=n.props.restrictPosition?$a(n.props.crop,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):n.props.crop;return y7(r,n.mediaSize,n.state.cropSize,n.getAspect(),n.props.zoom,n.props.rotation,n.props.restrictPosition)},n.emitCropData=function(){var r=n.getCropData();if(r){var i=r.croppedAreaPercentages,s=r.croppedAreaPixels;n.props.onCropComplete&&n.props.onCropComplete(i,s),n.props.onCropAreaChange&&n.props.onCropAreaChange(i,s)}},n.emitCropAreaChange=function(){var r=n.getCropData();if(r){var i=r.croppedAreaPercentages,s=r.croppedAreaPixels;n.props.onCropAreaChange&&n.props.onCropAreaChange(i,s)}},n.recomputeCropPosition=function(){if(n.state.cropSize){var r=n.props.crop;if(n.isInitialized&&n.previousCropSize){var i=Math.abs(n.previousCropSize.width-n.state.cropSize.width)>1e-6||Math.abs(n.previousCropSize.height-n.state.cropSize.height)>1e-6;if(i){var s=n.state.cropSize.width/n.previousCropSize.width,o=n.state.cropSize.height/n.previousCropSize.height;r={x:n.props.crop.x*s,y:n.props.crop.y*o}}}var a=n.props.restrictPosition?$a(r,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):r;n.previousCropSize=n.state.cropSize,n.props.onCropChange(a),n.emitCropData()}},n.onKeyDown=function(r){var i,s,o=n.props,a=o.crop,l=o.onCropChange,u=o.keyboardStep,d=o.zoom,h=o.rotation,f=u;if(n.state.cropSize){r.shiftKey&&(f*=.2);var m=Me({},a);switch(r.key){case"ArrowUp":m.y-=f,r.preventDefault();break;case"ArrowDown":m.y+=f,r.preventDefault();break;case"ArrowLeft":m.x-=f,r.preventDefault();break;case"ArrowRight":m.x+=f,r.preventDefault();break;default:return}n.props.restrictPosition&&(m=$a(m,n.mediaSize,n.state.cropSize,d,h)),r.repeat||(s=(i=n.props).onInteractionStart)===null||s===void 0||s.call(i),l(m)}},n.onKeyUp=function(r){var i,s;switch(r.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":r.preventDefault();break;default:return}n.emitCropData(),(s=(i=n.props).onInteractionEnd)===null||s===void 0||s.call(i)},n}return e.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=S7,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},e.prototype.componentWillUnmount=function(){var n,r;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(n=this.resizeObserver)===null||n===void 0||n.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((r=this.styleRef.parentNode)===null||r===void 0||r.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},e.prototype.componentDidUpdate=function(n){var r,i,s,o,a,l,u,d,h;n.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):n.aspect!==this.props.aspect?this.computeSizes():n.objectFit!==this.props.objectFit?this.computeSizes():n.zoom!==this.props.zoom?this.recomputeCropPosition():((r=n.cropSize)===null||r===void 0?void 0:r.height)!==((i=this.props.cropSize)===null||i===void 0?void 0:i.height)||((s=n.cropSize)===null||s===void 0?void 0:s.width)!==((o=this.props.cropSize)===null||o===void 0?void 0:o.width)?this.computeSizes():(((a=n.crop)===null||a===void 0?void 0:a.x)!==((l=this.props.crop)===null||l===void 0?void 0:l.x)||((u=n.crop)===null||u===void 0?void 0:u.y)!==((d=this.props.crop)===null||d===void 0?void 0:d.y))&&this.emitCropAreaChange(),n.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),n.video!==this.props.video&&((h=this.videoRef.current)===null||h===void 0||h.load());var f=this.getObjectFit();f!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:f},this.computeSizes)},e.prototype.getAspect=function(){var n=this.props,r=n.cropSize,i=n.aspect;return r?r.width/r.height:i},e.prototype.getObjectFit=function(){var n,r,i,s;if(this.props.objectFit==="cover"){var o=this.imageRef.current||this.videoRef.current;if(o&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var a=this.containerRect.width/this.containerRect.height,l=((n=this.imageRef.current)===null||n===void 0?void 0:n.naturalWidth)||((r=this.videoRef.current)===null||r===void 0?void 0:r.videoWidth)||0,u=((i=this.imageRef.current)===null||i===void 0?void 0:i.naturalHeight)||((s=this.videoRef.current)===null||s===void 0?void 0:s.videoHeight)||0,d=l/u;return d<a?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},e.prototype.onPinchStart=function(n){var r=e.getTouchPoint(n.touches[0]),i=e.getTouchPoint(n.touches[1]);this.lastPinchDistance=JS(r,i),this.lastPinchRotation=ZS(r,i),this.onDragStart(eI(r,i))},e.prototype.onPinchMove=function(n){var r=this;if(!(!this.currentDoc||!this.currentWindow)){var i=e.getTouchPoint(n.touches[0]),s=e.getTouchPoint(n.touches[1]),o=eI(i,s);this.onDrag(o),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var a=JS(i,s),l=r.props.zoom*(a/r.lastPinchDistance);r.setNewZoom(l,o,{shouldUpdatePosition:!1}),r.lastPinchDistance=a;var u=ZS(i,s),d=r.props.rotation+(u-r.lastPinchRotation);r.props.onRotationChange&&r.props.onRotationChange(d),r.lastPinchRotation=u})}},e.prototype.render=function(){var n=this,r,i=this.props,s=i.image,o=i.video,a=i.mediaProps,l=i.cropperProps,u=i.transform,d=i.crop,h=d.x,f=d.y,m=i.rotation,w=i.zoom,_=i.cropShape,I=i.showGrid,g=i.roundCropAreaPixels,E=i.style,T=E.containerStyle,R=E.cropAreaStyle,N=E.mediaStyle,L=i.classes,C=L.containerClassName,S=L.cropAreaClassName,A=L.mediaClassName,P=(r=this.state.mediaObjectFit)!==null&&r!==void 0?r:this.getObjectFit();return y.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(V){return n.containerRef=V},"data-testid":"container",style:T,className:zc("reactEasyCrop_Container",C)},s?y.createElement("img",Me({alt:"",className:zc("reactEasyCrop_Image",P==="contain"&&"reactEasyCrop_Contain",P==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",P==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",A)},a,{src:s,ref:this.imageRef,style:Me(Me({},N),{transform:u||"translate(".concat(h,"px, ").concat(f,"px) rotate(").concat(m,"deg) scale(").concat(w,")")}),onLoad:this.onMediaLoad})):o&&y.createElement("video",Me({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:zc("reactEasyCrop_Video",P==="contain"&&"reactEasyCrop_Contain",P==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",P==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",A)},a,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:Me(Me({},N),{transform:u||"translate(".concat(h,"px, ").concat(f,"px) rotate(").concat(m,"deg) scale(").concat(w,")")}),controls:!1}),(Array.isArray(o)?o:[{src:o}]).map(function(M){return y.createElement("source",Me({key:M.src},M))})),this.state.cropSize&&y.createElement("div",Me({ref:this.cropperRef,style:Me(Me({},R),{width:g?Math.round(this.state.cropSize.width):this.state.cropSize.width,height:g?Math.round(this.state.cropSize.height):this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:zc("reactEasyCrop_CropArea",_==="round"&&"reactEasyCrop_CropAreaRound",I&&"reactEasyCrop_CropAreaGrid",S)},l)))},e.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:C7,minZoom:I7,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:A7},e.getMousePoint=function(n){return{x:Number(n.clientX),y:Number(n.clientY)}},e.getTouchPoint=function(n){return{x:Number(n.clientX),y:Number(n.clientY)}},e}(y.Component);function R7({imageSrc:t,onCancel:e,onCrop:n}){const[r,i]=y.useState({x:0,y:0}),[s,o]=y.useState(1),[a,l]=y.useState(null),[u,d]=y.useState(!1),[h,f]=y.useState(null),m=y.useCallback((g,E)=>{l(E)},[]),w=async g=>{if(g.startsWith("data:")||g.startsWith("blob:"))return _(g);const E=`https://corsproxy.io/?${encodeURIComponent(g)}`,T=await fetch(E);if(!T.ok)throw new Error(`Erreur proxy: ${T.status}`);const R=await T.blob(),N=URL.createObjectURL(R);return _(N)},_=g=>new Promise((E,T)=>{const R=new Image;R.onload=()=>E(R),R.onerror=N=>T(N),R.src=g}),I=async()=>{if(!a){f("Zone de recadrage non dfinie");return}d(!0),f(null);try{const g=await w(t),E=document.createElement("canvas"),T=E.getContext("2d");if(!T)throw new Error("Impossible d'obtenir le contexte du canvas");const{width:R,height:N,x:L,y:C}=a;E.width=R,E.height=N,T.drawImage(g,L,C,R,N,0,0,R,N),E.toBlob(S=>{d(!1),S?n(S):f("chec de la conversion en image.")},"image/jpeg",.9)}catch(g){console.error("Erreur lors du recadrage :",g),f(g.message||"Erreur inconnue lors du recadrage."),d(!1)}};return x.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",children:x.jsxs("div",{className:"bg-card text-card-foreground border border-border rounded-2xl p-6 w-80 sm:w-96 flex flex-col items-center shadow-lg animate-fadeIn",children:[x.jsx("div",{className:"relative w-64 h-64 bg-muted rounded-full overflow-hidden border border-border",children:x.jsx(b7,{image:t,crop:r,zoom:s,aspect:1,cropShape:"round",showGrid:!1,onCropChange:i,onZoomChange:o,onCropComplete:m})}),x.jsx("input",{type:"range",min:1,max:3,step:.01,value:s,onChange:g=>o(Number(g.target.value)),className:"w-full mt-5 accent-[hsl(var(--primary))] cursor-pointer"}),x.jsxs("div",{className:"flex gap-3 mt-5",children:[x.jsx(su,{onClick:e,variant:"outline",size:"sm",disabled:u,className:"rounded-full",children:"Annuler"}),x.jsx(su,{onClick:I,variant:"primary",size:"sm",disabled:u,className:`rounded-full ${u?"opacity-70 cursor-not-allowed":""}`,children:u?"Recadrage...":"Valider "})]}),h&&x.jsx("p",{className:"text-destructive text-xs mt-3 text-center",children:h})]})})}function P7({label:t,imageUrl:e,file:n,onFileChange:r,onUrlChange:i}){const[s,o]=y.useState(!1),[a,l]=y.useState(null),u=w=>{const _=new FileReader;_.onload=I=>{var g;return l((g=I.target)==null?void 0:g.result)},_.readAsDataURL(w)},d=w=>{var I;const _=(I=w.target.files)==null?void 0:I[0];_&&u(_)},h=w=>{var I;w.preventDefault(),o(!1);const _=(I=w.dataTransfer.files)==null?void 0:I[0];_&&u(_)},f=w=>{const _=new File([w],"cropped.jpg",{type:"image/jpeg"});r(_),l(null)},m=async()=>{e&&l(e)};return x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{onDrop:h,onDragOver:w=>{w.preventDefault(),o(!0)},onDragLeave:()=>o(!1),className:`relative w-32 h-32 rounded-full border-2 border-dashed flex items-center justify-center cursor-pointer transition-all duration-200 ${s?"border-primary bg-primary/10":"border-border bg-muted hover:bg-muted/80"}`,children:[n||e?x.jsx("img",{src:n?URL.createObjectURL(n):e,alt:"Aperu",className:"object-cover w-full h-full rounded-full border border-border shadow-sm"}):x.jsx(zz,{className:"text-muted-foreground w-10 h-10"}),x.jsx("label",{htmlFor:`${t}-file`,className:"absolute bottom-1 left-1/2 -translate-x-1/2 bg-primary text-primary-foreground text-xs font-medium px-2 py-1 rounded-full cursor-pointer shadow hover:opacity-90 transition",children:n||e?"Changer":"Choisir"}),x.jsx("input",{id:`${t}-file`,type:"file",accept:"image/*",onChange:d,className:"hidden"})]}),x.jsxs("div",{className:"flex gap-2 items-center",children:[x.jsx("input",{type:"text",placeholder:"Ou coller une URL dimage",value:e,onChange:w=>i(w.target.value),className:"flex-1 bg-background border border-border rounded-full px-3 py-2 text-sm text-foreground shadow-sm focus:outline-none focus:ring-2 focus:ring-[hsl(var(--primary))] focus:ring-offset-2 transition"}),x.jsx(su,{type:"button",onClick:m,disabled:!e,variant:e?"primary":"outline",size:"sm",className:`rounded-full px-4 py-1.5 text-sm font-medium ${e?"":"opacity-60 cursor-not-allowed"}`,children:"Recadrer"})]}),a&&x.jsx(R7,{imageSrc:a,onCancel:()=>l(null),onCrop:f})]})}async function tI(t){const e="2857d634922be62f9aec8e82cb24cf90",n=new FormData;n.append("key",e),n.append("image",t);const i=await(await fetch("https://api.imgbb.com/1/upload",{method:"POST",body:n})).json();if(i.success)return i.data.url;throw new Error("Upload  ImgBB chou : "+JSON.stringify(i))}function k7(t,e,n){const[r,i]=y.useState({display_name:"",image_url:"",file:null}),[s,o]=y.useState({display_name:"",image_url:"",file:null}),[a,l]=y.useState(!1),[u,d]=y.useState({}),[h,f]=y.useState(null),[m,w]=y.useState(!1);async function _(T){if(!T.trim())return!1;const R=Ss(Mr(Fe,"people"),Kl("display_name","==",T.trim()));return!(await ku(R)).empty}const I=async T=>{const R=T==="A"?r:s;if(!R.display_name.trim())return;const N=await _(R.display_name);d(L=>({...L,[T]:N?`Le nom "${R.display_name}" existe dj dans un autre couple.`:""}))},g=async T=>{if(T.preventDefault(),!r.display_name||!s.display_name){f("Les deux noms sont obligatoires.");return}if(!a){f("Vous devez certifier avoir obtenu le consentement des deux personnes.");return}if(!r.file&&!r.image_url||!s.file&&!s.image_url){f("Chaque personne doit avoir au moins une image ou une URL dimage.");return}if(u.A||u.B){f("Un des noms existe dj. Modifiez-le avant de continuer.");return}f(null),w(!0);try{let R=r.image_url,N=s.image_url;r.file&&(R=await tI(r.file)),s.file&&(N=await tI(s.file));const L=Mr(Fe,"people"),C=await Hx(L,{display_name:r.display_name,image_url:R??""}),S=await Hx(L,{display_name:s.display_name,image_url:N??""}),A=Ot(Mr(Fe,"couples"));await Op(A,{id:A.id,people_a_id:C.id,people_b_id:S.id,count_a:0,count_b:0,createdBy:t.uid,createdAt:HR(),consentCertified:!0,category:n,validated:!1}),await Promise.all([Op(C,{couple_id:A.id},{merge:!0}),Op(S,{couple_id:A.id},{merge:!0})]),e("/")}catch(R){console.error(R),f("Erreur lors de lenregistrement : "+R.message)}finally{w(!1)}},E=!m&&a&&r.display_name.trim()!==""&&s.display_name.trim()!==""&&(r.file||r.image_url.trim()!=="")&&(s.file||s.image_url.trim()!=="")&&!u.A&&!u.B;return{personA:r,personB:s,setPersonA:i,setPersonB:o,consentChecked:a,setConsentChecked:l,nameErrors:u,error:h,loading:m,canSubmit:E,handleBlur:I,handleSubmit:g}}function N7({user:t}){const e=fu(),[n,r]=y.useState("people"),{personA:i,personB:s,setPersonA:o,setPersonB:a,consentChecked:l,setConsentChecked:u,nameErrors:d,error:h,loading:f,canSubmit:m,handleBlur:w,handleSubmit:_}=k7(t,e,n);return t?x.jsxs("main",{className:"max-w-3xl mx-auto px-4 py-10",children:[x.jsx("h2",{className:"text-lg font-semibold mb-6",children:"Ajouter un nouveau couple"}),x.jsxs("form",{onSubmit:_,className:"space-y-6",children:[x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[{label:"Personne A",data:i,set:o,err:d.A,key:"A"},{label:"Personne B",data:s,set:a,err:d.B,key:"B"}].map(({label:I,data:g,set:E,err:T,key:R})=>x.jsxs("div",{children:[x.jsx("h3",{className:"font-medium mb-2",children:I}),x.jsx("input",{type:"text",placeholder:"Nom",value:g.display_name,onChange:N=>E({...g,display_name:N.target.value}),onBlur:()=>w(R),className:`w-full border rounded p-2 mb-4 ${T?"border-red-500 bg-red-50":"border-gray-300"}`}),T&&x.jsx("div",{className:"text-xs text-red-600 mb-2",children:T}),x.jsx(P7,{label:I,imageUrl:g.image_url,file:g.file,onFileChange:N=>E({...g,file:N}),onUrlChange:N=>E({...g,image_url:N})})]},I))}),x.jsxs("div",{className:"flex items-start gap-2 border-t pt-4 mt-6",children:[x.jsx("input",{id:"consent",type:"checkbox",checked:l,onChange:I=>u(I.target.checked),className:"mt-1"}),x.jsxs("label",{htmlFor:"consent",className:"text-sm text-gray-700",children:["Je certifie avoir obtenu le ",x.jsx("strong",{children:"consentement explicite"})," des deux personnes reprsentes (textes et images) pour la publication sur Surchope. Jassume lentire responsabilit en cas de contenu non autoris."]})]}),h&&x.jsx("div",{className:"text-red-600 text-sm",children:h}),x.jsx("button",{type:"submit",disabled:!m,className:`px-4 py-2 rounded text-white ${m?"bg-blue-600 hover:bg-blue-700":"bg-gray-300 cursor-not-allowed"}`,children:f?"Enregistrement...":"Crer le couple"})]})]}):x.jsx("main",{className:"max-w-3xl mx-auto px-4 py-10",children:x.jsxs("div",{className:"p-6 border rounded-2xl bg-white",children:[x.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Ajouter un couple"}),x.jsx("p",{className:"text-gray-600",children:"Connecte-toi pour pouvoir ajouter un couple."}),x.jsx(ou,{to:"/",label:"Retour  la liste",className:"mt-8"})]})})}function M7(){return x.jsxs("main",{className:"max-w-3xl mx-auto px-4 py-10 text-sm leading-relaxed text-gray-700",children:[x.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"Politique de confidentialit"}),x.jsxs("p",{className:"mb-4",children:["Le site ",x.jsx("strong",{children:"Surchope"})," est un projet communautaire et ludique, sans but commercial, permettant aux utilisateurs de voter anonymement sur des couples fictifs ou rels."]}),x.jsx("h2",{className:"text-lg font-semibold mt-6 mb-2",children:"1. Donnes collectes"}),x.jsx("p",{children:"Le site collecte uniquement les donnes strictement ncessaires  son fonctionnement :"}),x.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[x.jsx("li",{children:"Adresse e-mail et photo de profil via Google (connexion Firebase Auth)"}),x.jsx("li",{children:"Identifiants anonymes de vote (UID, couple_id, choix A/B)"}),x.jsx("li",{children:"ventuellement des images fournies par les utilisateurs (hberges sur ImgBB)"})]}),x.jsx("h2",{className:"text-lg font-semibold mt-6 mb-2",children:"2. Finalit du traitement"}),x.jsx("p",{children:"Ces donnes sont utilises uniquement pour permettre laffichage des couples, la gestion des votes, et la modration des contenus. Aucune donne nest vendue, partage ou exploite  des fins commerciales."}),x.jsx("h2",{className:"text-lg font-semibold mt-6 mb-2",children:"3. Base lgale"}),x.jsxs("p",{children:["Le traitement repose sur le ",x.jsx("strong",{children:"consentement explicite"})," des utilisateurs, notamment lors de la cration dun couple et du tlchargement dimages."]}),x.jsx("h2",{className:"text-lg font-semibold mt-6 mb-2",children:"4. Dure de conservation"}),x.jsx("p",{children:"Les donnes sont conserves tant que le compte utilisateur existe ou que le couple reste publi. Les utilisateurs peuvent demander la suppression de leurs donnes  tout moment."}),x.jsx("h2",{className:"text-lg font-semibold mt-6 mb-2",children:"5. Droit daccs et de suppression"}),x.jsx("p",{children:"Conformment au Rglement Gnral sur la Protection des Donnes (RGPD), vous pouvez demander :"}),x.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[x.jsx("li",{children:"laccs  vos donnes,"}),x.jsx("li",{children:"leur rectification ou leur suppression,"}),x.jsx("li",{children:"la suppression de vos votes ou de vos couples ajouts."})]}),x.jsxs("p",{children:["Pour exercer ces droits, vous pouvez contacter ladministrateur du site  ladresse :",x.jsx("a",{href:"mailto:contact@surchope.fr",className:"text-blue-600 underline ml-1",children:"contact@surchope.fr"})]}),x.jsx("h2",{className:"text-lg font-semibold mt-6 mb-2",children:"6. Hbergement et sous-traitants"}),x.jsx("p",{children:"Les donnes sont hberges par :"}),x.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[x.jsxs("li",{children:[x.jsx("strong",{children:"Firebase (Google Cloud)"}),"  authentification, base de donnes et stockage"]}),x.jsxs("li",{children:[x.jsx("strong",{children:"ImgBB"}),"  hbergement des images uploades"]})]}),x.jsx("p",{children:"Ces services peuvent transfrer des donnes hors de lUnion europenne, conformment aux clauses contractuelles types de la Commission europenne."}),x.jsx("h2",{className:"text-lg font-semibold mt-6 mb-2",children:"7. Contact"}),x.jsxs("p",{children:["Pour toute question ou rclamation concernant vos donnes, contactez :",x.jsx("a",{href:"mailto:contact@surchope.fr",className:"text-blue-600 underline ml-1",children:"contact@surchope.fr"})]}),x.jsxs("p",{className:"mt-6 text-xs text-gray-500",children:["Dernire mise  jour : ",new Date().toLocaleDateString("fr-FR")]})]})}function D7(){const[t,e]=y.useState([]),[n,r]=y.useState(!0),i=new Map;return y.useEffect(()=>{const o=Ss(Mr(Fe,"couples"),Kl("validated","==",!0)),a=zR(o,u=>{const d=u.docChanges();d.length!==0&&(d.forEach(async h=>{const f=h.doc.data(),m=h.doc.id;if(h.type==="removed"){e(g=>g.filter(E=>E.id!==m));return}const w=await l(f.people_a_id),_=await l(f.people_b_id);if(!w||!_)return;const I={id:m,personA:w,personB:_,countA:f.count_a??0,countB:f.count_b??0,countTie:f.count_tie??0,category:f.category??"friends"};e(g=>{const E=g.find(T=>T.id===m);return!E&&h.type==="added"?[...g,I]:E&&h.type==="modified"?g.map(T=>T.id===m?I:T):g})}),r(!1))});async function l(u){if(i.has(u))return i.get(u);const d=await Co(Ot(Fe,"people",u));if(!d.exists())return null;const h={id:d.id,...d.data()};return i.set(u,h),h}return()=>a()},[]),{couples:t,loading:n,deleteCouple:async(o,a)=>{if(a!=="EuindCjjeTYx5ABLPCRWdflHy2c2"){alert("Tu nas pas les droits pour supprimer ce couple.");return}try{const l=Ot(Fe,"couples",o),u=await Co(l);if(!u.exists())return alert("Couple introuvable.");const d=u.data(),f=(await ku(Ss(Mr(Fe,"votes"),Kl("couple_id","==",o)))).docs.map(m=>mi(m.ref));await Promise.all([...f,mi(Ot(Fe,"people",d.people_a_id)),mi(Ot(Fe,"people",d.people_b_id)),mi(l)]),e(m=>m.filter(w=>w.id!==o)),alert(" Couple supprim avec succs.")}catch(l){console.error("Erreur pendant la suppression du couple :",l),alert(" Erreur lors de la suppression du couple.")}}}}function O7(t,e){const[n,r]=y.useState([]),[i,s]=y.useState({});return y.useEffect(()=>{const a=Ss(Mr(Fe,"votes")),l=zR(a,u=>{r(d=>{let h=[...d];return u.docChanges().forEach(f=>{var I,g;const m=f.doc.data(),w=(g=(I=m.updatedAt)==null?void 0:I.toDate)==null?void 0:g.call(I),_={id:f.doc.id,...m,updatedAt:w};f.type==="added"?h.some(E=>E.id===_.id)||h.push(_):f.type==="modified"?h=h.map(E=>E.id===_.id?_:E):f.type==="removed"&&(h=h.filter(E=>E.id!==_.id))}),h})});return()=>l()},[]),y.useEffect(()=>{if(!t)return s({});const a={};for(const l of n){if(l.uid!==t.uid)continue;const u=e.find(d=>d.id===l.couple_id);u&&(l.people_voted_id==="tie"?a[l.couple_id]="tie":a[l.couple_id]=l.people_voted_id===u.personA.id?"A":"B")}s(a)},[t,n,e]),{votesAll:n,myVotes:i,handleVote:async(a,l)=>{if(!t)return;const u=`${a.id}_${t.uid}`,d=Ot(Fe,"votes",u),h=Ot(Fe,"couples",a.id),f=l==="A"?a.personA.id:l==="B"?a.personB.id:"tie";await d$(Fe,async m=>{const[w,_]=await Promise.all([m.get(d),m.get(h)]);if(!_.exists())throw new Error("Couple not found");const I=_.data();let{count_a:g=0,count_b:E=0,count_tie:T=0}=I;if(!w.exists())l==="A"?g++:l==="B"?E++:T++;else{const R=w.data(),N=R.people_voted_id===a.personA.id?"A":R.people_voted_id===a.personB.id?"B":"tie";if(N===l)return;N==="A"?g--:N==="B"?E--:T--,l==="A"?g++:l==="B"?E++:T++}m.set(h,{count_a:g,count_b:E,count_tie:T},{merge:!0}),m.set(d,{couple_id:a.id,uid:t.uid,people_voted_id:f,updatedAt:HR()},{merge:!0})}),s(m=>({...m,[a.id]:l}))}}}function V7({couples:t,user:e,onVote:n}){const{id:r}=bO(),i=t.find(l=>l.id===r),[s,o]=y.useState(void 0);if(y.useEffect(()=>{i&&o(void 0)},[i]),!i)return x.jsxs("div",{className:"flex flex-col items-center justify-center py-10 text-center text-muted-foreground",children:[x.jsx(xf,{}),x.jsx("p",{children:"Chargement du couple... "})]});const a=(l,u)=>{o(u),n(l,u)};return x.jsxs("main",{className:"max-w-md mx-auto px-4 py-6 text-foreground",children:[x.jsxs("h1",{className:"text-2xl font-semibold text-center text-primary mb-4",children:[" ",i.personA.display_name," & ",i.personB.display_name]}),x.jsx(Nf,{couple:i,user:e,onVote:a,compact:!1,onlyMyVotes:!1,myChoice:s}),x.jsx(ou,{to:"/",label:"Retour  la liste",className:"mt-8"})]})}var $u={};(function t(e,n,r,i){var s=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),o=typeof Path2D=="function"&&typeof DOMMatrix=="function",a=function(){if(!e.OffscreenCanvas)return!1;var O=new OffscreenCanvas(1,1),D=O.getContext("2d");D.fillRect(0,0,1,1);var W=O.transferToImageBitmap();try{D.createPattern(W,"no-repeat")}catch{return!1}return!0}();function l(){}function u(O){var D=n.exports.Promise,W=D!==void 0?D:e.Promise;return typeof W=="function"?new W(O):(O(l,l),null)}var d=function(O,D){return{transform:function(W){if(O)return W;if(D.has(W))return D.get(W);var q=new OffscreenCanvas(W.width,W.height),Y=q.getContext("2d");return Y.drawImage(W,0,0),D.set(W,q),q},clear:function(){D.clear()}}}(a,new Map),h=function(){var O=Math.floor(16.666666666666668),D,W,q={},Y=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(D=function(ne){var re=Math.random();return q[re]=requestAnimationFrame(function G(ce){Y===ce||Y+O-1<ce?(Y=ce,delete q[re],ne()):q[re]=requestAnimationFrame(G)}),re},W=function(ne){q[ne]&&cancelAnimationFrame(q[ne])}):(D=function(ne){return setTimeout(ne,O)},W=function(ne){return clearTimeout(ne)}),{frame:D,cancel:W}}(),f=function(){var O,D,W={};function q(Y){function ne(re,G){Y.postMessage({options:re||{},callback:G})}Y.init=function(G){var ce=G.transferControlToOffscreen();Y.postMessage({canvas:ce},[ce])},Y.fire=function(G,ce,de){if(D)return ne(G,null),D;var ye=Math.random().toString(36).slice(2);return D=u(function(ve){function xe(Pe){Pe.data.callback===ye&&(delete W[ye],Y.removeEventListener("message",xe),D=null,d.clear(),de(),ve())}Y.addEventListener("message",xe),ne(G,ye),W[ye]=xe.bind(null,{data:{callback:ye}})}),D},Y.reset=function(){Y.postMessage({reset:!0});for(var G in W)W[G](),delete W[G]}}return function(){if(O)return O;if(!r&&s){var Y=["var CONFETTI, SIZE = {}, module = {};","("+t.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{O=new Worker(URL.createObjectURL(new Blob([Y])))}catch(ne){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn(" Could not load worker",ne),null}q(O)}return O}}(),m={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function w(O,D){return D?D(O):O}function _(O){return O!=null}function I(O,D,W){return w(O&&_(O[D])?O[D]:m[D],W)}function g(O){return O<0?0:Math.floor(O)}function E(O,D){return Math.floor(Math.random()*(D-O))+O}function T(O){return parseInt(O,16)}function R(O){return O.map(N)}function N(O){var D=String(O).replace(/[^0-9a-f]/gi,"");return D.length<6&&(D=D[0]+D[0]+D[1]+D[1]+D[2]+D[2]),{r:T(D.substring(0,2)),g:T(D.substring(2,4)),b:T(D.substring(4,6))}}function L(O){var D=I(O,"origin",Object);return D.x=I(D,"x",Number),D.y=I(D,"y",Number),D}function C(O){O.width=document.documentElement.clientWidth,O.height=document.documentElement.clientHeight}function S(O){var D=O.getBoundingClientRect();O.width=D.width,O.height=D.height}function A(O){var D=document.createElement("canvas");return D.style.position="fixed",D.style.top="0px",D.style.left="0px",D.style.pointerEvents="none",D.style.zIndex=O,D}function P(O,D,W,q,Y,ne,re,G,ce){O.save(),O.translate(D,W),O.rotate(ne),O.scale(q,Y),O.arc(0,0,1,re,G,ce),O.restore()}function M(O){var D=O.angle*(Math.PI/180),W=O.spread*(Math.PI/180);return{x:O.x,y:O.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:O.startVelocity*.5+Math.random()*O.startVelocity,angle2D:-D+(.5*W-Math.random()*W),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:O.color,shape:O.shape,tick:0,totalTicks:O.ticks,decay:O.decay,drift:O.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:O.gravity*3,ovalScalar:.6,scalar:O.scalar,flat:O.flat}}function V(O,D){D.x+=Math.cos(D.angle2D)*D.velocity+D.drift,D.y+=Math.sin(D.angle2D)*D.velocity+D.gravity,D.velocity*=D.decay,D.flat?(D.wobble=0,D.wobbleX=D.x+10*D.scalar,D.wobbleY=D.y+10*D.scalar,D.tiltSin=0,D.tiltCos=0,D.random=1):(D.wobble+=D.wobbleSpeed,D.wobbleX=D.x+10*D.scalar*Math.cos(D.wobble),D.wobbleY=D.y+10*D.scalar*Math.sin(D.wobble),D.tiltAngle+=.1,D.tiltSin=Math.sin(D.tiltAngle),D.tiltCos=Math.cos(D.tiltAngle),D.random=Math.random()+2);var W=D.tick++/D.totalTicks,q=D.x+D.random*D.tiltCos,Y=D.y+D.random*D.tiltSin,ne=D.wobbleX+D.random*D.tiltCos,re=D.wobbleY+D.random*D.tiltSin;if(O.fillStyle="rgba("+D.color.r+", "+D.color.g+", "+D.color.b+", "+(1-W)+")",O.beginPath(),o&&D.shape.type==="path"&&typeof D.shape.path=="string"&&Array.isArray(D.shape.matrix))O.fill(te(D.shape.path,D.shape.matrix,D.x,D.y,Math.abs(ne-q)*.1,Math.abs(re-Y)*.1,Math.PI/10*D.wobble));else if(D.shape.type==="bitmap"){var G=Math.PI/10*D.wobble,ce=Math.abs(ne-q)*.1,de=Math.abs(re-Y)*.1,ye=D.shape.bitmap.width*D.scalar,ve=D.shape.bitmap.height*D.scalar,xe=new DOMMatrix([Math.cos(G)*ce,Math.sin(G)*ce,-Math.sin(G)*de,Math.cos(G)*de,D.x,D.y]);xe.multiplySelf(new DOMMatrix(D.shape.matrix));var Pe=O.createPattern(d.transform(D.shape.bitmap),"no-repeat");Pe.setTransform(xe),O.globalAlpha=1-W,O.fillStyle=Pe,O.fillRect(D.x-ye/2,D.y-ve/2,ye,ve),O.globalAlpha=1}else if(D.shape==="circle")O.ellipse?O.ellipse(D.x,D.y,Math.abs(ne-q)*D.ovalScalar,Math.abs(re-Y)*D.ovalScalar,Math.PI/10*D.wobble,0,2*Math.PI):P(O,D.x,D.y,Math.abs(ne-q)*D.ovalScalar,Math.abs(re-Y)*D.ovalScalar,Math.PI/10*D.wobble,0,2*Math.PI);else if(D.shape==="star")for(var pe=Math.PI/2*3,et=4*D.scalar,At=8*D.scalar,jt=D.x,ln=D.y,Ut=5,Xt=Math.PI/Ut;Ut--;)jt=D.x+Math.cos(pe)*At,ln=D.y+Math.sin(pe)*At,O.lineTo(jt,ln),pe+=Xt,jt=D.x+Math.cos(pe)*et,ln=D.y+Math.sin(pe)*et,O.lineTo(jt,ln),pe+=Xt;else O.moveTo(Math.floor(D.x),Math.floor(D.y)),O.lineTo(Math.floor(D.wobbleX),Math.floor(Y)),O.lineTo(Math.floor(ne),Math.floor(re)),O.lineTo(Math.floor(q),Math.floor(D.wobbleY));return O.closePath(),O.fill(),D.tick<D.totalTicks}function k(O,D,W,q,Y){var ne=D.slice(),re=O.getContext("2d"),G,ce,de=u(function(ye){function ve(){G=ce=null,re.clearRect(0,0,q.width,q.height),d.clear(),Y(),ye()}function xe(){r&&!(q.width===i.width&&q.height===i.height)&&(q.width=O.width=i.width,q.height=O.height=i.height),!q.width&&!q.height&&(W(O),q.width=O.width,q.height=O.height),re.clearRect(0,0,q.width,q.height),ne=ne.filter(function(Pe){return V(re,Pe)}),ne.length?G=h.frame(xe):ve()}G=h.frame(xe),ce=ve});return{addFettis:function(ye){return ne=ne.concat(ye),de},canvas:O,promise:de,reset:function(){G&&h.cancel(G),ce&&ce()}}}function oe(O,D){var W=!O,q=!!I(D||{},"resize"),Y=!1,ne=I(D,"disableForReducedMotion",Boolean),re=s&&!!I(D||{},"useWorker"),G=re?f():null,ce=W?C:S,de=O&&G?!!O.__confetti_initialized:!1,ye=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,ve;function xe(pe,et,At){for(var jt=I(pe,"particleCount",g),ln=I(pe,"angle",Number),Ut=I(pe,"spread",Number),Xt=I(pe,"startVelocity",Number),zu=I(pe,"decay",Number),Df=I(pe,"gravity",Number),fa=I(pe,"drift",Number),Vs=I(pe,"colors",R),Wu=I(pe,"ticks",Number),st=I(pe,"shapes"),pt=I(pe,"scalar"),Ls=!!I(pe,"flat"),pa=L(pe),ma=jt,ga=[],$i=O.width*pa.x,Hu=O.height*pa.y;ma--;)ga.push(M({x:$i,y:Hu,angle:ln,spread:Ut,startVelocity:Xt,color:Vs[ma%Vs.length],shape:st[E(0,st.length)],ticks:Wu,decay:zu,gravity:Df,drift:fa,scalar:pt,flat:Ls}));return ve?ve.addFettis(ga):(ve=k(O,ga,ce,et,At),ve.promise)}function Pe(pe){var et=ne||I(pe,"disableForReducedMotion",Boolean),At=I(pe,"zIndex",Number);if(et&&ye)return u(function(Xt){Xt()});W&&ve?O=ve.canvas:W&&!O&&(O=A(At),document.body.appendChild(O)),q&&!de&&ce(O);var jt={width:O.width,height:O.height};G&&!de&&G.init(O),de=!0,G&&(O.__confetti_initialized=!0);function ln(){if(G){var Xt={getBoundingClientRect:function(){if(!W)return O.getBoundingClientRect()}};ce(Xt),G.postMessage({resize:{width:Xt.width,height:Xt.height}});return}jt.width=jt.height=null}function Ut(){ve=null,q&&(Y=!1,e.removeEventListener("resize",ln)),W&&O&&(document.body.contains(O)&&document.body.removeChild(O),O=null,de=!1)}return q&&!Y&&(Y=!0,e.addEventListener("resize",ln,!1)),G?G.fire(pe,jt,Ut):xe(pe,jt,Ut)}return Pe.reset=function(){G&&G.reset(),ve&&ve.reset()},Pe}var me;function ae(){return me||(me=oe(null,{useWorker:!0,resize:!0})),me}function te(O,D,W,q,Y,ne,re){var G=new Path2D(O),ce=new Path2D;ce.addPath(G,new DOMMatrix(D));var de=new Path2D;return de.addPath(ce,new DOMMatrix([Math.cos(re)*Y,Math.sin(re)*Y,-Math.sin(re)*ne,Math.cos(re)*ne,W,q])),de}function F(O){if(!o)throw new Error("path confetti are not supported in this browser");var D,W;typeof O=="string"?D=O:(D=O.path,W=O.matrix);var q=new Path2D(D),Y=document.createElement("canvas"),ne=Y.getContext("2d");if(!W){for(var re=1e3,G=re,ce=re,de=0,ye=0,ve,xe,Pe=0;Pe<re;Pe+=2)for(var pe=0;pe<re;pe+=2)ne.isPointInPath(q,Pe,pe,"nonzero")&&(G=Math.min(G,Pe),ce=Math.min(ce,pe),de=Math.max(de,Pe),ye=Math.max(ye,pe));ve=de-G,xe=ye-ce;var et=10,At=Math.min(et/ve,et/xe);W=[At,0,0,At,-Math.round(ve/2+G)*At,-Math.round(xe/2+ce)*At]}return{type:"path",path:D,matrix:W}}function B(O){var D,W=1,q="#000000",Y='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof O=="string"?D=O:(D=O.text,W="scalar"in O?O.scalar:W,Y="fontFamily"in O?O.fontFamily:Y,q="color"in O?O.color:q);var ne=10*W,re=""+ne+"px "+Y,G=new OffscreenCanvas(ne,ne),ce=G.getContext("2d");ce.font=re;var de=ce.measureText(D),ye=Math.ceil(de.actualBoundingBoxRight+de.actualBoundingBoxLeft),ve=Math.ceil(de.actualBoundingBoxAscent+de.actualBoundingBoxDescent),xe=2,Pe=de.actualBoundingBoxLeft+xe,pe=de.actualBoundingBoxAscent+xe;ye+=xe+xe,ve+=xe+xe,G=new OffscreenCanvas(ye,ve),ce=G.getContext("2d"),ce.font=re,ce.fillStyle=q,ce.fillText(D,Pe,pe);var et=1/W;return{type:"bitmap",bitmap:G.transferToImageBitmap(),matrix:[et,0,0,et,-ye*et/2,-ve*et/2]}}n.exports=function(){return ae().apply(this,arguments)},n.exports.reset=function(){ae().reset()},n.exports.create=oe,n.exports.shapeFromPath=F,n.exports.shapeFromText=B})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),$u,!1);const L7=$u.exports;$u.exports.create;function F7({couples:t,user:e,myVotes:n,onVote:r}){fu();const[i]=y.useState(()=>t.filter(g=>!n[g.id])),[s,o]=y.useState(0),[a,l]=y.useState(!1),[u,d]=y.useState(!1),[h,f]=y.useState(null),m=()=>{s+1<i.length?o(g=>g+1):l(!0),f(null)},w=(g,E)=>{u||(d(!0),r(g,E),f(E==="A"?"left":E==="B"?"right":"down"),setTimeout(()=>{m(),d(!1)},400))};y.useEffect(()=>{(a||i.length===0)&&L7({particleCount:120,spread:70,origin:{y:.6},colors:["#ec4899","#f472b6","#fde68a"]})},[a,i.length]);const _=i[s];if(a||i.length===0)return x.jsxs("main",{className:"max-w-md mx-auto px-4 py-12 flex flex-col items-center justify-center text-center space-y-6",children:[x.jsx("h1",{className:"text-3xl font-extrabold text-primary drop-shadow-sm",children:" Bravo !"}),x.jsxs("p",{className:"text-muted-foreground leading-relaxed",children:["Tu as vot pour tous les couples disponibles  ",x.jsx("br",{}),"Reviens bientt, de nouveaux duos tattendent !"]}),x.jsx(ou,{to:"/",label:"Retour  la liste"}),x.jsx(nr.div,{className:"mt-8 text-4xl",initial:{scale:0},animate:{scale:[1,1.3,1],rotate:[0,10,-10,0]},transition:{duration:1.5,repeat:1/0},children:""}),x.jsx(uy,{})]});const I={left:{opacity:0,x:-200,rotate:-10},right:{opacity:0,x:200,rotate:10},down:{opacity:0,y:100,scale:.9},none:{opacity:0,x:0}};return x.jsxs("main",{className:"max-w-md mx-auto px-4 py-6 flex flex-col items-center justify-center gap-6",children:[x.jsxs("div",{className:"flex justify-between w-full items-center",children:[x.jsx(ou,{to:"/",label:"Retour  la liste"}),x.jsxs("div",{className:"text-sm text-muted-foreground",children:[s+1,"/",i.length]})]}),x.jsx("h2",{className:"text-xl font-extrabold text-center text-primary mt-2 tracking-wide",children:" Qui surchope ?"}),x.jsx(yh,{mode:"wait",children:x.jsx(nr.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:I[h??"none"],transition:{duration:.4},className:"w-full",children:_&&x.jsx(Nf,{couple:_,user:e,onVote:w,compact:!1,onlyMyVotes:!1})},_==null?void 0:_.id)}),x.jsx(uy,{})]})}function j7(){const t=[{name:"primary",label:"Primary "},{name:"secondary",label:"Secondary "},{name:"accent",label:"Accent "},{name:"muted",label:"Muted "},{name:"card",label:"Card "}],[e,n]=y.useState("");return x.jsxs("main",{className:"max-w-4xl mx-auto p-8 space-y-10 text-foreground",children:[x.jsxs("header",{className:"text-center",children:[x.jsx("h1",{className:"text-4xl font-extrabold text-primary drop-shadow-sm mb-2",children:" Styleguide Surchope"}),x.jsx("p",{className:"text-muted-foreground text-sm",children:"Aperu de la palette, des composants et des styles de lapplication "})]}),x.jsxs("section",{children:[x.jsx("h2",{className:"font-semibold mb-3 text-lg text-foreground",children:"Barre de recherche"}),x.jsx("div",{className:"flex justify-center",children:x.jsx(qN,{value:e,onChange:n,placeholder:" Recherche dexemple...",className:"max-w-sm"})}),x.jsx("p",{className:"text-center text-muted-foreground text-xs mt-2",children:"Tape quelque chose pour tester le comportement du champ "})]}),x.jsxs("section",{children:[x.jsx("h2",{className:"font-semibold mb-3 text-lg text-foreground",children:"Couleurs"}),x.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4",children:t.map(({name:r,label:i})=>x.jsxs("div",{className:`flex flex-col items-center text-center rounded-xl overflow-hidden border border-border bg-${r} text-${r}-foreground shadow-sm`,children:[x.jsx("div",{className:`w-full h-16 bg-${r}`}),x.jsx("div",{className:"p-2 text-xs font-medium text-foreground",children:i}),x.jsx("code",{className:"text-[10px] text-muted-foreground mb-2",children:`bg-${r}`})]},r))})]}),x.jsxs("section",{children:[x.jsx("h2",{className:"font-semibold mb-3 text-lg text-foreground",children:"Boutons"}),x.jsxs("div",{className:"flex flex-wrap gap-4",children:[x.jsx("button",{className:"bg-primary text-primary-foreground px-4 py-2 rounded-full font-medium shadow-sm hover:opacity-90 transition",children:"Surchope "}),x.jsx("button",{className:"bg-secondary text-secondary-foreground px-4 py-2 rounded-full font-medium shadow-sm hover:opacity-90 transition",children:"Partager"}),x.jsx("button",{className:"border border-border text-foreground px-4 py-2 rounded-full hover:bg-muted transition",children:"Neutre"})]})]}),x.jsxs("section",{children:[x.jsx("h2",{className:"font-semibold mb-3 text-lg text-foreground",children:"Tags"}),x.jsxs("div",{className:"flex gap-3 flex-wrap",children:[x.jsx("span",{className:"bg-primary/10 text-primary text-xs font-semibold px-3 py-1 rounded-full",children:"Surchope "}),x.jsx("span",{className:"bg-secondary/10 text-secondary text-xs font-semibold px-3 py-1 rounded-full",children:"galit "}),x.jsx("span",{className:"bg-green-100 text-green-700 text-xs font-semibold px-3 py-1 rounded-full",children:"Nouveau "})]})]}),x.jsxs("section",{children:[x.jsx("h2",{className:"font-semibold mb-3 text-lg text-foreground",children:"Card"}),x.jsxs("div",{className:"bg-card border border-border rounded-2xl shadow-sm p-5 max-w-sm text-card-foreground",children:[x.jsx("h3",{className:"font-semibold mb-2 text-foreground",children:"Exemple de carte "}),x.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"Les cartes servent  encadrer du contenu (comme les couples ou les informations utilisateur). Elles utilisent une ombre douce et des arrondis cohrents avec le reste de lUI."}),x.jsx("div",{className:"mt-4 flex justify-end",children:x.jsx("button",{className:"bg-primary hover:opacity-90 text-primary-foreground text-sm px-3 py-1.5 rounded-full shadow-sm transition",children:"Action "})})]})]})]})}function U7(){const[t,e]=y.useState([]),[n,r]=y.useState(!0);y.useEffect(()=>{(async()=>{const o=Ss(Mr(Fe,"couples"),Kl("validated","!=",!0)),a=await ku(o),l=[];for(const u of a.docs){const d=u.data(),h=await Co(Ot(Fe,"people",d.people_a_id)),f=await Co(Ot(Fe,"people",d.people_b_id));if(!h.exists()||!f.exists())continue;const m={id:h.id,...h.data()},w={id:f.id,...f.data()};l.push({id:u.id,personA:m,personB:w,countA:d.count_a??0,countB:d.count_b??0,countTie:d.count_tie??0,category:d.category??"friends"})}e(l),r(!1)})()},[]);async function i(o){await l$(Ot(Fe,"couples",o),{validated:!0}),e(a=>a.filter(l=>l.id!==o))}async function s(o){if(!confirm("Supprimer dfinitivement ce couple ?"))return;const a=Ot(Fe,"couples",o),l=await Co(a);if(!l.exists())return;const u=l.data();await Promise.all([mi(Ot(Fe,"people",u.people_a_id)),mi(Ot(Fe,"people",u.people_b_id)),mi(a)]),e(d=>d.filter(h=>h.id!==o))}return n?x.jsx("div",{className:"p-6 text-center text-gray-500",children:"Chargement des couples"}):t.length===0?x.jsx("div",{className:"p-6 text-center text-gray-500",children:"Aucun couple  valider "}):x.jsxs("main",{className:"max-w-4xl mx-auto px-4 py-8",children:[x.jsx("h2",{className:"text-xl font-semibold mb-6 text-primary",children:"Validation des couples"}),x.jsx("div",{className:"grid gap-6",children:t.map(o=>x.jsxs("div",{className:"p-4 border rounded-xl bg-white shadow-sm flex flex-col sm:flex-row items-center justify-between gap-4",children:[x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx("div",{className:"flex -space-x-4",children:[o.personA,o.personB].map(a=>x.jsx("img",{src:a.image_url,alt:a.display_name,className:"w-14 h-14 rounded-full object-cover border-2 border-white shadow-sm"},a.id))}),x.jsxs("div",{children:[x.jsxs("div",{className:"font-medium",children:[o.personA.display_name,"  ",o.personB.display_name]}),x.jsx("div",{className:"text-xs text-gray-500",children:o.category})]})]}),x.jsxs("div",{className:"flex gap-2",children:[x.jsx("button",{onClick:()=>i(o.id),className:"px-3 py-1 rounded bg-green-600 text-white text-sm hover:bg-green-700",children:" Valider"}),x.jsx("button",{onClick:()=>s(o.id),className:"px-3 py-1 rounded bg-red-600 text-white text-sm hover:bg-red-700",children:" Refuser"})]})]},o.id))})]})}function B7(){const[t,e]=y.useState(null),{couples:n,loading:r,deleteCouple:i}=D7(),{votesAll:s,myVotes:o,handleVote:a}=O7(t,n);return y.useEffect(()=>QF(Cw,e),[]),x.jsxs("div",{className:"pb-16 md:pb-0",children:[x.jsx(g3,{user:t}),x.jsxs(WO,{children:[x.jsx(Zn,{path:"/",element:x.jsx(t7,{user:t,couples:n,myVotes:o,onVote:a,loading:r,deleteCouple:i})}),x.jsx(Zn,{path:"/jouer",element:x.jsx(F7,{couples:n,user:t,myVotes:o,onVote:a})}),x.jsx(Zn,{path:"/mes-votes",element:x.jsx(r7,{user:t,couples:n,votesAll:s})}),x.jsx(Zn,{path:"/ajouter-couple",element:x.jsx(N7,{user:t})}),x.jsx(Zn,{path:"/couple/:id",element:x.jsx(V7,{couples:n,user:t,onVote:a})}),x.jsx(Zn,{path:"/valider-couples",element:x.jsx(U7,{})}),x.jsx(Zn,{path:"/confidentialite",element:x.jsx(M7,{})}),x.jsx(Zn,{path:"/style",element:x.jsx(j7,{})}),x.jsx(Zn,{path:"*",element:x.jsx($O,{to:"/",replace:!0})})]}),x.jsxs("footer",{className:"text-center text-xs text-gray-500 py-6",children:["Fait avec amour, aucun jugement  "," ",x.jsx("a",{href:"/confidentialite",className:"underline hover:text-gray-700",children:"Politique de confidentialit"})]})]})}async function $7(t){if(!("Notification"in window))return;Notification.permission!=="granted"&&await Notification.requestPermission();const e=async()=>{const n=await t();if(!n)return;const{id:r,personA:i,personB:s}=n;JSON.parse(localStorage.getItem("myVotes")||"{}")[r]||new Notification(" Voici le couple du jour",{body:`${i.display_name} & ${s.display_name}`,icon:"/pwa-192x192.png",data:{url:`https://surchope.fr/couple/${r}`}})};e(),setInterval(e,24*60*60*1e3)}const z7=document.getElementById("root"),W7=gA(z7);W7.render(x.jsx(Er.StrictMode,{children:x.jsx(fV,{basename:"/",children:x.jsx(B7,{})})}));CV({immediate:!0,onOfflineReady(){console.log("Lapplication est prte  tre utilise hors ligne.")}});const hm=new Map;async function nI(t){if(hm.has(t))return hm.get(t);const e=await Co(Ot(Fe,"people",t));if(!e.exists())return null;const n={id:e.id,...e.data()};return hm.set(t,n),n}async function H7(){try{const t=Ss(Mr(Fe,"couples"),jR("createdAt","desc"),s$(1)),e=await ku(t);if(e.empty)return null;const n=e.docs[0],r=n.data(),i=await nI(r.people_a_id),s=await nI(r.people_b_id);return!i||!s?null:{id:n.id,personA:i,personB:s,countA:r.count_a??0,countB:r.count_b??0,countTie:r.count_tie??0,category:r.category??"friends"}}catch(t){return console.error("Erreur lors de la rcupration du dernier couple :",t),null}}$7(H7)});export default q7();
