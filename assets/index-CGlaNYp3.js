var CP=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var d3=CP((_3,Tl)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function RE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var kE={exports:{}},Bc={},bE={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xa=Symbol.for("react.element"),AP=Symbol.for("react.portal"),PP=Symbol.for("react.fragment"),RP=Symbol.for("react.strict_mode"),kP=Symbol.for("react.profiler"),bP=Symbol.for("react.provider"),DP=Symbol.for("react.context"),NP=Symbol.for("react.forward_ref"),VP=Symbol.for("react.suspense"),MP=Symbol.for("react.memo"),LP=Symbol.for("react.lazy"),Sv=Symbol.iterator;function OP(t){return t===null||typeof t!="object"?null:(t=Sv&&t[Sv]||t["@@iterator"],typeof t=="function"?t:null)}var DE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},NE=Object.assign,VE={};function Xs(t,e,n){this.props=t,this.context=e,this.refs=VE,this.updater=n||DE}Xs.prototype.isReactComponent={};Xs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Xs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ME(){}ME.prototype=Xs.prototype;function Kp(t,e,n){this.props=t,this.context=e,this.refs=VE,this.updater=n||DE}var Gp=Kp.prototype=new ME;Gp.constructor=Kp;NE(Gp,Xs.prototype);Gp.isPureReactComponent=!0;var Iv=Array.isArray,LE=Object.prototype.hasOwnProperty,Qp={current:null},OE={key:!0,ref:!0,__self:!0,__source:!0};function FE(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)LE.call(e,r)&&!OE.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Xa,type:t,key:s,ref:o,props:i,_owner:Qp.current}}function FP(t,e){return{$$typeof:Xa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Yp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Xa}function jP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var xv=/\/+/g;function Jh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?jP(""+t.key):e.toString(36)}function gu(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Xa:case AP:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Jh(o,0):r,Iv(i)?(n="",t!=null&&(n=t.replace(xv,"$&/")+"/"),gu(i,e,n,"",function(c){return c})):i!=null&&(Yp(i)&&(i=FP(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(xv,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Iv(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Jh(s,a);o+=gu(s,e,n,l,i)}else if(l=OP(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Jh(s,a++),o+=gu(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Bl(t,e,n){if(t==null)return t;var r=[],i=0;return gu(t,r,"","",function(s){return e.call(n,s,i++)}),r}function UP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Vt={current:null},yu={transition:null},BP={ReactCurrentDispatcher:Vt,ReactCurrentBatchConfig:yu,ReactCurrentOwner:Qp};function jE(){throw Error("act(...) is not supported in production builds of React.")}ue.Children={map:Bl,forEach:function(t,e,n){Bl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Bl(t,function(){e++}),e},toArray:function(t){return Bl(t,function(e){return e})||[]},only:function(t){if(!Yp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ue.Component=Xs;ue.Fragment=PP;ue.Profiler=kP;ue.PureComponent=Kp;ue.StrictMode=RP;ue.Suspense=VP;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BP;ue.act=jE;ue.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=NE({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Qp.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)LE.call(e,l)&&!OE.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Xa,type:t.type,key:i,ref:s,props:r,_owner:o}};ue.createContext=function(t){return t={$$typeof:DP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:bP,_context:t},t.Consumer=t};ue.createElement=FE;ue.createFactory=function(t){var e=FE.bind(null,t);return e.type=t,e};ue.createRef=function(){return{current:null}};ue.forwardRef=function(t){return{$$typeof:NP,render:t}};ue.isValidElement=Yp;ue.lazy=function(t){return{$$typeof:LP,_payload:{_status:-1,_result:t},_init:UP}};ue.memo=function(t,e){return{$$typeof:MP,type:t,compare:e===void 0?null:e}};ue.startTransition=function(t){var e=yu.transition;yu.transition={};try{t()}finally{yu.transition=e}};ue.unstable_act=jE;ue.useCallback=function(t,e){return Vt.current.useCallback(t,e)};ue.useContext=function(t){return Vt.current.useContext(t)};ue.useDebugValue=function(){};ue.useDeferredValue=function(t){return Vt.current.useDeferredValue(t)};ue.useEffect=function(t,e){return Vt.current.useEffect(t,e)};ue.useId=function(){return Vt.current.useId()};ue.useImperativeHandle=function(t,e,n){return Vt.current.useImperativeHandle(t,e,n)};ue.useInsertionEffect=function(t,e){return Vt.current.useInsertionEffect(t,e)};ue.useLayoutEffect=function(t,e){return Vt.current.useLayoutEffect(t,e)};ue.useMemo=function(t,e){return Vt.current.useMemo(t,e)};ue.useReducer=function(t,e,n){return Vt.current.useReducer(t,e,n)};ue.useRef=function(t){return Vt.current.useRef(t)};ue.useState=function(t){return Vt.current.useState(t)};ue.useSyncExternalStore=function(t,e,n){return Vt.current.useSyncExternalStore(t,e,n)};ue.useTransition=function(){return Vt.current.useTransition()};ue.version="18.3.1";bE.exports=ue;var R=bE.exports;const zP=RE(R);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $P=R,WP=Symbol.for("react.element"),HP=Symbol.for("react.fragment"),qP=Object.prototype.hasOwnProperty,KP=$P.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,GP={key:!0,ref:!0,__self:!0,__source:!0};function UE(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)qP.call(e,r)&&!GP.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:WP,type:t,key:s,ref:o,props:i,_owner:KP.current}}Bc.Fragment=HP;Bc.jsx=UE;Bc.jsxs=UE;kE.exports=Bc;var A=kE.exports,BE={exports:{}},tn={},zE={exports:{}},$E={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,X){var V=$.length;$.push(X);e:for(;0<V;){var b=V-1>>>1,H=$[b];if(0<i(H,X))$[b]=X,$[V]=H,V=b;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var X=$[0],V=$.pop();if(V!==X){$[0]=V;e:for(var b=0,H=$.length,K=H>>>1;b<K;){var ee=2*(b+1)-1,te=$[ee],ie=ee+1,Y=$[ie];if(0>i(te,V))ie<H&&0>i(Y,te)?($[b]=Y,$[ie]=V,b=ie):($[b]=te,$[ee]=V,b=ee);else if(ie<H&&0>i(Y,V))$[b]=Y,$[ie]=V,b=ie;else break e}}return X}function i($,X){var V=$.sortIndex-X.sortIndex;return V!==0?V:$.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,p=3,g=!1,_=!1,S=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E($){for(var X=n(c);X!==null;){if(X.callback===null)r(c);else if(X.startTime<=$)r(c),X.sortIndex=X.expirationTime,e(l,X);else break;X=n(c)}}function N($){if(S=!1,E($),!_)if(n(l)!==null)_=!0,$n(M);else{var X=n(c);X!==null&&ve(N,X.startTime-$)}}function M($,X){_=!1,S&&(S=!1,y(w),w=-1),g=!0;var V=p;try{for(E(X),d=n(l);d!==null&&(!(d.expirationTime>X)||$&&!D());){var b=d.callback;if(typeof b=="function"){d.callback=null,p=d.priorityLevel;var H=b(d.expirationTime<=X);X=t.unstable_now(),typeof H=="function"?d.callback=H:d===n(l)&&r(l),E(X)}else r(l);d=n(l)}if(d!==null)var K=!0;else{var ee=n(c);ee!==null&&ve(N,ee.startTime-X),K=!1}return K}finally{d=null,p=V,g=!1}}var F=!1,I=null,w=-1,C=5,P=-1;function D(){return!(t.unstable_now()-P<C)}function L(){if(I!==null){var $=t.unstable_now();P=$;var X=!0;try{X=I(!0,$)}finally{X?k():(F=!1,I=null)}}else F=!1}var k;if(typeof v=="function")k=function(){v(L)};else if(typeof MessageChannel<"u"){var Ze=new MessageChannel,Lt=Ze.port2;Ze.port1.onmessage=L,k=function(){Lt.postMessage(null)}}else k=function(){x(L,0)};function $n($){I=$,F||(F=!0,k())}function ve($,X){w=x(function(){$(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){_||g||(_=!0,$n(M))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function($){switch(p){case 1:case 2:case 3:var X=3;break;default:X=p}var V=p;p=X;try{return $()}finally{p=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,X){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var V=p;p=$;try{return X()}finally{p=V}},t.unstable_scheduleCallback=function($,X,V){var b=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?b+V:b):V=b,$){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=V+H,$={id:h++,callback:X,priorityLevel:$,startTime:V,expirationTime:H,sortIndex:-1},V>b?($.sortIndex=V,e(c,$),n(l)===null&&$===n(c)&&(S?(y(w),w=-1):S=!0,ve(N,V-b))):($.sortIndex=H,e(l,$),_||g||(_=!0,$n(M))),$},t.unstable_shouldYield=D,t.unstable_wrapCallback=function($){var X=p;return function(){var V=p;p=X;try{return $.apply(this,arguments)}finally{p=V}}}})($E);zE.exports=$E;var QP=zE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YP=R,en=QP;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var WE=new Set,ya={};function $i(t,e){Ds(t,e),Ds(t+"Capture",e)}function Ds(t,e){for(ya[t]=e,t=0;t<e.length;t++)WE.add(e[t])}var rr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jd=Object.prototype.hasOwnProperty,XP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cv={},Av={};function JP(t){return Jd.call(Av,t)?!0:Jd.call(Cv,t)?!1:XP.test(t)?Av[t]=!0:(Cv[t]=!0,!1)}function ZP(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function eR(t,e,n,r){if(e===null||typeof e>"u"||ZP(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Mt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var pt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){pt[t]=new Mt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];pt[e]=new Mt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){pt[t]=new Mt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){pt[t]=new Mt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){pt[t]=new Mt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){pt[t]=new Mt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){pt[t]=new Mt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){pt[t]=new Mt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){pt[t]=new Mt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Xp=/[\-:]([a-z])/g;function Jp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Xp,Jp);pt[e]=new Mt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Xp,Jp);pt[e]=new Mt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Xp,Jp);pt[e]=new Mt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){pt[t]=new Mt(t,1,!1,t.toLowerCase(),null,!1,!1)});pt.xlinkHref=new Mt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){pt[t]=new Mt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Zp(t,e,n,r){var i=pt.hasOwnProperty(e)?pt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(eR(e,n,i,r)&&(n=null),r||i===null?JP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var mr=YP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zl=Symbol.for("react.element"),rs=Symbol.for("react.portal"),is=Symbol.for("react.fragment"),em=Symbol.for("react.strict_mode"),Zd=Symbol.for("react.profiler"),HE=Symbol.for("react.provider"),qE=Symbol.for("react.context"),tm=Symbol.for("react.forward_ref"),ef=Symbol.for("react.suspense"),tf=Symbol.for("react.suspense_list"),nm=Symbol.for("react.memo"),xr=Symbol.for("react.lazy"),KE=Symbol.for("react.offscreen"),Pv=Symbol.iterator;function ko(t){return t===null||typeof t!="object"?null:(t=Pv&&t[Pv]||t["@@iterator"],typeof t=="function"?t:null)}var Me=Object.assign,Zh;function $o(t){if(Zh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Zh=e&&e[1]||""}return`
`+Zh+t}var ed=!1;function td(t,e){if(!t||ed)return"";ed=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{ed=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?$o(t):""}function tR(t){switch(t.tag){case 5:return $o(t.type);case 16:return $o("Lazy");case 13:return $o("Suspense");case 19:return $o("SuspenseList");case 0:case 2:case 15:return t=td(t.type,!1),t;case 11:return t=td(t.type.render,!1),t;case 1:return t=td(t.type,!0),t;default:return""}}function nf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case is:return"Fragment";case rs:return"Portal";case Zd:return"Profiler";case em:return"StrictMode";case ef:return"Suspense";case tf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case qE:return(t.displayName||"Context")+".Consumer";case HE:return(t._context.displayName||"Context")+".Provider";case tm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case nm:return e=t.displayName||null,e!==null?e:nf(t.type)||"Memo";case xr:e=t._payload,t=t._init;try{return nf(t(e))}catch{}}return null}function nR(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return nf(e);case 8:return e===em?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Qr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function GE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function rR(t){var e=GE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function $l(t){t._valueTracker||(t._valueTracker=rR(t))}function QE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=GE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function qu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function rf(t,e){var n=e.checked;return Me({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Rv(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Qr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function YE(t,e){e=e.checked,e!=null&&Zp(t,"checked",e,!1)}function sf(t,e){YE(t,e);var n=Qr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?of(t,e.type,n):e.hasOwnProperty("defaultValue")&&of(t,e.type,Qr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function kv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function of(t,e,n){(e!=="number"||qu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Wo=Array.isArray;function Es(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Qr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function af(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Me({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function bv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(Wo(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Qr(n)}}function XE(t,e){var n=Qr(e.value),r=Qr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Dv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function JE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?JE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Wl,ZE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Wl=Wl||document.createElement("div"),Wl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Wl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function va(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Xo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},iR=["Webkit","ms","Moz","O"];Object.keys(Xo).forEach(function(t){iR.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Xo[e]=Xo[t]})});function eT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Xo.hasOwnProperty(t)&&Xo[t]?(""+e).trim():e+"px"}function tT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=eT(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var sR=Me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function uf(t,e){if(e){if(sR[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function cf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hf=null;function rm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var df=null,Ts=null,Ss=null;function Nv(t){if(t=el(t)){if(typeof df!="function")throw Error(z(280));var e=t.stateNode;e&&(e=qc(e),df(t.stateNode,t.type,e))}}function nT(t){Ts?Ss?Ss.push(t):Ss=[t]:Ts=t}function rT(){if(Ts){var t=Ts,e=Ss;if(Ss=Ts=null,Nv(t),e)for(t=0;t<e.length;t++)Nv(e[t])}}function iT(t,e){return t(e)}function sT(){}var nd=!1;function oT(t,e,n){if(nd)return t(e,n);nd=!0;try{return iT(t,e,n)}finally{nd=!1,(Ts!==null||Ss!==null)&&(sT(),rT())}}function _a(t,e){var n=t.stateNode;if(n===null)return null;var r=qc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var ff=!1;if(rr)try{var bo={};Object.defineProperty(bo,"passive",{get:function(){ff=!0}}),window.addEventListener("test",bo,bo),window.removeEventListener("test",bo,bo)}catch{ff=!1}function oR(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Jo=!1,Ku=null,Gu=!1,pf=null,aR={onError:function(t){Jo=!0,Ku=t}};function lR(t,e,n,r,i,s,o,a,l){Jo=!1,Ku=null,oR.apply(aR,arguments)}function uR(t,e,n,r,i,s,o,a,l){if(lR.apply(this,arguments),Jo){if(Jo){var c=Ku;Jo=!1,Ku=null}else throw Error(z(198));Gu||(Gu=!0,pf=c)}}function Wi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function aT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Vv(t){if(Wi(t)!==t)throw Error(z(188))}function cR(t){var e=t.alternate;if(!e){if(e=Wi(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Vv(i),t;if(s===r)return Vv(i),e;s=s.sibling}throw Error(z(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function lT(t){return t=cR(t),t!==null?uT(t):null}function uT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=uT(t);if(e!==null)return e;t=t.sibling}return null}var cT=en.unstable_scheduleCallback,Mv=en.unstable_cancelCallback,hR=en.unstable_shouldYield,dR=en.unstable_requestPaint,$e=en.unstable_now,fR=en.unstable_getCurrentPriorityLevel,im=en.unstable_ImmediatePriority,hT=en.unstable_UserBlockingPriority,Qu=en.unstable_NormalPriority,pR=en.unstable_LowPriority,dT=en.unstable_IdlePriority,zc=null,Nn=null;function mR(t){if(Nn&&typeof Nn.onCommitFiberRoot=="function")try{Nn.onCommitFiberRoot(zc,t,void 0,(t.current.flags&128)===128)}catch{}}var En=Math.clz32?Math.clz32:vR,gR=Math.log,yR=Math.LN2;function vR(t){return t>>>=0,t===0?32:31-(gR(t)/yR|0)|0}var Hl=64,ql=4194304;function Ho(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Yu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Ho(a):(s&=o,s!==0&&(r=Ho(s)))}else o=n&~i,o!==0?r=Ho(o):s!==0&&(r=Ho(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-En(e),i=1<<n,r|=t[n],e&=~i;return r}function _R(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wR(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-En(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=_R(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function mf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function fT(){var t=Hl;return Hl<<=1,!(Hl&4194240)&&(Hl=64),t}function rd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ja(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-En(e),t[e]=n}function ER(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-En(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function sm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-En(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var _e=0;function pT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var mT,om,gT,yT,vT,gf=!1,Kl=[],Lr=null,Or=null,Fr=null,wa=new Map,Ea=new Map,Ar=[],TR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lv(t,e){switch(t){case"focusin":case"focusout":Lr=null;break;case"dragenter":case"dragleave":Or=null;break;case"mouseover":case"mouseout":Fr=null;break;case"pointerover":case"pointerout":wa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ea.delete(e.pointerId)}}function Do(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=el(e),e!==null&&om(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function SR(t,e,n,r,i){switch(e){case"focusin":return Lr=Do(Lr,t,e,n,r,i),!0;case"dragenter":return Or=Do(Or,t,e,n,r,i),!0;case"mouseover":return Fr=Do(Fr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return wa.set(s,Do(wa.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ea.set(s,Do(Ea.get(s)||null,t,e,n,r,i)),!0}return!1}function _T(t){var e=_i(t.target);if(e!==null){var n=Wi(e);if(n!==null){if(e=n.tag,e===13){if(e=aT(n),e!==null){t.blockedOn=e,vT(t.priority,function(){gT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function vu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=yf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);hf=r,n.target.dispatchEvent(r),hf=null}else return e=el(n),e!==null&&om(e),t.blockedOn=n,!1;e.shift()}return!0}function Ov(t,e,n){vu(t)&&n.delete(e)}function IR(){gf=!1,Lr!==null&&vu(Lr)&&(Lr=null),Or!==null&&vu(Or)&&(Or=null),Fr!==null&&vu(Fr)&&(Fr=null),wa.forEach(Ov),Ea.forEach(Ov)}function No(t,e){t.blockedOn===e&&(t.blockedOn=null,gf||(gf=!0,en.unstable_scheduleCallback(en.unstable_NormalPriority,IR)))}function Ta(t){function e(i){return No(i,t)}if(0<Kl.length){No(Kl[0],t);for(var n=1;n<Kl.length;n++){var r=Kl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Lr!==null&&No(Lr,t),Or!==null&&No(Or,t),Fr!==null&&No(Fr,t),wa.forEach(e),Ea.forEach(e),n=0;n<Ar.length;n++)r=Ar[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ar.length&&(n=Ar[0],n.blockedOn===null);)_T(n),n.blockedOn===null&&Ar.shift()}var Is=mr.ReactCurrentBatchConfig,Xu=!0;function xR(t,e,n,r){var i=_e,s=Is.transition;Is.transition=null;try{_e=1,am(t,e,n,r)}finally{_e=i,Is.transition=s}}function CR(t,e,n,r){var i=_e,s=Is.transition;Is.transition=null;try{_e=4,am(t,e,n,r)}finally{_e=i,Is.transition=s}}function am(t,e,n,r){if(Xu){var i=yf(t,e,n,r);if(i===null)fd(t,e,r,Ju,n),Lv(t,r);else if(SR(i,t,e,n,r))r.stopPropagation();else if(Lv(t,r),e&4&&-1<TR.indexOf(t)){for(;i!==null;){var s=el(i);if(s!==null&&mT(s),s=yf(t,e,n,r),s===null&&fd(t,e,r,Ju,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else fd(t,e,r,null,n)}}var Ju=null;function yf(t,e,n,r){if(Ju=null,t=rm(r),t=_i(t),t!==null)if(e=Wi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=aT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ju=t,null}function wT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fR()){case im:return 1;case hT:return 4;case Qu:case pR:return 16;case dT:return 536870912;default:return 16}default:return 16}}var Dr=null,lm=null,_u=null;function ET(){if(_u)return _u;var t,e=lm,n=e.length,r,i="value"in Dr?Dr.value:Dr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return _u=i.slice(t,1<r?1-r:void 0)}function wu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Gl(){return!0}function Fv(){return!1}function nn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Gl:Fv,this.isPropagationStopped=Fv,this}return Me(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Gl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Gl)},persist:function(){},isPersistent:Gl}),e}var Js={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},um=nn(Js),Za=Me({},Js,{view:0,detail:0}),AR=nn(Za),id,sd,Vo,$c=Me({},Za,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Vo&&(Vo&&t.type==="mousemove"?(id=t.screenX-Vo.screenX,sd=t.screenY-Vo.screenY):sd=id=0,Vo=t),id)},movementY:function(t){return"movementY"in t?t.movementY:sd}}),jv=nn($c),PR=Me({},$c,{dataTransfer:0}),RR=nn(PR),kR=Me({},Za,{relatedTarget:0}),od=nn(kR),bR=Me({},Js,{animationName:0,elapsedTime:0,pseudoElement:0}),DR=nn(bR),NR=Me({},Js,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),VR=nn(NR),MR=Me({},Js,{data:0}),Uv=nn(MR),LR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},OR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},FR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=FR[t])?!!e[t]:!1}function cm(){return jR}var UR=Me({},Za,{key:function(t){if(t.key){var e=LR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=wu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?OR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cm,charCode:function(t){return t.type==="keypress"?wu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?wu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),BR=nn(UR),zR=Me({},$c,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bv=nn(zR),$R=Me({},Za,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cm}),WR=nn($R),HR=Me({},Js,{propertyName:0,elapsedTime:0,pseudoElement:0}),qR=nn(HR),KR=Me({},$c,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),GR=nn(KR),QR=[9,13,27,32],hm=rr&&"CompositionEvent"in window,Zo=null;rr&&"documentMode"in document&&(Zo=document.documentMode);var YR=rr&&"TextEvent"in window&&!Zo,TT=rr&&(!hm||Zo&&8<Zo&&11>=Zo),zv=" ",$v=!1;function ST(t,e){switch(t){case"keyup":return QR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function IT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ss=!1;function XR(t,e){switch(t){case"compositionend":return IT(e);case"keypress":return e.which!==32?null:($v=!0,zv);case"textInput":return t=e.data,t===zv&&$v?null:t;default:return null}}function JR(t,e){if(ss)return t==="compositionend"||!hm&&ST(t,e)?(t=ET(),_u=lm=Dr=null,ss=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return TT&&e.locale!=="ko"?null:e.data;default:return null}}var ZR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ZR[t.type]:e==="textarea"}function xT(t,e,n,r){nT(r),e=Zu(e,"onChange"),0<e.length&&(n=new um("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ea=null,Sa=null;function e1(t){LT(t,0)}function Wc(t){var e=ls(t);if(QE(e))return t}function t1(t,e){if(t==="change")return e}var CT=!1;if(rr){var ad;if(rr){var ld="oninput"in document;if(!ld){var Hv=document.createElement("div");Hv.setAttribute("oninput","return;"),ld=typeof Hv.oninput=="function"}ad=ld}else ad=!1;CT=ad&&(!document.documentMode||9<document.documentMode)}function qv(){ea&&(ea.detachEvent("onpropertychange",AT),Sa=ea=null)}function AT(t){if(t.propertyName==="value"&&Wc(Sa)){var e=[];xT(e,Sa,t,rm(t)),oT(e1,e)}}function n1(t,e,n){t==="focusin"?(qv(),ea=e,Sa=n,ea.attachEvent("onpropertychange",AT)):t==="focusout"&&qv()}function r1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Wc(Sa)}function i1(t,e){if(t==="click")return Wc(e)}function s1(t,e){if(t==="input"||t==="change")return Wc(e)}function o1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var In=typeof Object.is=="function"?Object.is:o1;function Ia(t,e){if(In(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Jd.call(e,i)||!In(t[i],e[i]))return!1}return!0}function Kv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Gv(t,e){var n=Kv(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Kv(n)}}function PT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?PT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function RT(){for(var t=window,e=qu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=qu(t.document)}return e}function dm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function a1(t){var e=RT(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&PT(n.ownerDocument.documentElement,n)){if(r!==null&&dm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Gv(n,s);var o=Gv(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var l1=rr&&"documentMode"in document&&11>=document.documentMode,os=null,vf=null,ta=null,_f=!1;function Qv(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;_f||os==null||os!==qu(r)||(r=os,"selectionStart"in r&&dm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ta&&Ia(ta,r)||(ta=r,r=Zu(vf,"onSelect"),0<r.length&&(e=new um("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=os)))}function Ql(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var as={animationend:Ql("Animation","AnimationEnd"),animationiteration:Ql("Animation","AnimationIteration"),animationstart:Ql("Animation","AnimationStart"),transitionend:Ql("Transition","TransitionEnd")},ud={},kT={};rr&&(kT=document.createElement("div").style,"AnimationEvent"in window||(delete as.animationend.animation,delete as.animationiteration.animation,delete as.animationstart.animation),"TransitionEvent"in window||delete as.transitionend.transition);function Hc(t){if(ud[t])return ud[t];if(!as[t])return t;var e=as[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in kT)return ud[t]=e[n];return t}var bT=Hc("animationend"),DT=Hc("animationiteration"),NT=Hc("animationstart"),VT=Hc("transitionend"),MT=new Map,Yv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ni(t,e){MT.set(t,e),$i(e,[t])}for(var cd=0;cd<Yv.length;cd++){var hd=Yv[cd],u1=hd.toLowerCase(),c1=hd[0].toUpperCase()+hd.slice(1);ni(u1,"on"+c1)}ni(bT,"onAnimationEnd");ni(DT,"onAnimationIteration");ni(NT,"onAnimationStart");ni("dblclick","onDoubleClick");ni("focusin","onFocus");ni("focusout","onBlur");ni(VT,"onTransitionEnd");Ds("onMouseEnter",["mouseout","mouseover"]);Ds("onMouseLeave",["mouseout","mouseover"]);Ds("onPointerEnter",["pointerout","pointerover"]);Ds("onPointerLeave",["pointerout","pointerover"]);$i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$i("onBeforeInput",["compositionend","keypress","textInput","paste"]);$i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),h1=new Set("cancel close invalid load scroll toggle".split(" ").concat(qo));function Xv(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,uR(r,e,void 0,t),t.currentTarget=null}function LT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Xv(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Xv(i,a,c),s=l}}}if(Gu)throw t=pf,Gu=!1,pf=null,t}function Ae(t,e){var n=e[If];n===void 0&&(n=e[If]=new Set);var r=t+"__bubble";n.has(r)||(OT(e,t,2,!1),n.add(r))}function dd(t,e,n){var r=0;e&&(r|=4),OT(n,t,r,e)}var Yl="_reactListening"+Math.random().toString(36).slice(2);function xa(t){if(!t[Yl]){t[Yl]=!0,WE.forEach(function(n){n!=="selectionchange"&&(h1.has(n)||dd(n,!1,t),dd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Yl]||(e[Yl]=!0,dd("selectionchange",!1,e))}}function OT(t,e,n,r){switch(wT(e)){case 1:var i=xR;break;case 4:i=CR;break;default:i=am}n=i.bind(null,e,n,t),i=void 0,!ff||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function fd(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=_i(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}oT(function(){var c=s,h=rm(n),d=[];e:{var p=MT.get(t);if(p!==void 0){var g=um,_=t;switch(t){case"keypress":if(wu(n)===0)break e;case"keydown":case"keyup":g=BR;break;case"focusin":_="focus",g=od;break;case"focusout":_="blur",g=od;break;case"beforeblur":case"afterblur":g=od;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=jv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=RR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=WR;break;case bT:case DT:case NT:g=DR;break;case VT:g=qR;break;case"scroll":g=AR;break;case"wheel":g=GR;break;case"copy":case"cut":case"paste":g=VR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Bv}var S=(e&4)!==0,x=!S&&t==="scroll",y=S?p!==null?p+"Capture":null:p;S=[];for(var v=c,E;v!==null;){E=v;var N=E.stateNode;if(E.tag===5&&N!==null&&(E=N,y!==null&&(N=_a(v,y),N!=null&&S.push(Ca(v,N,E)))),x)break;v=v.return}0<S.length&&(p=new g(p,_,null,n,h),d.push({event:p,listeners:S}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==hf&&(_=n.relatedTarget||n.fromElement)&&(_i(_)||_[ir]))break e;if((g||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,g?(_=n.relatedTarget||n.toElement,g=c,_=_?_i(_):null,_!==null&&(x=Wi(_),_!==x||_.tag!==5&&_.tag!==6)&&(_=null)):(g=null,_=c),g!==_)){if(S=jv,N="onMouseLeave",y="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(S=Bv,N="onPointerLeave",y="onPointerEnter",v="pointer"),x=g==null?p:ls(g),E=_==null?p:ls(_),p=new S(N,v+"leave",g,n,h),p.target=x,p.relatedTarget=E,N=null,_i(h)===c&&(S=new S(y,v+"enter",_,n,h),S.target=E,S.relatedTarget=x,N=S),x=N,g&&_)t:{for(S=g,y=_,v=0,E=S;E;E=Zi(E))v++;for(E=0,N=y;N;N=Zi(N))E++;for(;0<v-E;)S=Zi(S),v--;for(;0<E-v;)y=Zi(y),E--;for(;v--;){if(S===y||y!==null&&S===y.alternate)break t;S=Zi(S),y=Zi(y)}S=null}else S=null;g!==null&&Jv(d,p,g,S,!1),_!==null&&x!==null&&Jv(d,x,_,S,!0)}}e:{if(p=c?ls(c):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var M=t1;else if(Wv(p))if(CT)M=s1;else{M=r1;var F=n1}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(M=i1);if(M&&(M=M(t,c))){xT(d,M,n,h);break e}F&&F(t,p,c),t==="focusout"&&(F=p._wrapperState)&&F.controlled&&p.type==="number"&&of(p,"number",p.value)}switch(F=c?ls(c):window,t){case"focusin":(Wv(F)||F.contentEditable==="true")&&(os=F,vf=c,ta=null);break;case"focusout":ta=vf=os=null;break;case"mousedown":_f=!0;break;case"contextmenu":case"mouseup":case"dragend":_f=!1,Qv(d,n,h);break;case"selectionchange":if(l1)break;case"keydown":case"keyup":Qv(d,n,h)}var I;if(hm)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else ss?ST(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(TT&&n.locale!=="ko"&&(ss||w!=="onCompositionStart"?w==="onCompositionEnd"&&ss&&(I=ET()):(Dr=h,lm="value"in Dr?Dr.value:Dr.textContent,ss=!0)),F=Zu(c,w),0<F.length&&(w=new Uv(w,t,null,n,h),d.push({event:w,listeners:F}),I?w.data=I:(I=IT(n),I!==null&&(w.data=I)))),(I=YR?XR(t,n):JR(t,n))&&(c=Zu(c,"onBeforeInput"),0<c.length&&(h=new Uv("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=I))}LT(d,e)})}function Ca(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Zu(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=_a(t,n),s!=null&&r.unshift(Ca(t,s,i)),s=_a(t,e),s!=null&&r.push(Ca(t,s,i))),t=t.return}return r}function Zi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Jv(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=_a(n,s),l!=null&&o.unshift(Ca(n,l,a))):i||(l=_a(n,s),l!=null&&o.push(Ca(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var d1=/\r\n?/g,f1=/\u0000|\uFFFD/g;function Zv(t){return(typeof t=="string"?t:""+t).replace(d1,`
`).replace(f1,"")}function Xl(t,e,n){if(e=Zv(e),Zv(t)!==e&&n)throw Error(z(425))}function ec(){}var wf=null,Ef=null;function Tf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Sf=typeof setTimeout=="function"?setTimeout:void 0,p1=typeof clearTimeout=="function"?clearTimeout:void 0,e_=typeof Promise=="function"?Promise:void 0,m1=typeof queueMicrotask=="function"?queueMicrotask:typeof e_<"u"?function(t){return e_.resolve(null).then(t).catch(g1)}:Sf;function g1(t){setTimeout(function(){throw t})}function pd(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ta(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ta(e)}function jr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function t_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Zs=Math.random().toString(36).slice(2),Dn="__reactFiber$"+Zs,Aa="__reactProps$"+Zs,ir="__reactContainer$"+Zs,If="__reactEvents$"+Zs,y1="__reactListeners$"+Zs,v1="__reactHandles$"+Zs;function _i(t){var e=t[Dn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ir]||n[Dn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=t_(t);t!==null;){if(n=t[Dn])return n;t=t_(t)}return e}t=n,n=t.parentNode}return null}function el(t){return t=t[Dn]||t[ir],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ls(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function qc(t){return t[Aa]||null}var xf=[],us=-1;function ri(t){return{current:t}}function Pe(t){0>us||(t.current=xf[us],xf[us]=null,us--)}function xe(t,e){us++,xf[us]=t.current,t.current=e}var Yr={},Ct=ri(Yr),$t=ri(!1),Di=Yr;function Ns(t,e){var n=t.type.contextTypes;if(!n)return Yr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Wt(t){return t=t.childContextTypes,t!=null}function tc(){Pe($t),Pe(Ct)}function n_(t,e,n){if(Ct.current!==Yr)throw Error(z(168));xe(Ct,e),xe($t,n)}function FT(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(z(108,nR(t)||"Unknown",i));return Me({},n,r)}function nc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Yr,Di=Ct.current,xe(Ct,t),xe($t,$t.current),!0}function r_(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=FT(t,e,Di),r.__reactInternalMemoizedMergedChildContext=t,Pe($t),Pe(Ct),xe(Ct,t)):Pe($t),xe($t,n)}var Kn=null,Kc=!1,md=!1;function jT(t){Kn===null?Kn=[t]:Kn.push(t)}function _1(t){Kc=!0,jT(t)}function ii(){if(!md&&Kn!==null){md=!0;var t=0,e=_e;try{var n=Kn;for(_e=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Kn=null,Kc=!1}catch(i){throw Kn!==null&&(Kn=Kn.slice(t+1)),cT(im,ii),i}finally{_e=e,md=!1}}return null}var cs=[],hs=0,rc=null,ic=0,on=[],an=0,Ni=null,Qn=1,Yn="";function pi(t,e){cs[hs++]=ic,cs[hs++]=rc,rc=t,ic=e}function UT(t,e,n){on[an++]=Qn,on[an++]=Yn,on[an++]=Ni,Ni=t;var r=Qn;t=Yn;var i=32-En(r)-1;r&=~(1<<i),n+=1;var s=32-En(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Qn=1<<32-En(e)+i|n<<i|r,Yn=s+t}else Qn=1<<s|n<<i|r,Yn=t}function fm(t){t.return!==null&&(pi(t,1),UT(t,1,0))}function pm(t){for(;t===rc;)rc=cs[--hs],cs[hs]=null,ic=cs[--hs],cs[hs]=null;for(;t===Ni;)Ni=on[--an],on[an]=null,Yn=on[--an],on[an]=null,Qn=on[--an],on[an]=null}var Xt=null,Qt=null,Re=!1,wn=null;function BT(t,e){var n=ln(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function i_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Xt=t,Qt=jr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Xt=t,Qt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ni!==null?{id:Qn,overflow:Yn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ln(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Xt=t,Qt=null,!0):!1;default:return!1}}function Cf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Af(t){if(Re){var e=Qt;if(e){var n=e;if(!i_(t,e)){if(Cf(t))throw Error(z(418));e=jr(n.nextSibling);var r=Xt;e&&i_(t,e)?BT(r,n):(t.flags=t.flags&-4097|2,Re=!1,Xt=t)}}else{if(Cf(t))throw Error(z(418));t.flags=t.flags&-4097|2,Re=!1,Xt=t}}}function s_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Xt=t}function Jl(t){if(t!==Xt)return!1;if(!Re)return s_(t),Re=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Tf(t.type,t.memoizedProps)),e&&(e=Qt)){if(Cf(t))throw zT(),Error(z(418));for(;e;)BT(t,e),e=jr(e.nextSibling)}if(s_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Qt=jr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Qt=null}}else Qt=Xt?jr(t.stateNode.nextSibling):null;return!0}function zT(){for(var t=Qt;t;)t=jr(t.nextSibling)}function Vs(){Qt=Xt=null,Re=!1}function mm(t){wn===null?wn=[t]:wn.push(t)}var w1=mr.ReactCurrentBatchConfig;function Mo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function Zl(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function o_(t){var e=t._init;return e(t._payload)}function $T(t){function e(y,v){if(t){var E=y.deletions;E===null?(y.deletions=[v],y.flags|=16):E.push(v)}}function n(y,v){if(!t)return null;for(;v!==null;)e(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=$r(y,v),y.index=0,y.sibling=null,y}function s(y,v,E){return y.index=E,t?(E=y.alternate,E!==null?(E=E.index,E<v?(y.flags|=2,v):E):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,v,E,N){return v===null||v.tag!==6?(v=Td(E,y.mode,N),v.return=y,v):(v=i(v,E),v.return=y,v)}function l(y,v,E,N){var M=E.type;return M===is?h(y,v,E.props.children,N,E.key):v!==null&&(v.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===xr&&o_(M)===v.type)?(N=i(v,E.props),N.ref=Mo(y,v,E),N.return=y,N):(N=Au(E.type,E.key,E.props,null,y.mode,N),N.ref=Mo(y,v,E),N.return=y,N)}function c(y,v,E,N){return v===null||v.tag!==4||v.stateNode.containerInfo!==E.containerInfo||v.stateNode.implementation!==E.implementation?(v=Sd(E,y.mode,N),v.return=y,v):(v=i(v,E.children||[]),v.return=y,v)}function h(y,v,E,N,M){return v===null||v.tag!==7?(v=Ai(E,y.mode,N,M),v.return=y,v):(v=i(v,E),v.return=y,v)}function d(y,v,E){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Td(""+v,y.mode,E),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case zl:return E=Au(v.type,v.key,v.props,null,y.mode,E),E.ref=Mo(y,null,v),E.return=y,E;case rs:return v=Sd(v,y.mode,E),v.return=y,v;case xr:var N=v._init;return d(y,N(v._payload),E)}if(Wo(v)||ko(v))return v=Ai(v,y.mode,E,null),v.return=y,v;Zl(y,v)}return null}function p(y,v,E,N){var M=v!==null?v.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return M!==null?null:a(y,v,""+E,N);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case zl:return E.key===M?l(y,v,E,N):null;case rs:return E.key===M?c(y,v,E,N):null;case xr:return M=E._init,p(y,v,M(E._payload),N)}if(Wo(E)||ko(E))return M!==null?null:h(y,v,E,N,null);Zl(y,E)}return null}function g(y,v,E,N,M){if(typeof N=="string"&&N!==""||typeof N=="number")return y=y.get(E)||null,a(v,y,""+N,M);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case zl:return y=y.get(N.key===null?E:N.key)||null,l(v,y,N,M);case rs:return y=y.get(N.key===null?E:N.key)||null,c(v,y,N,M);case xr:var F=N._init;return g(y,v,E,F(N._payload),M)}if(Wo(N)||ko(N))return y=y.get(E)||null,h(v,y,N,M,null);Zl(v,N)}return null}function _(y,v,E,N){for(var M=null,F=null,I=v,w=v=0,C=null;I!==null&&w<E.length;w++){I.index>w?(C=I,I=null):C=I.sibling;var P=p(y,I,E[w],N);if(P===null){I===null&&(I=C);break}t&&I&&P.alternate===null&&e(y,I),v=s(P,v,w),F===null?M=P:F.sibling=P,F=P,I=C}if(w===E.length)return n(y,I),Re&&pi(y,w),M;if(I===null){for(;w<E.length;w++)I=d(y,E[w],N),I!==null&&(v=s(I,v,w),F===null?M=I:F.sibling=I,F=I);return Re&&pi(y,w),M}for(I=r(y,I);w<E.length;w++)C=g(I,y,w,E[w],N),C!==null&&(t&&C.alternate!==null&&I.delete(C.key===null?w:C.key),v=s(C,v,w),F===null?M=C:F.sibling=C,F=C);return t&&I.forEach(function(D){return e(y,D)}),Re&&pi(y,w),M}function S(y,v,E,N){var M=ko(E);if(typeof M!="function")throw Error(z(150));if(E=M.call(E),E==null)throw Error(z(151));for(var F=M=null,I=v,w=v=0,C=null,P=E.next();I!==null&&!P.done;w++,P=E.next()){I.index>w?(C=I,I=null):C=I.sibling;var D=p(y,I,P.value,N);if(D===null){I===null&&(I=C);break}t&&I&&D.alternate===null&&e(y,I),v=s(D,v,w),F===null?M=D:F.sibling=D,F=D,I=C}if(P.done)return n(y,I),Re&&pi(y,w),M;if(I===null){for(;!P.done;w++,P=E.next())P=d(y,P.value,N),P!==null&&(v=s(P,v,w),F===null?M=P:F.sibling=P,F=P);return Re&&pi(y,w),M}for(I=r(y,I);!P.done;w++,P=E.next())P=g(I,y,w,P.value,N),P!==null&&(t&&P.alternate!==null&&I.delete(P.key===null?w:P.key),v=s(P,v,w),F===null?M=P:F.sibling=P,F=P);return t&&I.forEach(function(L){return e(y,L)}),Re&&pi(y,w),M}function x(y,v,E,N){if(typeof E=="object"&&E!==null&&E.type===is&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case zl:e:{for(var M=E.key,F=v;F!==null;){if(F.key===M){if(M=E.type,M===is){if(F.tag===7){n(y,F.sibling),v=i(F,E.props.children),v.return=y,y=v;break e}}else if(F.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===xr&&o_(M)===F.type){n(y,F.sibling),v=i(F,E.props),v.ref=Mo(y,F,E),v.return=y,y=v;break e}n(y,F);break}else e(y,F);F=F.sibling}E.type===is?(v=Ai(E.props.children,y.mode,N,E.key),v.return=y,y=v):(N=Au(E.type,E.key,E.props,null,y.mode,N),N.ref=Mo(y,v,E),N.return=y,y=N)}return o(y);case rs:e:{for(F=E.key;v!==null;){if(v.key===F)if(v.tag===4&&v.stateNode.containerInfo===E.containerInfo&&v.stateNode.implementation===E.implementation){n(y,v.sibling),v=i(v,E.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else e(y,v);v=v.sibling}v=Sd(E,y.mode,N),v.return=y,y=v}return o(y);case xr:return F=E._init,x(y,v,F(E._payload),N)}if(Wo(E))return _(y,v,E,N);if(ko(E))return S(y,v,E,N);Zl(y,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,E),v.return=y,y=v):(n(y,v),v=Td(E,y.mode,N),v.return=y,y=v),o(y)):n(y,v)}return x}var Ms=$T(!0),WT=$T(!1),sc=ri(null),oc=null,ds=null,gm=null;function ym(){gm=ds=oc=null}function vm(t){var e=sc.current;Pe(sc),t._currentValue=e}function Pf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function xs(t,e){oc=t,gm=ds=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Bt=!0),t.firstContext=null)}function dn(t){var e=t._currentValue;if(gm!==t)if(t={context:t,memoizedValue:e,next:null},ds===null){if(oc===null)throw Error(z(308));ds=t,oc.dependencies={lanes:0,firstContext:t}}else ds=ds.next=t;return e}var wi=null;function _m(t){wi===null?wi=[t]:wi.push(t)}function HT(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,_m(e)):(n.next=i.next,i.next=n),e.interleaved=n,sr(t,r)}function sr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Cr=!1;function wm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function tr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ur(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,fe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,sr(t,n)}return i=r.interleaved,i===null?(e.next=e,_m(r)):(e.next=i.next,i.next=e),r.interleaved=e,sr(t,n)}function Eu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,sm(t,n)}}function a_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ac(t,e,n,r){var i=t.updateQueue;Cr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,h=c=l=null,a=s;do{var p=a.lane,g=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,S=a;switch(p=e,g=n,S.tag){case 1:if(_=S.payload,typeof _=="function"){d=_.call(g,d,p);break e}d=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=S.payload,p=typeof _=="function"?_.call(g,d,p):_,p==null)break e;d=Me({},d,p);break e;case 2:Cr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else g={eventTime:g,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=g,l=d):h=h.next=g,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(h===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Mi|=o,t.lanes=o,t.memoizedState=d}}function l_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(z(191,i));i.call(r)}}}var tl={},Vn=ri(tl),Pa=ri(tl),Ra=ri(tl);function Ei(t){if(t===tl)throw Error(z(174));return t}function Em(t,e){switch(xe(Ra,e),xe(Pa,t),xe(Vn,tl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=lf(e,t)}Pe(Vn),xe(Vn,e)}function Ls(){Pe(Vn),Pe(Pa),Pe(Ra)}function KT(t){Ei(Ra.current);var e=Ei(Vn.current),n=lf(e,t.type);e!==n&&(xe(Pa,t),xe(Vn,n))}function Tm(t){Pa.current===t&&(Pe(Vn),Pe(Pa))}var De=ri(0);function lc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var gd=[];function Sm(){for(var t=0;t<gd.length;t++)gd[t]._workInProgressVersionPrimary=null;gd.length=0}var Tu=mr.ReactCurrentDispatcher,yd=mr.ReactCurrentBatchConfig,Vi=0,Ve=null,Qe=null,rt=null,uc=!1,na=!1,ka=0,E1=0;function vt(){throw Error(z(321))}function Im(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!In(t[n],e[n]))return!1;return!0}function xm(t,e,n,r,i,s){if(Vi=s,Ve=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Tu.current=t===null||t.memoizedState===null?x1:C1,t=n(r,i),na){s=0;do{if(na=!1,ka=0,25<=s)throw Error(z(301));s+=1,rt=Qe=null,e.updateQueue=null,Tu.current=A1,t=n(r,i)}while(na)}if(Tu.current=cc,e=Qe!==null&&Qe.next!==null,Vi=0,rt=Qe=Ve=null,uc=!1,e)throw Error(z(300));return t}function Cm(){var t=ka!==0;return ka=0,t}function bn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?Ve.memoizedState=rt=t:rt=rt.next=t,rt}function fn(){if(Qe===null){var t=Ve.alternate;t=t!==null?t.memoizedState:null}else t=Qe.next;var e=rt===null?Ve.memoizedState:rt.next;if(e!==null)rt=e,Qe=t;else{if(t===null)throw Error(z(310));Qe=t,t={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},rt===null?Ve.memoizedState=rt=t:rt=rt.next=t}return rt}function ba(t,e){return typeof e=="function"?e(t):e}function vd(t){var e=fn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=Qe,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((Vi&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Ve.lanes|=h,Mi|=h}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,In(r,e.memoizedState)||(Bt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ve.lanes|=s,Mi|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function _d(t){var e=fn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);In(s,e.memoizedState)||(Bt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function GT(){}function QT(t,e){var n=Ve,r=fn(),i=e(),s=!In(r.memoizedState,i);if(s&&(r.memoizedState=i,Bt=!0),r=r.queue,Am(JT.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||rt!==null&&rt.memoizedState.tag&1){if(n.flags|=2048,Da(9,XT.bind(null,n,r,i,e),void 0,null),st===null)throw Error(z(349));Vi&30||YT(n,e,i)}return i}function YT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ve.updateQueue,e===null?(e={lastEffect:null,stores:null},Ve.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function XT(t,e,n,r){e.value=n,e.getSnapshot=r,ZT(e)&&eS(t)}function JT(t,e,n){return n(function(){ZT(e)&&eS(t)})}function ZT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!In(t,n)}catch{return!0}}function eS(t){var e=sr(t,1);e!==null&&Tn(e,t,1,-1)}function u_(t){var e=bn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:t},e.queue=t,t=t.dispatch=I1.bind(null,Ve,t),[e.memoizedState,t]}function Da(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ve.updateQueue,e===null?(e={lastEffect:null,stores:null},Ve.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function tS(){return fn().memoizedState}function Su(t,e,n,r){var i=bn();Ve.flags|=t,i.memoizedState=Da(1|e,n,void 0,r===void 0?null:r)}function Gc(t,e,n,r){var i=fn();r=r===void 0?null:r;var s=void 0;if(Qe!==null){var o=Qe.memoizedState;if(s=o.destroy,r!==null&&Im(r,o.deps)){i.memoizedState=Da(e,n,s,r);return}}Ve.flags|=t,i.memoizedState=Da(1|e,n,s,r)}function c_(t,e){return Su(8390656,8,t,e)}function Am(t,e){return Gc(2048,8,t,e)}function nS(t,e){return Gc(4,2,t,e)}function rS(t,e){return Gc(4,4,t,e)}function iS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function sS(t,e,n){return n=n!=null?n.concat([t]):null,Gc(4,4,iS.bind(null,e,t),n)}function Pm(){}function oS(t,e){var n=fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Im(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function aS(t,e){var n=fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Im(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function lS(t,e,n){return Vi&21?(In(n,e)||(n=fT(),Ve.lanes|=n,Mi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Bt=!0),t.memoizedState=n)}function T1(t,e){var n=_e;_e=n!==0&&4>n?n:4,t(!0);var r=yd.transition;yd.transition={};try{t(!1),e()}finally{_e=n,yd.transition=r}}function uS(){return fn().memoizedState}function S1(t,e,n){var r=zr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},cS(t))hS(e,n);else if(n=HT(t,e,n,r),n!==null){var i=Nt();Tn(n,t,r,i),dS(n,e,r)}}function I1(t,e,n){var r=zr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(cS(t))hS(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,In(a,o)){var l=e.interleaved;l===null?(i.next=i,_m(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=HT(t,e,i,r),n!==null&&(i=Nt(),Tn(n,t,r,i),dS(n,e,r))}}function cS(t){var e=t.alternate;return t===Ve||e!==null&&e===Ve}function hS(t,e){na=uc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function dS(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,sm(t,n)}}var cc={readContext:dn,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useInsertionEffect:vt,useLayoutEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useMutableSource:vt,useSyncExternalStore:vt,useId:vt,unstable_isNewReconciler:!1},x1={readContext:dn,useCallback:function(t,e){return bn().memoizedState=[t,e===void 0?null:e],t},useContext:dn,useEffect:c_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Su(4194308,4,iS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Su(4194308,4,t,e)},useInsertionEffect:function(t,e){return Su(4,2,t,e)},useMemo:function(t,e){var n=bn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=bn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=S1.bind(null,Ve,t),[r.memoizedState,t]},useRef:function(t){var e=bn();return t={current:t},e.memoizedState=t},useState:u_,useDebugValue:Pm,useDeferredValue:function(t){return bn().memoizedState=t},useTransition:function(){var t=u_(!1),e=t[0];return t=T1.bind(null,t[1]),bn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ve,i=bn();if(Re){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),st===null)throw Error(z(349));Vi&30||YT(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,c_(JT.bind(null,r,s,t),[t]),r.flags|=2048,Da(9,XT.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=bn(),e=st.identifierPrefix;if(Re){var n=Yn,r=Qn;n=(r&~(1<<32-En(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ka++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=E1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},C1={readContext:dn,useCallback:oS,useContext:dn,useEffect:Am,useImperativeHandle:sS,useInsertionEffect:nS,useLayoutEffect:rS,useMemo:aS,useReducer:vd,useRef:tS,useState:function(){return vd(ba)},useDebugValue:Pm,useDeferredValue:function(t){var e=fn();return lS(e,Qe.memoizedState,t)},useTransition:function(){var t=vd(ba)[0],e=fn().memoizedState;return[t,e]},useMutableSource:GT,useSyncExternalStore:QT,useId:uS,unstable_isNewReconciler:!1},A1={readContext:dn,useCallback:oS,useContext:dn,useEffect:Am,useImperativeHandle:sS,useInsertionEffect:nS,useLayoutEffect:rS,useMemo:aS,useReducer:_d,useRef:tS,useState:function(){return _d(ba)},useDebugValue:Pm,useDeferredValue:function(t){var e=fn();return Qe===null?e.memoizedState=t:lS(e,Qe.memoizedState,t)},useTransition:function(){var t=_d(ba)[0],e=fn().memoizedState;return[t,e]},useMutableSource:GT,useSyncExternalStore:QT,useId:uS,unstable_isNewReconciler:!1};function vn(t,e){if(t&&t.defaultProps){e=Me({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Rf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Me({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Qc={isMounted:function(t){return(t=t._reactInternals)?Wi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Nt(),i=zr(t),s=tr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ur(t,s,i),e!==null&&(Tn(e,t,i,r),Eu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Nt(),i=zr(t),s=tr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ur(t,s,i),e!==null&&(Tn(e,t,i,r),Eu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Nt(),r=zr(t),i=tr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ur(t,i,r),e!==null&&(Tn(e,t,r,n),Eu(e,t,r))}};function h_(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ia(n,r)||!Ia(i,s):!0}function fS(t,e,n){var r=!1,i=Yr,s=e.contextType;return typeof s=="object"&&s!==null?s=dn(s):(i=Wt(e)?Di:Ct.current,r=e.contextTypes,s=(r=r!=null)?Ns(t,i):Yr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Qc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function d_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Qc.enqueueReplaceState(e,e.state,null)}function kf(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},wm(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=dn(s):(s=Wt(e)?Di:Ct.current,i.context=Ns(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Rf(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Qc.enqueueReplaceState(i,i.state,null),ac(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Os(t,e){try{var n="",r=e;do n+=tR(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function wd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function bf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var P1=typeof WeakMap=="function"?WeakMap:Map;function pS(t,e,n){n=tr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){dc||(dc=!0,Bf=r),bf(t,e)},n}function mS(t,e,n){n=tr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){bf(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){bf(t,e),typeof r!="function"&&(Br===null?Br=new Set([this]):Br.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function f_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new P1;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=z1.bind(null,t,e,n),e.then(t,t))}function p_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function m_(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=tr(-1,1),e.tag=2,Ur(n,e,1))),n.lanes|=1),t)}var R1=mr.ReactCurrentOwner,Bt=!1;function Rt(t,e,n,r){e.child=t===null?WT(e,null,n,r):Ms(e,t.child,n,r)}function g_(t,e,n,r,i){n=n.render;var s=e.ref;return xs(e,i),r=xm(t,e,n,r,s,i),n=Cm(),t!==null&&!Bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,or(t,e,i)):(Re&&n&&fm(e),e.flags|=1,Rt(t,e,r,i),e.child)}function y_(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Lm(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,gS(t,e,s,r,i)):(t=Au(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ia,n(o,r)&&t.ref===e.ref)return or(t,e,i)}return e.flags|=1,t=$r(s,r),t.ref=e.ref,t.return=e,e.child=t}function gS(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ia(s,r)&&t.ref===e.ref)if(Bt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Bt=!0);else return e.lanes=t.lanes,or(t,e,i)}return Df(t,e,n,r,i)}function yS(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},xe(ps,Gt),Gt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,xe(ps,Gt),Gt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,xe(ps,Gt),Gt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,xe(ps,Gt),Gt|=r;return Rt(t,e,i,n),e.child}function vS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Df(t,e,n,r,i){var s=Wt(n)?Di:Ct.current;return s=Ns(e,s),xs(e,i),n=xm(t,e,n,r,s,i),r=Cm(),t!==null&&!Bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,or(t,e,i)):(Re&&r&&fm(e),e.flags|=1,Rt(t,e,n,i),e.child)}function v_(t,e,n,r,i){if(Wt(n)){var s=!0;nc(e)}else s=!1;if(xs(e,i),e.stateNode===null)Iu(t,e),fS(e,n,r),kf(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=dn(c):(c=Wt(n)?Di:Ct.current,c=Ns(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&d_(e,o,r,c),Cr=!1;var p=e.memoizedState;o.state=p,ac(e,r,o,i),l=e.memoizedState,a!==r||p!==l||$t.current||Cr?(typeof h=="function"&&(Rf(e,n,h,r),l=e.memoizedState),(a=Cr||h_(e,n,a,r,p,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,qT(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:vn(e.type,a),o.props=c,d=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=dn(l):(l=Wt(n)?Di:Ct.current,l=Ns(e,l));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&d_(e,o,r,l),Cr=!1,p=e.memoizedState,o.state=p,ac(e,r,o,i);var _=e.memoizedState;a!==d||p!==_||$t.current||Cr?(typeof g=="function"&&(Rf(e,n,g,r),_=e.memoizedState),(c=Cr||h_(e,n,c,r,p,_,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Nf(t,e,n,r,s,i)}function Nf(t,e,n,r,i,s){vS(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&r_(e,n,!1),or(t,e,s);r=e.stateNode,R1.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ms(e,t.child,null,s),e.child=Ms(e,null,a,s)):Rt(t,e,a,s),e.memoizedState=r.state,i&&r_(e,n,!0),e.child}function _S(t){var e=t.stateNode;e.pendingContext?n_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&n_(t,e.context,!1),Em(t,e.containerInfo)}function __(t,e,n,r,i){return Vs(),mm(i),e.flags|=256,Rt(t,e,n,r),e.child}var Vf={dehydrated:null,treeContext:null,retryLane:0};function Mf(t){return{baseLanes:t,cachePool:null,transitions:null}}function wS(t,e,n){var r=e.pendingProps,i=De.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),xe(De,i&1),t===null)return Af(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Jc(o,r,0,null),t=Ai(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Mf(n),e.memoizedState=Vf,t):Rm(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return k1(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=$r(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=$r(a,s):(s=Ai(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Mf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Vf,r}return s=t.child,t=s.sibling,r=$r(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Rm(t,e){return e=Jc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function eu(t,e,n,r){return r!==null&&mm(r),Ms(e,t.child,null,n),t=Rm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function k1(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=wd(Error(z(422))),eu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Jc({mode:"visible",children:r.children},i,0,null),s=Ai(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ms(e,t.child,null,o),e.child.memoizedState=Mf(o),e.memoizedState=Vf,s);if(!(e.mode&1))return eu(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(z(419)),r=wd(s,r,void 0),eu(t,e,o,r)}if(a=(o&t.childLanes)!==0,Bt||a){if(r=st,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,sr(t,i),Tn(r,t,i,-1))}return Mm(),r=wd(Error(z(421))),eu(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=$1.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Qt=jr(i.nextSibling),Xt=e,Re=!0,wn=null,t!==null&&(on[an++]=Qn,on[an++]=Yn,on[an++]=Ni,Qn=t.id,Yn=t.overflow,Ni=e),e=Rm(e,r.children),e.flags|=4096,e)}function w_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Pf(t.return,e,n)}function Ed(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function ES(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Rt(t,e,r.children,n),r=De.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&w_(t,n,e);else if(t.tag===19)w_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(xe(De,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&lc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ed(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&lc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ed(e,!0,n,null,s);break;case"together":Ed(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Iu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function or(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Mi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=$r(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=$r(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function b1(t,e,n){switch(e.tag){case 3:_S(e),Vs();break;case 5:KT(e);break;case 1:Wt(e.type)&&nc(e);break;case 4:Em(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;xe(sc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(xe(De,De.current&1),e.flags|=128,null):n&e.child.childLanes?wS(t,e,n):(xe(De,De.current&1),t=or(t,e,n),t!==null?t.sibling:null);xe(De,De.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return ES(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),xe(De,De.current),r)break;return null;case 22:case 23:return e.lanes=0,yS(t,e,n)}return or(t,e,n)}var TS,Lf,SS,IS;TS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Lf=function(){};SS=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ei(Vn.current);var s=null;switch(n){case"input":i=rf(t,i),r=rf(t,r),s=[];break;case"select":i=Me({},i,{value:void 0}),r=Me({},r,{value:void 0}),s=[];break;case"textarea":i=af(t,i),r=af(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ec)}uf(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ya.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ya.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ae("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};IS=function(t,e,n,r){n!==r&&(e.flags|=4)};function Lo(t,e){if(!Re)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function _t(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function D1(t,e,n){var r=e.pendingProps;switch(pm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(e),null;case 1:return Wt(e.type)&&tc(),_t(e),null;case 3:return r=e.stateNode,Ls(),Pe($t),Pe(Ct),Sm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Jl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,wn!==null&&(Wf(wn),wn=null))),Lf(t,e),_t(e),null;case 5:Tm(e);var i=Ei(Ra.current);if(n=e.type,t!==null&&e.stateNode!=null)SS(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return _t(e),null}if(t=Ei(Vn.current),Jl(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Dn]=e,r[Aa]=s,t=(e.mode&1)!==0,n){case"dialog":Ae("cancel",r),Ae("close",r);break;case"iframe":case"object":case"embed":Ae("load",r);break;case"video":case"audio":for(i=0;i<qo.length;i++)Ae(qo[i],r);break;case"source":Ae("error",r);break;case"img":case"image":case"link":Ae("error",r),Ae("load",r);break;case"details":Ae("toggle",r);break;case"input":Rv(r,s),Ae("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ae("invalid",r);break;case"textarea":bv(r,s),Ae("invalid",r)}uf(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Xl(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Xl(r.textContent,a,t),i=["children",""+a]):ya.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ae("scroll",r)}switch(n){case"input":$l(r),kv(r,s,!0);break;case"textarea":$l(r),Dv(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ec)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=JE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Dn]=e,t[Aa]=r,TS(t,e,!1,!1),e.stateNode=t;e:{switch(o=cf(n,r),n){case"dialog":Ae("cancel",t),Ae("close",t),i=r;break;case"iframe":case"object":case"embed":Ae("load",t),i=r;break;case"video":case"audio":for(i=0;i<qo.length;i++)Ae(qo[i],t);i=r;break;case"source":Ae("error",t),i=r;break;case"img":case"image":case"link":Ae("error",t),Ae("load",t),i=r;break;case"details":Ae("toggle",t),i=r;break;case"input":Rv(t,r),i=rf(t,r),Ae("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Me({},r,{value:void 0}),Ae("invalid",t);break;case"textarea":bv(t,r),i=af(t,r),Ae("invalid",t);break;default:i=r}uf(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?tT(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&ZE(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&va(t,l):typeof l=="number"&&va(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ya.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ae("scroll",t):l!=null&&Zp(t,s,l,o))}switch(n){case"input":$l(t),kv(t,r,!1);break;case"textarea":$l(t),Dv(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Qr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Es(t,!!r.multiple,s,!1):r.defaultValue!=null&&Es(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ec)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return _t(e),null;case 6:if(t&&e.stateNode!=null)IS(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=Ei(Ra.current),Ei(Vn.current),Jl(e)){if(r=e.stateNode,n=e.memoizedProps,r[Dn]=e,(s=r.nodeValue!==n)&&(t=Xt,t!==null))switch(t.tag){case 3:Xl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Xl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Dn]=e,e.stateNode=r}return _t(e),null;case 13:if(Pe(De),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Re&&Qt!==null&&e.mode&1&&!(e.flags&128))zT(),Vs(),e.flags|=98560,s=!1;else if(s=Jl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(z(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(z(317));s[Dn]=e}else Vs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;_t(e),s=!1}else wn!==null&&(Wf(wn),wn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||De.current&1?Ye===0&&(Ye=3):Mm())),e.updateQueue!==null&&(e.flags|=4),_t(e),null);case 4:return Ls(),Lf(t,e),t===null&&xa(e.stateNode.containerInfo),_t(e),null;case 10:return vm(e.type._context),_t(e),null;case 17:return Wt(e.type)&&tc(),_t(e),null;case 19:if(Pe(De),s=e.memoizedState,s===null)return _t(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Lo(s,!1);else{if(Ye!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=lc(t),o!==null){for(e.flags|=128,Lo(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return xe(De,De.current&1|2),e.child}t=t.sibling}s.tail!==null&&$e()>Fs&&(e.flags|=128,r=!0,Lo(s,!1),e.lanes=4194304)}else{if(!r)if(t=lc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Lo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Re)return _t(e),null}else 2*$e()-s.renderingStartTime>Fs&&n!==1073741824&&(e.flags|=128,r=!0,Lo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=$e(),e.sibling=null,n=De.current,xe(De,r?n&1|2:n&1),e):(_t(e),null);case 22:case 23:return Vm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Gt&1073741824&&(_t(e),e.subtreeFlags&6&&(e.flags|=8192)):_t(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function N1(t,e){switch(pm(e),e.tag){case 1:return Wt(e.type)&&tc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ls(),Pe($t),Pe(Ct),Sm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Tm(e),null;case 13:if(Pe(De),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));Vs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Pe(De),null;case 4:return Ls(),null;case 10:return vm(e.type._context),null;case 22:case 23:return Vm(),null;case 24:return null;default:return null}}var tu=!1,Tt=!1,V1=typeof WeakSet=="function"?WeakSet:Set,G=null;function fs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){je(t,e,r)}else n.current=null}function Of(t,e,n){try{n()}catch(r){je(t,e,r)}}var E_=!1;function M1(t,e){if(wf=Xu,t=RT(),dm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=t,p=null;t:for(;;){for(var g;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)p=d,d=g;for(;;){if(d===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++h===r&&(l=o),(g=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ef={focusedElem:t,selectionRange:n},Xu=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var S=_.memoizedProps,x=_.memoizedState,y=e.stateNode,v=y.getSnapshotBeforeUpdate(e.elementType===e.type?S:vn(e.type,S),x);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(N){je(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return _=E_,E_=!1,_}function ra(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Of(e,n,s)}i=i.next}while(i!==r)}}function Yc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ff(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function xS(t){var e=t.alternate;e!==null&&(t.alternate=null,xS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Dn],delete e[Aa],delete e[If],delete e[y1],delete e[v1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function CS(t){return t.tag===5||t.tag===3||t.tag===4}function T_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||CS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function jf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ec));else if(r!==4&&(t=t.child,t!==null))for(jf(t,e,n),t=t.sibling;t!==null;)jf(t,e,n),t=t.sibling}function Uf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Uf(t,e,n),t=t.sibling;t!==null;)Uf(t,e,n),t=t.sibling}var lt=null,_n=!1;function Er(t,e,n){for(n=n.child;n!==null;)AS(t,e,n),n=n.sibling}function AS(t,e,n){if(Nn&&typeof Nn.onCommitFiberUnmount=="function")try{Nn.onCommitFiberUnmount(zc,n)}catch{}switch(n.tag){case 5:Tt||fs(n,e);case 6:var r=lt,i=_n;lt=null,Er(t,e,n),lt=r,_n=i,lt!==null&&(_n?(t=lt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):lt.removeChild(n.stateNode));break;case 18:lt!==null&&(_n?(t=lt,n=n.stateNode,t.nodeType===8?pd(t.parentNode,n):t.nodeType===1&&pd(t,n),Ta(t)):pd(lt,n.stateNode));break;case 4:r=lt,i=_n,lt=n.stateNode.containerInfo,_n=!0,Er(t,e,n),lt=r,_n=i;break;case 0:case 11:case 14:case 15:if(!Tt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Of(n,e,o),i=i.next}while(i!==r)}Er(t,e,n);break;case 1:if(!Tt&&(fs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){je(n,e,a)}Er(t,e,n);break;case 21:Er(t,e,n);break;case 22:n.mode&1?(Tt=(r=Tt)||n.memoizedState!==null,Er(t,e,n),Tt=r):Er(t,e,n);break;default:Er(t,e,n)}}function S_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new V1),e.forEach(function(r){var i=W1.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function gn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:lt=a.stateNode,_n=!1;break e;case 3:lt=a.stateNode.containerInfo,_n=!0;break e;case 4:lt=a.stateNode.containerInfo,_n=!0;break e}a=a.return}if(lt===null)throw Error(z(160));AS(s,o,i),lt=null,_n=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){je(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)PS(e,t),e=e.sibling}function PS(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(gn(e,t),kn(t),r&4){try{ra(3,t,t.return),Yc(3,t)}catch(S){je(t,t.return,S)}try{ra(5,t,t.return)}catch(S){je(t,t.return,S)}}break;case 1:gn(e,t),kn(t),r&512&&n!==null&&fs(n,n.return);break;case 5:if(gn(e,t),kn(t),r&512&&n!==null&&fs(n,n.return),t.flags&32){var i=t.stateNode;try{va(i,"")}catch(S){je(t,t.return,S)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&YE(i,s),cf(a,o);var c=cf(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?tT(i,d):h==="dangerouslySetInnerHTML"?ZE(i,d):h==="children"?va(i,d):Zp(i,h,d,c)}switch(a){case"input":sf(i,s);break;case"textarea":XE(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Es(i,!!s.multiple,g,!1):p!==!!s.multiple&&(s.defaultValue!=null?Es(i,!!s.multiple,s.defaultValue,!0):Es(i,!!s.multiple,s.multiple?[]:"",!1))}i[Aa]=s}catch(S){je(t,t.return,S)}}break;case 6:if(gn(e,t),kn(t),r&4){if(t.stateNode===null)throw Error(z(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(S){je(t,t.return,S)}}break;case 3:if(gn(e,t),kn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ta(e.containerInfo)}catch(S){je(t,t.return,S)}break;case 4:gn(e,t),kn(t);break;case 13:gn(e,t),kn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Dm=$e())),r&4&&S_(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Tt=(c=Tt)||h,gn(e,t),Tt=c):gn(e,t),kn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(G=t,h=t.child;h!==null;){for(d=G=h;G!==null;){switch(p=G,g=p.child,p.tag){case 0:case 11:case 14:case 15:ra(4,p,p.return);break;case 1:fs(p,p.return);var _=p.stateNode;if(typeof _.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(S){je(r,n,S)}}break;case 5:fs(p,p.return);break;case 22:if(p.memoizedState!==null){x_(d);continue}}g!==null?(g.return=p,G=g):x_(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=eT("display",o))}catch(S){je(t,t.return,S)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(S){je(t,t.return,S)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gn(e,t),kn(t),r&4&&S_(t);break;case 21:break;default:gn(e,t),kn(t)}}function kn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(CS(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(va(i,""),r.flags&=-33);var s=T_(t);Uf(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=T_(t);jf(t,a,o);break;default:throw Error(z(161))}}catch(l){je(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function L1(t,e,n){G=t,RS(t)}function RS(t,e,n){for(var r=(t.mode&1)!==0;G!==null;){var i=G,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||tu;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Tt;a=tu;var c=Tt;if(tu=o,(Tt=l)&&!c)for(G=i;G!==null;)o=G,l=o.child,o.tag===22&&o.memoizedState!==null?C_(i):l!==null?(l.return=o,G=l):C_(i);for(;s!==null;)G=s,RS(s),s=s.sibling;G=i,tu=a,Tt=c}I_(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,G=s):I_(t)}}function I_(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Tt||Yc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Tt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:vn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&l_(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}l_(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Ta(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}Tt||e.flags&512&&Ff(e)}catch(p){je(e,e.return,p)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function x_(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function C_(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Yc(4,e)}catch(l){je(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){je(e,i,l)}}var s=e.return;try{Ff(e)}catch(l){je(e,s,l)}break;case 5:var o=e.return;try{Ff(e)}catch(l){je(e,o,l)}}}catch(l){je(e,e.return,l)}if(e===t){G=null;break}var a=e.sibling;if(a!==null){a.return=e.return,G=a;break}G=e.return}}var O1=Math.ceil,hc=mr.ReactCurrentDispatcher,km=mr.ReactCurrentOwner,cn=mr.ReactCurrentBatchConfig,fe=0,st=null,qe=null,dt=0,Gt=0,ps=ri(0),Ye=0,Na=null,Mi=0,Xc=0,bm=0,ia=null,Ut=null,Dm=0,Fs=1/0,qn=null,dc=!1,Bf=null,Br=null,nu=!1,Nr=null,fc=0,sa=0,zf=null,xu=-1,Cu=0;function Nt(){return fe&6?$e():xu!==-1?xu:xu=$e()}function zr(t){return t.mode&1?fe&2&&dt!==0?dt&-dt:w1.transition!==null?(Cu===0&&(Cu=fT()),Cu):(t=_e,t!==0||(t=window.event,t=t===void 0?16:wT(t.type)),t):1}function Tn(t,e,n,r){if(50<sa)throw sa=0,zf=null,Error(z(185));Ja(t,n,r),(!(fe&2)||t!==st)&&(t===st&&(!(fe&2)&&(Xc|=n),Ye===4&&Pr(t,dt)),Ht(t,r),n===1&&fe===0&&!(e.mode&1)&&(Fs=$e()+500,Kc&&ii()))}function Ht(t,e){var n=t.callbackNode;wR(t,e);var r=Yu(t,t===st?dt:0);if(r===0)n!==null&&Mv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Mv(n),e===1)t.tag===0?_1(A_.bind(null,t)):jT(A_.bind(null,t)),m1(function(){!(fe&6)&&ii()}),n=null;else{switch(pT(r)){case 1:n=im;break;case 4:n=hT;break;case 16:n=Qu;break;case 536870912:n=dT;break;default:n=Qu}n=OS(n,kS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function kS(t,e){if(xu=-1,Cu=0,fe&6)throw Error(z(327));var n=t.callbackNode;if(Cs()&&t.callbackNode!==n)return null;var r=Yu(t,t===st?dt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=pc(t,r);else{e=r;var i=fe;fe|=2;var s=DS();(st!==t||dt!==e)&&(qn=null,Fs=$e()+500,Ci(t,e));do try{U1();break}catch(a){bS(t,a)}while(!0);ym(),hc.current=s,fe=i,qe!==null?e=0:(st=null,dt=0,e=Ye)}if(e!==0){if(e===2&&(i=mf(t),i!==0&&(r=i,e=$f(t,i))),e===1)throw n=Na,Ci(t,0),Pr(t,r),Ht(t,$e()),n;if(e===6)Pr(t,r);else{if(i=t.current.alternate,!(r&30)&&!F1(i)&&(e=pc(t,r),e===2&&(s=mf(t),s!==0&&(r=s,e=$f(t,s))),e===1))throw n=Na,Ci(t,0),Pr(t,r),Ht(t,$e()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:mi(t,Ut,qn);break;case 3:if(Pr(t,r),(r&130023424)===r&&(e=Dm+500-$e(),10<e)){if(Yu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Nt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Sf(mi.bind(null,t,Ut,qn),e);break}mi(t,Ut,qn);break;case 4:if(Pr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-En(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=$e()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*O1(r/1960))-r,10<r){t.timeoutHandle=Sf(mi.bind(null,t,Ut,qn),r);break}mi(t,Ut,qn);break;case 5:mi(t,Ut,qn);break;default:throw Error(z(329))}}}return Ht(t,$e()),t.callbackNode===n?kS.bind(null,t):null}function $f(t,e){var n=ia;return t.current.memoizedState.isDehydrated&&(Ci(t,e).flags|=256),t=pc(t,e),t!==2&&(e=Ut,Ut=n,e!==null&&Wf(e)),t}function Wf(t){Ut===null?Ut=t:Ut.push.apply(Ut,t)}function F1(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!In(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Pr(t,e){for(e&=~bm,e&=~Xc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-En(e),r=1<<n;t[n]=-1,e&=~r}}function A_(t){if(fe&6)throw Error(z(327));Cs();var e=Yu(t,0);if(!(e&1))return Ht(t,$e()),null;var n=pc(t,e);if(t.tag!==0&&n===2){var r=mf(t);r!==0&&(e=r,n=$f(t,r))}if(n===1)throw n=Na,Ci(t,0),Pr(t,e),Ht(t,$e()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,mi(t,Ut,qn),Ht(t,$e()),null}function Nm(t,e){var n=fe;fe|=1;try{return t(e)}finally{fe=n,fe===0&&(Fs=$e()+500,Kc&&ii())}}function Li(t){Nr!==null&&Nr.tag===0&&!(fe&6)&&Cs();var e=fe;fe|=1;var n=cn.transition,r=_e;try{if(cn.transition=null,_e=1,t)return t()}finally{_e=r,cn.transition=n,fe=e,!(fe&6)&&ii()}}function Vm(){Gt=ps.current,Pe(ps)}function Ci(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,p1(n)),qe!==null)for(n=qe.return;n!==null;){var r=n;switch(pm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&tc();break;case 3:Ls(),Pe($t),Pe(Ct),Sm();break;case 5:Tm(r);break;case 4:Ls();break;case 13:Pe(De);break;case 19:Pe(De);break;case 10:vm(r.type._context);break;case 22:case 23:Vm()}n=n.return}if(st=t,qe=t=$r(t.current,null),dt=Gt=e,Ye=0,Na=null,bm=Xc=Mi=0,Ut=ia=null,wi!==null){for(e=0;e<wi.length;e++)if(n=wi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}wi=null}return t}function bS(t,e){do{var n=qe;try{if(ym(),Tu.current=cc,uc){for(var r=Ve.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}uc=!1}if(Vi=0,rt=Qe=Ve=null,na=!1,ka=0,km.current=null,n===null||n.return===null){Ye=1,Na=e,qe=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=dt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=p_(o);if(g!==null){g.flags&=-257,m_(g,o,a,s,e),g.mode&1&&f_(s,c,e),e=g,l=c;var _=e.updateQueue;if(_===null){var S=new Set;S.add(l),e.updateQueue=S}else _.add(l);break e}else{if(!(e&1)){f_(s,c,e),Mm();break e}l=Error(z(426))}}else if(Re&&a.mode&1){var x=p_(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),m_(x,o,a,s,e),mm(Os(l,a));break e}}s=l=Os(l,a),Ye!==4&&(Ye=2),ia===null?ia=[s]:ia.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=pS(s,l,e);a_(s,y);break e;case 1:a=l;var v=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Br===null||!Br.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var N=mS(s,a,e);a_(s,N);break e}}s=s.return}while(s!==null)}VS(n)}catch(M){e=M,qe===n&&n!==null&&(qe=n=n.return);continue}break}while(!0)}function DS(){var t=hc.current;return hc.current=cc,t===null?cc:t}function Mm(){(Ye===0||Ye===3||Ye===2)&&(Ye=4),st===null||!(Mi&268435455)&&!(Xc&268435455)||Pr(st,dt)}function pc(t,e){var n=fe;fe|=2;var r=DS();(st!==t||dt!==e)&&(qn=null,Ci(t,e));do try{j1();break}catch(i){bS(t,i)}while(!0);if(ym(),fe=n,hc.current=r,qe!==null)throw Error(z(261));return st=null,dt=0,Ye}function j1(){for(;qe!==null;)NS(qe)}function U1(){for(;qe!==null&&!hR();)NS(qe)}function NS(t){var e=LS(t.alternate,t,Gt);t.memoizedProps=t.pendingProps,e===null?VS(t):qe=e,km.current=null}function VS(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=N1(n,e),n!==null){n.flags&=32767,qe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ye=6,qe=null;return}}else if(n=D1(n,e,Gt),n!==null){qe=n;return}if(e=e.sibling,e!==null){qe=e;return}qe=e=t}while(e!==null);Ye===0&&(Ye=5)}function mi(t,e,n){var r=_e,i=cn.transition;try{cn.transition=null,_e=1,B1(t,e,n,r)}finally{cn.transition=i,_e=r}return null}function B1(t,e,n,r){do Cs();while(Nr!==null);if(fe&6)throw Error(z(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(ER(t,s),t===st&&(qe=st=null,dt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||nu||(nu=!0,OS(Qu,function(){return Cs(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=cn.transition,cn.transition=null;var o=_e;_e=1;var a=fe;fe|=4,km.current=null,M1(t,n),PS(n,t),a1(Ef),Xu=!!wf,Ef=wf=null,t.current=n,L1(n),dR(),fe=a,_e=o,cn.transition=s}else t.current=n;if(nu&&(nu=!1,Nr=t,fc=i),s=t.pendingLanes,s===0&&(Br=null),mR(n.stateNode),Ht(t,$e()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(dc)throw dc=!1,t=Bf,Bf=null,t;return fc&1&&t.tag!==0&&Cs(),s=t.pendingLanes,s&1?t===zf?sa++:(sa=0,zf=t):sa=0,ii(),null}function Cs(){if(Nr!==null){var t=pT(fc),e=cn.transition,n=_e;try{if(cn.transition=null,_e=16>t?16:t,Nr===null)var r=!1;else{if(t=Nr,Nr=null,fc=0,fe&6)throw Error(z(331));var i=fe;for(fe|=4,G=t.current;G!==null;){var s=G,o=s.child;if(G.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(G=c;G!==null;){var h=G;switch(h.tag){case 0:case 11:case 15:ra(8,h,s)}var d=h.child;if(d!==null)d.return=h,G=d;else for(;G!==null;){h=G;var p=h.sibling,g=h.return;if(xS(h),h===c){G=null;break}if(p!==null){p.return=g,G=p;break}G=g}}}var _=s.alternate;if(_!==null){var S=_.child;if(S!==null){_.child=null;do{var x=S.sibling;S.sibling=null,S=x}while(S!==null)}}G=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,G=o;else e:for(;G!==null;){if(s=G,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ra(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,G=y;break e}G=s.return}}var v=t.current;for(G=v;G!==null;){o=G;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,G=E;else e:for(o=v;G!==null;){if(a=G,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Yc(9,a)}}catch(M){je(a,a.return,M)}if(a===o){G=null;break e}var N=a.sibling;if(N!==null){N.return=a.return,G=N;break e}G=a.return}}if(fe=i,ii(),Nn&&typeof Nn.onPostCommitFiberRoot=="function")try{Nn.onPostCommitFiberRoot(zc,t)}catch{}r=!0}return r}finally{_e=n,cn.transition=e}}return!1}function P_(t,e,n){e=Os(n,e),e=pS(t,e,1),t=Ur(t,e,1),e=Nt(),t!==null&&(Ja(t,1,e),Ht(t,e))}function je(t,e,n){if(t.tag===3)P_(t,t,n);else for(;e!==null;){if(e.tag===3){P_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Br===null||!Br.has(r))){t=Os(n,t),t=mS(e,t,1),e=Ur(e,t,1),t=Nt(),e!==null&&(Ja(e,1,t),Ht(e,t));break}}e=e.return}}function z1(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Nt(),t.pingedLanes|=t.suspendedLanes&n,st===t&&(dt&n)===n&&(Ye===4||Ye===3&&(dt&130023424)===dt&&500>$e()-Dm?Ci(t,0):bm|=n),Ht(t,e)}function MS(t,e){e===0&&(t.mode&1?(e=ql,ql<<=1,!(ql&130023424)&&(ql=4194304)):e=1);var n=Nt();t=sr(t,e),t!==null&&(Ja(t,e,n),Ht(t,n))}function $1(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),MS(t,n)}function W1(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),MS(t,n)}var LS;LS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||$t.current)Bt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Bt=!1,b1(t,e,n);Bt=!!(t.flags&131072)}else Bt=!1,Re&&e.flags&1048576&&UT(e,ic,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Iu(t,e),t=e.pendingProps;var i=Ns(e,Ct.current);xs(e,n),i=xm(null,e,r,t,i,n);var s=Cm();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Wt(r)?(s=!0,nc(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,wm(e),i.updater=Qc,e.stateNode=i,i._reactInternals=e,kf(e,r,t,n),e=Nf(null,e,r,!0,s,n)):(e.tag=0,Re&&s&&fm(e),Rt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Iu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=q1(r),t=vn(r,t),i){case 0:e=Df(null,e,r,t,n);break e;case 1:e=v_(null,e,r,t,n);break e;case 11:e=g_(null,e,r,t,n);break e;case 14:e=y_(null,e,r,vn(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vn(r,i),Df(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vn(r,i),v_(t,e,r,i,n);case 3:e:{if(_S(e),t===null)throw Error(z(387));r=e.pendingProps,s=e.memoizedState,i=s.element,qT(t,e),ac(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Os(Error(z(423)),e),e=__(t,e,r,n,i);break e}else if(r!==i){i=Os(Error(z(424)),e),e=__(t,e,r,n,i);break e}else for(Qt=jr(e.stateNode.containerInfo.firstChild),Xt=e,Re=!0,wn=null,n=WT(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Vs(),r===i){e=or(t,e,n);break e}Rt(t,e,r,n)}e=e.child}return e;case 5:return KT(e),t===null&&Af(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Tf(r,i)?o=null:s!==null&&Tf(r,s)&&(e.flags|=32),vS(t,e),Rt(t,e,o,n),e.child;case 6:return t===null&&Af(e),null;case 13:return wS(t,e,n);case 4:return Em(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ms(e,null,r,n):Rt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vn(r,i),g_(t,e,r,i,n);case 7:return Rt(t,e,e.pendingProps,n),e.child;case 8:return Rt(t,e,e.pendingProps.children,n),e.child;case 12:return Rt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,xe(sc,r._currentValue),r._currentValue=o,s!==null)if(In(s.value,o)){if(s.children===i.children&&!$t.current){e=or(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=tr(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Pf(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(z(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Pf(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Rt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,xs(e,n),i=dn(i),r=r(i),e.flags|=1,Rt(t,e,r,n),e.child;case 14:return r=e.type,i=vn(r,e.pendingProps),i=vn(r.type,i),y_(t,e,r,i,n);case 15:return gS(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vn(r,i),Iu(t,e),e.tag=1,Wt(r)?(t=!0,nc(e)):t=!1,xs(e,n),fS(e,r,i),kf(e,r,i,n),Nf(null,e,r,!0,t,n);case 19:return ES(t,e,n);case 22:return yS(t,e,n)}throw Error(z(156,e.tag))};function OS(t,e){return cT(t,e)}function H1(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ln(t,e,n,r){return new H1(t,e,n,r)}function Lm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function q1(t){if(typeof t=="function")return Lm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===tm)return 11;if(t===nm)return 14}return 2}function $r(t,e){var n=t.alternate;return n===null?(n=ln(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Au(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Lm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case is:return Ai(n.children,i,s,e);case em:o=8,i|=8;break;case Zd:return t=ln(12,n,e,i|2),t.elementType=Zd,t.lanes=s,t;case ef:return t=ln(13,n,e,i),t.elementType=ef,t.lanes=s,t;case tf:return t=ln(19,n,e,i),t.elementType=tf,t.lanes=s,t;case KE:return Jc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case HE:o=10;break e;case qE:o=9;break e;case tm:o=11;break e;case nm:o=14;break e;case xr:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=ln(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ai(t,e,n,r){return t=ln(7,t,r,e),t.lanes=n,t}function Jc(t,e,n,r){return t=ln(22,t,r,e),t.elementType=KE,t.lanes=n,t.stateNode={isHidden:!1},t}function Td(t,e,n){return t=ln(6,t,null,e),t.lanes=n,t}function Sd(t,e,n){return e=ln(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function K1(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rd(0),this.expirationTimes=rd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Om(t,e,n,r,i,s,o,a,l){return t=new K1(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ln(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},wm(s),t}function G1(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:rs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function FS(t){if(!t)return Yr;t=t._reactInternals;e:{if(Wi(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Wt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(Wt(n))return FT(t,n,e)}return e}function jS(t,e,n,r,i,s,o,a,l){return t=Om(n,r,!0,t,i,s,o,a,l),t.context=FS(null),n=t.current,r=Nt(),i=zr(n),s=tr(r,i),s.callback=e??null,Ur(n,s,i),t.current.lanes=i,Ja(t,i,r),Ht(t,r),t}function Zc(t,e,n,r){var i=e.current,s=Nt(),o=zr(i);return n=FS(n),e.context===null?e.context=n:e.pendingContext=n,e=tr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ur(i,e,o),t!==null&&(Tn(t,i,o,s),Eu(t,i,o)),o}function mc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function R_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Fm(t,e){R_(t,e),(t=t.alternate)&&R_(t,e)}function Q1(){return null}var US=typeof reportError=="function"?reportError:function(t){console.error(t)};function jm(t){this._internalRoot=t}eh.prototype.render=jm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Zc(t,e,null,null)};eh.prototype.unmount=jm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Li(function(){Zc(null,t,null,null)}),e[ir]=null}};function eh(t){this._internalRoot=t}eh.prototype.unstable_scheduleHydration=function(t){if(t){var e=yT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ar.length&&e!==0&&e<Ar[n].priority;n++);Ar.splice(n,0,t),n===0&&_T(t)}};function Um(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function th(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function k_(){}function Y1(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=mc(o);s.call(c)}}var o=jS(e,r,t,0,null,!1,!1,"",k_);return t._reactRootContainer=o,t[ir]=o.current,xa(t.nodeType===8?t.parentNode:t),Li(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=mc(l);a.call(c)}}var l=Om(t,0,!1,null,null,!1,!1,"",k_);return t._reactRootContainer=l,t[ir]=l.current,xa(t.nodeType===8?t.parentNode:t),Li(function(){Zc(e,l,n,r)}),l}function nh(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=mc(o);a.call(l)}}Zc(e,o,t,i)}else o=Y1(n,e,t,i,r);return mc(o)}mT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ho(e.pendingLanes);n!==0&&(sm(e,n|1),Ht(e,$e()),!(fe&6)&&(Fs=$e()+500,ii()))}break;case 13:Li(function(){var r=sr(t,1);if(r!==null){var i=Nt();Tn(r,t,1,i)}}),Fm(t,1)}};om=function(t){if(t.tag===13){var e=sr(t,134217728);if(e!==null){var n=Nt();Tn(e,t,134217728,n)}Fm(t,134217728)}};gT=function(t){if(t.tag===13){var e=zr(t),n=sr(t,e);if(n!==null){var r=Nt();Tn(n,t,e,r)}Fm(t,e)}};yT=function(){return _e};vT=function(t,e){var n=_e;try{return _e=t,e()}finally{_e=n}};df=function(t,e,n){switch(e){case"input":if(sf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=qc(r);if(!i)throw Error(z(90));QE(r),sf(r,i)}}}break;case"textarea":XE(t,n);break;case"select":e=n.value,e!=null&&Es(t,!!n.multiple,e,!1)}};iT=Nm;sT=Li;var X1={usingClientEntryPoint:!1,Events:[el,ls,qc,nT,rT,Nm]},Oo={findFiberByHostInstance:_i,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},J1={bundleType:Oo.bundleType,version:Oo.version,rendererPackageName:Oo.rendererPackageName,rendererConfig:Oo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:mr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=lT(t),t===null?null:t.stateNode},findFiberByHostInstance:Oo.findFiberByHostInstance||Q1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{zc=ru.inject(J1),Nn=ru}catch{}}tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X1;tn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Um(e))throw Error(z(200));return G1(t,e,null,n)};tn.createRoot=function(t,e){if(!Um(t))throw Error(z(299));var n=!1,r="",i=US;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Om(t,1,!1,null,null,n,!1,r,i),t[ir]=e.current,xa(t.nodeType===8?t.parentNode:t),new jm(e)};tn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=lT(e),t=t===null?null:t.stateNode,t};tn.flushSync=function(t){return Li(t)};tn.hydrate=function(t,e,n){if(!th(e))throw Error(z(200));return nh(null,t,e,!0,n)};tn.hydrateRoot=function(t,e,n){if(!Um(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=US;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=jS(e,null,t,1,n??null,i,!1,s,o),t[ir]=e.current,xa(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new eh(e)};tn.render=function(t,e,n){if(!th(e))throw Error(z(200));return nh(null,t,e,!1,n)};tn.unmountComponentAtNode=function(t){if(!th(t))throw Error(z(40));return t._reactRootContainer?(Li(function(){nh(null,null,t,!1,function(){t._reactRootContainer=null,t[ir]=null})}),!0):!1};tn.unstable_batchedUpdates=Nm;tn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!th(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return nh(t,e,n,!1,r)};tn.version="18.3.1-next-f1338f8080-20240426";function BS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(BS)}catch(t){console.error(t)}}BS(),BE.exports=tn;var Z1=BE.exports,zS,b_=Z1;zS=b_.createRoot,b_.hydrateRoot;/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var D_="popstate";function ek(t={}){function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return Hf("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Va(i)}return nk(e,n,null,t)}function be(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function xn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function tk(){return Math.random().toString(36).substring(2,10)}function N_(t,e){return{usr:t.state,key:t.key,idx:e}}function Hf(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?eo(e):e,state:n,key:e&&e.key||r||tk()}}function Va({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function eo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function nk(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",l=null,c=h();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function h(){return(o.state||{idx:null}).idx}function d(){a="POP";let x=h(),y=x==null?null:x-c;c=x,l&&l({action:a,location:S.location,delta:y})}function p(x,y){a="PUSH";let v=Hf(S.location,x,y);c=h()+1;let E=N_(v,c),N=S.createHref(v);try{o.pushState(E,"",N)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(N)}s&&l&&l({action:a,location:S.location,delta:1})}function g(x,y){a="REPLACE";let v=Hf(S.location,x,y);c=h();let E=N_(v,c),N=S.createHref(v);o.replaceState(E,"",N),s&&l&&l({action:a,location:S.location,delta:0})}function _(x){return rk(x)}let S={get action(){return a},get location(){return t(i,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(D_,d),l=x,()=>{i.removeEventListener(D_,d),l=null}},createHref(x){return e(i,x)},createURL:_,encodeLocation(x){let y=_(x);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:p,replace:g,go(x){return o.go(x)}};return S}function rk(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),be(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Va(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function $S(t,e,n="/"){return ik(t,e,n,!1)}function ik(t,e,n,r){let i=typeof e=="string"?eo(e):e,s=ar(i.pathname||"/",n);if(s==null)return null;let o=WS(t);sk(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=gk(s);a=pk(o[l],c,r)}return a}function WS(t,e=[],n=[],r="",i=!1){let s=(o,a,l=i,c)=>{let h={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&l)return;be(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let d=nr([r,h.relativePath]),p=n.concat(h);o.children&&o.children.length>0&&(be(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),WS(o.children,e,p,d,l)),!(o.path==null&&!o.index)&&e.push({path:d,score:dk(d,o.index),routesMeta:p})};return t.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,a);else for(let c of HS(o.path))s(o,a,!0,c)}),e}function HS(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=HS(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function sk(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:fk(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var ok=/^:[\w-]+$/,ak=3,lk=2,uk=1,ck=10,hk=-2,V_=t=>t==="*";function dk(t,e){let n=t.split("/"),r=n.length;return n.some(V_)&&(r+=hk),e&&(r+=lk),n.filter(i=>!V_(i)).reduce((i,s)=>i+(ok.test(s)?ak:s===""?uk:ck),r)}function fk(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function pk(t,e,n=!1){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=gc({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),p=l.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=gc({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:nr([s,d.pathname]),pathnameBase:wk(nr([s,d.pathnameBase])),route:p}),d.pathnameBase!=="/"&&(s=nr([s,d.pathnameBase]))}return o}function gc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=mk(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,{paramName:h,isOptional:d},p)=>{if(h==="*"){let _=a[p]||"";o=s.slice(0,s.length-_.length).replace(/(.)\/+$/,"$1")}const g=a[p];return d&&!g?c[h]=void 0:c[h]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function mk(t,e=!1,n=!0){xn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function gk(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return xn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ar(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function yk(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?eo(t):t;return{pathname:n?n.startsWith("/")?n:vk(n,e):e,search:Ek(r),hash:Tk(i)}}function vk(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Id(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function _k(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Bm(t){let e=_k(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function zm(t,e,n,r=!1){let i;typeof t=="string"?i=eo(t):(i={...t},be(!i.pathname||!i.pathname.includes("?"),Id("?","pathname","search",i)),be(!i.pathname||!i.pathname.includes("#"),Id("#","pathname","hash",i)),be(!i.search||!i.search.includes("#"),Id("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),d-=1;i.pathname=p.join("/")}a=d>=0?e[d]:"/"}let l=yk(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}var nr=t=>t.join("/").replace(/\/\/+/g,"/"),wk=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Ek=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Tk=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Sk(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var qS=["POST","PUT","PATCH","DELETE"];new Set(qS);var Ik=["GET",...qS];new Set(Ik);var to=R.createContext(null);to.displayName="DataRouter";var rh=R.createContext(null);rh.displayName="DataRouterState";R.createContext(!1);var KS=R.createContext({isTransitioning:!1});KS.displayName="ViewTransition";var xk=R.createContext(new Map);xk.displayName="Fetchers";var Ck=R.createContext(null);Ck.displayName="Await";var An=R.createContext(null);An.displayName="Navigation";var nl=R.createContext(null);nl.displayName="Location";var Pn=R.createContext({outlet:null,matches:[],isDataRoute:!1});Pn.displayName="Route";var $m=R.createContext(null);$m.displayName="RouteError";function Ak(t,{relative:e}={}){be(no(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=R.useContext(An),{hash:i,pathname:s,search:o}=rl(t,{relative:e}),a=s;return n!=="/"&&(a=s==="/"?n:nr([n,s])),r.createHref({pathname:a,search:o,hash:i})}function no(){return R.useContext(nl)!=null}function gr(){return be(no(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(nl).location}var GS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function QS(t){R.useContext(An).static||R.useLayoutEffect(t)}function ro(){let{isDataRoute:t}=R.useContext(Pn);return t?Bk():Pk()}function Pk(){be(no(),"useNavigate() may be used only in the context of a <Router> component.");let t=R.useContext(to),{basename:e,navigator:n}=R.useContext(An),{matches:r}=R.useContext(Pn),{pathname:i}=gr(),s=JSON.stringify(Bm(r)),o=R.useRef(!1);return QS(()=>{o.current=!0}),R.useCallback((l,c={})=>{if(xn(o.current,GS),!o.current)return;if(typeof l=="number"){n.go(l);return}let h=zm(l,JSON.parse(s),i,c.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:nr([e,h.pathname])),(c.replace?n.replace:n.push)(h,c.state,c)},[e,n,s,i,t])}R.createContext(null);function Rk(){let{matches:t}=R.useContext(Pn),e=t[t.length-1];return e?e.params:{}}function rl(t,{relative:e}={}){let{matches:n}=R.useContext(Pn),{pathname:r}=gr(),i=JSON.stringify(Bm(n));return R.useMemo(()=>zm(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function kk(t,e){return YS(t,e)}function YS(t,e,n,r,i){var v;be(no(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=R.useContext(An),{matches:o}=R.useContext(Pn),a=o[o.length-1],l=a?a.params:{},c=a?a.pathname:"/",h=a?a.pathnameBase:"/",d=a&&a.route;{let E=d&&d.path||"";XS(c,!d||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let p=gr(),g;if(e){let E=typeof e=="string"?eo(e):e;be(h==="/"||((v=E.pathname)==null?void 0:v.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${E.pathname}" was given in the \`location\` prop.`),g=E}else g=p;let _=g.pathname||"/",S=_;if(h!=="/"){let E=h.replace(/^\//,"").split("/");S="/"+_.replace(/^\//,"").split("/").slice(E.length).join("/")}let x=$S(t,{pathname:S});xn(d||x!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),xn(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=Mk(x&&x.map(E=>Object.assign({},E,{params:Object.assign({},l,E.params),pathname:nr([h,s.encodeLocation?s.encodeLocation(E.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?h:nr([h,s.encodeLocation?s.encodeLocation(E.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathnameBase])})),o,n,r,i);return e&&y?R.createElement(nl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},y):y}function bk(){let t=Uk(),e=Sk(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=R.createElement(R.Fragment,null,R.createElement("p",null," Hey developer "),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:s},"ErrorBoundary")," or"," ",R.createElement("code",{style:s},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:i},n):null,o)}var Dk=R.createElement(bk,null),Nk=class extends R.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?R.createElement(Pn.Provider,{value:this.props.routeContext},R.createElement($m.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Vk({routeContext:t,match:e,children:n}){let r=R.useContext(to);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),R.createElement(Pn.Provider,{value:t},n)}function Mk(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,o=n==null?void 0:n.errors;if(o!=null){let c=s.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);be(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,c+1))}let a=!1,l=-1;if(n)for(let c=0;c<s.length;c++){let h=s[c];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(l=c),h.route.id){let{loaderData:d,errors:p}=n,g=h.route.loader&&!d.hasOwnProperty(h.route.id)&&(!p||p[h.route.id]===void 0);if(h.route.lazy||g){a=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((c,h,d)=>{let p,g=!1,_=null,S=null;n&&(p=o&&h.route.id?o[h.route.id]:void 0,_=h.route.errorElement||Dk,a&&(l<0&&d===0?(XS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,S=null):l===d&&(g=!0,S=h.route.hydrateFallbackElement||null)));let x=e.concat(s.slice(0,d+1)),y=()=>{let v;return p?v=_:g?v=S:h.route.Component?v=R.createElement(h.route.Component,null):h.route.element?v=h.route.element:v=c,R.createElement(Vk,{match:h,routeContext:{outlet:c,matches:x,isDataRoute:n!=null},children:v})};return n&&(h.route.ErrorBoundary||h.route.errorElement||d===0)?R.createElement(Nk,{location:n.location,revalidation:n.revalidation,component:_,error:p,children:y(),routeContext:{outlet:null,matches:x,isDataRoute:!0},unstable_onError:r}):y()},null)}function Wm(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Lk(t){let e=R.useContext(to);return be(e,Wm(t)),e}function Ok(t){let e=R.useContext(rh);return be(e,Wm(t)),e}function Fk(t){let e=R.useContext(Pn);return be(e,Wm(t)),e}function Hm(t){let e=Fk(t),n=e.matches[e.matches.length-1];return be(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function jk(){return Hm("useRouteId")}function Uk(){var r;let t=R.useContext($m),e=Ok("useRouteError"),n=Hm("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function Bk(){let{router:t}=Lk("useNavigate"),e=Hm("useNavigate"),n=R.useRef(!1);return QS(()=>{n.current=!0}),R.useCallback(async(i,s={})=>{xn(n.current,GS),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var M_={};function XS(t,e,n){!e&&!M_[t]&&(M_[t]=!0,xn(!1,n))}R.memo(zk);function zk({routes:t,future:e,state:n,unstable_onError:r}){return YS(t,void 0,n,r,e)}function $k({to:t,replace:e,state:n,relative:r}){be(no(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=R.useContext(An);xn(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=R.useContext(Pn),{pathname:o}=gr(),a=ro(),l=zm(t,Bm(s),o,r==="path"),c=JSON.stringify(l);return R.useEffect(()=>{a(JSON.parse(c),{replace:e,state:n,relative:r})},[a,c,r,e,n]),null}function Sr(t){be(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Wk({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){be(!no(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),a=R.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof n=="string"&&(n=eo(n));let{pathname:l="/",search:c="",hash:h="",state:d=null,key:p="default"}=n,g=R.useMemo(()=>{let _=ar(l,o);return _==null?null:{location:{pathname:_,search:c,hash:h,state:d,key:p},navigationType:r}},[o,l,c,h,d,p,r]);return xn(g!=null,`<Router basename="${o}"> is not able to match the URL "${l}${c}${h}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:R.createElement(An.Provider,{value:a},R.createElement(nl.Provider,{children:e,value:g}))}function Hk({children:t,location:e}){return kk(qf(t),e)}function qf(t,e=[]){let n=[];return R.Children.forEach(t,(r,i)=>{if(!R.isValidElement(r))return;let s=[...e,i];if(r.type===R.Fragment){n.push.apply(n,qf(r.props.children,s));return}be(r.type===Sr,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),be(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=qf(r.props.children,s)),n.push(o)}),n}var Pu="get",Ru="application/x-www-form-urlencoded";function ih(t){return t!=null&&typeof t.tagName=="string"}function qk(t){return ih(t)&&t.tagName.toLowerCase()==="button"}function Kk(t){return ih(t)&&t.tagName.toLowerCase()==="form"}function Gk(t){return ih(t)&&t.tagName.toLowerCase()==="input"}function Qk(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Yk(t,e){return t.button===0&&(!e||e==="_self")&&!Qk(t)}var iu=null;function Xk(){if(iu===null)try{new FormData(document.createElement("form"),0),iu=!1}catch{iu=!0}return iu}var Jk=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function xd(t){return t!=null&&!Jk.has(t)?(xn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ru}"`),null):t}function Zk(t,e){let n,r,i,s,o;if(Kk(t)){let a=t.getAttribute("action");r=a?ar(a,e):null,n=t.getAttribute("method")||Pu,i=xd(t.getAttribute("enctype"))||Ru,s=new FormData(t)}else if(qk(t)||Gk(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?ar(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||Pu,i=xd(t.getAttribute("formenctype"))||xd(a.getAttribute("enctype"))||Ru,s=new FormData(a,t),!Xk()){let{name:c,type:h,value:d}=t;if(h==="image"){let p=c?`${c}.`:"";s.append(`${p}x`,"0"),s.append(`${p}y`,"0")}else c&&s.append(c,d)}}else{if(ih(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Pu,r=null,i=Ru,o=t}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function qm(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function eb(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&ar(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function tb(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function nb(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function rb(t,e,n){let r=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await tb(s,n);return o.links?o.links():[]}return[]}));return ab(r.flat(1).filter(nb).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function L_(t,e,n,r,i,s){let o=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,a=(l,c)=>{var h;return n[c].pathname!==l.pathname||((h=n[c].route.path)==null?void 0:h.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,c)=>o(l,c)||a(l,c)):s==="data"?e.filter((l,c)=>{var d;let h=r.routes[l.route.id];if(!h||!h.hasLoader)return!1;if(o(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let p=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function ib(t,e,{includeHydrateFallback:n}={}){return sb(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function sb(t){return[...new Set(t)]}function ob(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function ab(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let s=JSON.stringify(ob(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}function JS(){let t=R.useContext(to);return qm(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function lb(){let t=R.useContext(rh);return qm(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Km=R.createContext(void 0);Km.displayName="FrameworkContext";function ZS(){let t=R.useContext(Km);return qm(t,"You must render this element inside a <HydratedRouter> element"),t}function ub(t,e){let n=R.useContext(Km),[r,i]=R.useState(!1),[s,o]=R.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:h,onTouchStart:d}=e,p=R.useRef(null);R.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let S=y=>{y.forEach(v=>{o(v.isIntersecting)})},x=new IntersectionObserver(S,{threshold:.5});return p.current&&x.observe(p.current),()=>{x.disconnect()}}},[t]),R.useEffect(()=>{if(r){let S=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(S)}}},[r]);let g=()=>{i(!0)},_=()=>{i(!1),o(!1)};return n?t!=="intent"?[s,p,{}]:[s,p,{onFocus:Fo(a,g),onBlur:Fo(l,_),onMouseEnter:Fo(c,g),onMouseLeave:Fo(h,_),onTouchStart:Fo(d,g)}]:[!1,p,{}]}function Fo(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function cb({page:t,...e}){let{router:n}=JS(),r=R.useMemo(()=>$S(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?R.createElement(db,{page:t,matches:r,...e}):null}function hb(t){let{manifest:e,routeModules:n}=ZS(),[r,i]=R.useState([]);return R.useEffect(()=>{let s=!1;return rb(t,e,n).then(o=>{s||i(o)}),()=>{s=!0}},[t,e,n]),r}function db({page:t,matches:e,...n}){let r=gr(),{manifest:i,routeModules:s}=ZS(),{basename:o}=JS(),{loaderData:a,matches:l}=lb(),c=R.useMemo(()=>L_(t,e,l,i,r,"data"),[t,e,l,i,r]),h=R.useMemo(()=>L_(t,e,l,i,r,"assets"),[t,e,l,i,r]),d=R.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let _=new Set,S=!1;if(e.forEach(y=>{var E;let v=i.routes[y.route.id];!v||!v.hasLoader||(!c.some(N=>N.route.id===y.route.id)&&y.route.id in a&&((E=s[y.route.id])!=null&&E.shouldRevalidate)||v.hasClientLoader?S=!0:_.add(y.route.id))}),_.size===0)return[];let x=eb(t,o,"data");return S&&_.size>0&&x.searchParams.set("_routes",e.filter(y=>_.has(y.route.id)).map(y=>y.route.id).join(",")),[x.pathname+x.search]},[o,a,r,i,c,e,t,s]),p=R.useMemo(()=>ib(h,i),[h,i]),g=hb(h);return R.createElement(R.Fragment,null,d.map(_=>R.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...n})),p.map(_=>R.createElement("link",{key:_,rel:"modulepreload",href:_,...n})),g.map(({key:_,link:S})=>R.createElement("link",{key:_,nonce:n.nonce,...S})))}function fb(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var eI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{eI&&(window.__reactRouterVersion="7.9.4")}catch{}function pb({basename:t,children:e,window:n}){let r=R.useRef();r.current==null&&(r.current=ek({window:n,v5Compat:!0}));let i=r.current,[s,o]=R.useState({action:i.action,location:i.location}),a=R.useCallback(l=>{R.startTransition(()=>o(l))},[o]);return R.useLayoutEffect(()=>i.listen(a),[i,a]),R.createElement(Wk,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:i})}var tI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,js=R.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:d,...p},g){let{basename:_}=R.useContext(An),S=typeof c=="string"&&tI.test(c),x,y=!1;if(typeof c=="string"&&S&&(x=c,eI))try{let C=new URL(window.location.href),P=c.startsWith("//")?new URL(C.protocol+c):new URL(c),D=ar(P.pathname,_);P.origin===C.origin&&D!=null?c=D+P.search+P.hash:y=!0}catch{xn(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=Ak(c,{relative:i}),[E,N,M]=ub(r,p),F=vb(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:i,viewTransition:d});function I(C){e&&e(C),C.defaultPrevented||F(C)}let w=R.createElement("a",{...p,...M,href:x||v,onClick:y||s?e:I,ref:fb(g,N),target:l,"data-discover":!S&&n==="render"?"true":void 0});return E&&!S?R.createElement(R.Fragment,null,w,R.createElement(cb,{page:v})):w});js.displayName="Link";var mb=R.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:l,...c},h){let d=rl(o,{relative:c.relative}),p=gr(),g=R.useContext(rh),{navigator:_,basename:S}=R.useContext(An),x=g!=null&&Sb(d)&&a===!0,y=_.encodeLocation?_.encodeLocation(d).pathname:d.pathname,v=p.pathname,E=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;n||(v=v.toLowerCase(),E=E?E.toLowerCase():null,y=y.toLowerCase()),E&&S&&(E=ar(E,S)||E);const N=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let M=v===y||!i&&v.startsWith(y)&&v.charAt(N)==="/",F=E!=null&&(E===y||!i&&E.startsWith(y)&&E.charAt(y.length)==="/"),I={isActive:M,isPending:F,isTransitioning:x},w=M?e:void 0,C;typeof r=="function"?C=r(I):C=[r,M?"active":null,F?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let P=typeof s=="function"?s(I):s;return R.createElement(js,{...c,"aria-current":w,className:C,ref:h,style:P,to:o,viewTransition:a},typeof l=="function"?l(I):l)});mb.displayName="NavLink";var gb=R.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:s,method:o=Pu,action:a,onSubmit:l,relative:c,preventScrollReset:h,viewTransition:d,...p},g)=>{let _=Eb(),S=Tb(a,{relative:c}),x=o.toLowerCase()==="get"?"get":"post",y=typeof a=="string"&&tI.test(a),v=E=>{if(l&&l(E),E.defaultPrevented)return;E.preventDefault();let N=E.nativeEvent.submitter,M=(N==null?void 0:N.getAttribute("formmethod"))||o;_(N||E.currentTarget,{fetcherKey:e,method:M,navigate:n,replace:i,state:s,relative:c,preventScrollReset:h,viewTransition:d})};return R.createElement("form",{ref:g,method:x,action:S,onSubmit:r?l:v,...p,"data-discover":!y&&t==="render"?"true":void 0})});gb.displayName="Form";function yb(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function nI(t){let e=R.useContext(to);return be(e,yb(t)),e}function vb(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=ro(),l=gr(),c=rl(t,{relative:s});return R.useCallback(h=>{if(Yk(h,e)){h.preventDefault();let d=n!==void 0?n:Va(l)===Va(c);a(t,{replace:d,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[l,a,c,n,r,e,t,i,s,o])}var _b=0,wb=()=>`__${String(++_b)}__`;function Eb(){let{router:t}=nI("useSubmit"),{basename:e}=R.useContext(An),n=jk();return R.useCallback(async(r,i={})=>{let{action:s,method:o,encType:a,formData:l,body:c}=Zk(r,e);if(i.navigate===!1){let h=i.fetcherKey||wb();await t.fetch(h,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await t.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function Tb(t,{relative:e}={}){let{basename:n}=R.useContext(An),r=R.useContext(Pn);be(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...rl(t||".",{relative:e})},o=gr();if(t==null){s.search=o.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(h=>h==="")){a.delete("index"),l.filter(d=>d).forEach(d=>a.append("index",d));let h=a.toString();s.search=h?`?${h}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:nr([n,s.pathname])),Va(s)}function Sb(t,{relative:e}={}){let n=R.useContext(KS);be(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=nI("useViewTransitionState"),i=rl(t,{relative:e});if(!n.isTransitioning)return!1;let s=ar(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=ar(n.nextLocation.pathname,r)||n.nextLocation.pathname;return gc(i.pathname,o)!=null||gc(i.pathname,s)!=null}const Ib="modulepreload",xb=function(t){return"/"+t},O_={},Cb=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=xb(l),l in O_)return;O_[l]=!0;const c=l.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":Ib,c||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((p,g)=>{d.addEventListener("load",p),d.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function Ab(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:s,onRegisterError:o}=t;let a,l;const c=async(d=!0)=>{await l};async function h(){if("serviceWorker"in navigator){if(a=await Cb(async()=>{const{Workbox:d}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:d}},[]).then(({Workbox:d})=>new d("/sw.js",{scope:"/",type:"classic"})).catch(d=>{o==null||o(d)}),!a)return;a.addEventListener("activated",d=>{(d.isUpdate||d.isExternal)&&window.location.reload()}),a.addEventListener("installed",d=>{d.isUpdate||r==null||r()}),a.register({immediate:e}).then(d=>{s?s("/sw.js",d):i==null||i(d)}).catch(d=>{o==null||o(d)})}}return l=h(),c}var F_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Pb=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},iI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(p=64)),r.push(n[h],n[d],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(rI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Pb(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new Rb;const p=s<<2|a>>4;if(r.push(p),c!==64){const g=a<<4&240|c>>2;if(r.push(g),d!==64){const _=c<<6&192|d;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Rb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kb=function(t){const e=rI(t);return iI.encodeByteArray(e,!0)},yc=function(t){return kb(t).replace(/\./g,"")},sI=function(t){try{return iI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db=()=>bb().__FIREBASE_DEFAULTS__,Nb=()=>{if(typeof process>"u"||typeof F_>"u")return;const t=F_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Vb=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&sI(t[1]);return e&&JSON.parse(e)},sh=()=>{try{return Db()||Nb()||Vb()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},oI=t=>{var e,n;return(n=(e=sh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Mb=t=>{const e=oI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},aI=()=>{var t;return(t=sh())===null||t===void 0?void 0:t.config},lI=t=>{var e;return(e=sh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ob(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[yc(JSON.stringify(n)),yc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Fb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(At())}function jb(){var t;const e=(t=sh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ub(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Bb(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function zb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $b(){const t=At();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Wb(){return!jb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Hb(){try{return typeof indexedDB=="object"}catch{return!1}}function qb(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb="FirebaseError";class yr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Kb,Object.setPrototypeOf(this,yr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,il.prototype.create)}}class il{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Gb(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new yr(i,a,r)}}function Gb(t,e){return t.replace(Qb,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Qb=/\{\$([^}]+)}/g;function Yb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function vc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(j_(s)&&j_(o)){if(!vc(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function j_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Xb(t,e){const n=new Jb(t,e);return n.subscribe.bind(n)}class Jb{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Zb(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Cd),i.error===void 0&&(i.error=Cd),i.complete===void 0&&(i.complete=Cd);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Zb(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Cd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Je(t){return t&&t._delegate?t._delegate:t}class Oi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Lb;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nD(e))try{this.getOrInitializeService({instanceIdentifier:gi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=gi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=gi){return this.instances.has(e)}getOptions(e=gi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:tD(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=gi){return this.component?this.component.multipleInstances?e:gi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tD(t){return t===gi?void 0:t}function nD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new eD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var he;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(he||(he={}));const iD={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},sD=he.INFO,oD={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},aD=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=oD[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Gm{constructor(e){this.name=e,this._logLevel=sD,this._logHandler=aD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in he))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?iD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...e),this._logHandler(this,he.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...e),this._logHandler(this,he.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,he.INFO,...e),this._logHandler(this,he.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,he.WARN,...e),this._logHandler(this,he.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,he.ERROR,...e),this._logHandler(this,he.ERROR,...e)}}const lD=(t,e)=>e.some(n=>t instanceof n);let U_,B_;function uD(){return U_||(U_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cD(){return B_||(B_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uI=new WeakMap,Kf=new WeakMap,cI=new WeakMap,Ad=new WeakMap,Qm=new WeakMap;function hD(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Wr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&uI.set(n,t)}).catch(()=>{}),Qm.set(e,t),e}function dD(t){if(Kf.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Kf.set(t,e)}let Gf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Kf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||cI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Wr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function fD(t){Gf=t(Gf)}function pD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Pd(this),e,...n);return cI.set(r,e.sort?e.sort():[e]),Wr(r)}:cD().includes(t)?function(...e){return t.apply(Pd(this),e),Wr(uI.get(this))}:function(...e){return Wr(t.apply(Pd(this),e))}}function mD(t){return typeof t=="function"?pD(t):(t instanceof IDBTransaction&&dD(t),lD(t,uD())?new Proxy(t,Gf):t)}function Wr(t){if(t instanceof IDBRequest)return hD(t);if(Ad.has(t))return Ad.get(t);const e=mD(t);return e!==t&&(Ad.set(t,e),Qm.set(e,t)),e}const Pd=t=>Qm.get(t);function gD(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Wr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Wr(o.result),l.oldVersion,l.newVersion,Wr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const yD=["get","getKey","getAll","getAllKeys","count"],vD=["put","add","delete","clear"],Rd=new Map;function z_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Rd.get(e))return Rd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=vD.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||yD.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Rd.set(e,s),s}fD(t=>({...t,get:(e,n,r)=>z_(e,n)||t.get(e,n,r),has:(e,n)=>!!z_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(wD(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function wD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Qf="@firebase/app",$_="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lr=new Gm("@firebase/app"),ED="@firebase/app-compat",TD="@firebase/analytics-compat",SD="@firebase/analytics",ID="@firebase/app-check-compat",xD="@firebase/app-check",CD="@firebase/auth",AD="@firebase/auth-compat",PD="@firebase/database",RD="@firebase/data-connect",kD="@firebase/database-compat",bD="@firebase/functions",DD="@firebase/functions-compat",ND="@firebase/installations",VD="@firebase/installations-compat",MD="@firebase/messaging",LD="@firebase/messaging-compat",OD="@firebase/performance",FD="@firebase/performance-compat",jD="@firebase/remote-config",UD="@firebase/remote-config-compat",BD="@firebase/storage",zD="@firebase/storage-compat",$D="@firebase/firestore",WD="@firebase/vertexai-preview",HD="@firebase/firestore-compat",qD="firebase",KD="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yf="[DEFAULT]",GD={[Qf]:"fire-core",[ED]:"fire-core-compat",[SD]:"fire-analytics",[TD]:"fire-analytics-compat",[xD]:"fire-app-check",[ID]:"fire-app-check-compat",[CD]:"fire-auth",[AD]:"fire-auth-compat",[PD]:"fire-rtdb",[RD]:"fire-data-connect",[kD]:"fire-rtdb-compat",[bD]:"fire-fn",[DD]:"fire-fn-compat",[ND]:"fire-iid",[VD]:"fire-iid-compat",[MD]:"fire-fcm",[LD]:"fire-fcm-compat",[OD]:"fire-perf",[FD]:"fire-perf-compat",[jD]:"fire-rc",[UD]:"fire-rc-compat",[BD]:"fire-gcs",[zD]:"fire-gcs-compat",[$D]:"fire-fst",[HD]:"fire-fst-compat",[WD]:"fire-vertex","fire-js":"fire-js",[qD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c=new Map,QD=new Map,Xf=new Map;function W_(t,e){try{t.container.addComponent(e)}catch(n){lr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Us(t){const e=t.name;if(Xf.has(e))return lr.debug(`There were multiple attempts to register component ${e}.`),!1;Xf.set(e,t);for(const n of _c.values())W_(n,t);for(const n of QD.values())W_(n,t);return!0}function Ym(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Xn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Hr=new il("app","Firebase",YD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Oi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Hr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io=KD;function hI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Yf,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Hr.create("bad-app-name",{appName:String(i)});if(n||(n=aI()),!n)throw Hr.create("no-options");const s=_c.get(i);if(s){if(vc(n,s.options)&&vc(r,s.config))return s;throw Hr.create("duplicate-app",{appName:i})}const o=new rD(i);for(const l of Xf.values())o.addComponent(l);const a=new XD(n,r,o);return _c.set(i,a),a}function dI(t=Yf){const e=_c.get(t);if(!e&&t===Yf&&aI())return hI();if(!e)throw Hr.create("no-app",{appName:t});return e}function qr(t,e,n){var r;let i=(r=GD[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),lr.warn(a.join(" "));return}Us(new Oi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD="firebase-heartbeat-database",ZD=1,Ma="firebase-heartbeat-store";let kd=null;function fI(){return kd||(kd=gD(JD,ZD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ma)}catch(n){console.warn(n)}}}}).catch(t=>{throw Hr.create("idb-open",{originalErrorMessage:t.message})})),kd}async function eN(t){try{const n=(await fI()).transaction(Ma),r=await n.objectStore(Ma).get(pI(t));return await n.done,r}catch(e){if(e instanceof yr)lr.warn(e.message);else{const n=Hr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});lr.warn(n.message)}}}async function H_(t,e){try{const r=(await fI()).transaction(Ma,"readwrite");await r.objectStore(Ma).put(e,pI(t)),await r.done}catch(n){if(n instanceof yr)lr.warn(n.message);else{const r=Hr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});lr.warn(r.message)}}}function pI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN=1024,nN=30*24*60*60*1e3;class rN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new sN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=q_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=nN}),this._storage.overwrite(this._heartbeatsCache))}catch(r){lr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=q_(),{heartbeatsToSend:r,unsentEntries:i}=iN(this._heartbeatsCache.heartbeats),s=yc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return lr.warn(n),""}}}function q_(){return new Date().toISOString().substring(0,10)}function iN(t,e=tN){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),K_(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),K_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class sN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Hb()?qb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await eN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return H_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return H_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function K_(t){return yc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(t){Us(new Oi("platform-logger",e=>new _D(e),"PRIVATE")),Us(new Oi("heartbeat",e=>new rN(e),"PRIVATE")),qr(Qf,$_,t),qr(Qf,$_,"esm2017"),qr("fire-js","")}oN("");var Jf=function(t,e){return Jf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Jf(t,e)};function aN(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Jf(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var tt=function(){return tt=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},tt.apply(this,arguments)};function Xm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function mI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lN=mI,gI=new il("auth","Firebase",mI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wc=new Gm("@firebase/auth");function uN(t,...e){wc.logLevel<=he.WARN&&wc.warn(`Auth (${io}): ${t}`,...e)}function ku(t,...e){wc.logLevel<=he.ERROR&&wc.error(`Auth (${io}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(t,...e){throw Zm(t,...e)}function Sn(t,...e){return Zm(t,...e)}function Jm(t,e,n){const r=Object.assign(Object.assign({},lN()),{[e]:n});return new il("auth","Firebase",r).create(e,{appName:t.name})}function Pi(t){return Jm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cN(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Un(t,"argument-error"),Jm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Zm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return gI.create(t,...e)}function se(t,e,...n){if(!t)throw Zm(e,...n)}function Jn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ku(e),new Error(e)}function ur(t,e){t||Jn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function hN(){return G_()==="http:"||G_()==="https:"}function G_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hN()||Bb()||"connection"in navigator)?navigator.onLine:!0}function fN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e,n){this.shortDelay=e,this.longDelay=n,ur(n>e,"Short delay should be less than long delay!"),this.isMobile=Fb()||zb()}get(){return dN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(t,e){ur(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Jn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Jn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Jn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN=new ol(3e4,6e4);function tg(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function so(t,e,n,r,i={}){return vI(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=sl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return Ub()||(c.referrerPolicy="no-referrer"),yI.fetch()(_I(t,t.config.apiHost,n,a),c)})}async function vI(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},pN),e);try{const i=new yN(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw su(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw su(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw su(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw su(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Jm(t,h,c);Un(t,h)}}catch(i){if(i instanceof yr)throw i;Un(t,"network-request-failed",{message:String(i)})}}async function gN(t,e,n,r,i={}){const s=await so(t,e,n,r,i);return"mfaPendingCredential"in s&&Un(t,"multi-factor-auth-required",{_serverResponse:s}),s}function _I(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?eg(t.config,i):`${t.config.apiScheme}://${i}`}class yN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Sn(this.auth,"network-request-failed")),mN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function su(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Sn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vN(t,e){return so(t,"POST","/v1/accounts:delete",e)}async function wI(t,e){return so(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function _N(t,e=!1){const n=Je(t),r=await n.getIdToken(e),i=ng(r);se(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:oa(bd(i.auth_time)),issuedAtTime:oa(bd(i.iat)),expirationTime:oa(bd(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function bd(t){return Number(t)*1e3}function ng(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ku("JWT malformed, contained fewer than 3 sections"),null;try{const i=sI(n);return i?JSON.parse(i):(ku("Failed to decode base64 JWT payload"),null)}catch(i){return ku("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Q_(t){const e=ng(t);return se(e,"internal-error"),se(typeof e.exp<"u","internal-error"),se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function La(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof yr&&wN(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function wN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=oa(this.lastLoginAt),this.creationTime=oa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ec(t){var e;const n=t.auth,r=await t.getIdToken(),i=await La(t,wI(n,{idToken:r}));se(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?EI(s.providerUserInfo):[],a=SN(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ep(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function TN(t){const e=Je(t);await Ec(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function SN(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function EI(t){return t.map(e=>{var{providerId:n}=e,r=Xm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IN(t,e){const n=await vI(t,{},async()=>{const r=sl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=_I(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",yI.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function xN(t,e){return so(t,"POST","/v2/accounts:revokeToken",tg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){se(e.idToken,"internal-error"),se(typeof e.idToken<"u","internal-error"),se(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Q_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){se(e.length!==0,"internal-error");const n=Q_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await IN(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new As;return r&&(se(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(se(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(se(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new As,this.toJSON())}_performRefresh(){return Jn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(t,e){se(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Zn{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Xm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new EN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ep(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await La(this,this.stsTokenManager.getToken(this.auth,e));return se(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return _N(this,e)}reload(){return TN(this)}_assign(e){this!==e&&(se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Zn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ec(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xn(this.auth.app))return Promise.reject(Pi(this.auth));const e=await this.getIdToken();return await La(this,vN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,h;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,g=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,_=(o=n.photoURL)!==null&&o!==void 0?o:void 0,S=(a=n.tenantId)!==null&&a!==void 0?a:void 0,x=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,y=(c=n.createdAt)!==null&&c!==void 0?c:void 0,v=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:E,emailVerified:N,isAnonymous:M,providerData:F,stsTokenManager:I}=n;se(E&&I,e,"internal-error");const w=As.fromJSON(this.name,I);se(typeof E=="string",e,"internal-error"),Tr(d,e.name),Tr(p,e.name),se(typeof N=="boolean",e,"internal-error"),se(typeof M=="boolean",e,"internal-error"),Tr(g,e.name),Tr(_,e.name),Tr(S,e.name),Tr(x,e.name),Tr(y,e.name),Tr(v,e.name);const C=new Zn({uid:E,auth:e,email:p,emailVerified:N,displayName:d,isAnonymous:M,photoURL:_,phoneNumber:g,tenantId:S,stsTokenManager:w,createdAt:y,lastLoginAt:v});return F&&Array.isArray(F)&&(C.providerData=F.map(P=>Object.assign({},P))),x&&(C._redirectEventId=x),C}static async _fromIdTokenResponse(e,n,r=!1){const i=new As;i.updateFromServerResponse(n);const s=new Zn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Ec(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];se(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?EI(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new As;a.updateFromIdToken(r);const l=new Zn({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new ep(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_=new Map;function er(t){ur(t instanceof Function,"Expected a class definition");let e=Y_.get(t);return e?(ur(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Y_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}TI.type="NONE";const X_=TI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(t,e,n){return`firebase:${t}:${e}:${n}`}class Ps{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=bu(this.userKey,i.apiKey,s),this.fullPersistenceKey=bu("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Zn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ps(er(X_),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||er(X_);const o=bu(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const d=Zn._fromJSON(e,h);c!==s&&(a=d),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Ps(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Ps(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(CI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(SI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(PI(e))return"Blackberry";if(RI(e))return"Webos";if(II(e))return"Safari";if((e.includes("chrome/")||xI(e))&&!e.includes("edge/"))return"Chrome";if(AI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function SI(t=At()){return/firefox\//i.test(t)}function II(t=At()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xI(t=At()){return/crios\//i.test(t)}function CI(t=At()){return/iemobile/i.test(t)}function AI(t=At()){return/android/i.test(t)}function PI(t=At()){return/blackberry/i.test(t)}function RI(t=At()){return/webos/i.test(t)}function rg(t=At()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function CN(t=At()){var e;return rg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function AN(){return $b()&&document.documentMode===10}function kI(t=At()){return rg(t)||AI(t)||RI(t)||PI(t)||/windows phone/i.test(t)||CI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(t,e=[]){let n;switch(t){case"Browser":n=J_(At());break;case"Worker":n=`${J_(At())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${io}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RN(t,e={}){return so(t,"GET","/v2/passwordPolicy",tg(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN=6;class bN{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:kN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Z_(this),this.idTokenSubscription=new Z_(this),this.beforeStateQueue=new PN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=er(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ps.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await wI(this,{idToken:e}),r=await Zn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Xn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ec(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=fN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xn(this.app))return Promise.reject(Pi(this));const n=e?Je(e):null;return n&&se(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xn(this.app)?Promise.reject(Pi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xn(this.app)?Promise.reject(Pi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(er(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await RN(this),n=new bN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new il("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await xN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&er(e)||this._popupRedirectResolver;se(n,this,"argument-error"),this.redirectPersistenceManager=await Ps.create(this,[er(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(se(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=bI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&uN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function oh(t){return Je(t)}class Z_{constructor(e){this.auth=e,this.observer=null,this.addObserver=Xb(n=>this.observer=n)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ig={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function NN(t){ig=t}function VN(t){return ig.loadJS(t)}function MN(){return ig.gapiScript}function LN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ON(t,e){const n=Ym(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(vc(s,e??{}))return i;Un(i,"already-initialized")}return n.initialize({options:e})}function FN(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(er);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function jN(t,e,n){const r=oh(t);se(r._canInitEmulator,r,"emulator-config-failed"),se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=DI(e),{host:o,port:a}=UN(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),BN()}function DI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function UN(t){const e=DI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:e0(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:e0(o)}}}function e0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function BN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Jn("not implemented")}_getIdTokenResponse(e){return Jn("not implemented")}_linkToIdToken(e,n){return Jn("not implemented")}_getReauthenticationResolver(e){return Jn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rs(t,e){return gN(t,"POST","/v1/accounts:signInWithIdp",tg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN="http://localhost";class Fi extends NI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Fi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Un("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Xm(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Fi(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Rs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Rs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Rs(e,n)}buildRequest(){const e={requestUri:zN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=sl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al extends sg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr extends al{constructor(){super("facebook.com")}static credential(e){return Fi._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rr.credentialFromTaggedObject(e)}static credentialFromError(e){return Rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rr.credential(e.oauthAccessToken)}catch{return null}}}Rr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Rr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn extends al{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Fi._fromParams({providerId:Gn.PROVIDER_ID,signInMethod:Gn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Gn.credentialFromTaggedObject(e)}static credentialFromError(e){return Gn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Gn.credential(n,r)}catch{return null}}}Gn.GOOGLE_SIGN_IN_METHOD="google.com";Gn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr extends al{constructor(){super("github.com")}static credential(e){return Fi._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return kr.credentialFromTaggedObject(e)}static credentialFromError(e){return kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return kr.credential(e.oauthAccessToken)}catch{return null}}}kr.GITHUB_SIGN_IN_METHOD="github.com";kr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br extends al{constructor(){super("twitter.com")}static credential(e,n){return Fi._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return br.credentialFromTaggedObject(e)}static credentialFromError(e){return br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return br.credential(n,r)}catch{return null}}}br.TWITTER_SIGN_IN_METHOD="twitter.com";br.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Zn._fromIdTokenResponse(e,r,i),o=t0(r);return new Bs({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=t0(r);return new Bs({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function t0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc extends yr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Tc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Tc(e,n,r,i)}}function VI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Tc._fromErrorAndOperation(t,s,e,r):s})}async function $N(t,e,n=!1){const r=await La(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Bs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WN(t,e,n=!1){const{auth:r}=t;if(Xn(r.app))return Promise.reject(Pi(r));const i="reauthenticate";try{const s=await La(t,VI(r,i,e,t),n);se(s.idToken,r,"internal-error");const o=ng(s.idToken);se(o,r,"internal-error");const{sub:a}=o;return se(t.uid===a,r,"user-mismatch"),Bs._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Un(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HN(t,e,n=!1){if(Xn(t.app))return Promise.reject(Pi(t));const r="signIn",i=await VI(t,r,e),s=await Bs._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function qN(t,e,n,r){return Je(t).onIdTokenChanged(e,n,r)}function KN(t,e,n){return Je(t).beforeAuthStateChanged(e,n)}function GN(t,e,n,r){return Je(t).onAuthStateChanged(e,n,r)}function QN(t){return Je(t).signOut()}const Sc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Sc,"1"),this.storage.removeItem(Sc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN=1e3,XN=10;class LI extends MI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);AN()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,XN):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},YN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}LI.type="LOCAL";const JN=LI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI extends MI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}OI.type="SESSION";const FI=OI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZN(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new ah(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await ZN(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ah.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function og(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=og("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const p=d;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(){return window}function tV(t){Mn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(){return typeof Mn().WorkerGlobalScope<"u"&&typeof Mn().importScripts=="function"}async function nV(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function rV(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function iV(){return jI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI="firebaseLocalStorageDb",sV=1,Ic="firebaseLocalStorage",BI="fbase_key";class ll{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function lh(t,e){return t.transaction([Ic],e?"readwrite":"readonly").objectStore(Ic)}function oV(){const t=indexedDB.deleteDatabase(UI);return new ll(t).toPromise()}function tp(){const t=indexedDB.open(UI,sV);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ic,{keyPath:BI})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ic)?e(r):(r.close(),await oV(),e(await tp()))})})}async function n0(t,e,n){const r=lh(t,!0).put({[BI]:e,value:n});return new ll(r).toPromise()}async function aV(t,e){const n=lh(t,!1).get(e),r=await new ll(n).toPromise();return r===void 0?null:r.value}function r0(t,e){const n=lh(t,!0).delete(e);return new ll(n).toPromise()}const lV=800,uV=3;class zI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await tp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>uV)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ah._getInstance(iV()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await nV(),!this.activeServiceWorker)return;this.sender=new eV(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||rV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await tp();return await n0(e,Sc,"1"),await r0(e,Sc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>n0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>aV(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>r0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=lh(i,!1).getAll();return new ll(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),lV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}zI.type="LOCAL";const cV=zI;new ol(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(t,e){return e?er(e):(se(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag extends NI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Rs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Rs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Rs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function hV(t){return HN(t.auth,new ag(t),t.bypassAuthState)}function dV(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),WN(n,new ag(t),t.bypassAuthState)}async function fV(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),$N(n,new ag(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return hV;case"linkViaPopup":case"linkViaRedirect":return fV;case"reauthViaPopup":case"reauthViaRedirect":return dV;default:Un(this.auth,"internal-error")}}resolve(e){ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pV=new ol(2e3,1e4);async function mV(t,e,n){if(Xn(t.app))return Promise.reject(Sn(t,"operation-not-supported-in-this-environment"));const r=oh(t);cN(t,e,sg);const i=$I(r,n);return new Ti(r,"signInViaPopup",e,i).executeNotNull()}class Ti extends WI{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ti.currentPopupAction&&Ti.currentPopupAction.cancel(),Ti.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return se(e,this.auth,"internal-error"),e}async onExecution(){ur(this.filter.length===1,"Popup operations only handle one event");const e=og();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Sn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Sn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ti.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Sn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,pV.get())};e()}}Ti.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV="pendingRedirect",Du=new Map;class yV extends WI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Du.get(this.auth._key());if(!e){try{const r=await vV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Du.set(this.auth._key(),e)}return this.bypassAuthState||Du.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function vV(t,e){const n=EV(e),r=wV(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function _V(t,e){Du.set(t._key(),e)}function wV(t){return er(t._redirectPersistence)}function EV(t){return bu(gV,t.config.apiKey,t.name)}async function TV(t,e,n=!1){if(Xn(t.app))return Promise.reject(Pi(t));const r=oh(t),i=$I(r,e),o=await new yV(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SV=10*60*1e3;class IV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!xV(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!HI(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Sn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=SV&&this.cachedEventUids.clear(),this.cachedEventUids.has(i0(e))}saveEventToCache(e){this.cachedEventUids.add(i0(e)),this.lastProcessedEventTime=Date.now()}}function i0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function HI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function xV(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return HI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CV(t,e={}){return so(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,PV=/^https?/;async function RV(t){if(t.config.emulator)return;const{authorizedDomains:e}=await CV(t);for(const n of e)try{if(kV(n))return}catch{}Un(t,"unauthorized-domain")}function kV(t){const e=Zf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!PV.test(n))return!1;if(AV.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bV=new ol(3e4,6e4);function s0(){const t=Mn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function DV(t){return new Promise((e,n)=>{var r,i,s;function o(){s0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{s0(),n(Sn(t,"network-request-failed"))},timeout:bV.get()})}if(!((i=(r=Mn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Mn().gapi)===null||s===void 0)&&s.load)o();else{const a=LN("iframefcb");return Mn()[a]=()=>{gapi.load?o():n(Sn(t,"network-request-failed"))},VN(`${MN()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Nu=null,e})}let Nu=null;function NV(t){return Nu=Nu||DV(t),Nu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VV=new ol(5e3,15e3),MV="__/auth/iframe",LV="emulator/auth/iframe",OV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},FV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jV(t){const e=t.config;se(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?eg(e,LV):`https://${t.config.authDomain}/${MV}`,r={apiKey:e.apiKey,appName:t.name,v:io},i=FV.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${sl(r).slice(1)}`}async function UV(t){const e=await NV(t),n=Mn().gapi;return se(n,t,"internal-error"),e.open({where:document.body,url:jV(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:OV,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Sn(t,"network-request-failed"),a=Mn().setTimeout(()=>{s(o)},VV.get());function l(){Mn().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},zV=500,$V=600,WV="_blank",HV="http://localhost";class o0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function qV(t,e,n,r=zV,i=$V){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},BV),{width:r.toString(),height:i.toString(),top:s,left:o}),c=At().toLowerCase();n&&(a=xI(c)?WV:n),SI(c)&&(e=e||HV,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[g,_])=>`${p}${g}=${_},`,"");if(CN(c)&&a!=="_self")return KV(e||"",a),new o0(null);const d=window.open(e||"",a,h);se(d,t,"popup-blocked");try{d.focus()}catch{}return new o0(d)}function KV(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GV="__/auth/handler",QV="emulator/auth/handler",YV=encodeURIComponent("fac");async function a0(t,e,n,r,i,s){se(t.config.authDomain,t,"auth-domain-config-required"),se(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:io,eventId:i};if(e instanceof sg){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Yb(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof al){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${YV}=${encodeURIComponent(l)}`:"";return`${XV(t)}?${sl(a).slice(1)}${c}`}function XV({config:t}){return t.emulator?eg(t,QV):`https://${t.authDomain}/${GV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dd="webStorageSupport";class JV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=FI,this._completeRedirectFn=TV,this._overrideRedirectResult=_V}async _openPopup(e,n,r,i){var s;ur((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await a0(e,n,r,Zf(),i);return qV(e,o,og())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await a0(e,n,r,Zf(),i);return tV(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(ur(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await UV(e),r=new IV(e);return n.register("authEvent",i=>(se(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Dd,{type:Dd},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Dd];o!==void 0&&n(!!o),Un(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=RV(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return kI()||II()||rg()}}const ZV=JV;var l0="@firebase/auth",u0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function nM(t){Us(new Oi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;se(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bI(t)},c=new DN(r,i,s,l);return FN(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Us(new Oi("auth-internal",e=>{const n=oh(e.getProvider("auth").getImmediate());return(r=>new eM(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),qr(l0,u0,tM(t)),qr(l0,u0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rM=5*60,iM=lI("authIdTokenMaxAge")||rM;let c0=null;const sM=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>iM)return;const i=n==null?void 0:n.token;c0!==i&&(c0=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function oM(t=dI()){const e=Ym(t,"auth");if(e.isInitialized())return e.getImmediate();const n=ON(t,{popupRedirectResolver:ZV,persistence:[cV,JN,FI]}),r=lI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=sM(s.toString());KN(n,o,()=>o(n.currentUser)),qN(n,a=>o(a))}}const i=oI("auth");return i&&jN(n,`http://${i}`),n}function aM(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}NN({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Sn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",aM().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});nM("Browser");var lM="firebase",uM="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qr(lM,uM,"app");var h0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ri,qI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,w){function C(){}C.prototype=w.prototype,I.D=w.prototype,I.prototype=new C,I.prototype.constructor=I,I.C=function(P,D,L){for(var k=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)k[Ze-2]=arguments[Ze];return w.prototype[D].apply(P,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,w,C){C||(C=0);var P=Array(16);if(typeof w=="string")for(var D=0;16>D;++D)P[D]=w.charCodeAt(C++)|w.charCodeAt(C++)<<8|w.charCodeAt(C++)<<16|w.charCodeAt(C++)<<24;else for(D=0;16>D;++D)P[D]=w[C++]|w[C++]<<8|w[C++]<<16|w[C++]<<24;w=I.g[0],C=I.g[1],D=I.g[2];var L=I.g[3],k=w+(L^C&(D^L))+P[0]+3614090360&4294967295;w=C+(k<<7&4294967295|k>>>25),k=L+(D^w&(C^D))+P[1]+3905402710&4294967295,L=w+(k<<12&4294967295|k>>>20),k=D+(C^L&(w^C))+P[2]+606105819&4294967295,D=L+(k<<17&4294967295|k>>>15),k=C+(w^D&(L^w))+P[3]+3250441966&4294967295,C=D+(k<<22&4294967295|k>>>10),k=w+(L^C&(D^L))+P[4]+4118548399&4294967295,w=C+(k<<7&4294967295|k>>>25),k=L+(D^w&(C^D))+P[5]+1200080426&4294967295,L=w+(k<<12&4294967295|k>>>20),k=D+(C^L&(w^C))+P[6]+2821735955&4294967295,D=L+(k<<17&4294967295|k>>>15),k=C+(w^D&(L^w))+P[7]+4249261313&4294967295,C=D+(k<<22&4294967295|k>>>10),k=w+(L^C&(D^L))+P[8]+1770035416&4294967295,w=C+(k<<7&4294967295|k>>>25),k=L+(D^w&(C^D))+P[9]+2336552879&4294967295,L=w+(k<<12&4294967295|k>>>20),k=D+(C^L&(w^C))+P[10]+4294925233&4294967295,D=L+(k<<17&4294967295|k>>>15),k=C+(w^D&(L^w))+P[11]+2304563134&4294967295,C=D+(k<<22&4294967295|k>>>10),k=w+(L^C&(D^L))+P[12]+1804603682&4294967295,w=C+(k<<7&4294967295|k>>>25),k=L+(D^w&(C^D))+P[13]+4254626195&4294967295,L=w+(k<<12&4294967295|k>>>20),k=D+(C^L&(w^C))+P[14]+2792965006&4294967295,D=L+(k<<17&4294967295|k>>>15),k=C+(w^D&(L^w))+P[15]+1236535329&4294967295,C=D+(k<<22&4294967295|k>>>10),k=w+(D^L&(C^D))+P[1]+4129170786&4294967295,w=C+(k<<5&4294967295|k>>>27),k=L+(C^D&(w^C))+P[6]+3225465664&4294967295,L=w+(k<<9&4294967295|k>>>23),k=D+(w^C&(L^w))+P[11]+643717713&4294967295,D=L+(k<<14&4294967295|k>>>18),k=C+(L^w&(D^L))+P[0]+3921069994&4294967295,C=D+(k<<20&4294967295|k>>>12),k=w+(D^L&(C^D))+P[5]+3593408605&4294967295,w=C+(k<<5&4294967295|k>>>27),k=L+(C^D&(w^C))+P[10]+38016083&4294967295,L=w+(k<<9&4294967295|k>>>23),k=D+(w^C&(L^w))+P[15]+3634488961&4294967295,D=L+(k<<14&4294967295|k>>>18),k=C+(L^w&(D^L))+P[4]+3889429448&4294967295,C=D+(k<<20&4294967295|k>>>12),k=w+(D^L&(C^D))+P[9]+568446438&4294967295,w=C+(k<<5&4294967295|k>>>27),k=L+(C^D&(w^C))+P[14]+3275163606&4294967295,L=w+(k<<9&4294967295|k>>>23),k=D+(w^C&(L^w))+P[3]+4107603335&4294967295,D=L+(k<<14&4294967295|k>>>18),k=C+(L^w&(D^L))+P[8]+1163531501&4294967295,C=D+(k<<20&4294967295|k>>>12),k=w+(D^L&(C^D))+P[13]+2850285829&4294967295,w=C+(k<<5&4294967295|k>>>27),k=L+(C^D&(w^C))+P[2]+4243563512&4294967295,L=w+(k<<9&4294967295|k>>>23),k=D+(w^C&(L^w))+P[7]+1735328473&4294967295,D=L+(k<<14&4294967295|k>>>18),k=C+(L^w&(D^L))+P[12]+2368359562&4294967295,C=D+(k<<20&4294967295|k>>>12),k=w+(C^D^L)+P[5]+4294588738&4294967295,w=C+(k<<4&4294967295|k>>>28),k=L+(w^C^D)+P[8]+2272392833&4294967295,L=w+(k<<11&4294967295|k>>>21),k=D+(L^w^C)+P[11]+1839030562&4294967295,D=L+(k<<16&4294967295|k>>>16),k=C+(D^L^w)+P[14]+4259657740&4294967295,C=D+(k<<23&4294967295|k>>>9),k=w+(C^D^L)+P[1]+2763975236&4294967295,w=C+(k<<4&4294967295|k>>>28),k=L+(w^C^D)+P[4]+1272893353&4294967295,L=w+(k<<11&4294967295|k>>>21),k=D+(L^w^C)+P[7]+4139469664&4294967295,D=L+(k<<16&4294967295|k>>>16),k=C+(D^L^w)+P[10]+3200236656&4294967295,C=D+(k<<23&4294967295|k>>>9),k=w+(C^D^L)+P[13]+681279174&4294967295,w=C+(k<<4&4294967295|k>>>28),k=L+(w^C^D)+P[0]+3936430074&4294967295,L=w+(k<<11&4294967295|k>>>21),k=D+(L^w^C)+P[3]+3572445317&4294967295,D=L+(k<<16&4294967295|k>>>16),k=C+(D^L^w)+P[6]+76029189&4294967295,C=D+(k<<23&4294967295|k>>>9),k=w+(C^D^L)+P[9]+3654602809&4294967295,w=C+(k<<4&4294967295|k>>>28),k=L+(w^C^D)+P[12]+3873151461&4294967295,L=w+(k<<11&4294967295|k>>>21),k=D+(L^w^C)+P[15]+530742520&4294967295,D=L+(k<<16&4294967295|k>>>16),k=C+(D^L^w)+P[2]+3299628645&4294967295,C=D+(k<<23&4294967295|k>>>9),k=w+(D^(C|~L))+P[0]+4096336452&4294967295,w=C+(k<<6&4294967295|k>>>26),k=L+(C^(w|~D))+P[7]+1126891415&4294967295,L=w+(k<<10&4294967295|k>>>22),k=D+(w^(L|~C))+P[14]+2878612391&4294967295,D=L+(k<<15&4294967295|k>>>17),k=C+(L^(D|~w))+P[5]+4237533241&4294967295,C=D+(k<<21&4294967295|k>>>11),k=w+(D^(C|~L))+P[12]+1700485571&4294967295,w=C+(k<<6&4294967295|k>>>26),k=L+(C^(w|~D))+P[3]+2399980690&4294967295,L=w+(k<<10&4294967295|k>>>22),k=D+(w^(L|~C))+P[10]+4293915773&4294967295,D=L+(k<<15&4294967295|k>>>17),k=C+(L^(D|~w))+P[1]+2240044497&4294967295,C=D+(k<<21&4294967295|k>>>11),k=w+(D^(C|~L))+P[8]+1873313359&4294967295,w=C+(k<<6&4294967295|k>>>26),k=L+(C^(w|~D))+P[15]+4264355552&4294967295,L=w+(k<<10&4294967295|k>>>22),k=D+(w^(L|~C))+P[6]+2734768916&4294967295,D=L+(k<<15&4294967295|k>>>17),k=C+(L^(D|~w))+P[13]+1309151649&4294967295,C=D+(k<<21&4294967295|k>>>11),k=w+(D^(C|~L))+P[4]+4149444226&4294967295,w=C+(k<<6&4294967295|k>>>26),k=L+(C^(w|~D))+P[11]+3174756917&4294967295,L=w+(k<<10&4294967295|k>>>22),k=D+(w^(L|~C))+P[2]+718787259&4294967295,D=L+(k<<15&4294967295|k>>>17),k=C+(L^(D|~w))+P[9]+3951481745&4294967295,I.g[0]=I.g[0]+w&4294967295,I.g[1]=I.g[1]+(D+(k<<21&4294967295|k>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+L&4294967295}r.prototype.u=function(I,w){w===void 0&&(w=I.length);for(var C=w-this.blockSize,P=this.B,D=this.h,L=0;L<w;){if(D==0)for(;L<=C;)i(this,I,L),L+=this.blockSize;if(typeof I=="string"){for(;L<w;)if(P[D++]=I.charCodeAt(L++),D==this.blockSize){i(this,P),D=0;break}}else for(;L<w;)if(P[D++]=I[L++],D==this.blockSize){i(this,P),D=0;break}}this.h=D,this.o+=w},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var w=1;w<I.length-8;++w)I[w]=0;var C=8*this.o;for(w=I.length-8;w<I.length;++w)I[w]=C&255,C/=256;for(this.u(I),I=Array(16),w=C=0;4>w;++w)for(var P=0;32>P;P+=8)I[C++]=this.g[w]>>>P&255;return I};function s(I,w){var C=a;return Object.prototype.hasOwnProperty.call(C,I)?C[I]:C[I]=w(I)}function o(I,w){this.h=w;for(var C=[],P=!0,D=I.length-1;0<=D;D--){var L=I[D]|0;P&&L==w||(C[D]=L,P=!1)}this.g=C}var a={};function l(I){return-128<=I&&128>I?s(I,function(w){return new o([w|0],0>w?-1:0)}):new o([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return d;if(0>I)return x(c(-I));for(var w=[],C=1,P=0;I>=C;P++)w[P]=I/C|0,C*=4294967296;return new o(w,0)}function h(I,w){if(I.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(I.charAt(0)=="-")return x(h(I.substring(1),w));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=c(Math.pow(w,8)),P=d,D=0;D<I.length;D+=8){var L=Math.min(8,I.length-D),k=parseInt(I.substring(D,D+L),w);8>L?(L=c(Math.pow(w,L)),P=P.j(L).add(c(k))):(P=P.j(C),P=P.add(c(k)))}return P}var d=l(0),p=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(S(this))return-x(this).m();for(var I=0,w=1,C=0;C<this.g.length;C++){var P=this.i(C);I+=(0<=P?P:4294967296+P)*w,w*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(_(this))return"0";if(S(this))return"-"+x(this).toString(I);for(var w=c(Math.pow(I,6)),C=this,P="";;){var D=N(C,w).g;C=y(C,D.j(w));var L=((0<C.g.length?C.g[0]:C.h)>>>0).toString(I);if(C=D,_(C))return L+P;for(;6>L.length;)L="0"+L;P=L+P}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function _(I){if(I.h!=0)return!1;for(var w=0;w<I.g.length;w++)if(I.g[w]!=0)return!1;return!0}function S(I){return I.h==-1}t.l=function(I){return I=y(this,I),S(I)?-1:_(I)?0:1};function x(I){for(var w=I.g.length,C=[],P=0;P<w;P++)C[P]=~I.g[P];return new o(C,~I.h).add(p)}t.abs=function(){return S(this)?x(this):this},t.add=function(I){for(var w=Math.max(this.g.length,I.g.length),C=[],P=0,D=0;D<=w;D++){var L=P+(this.i(D)&65535)+(I.i(D)&65535),k=(L>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);P=k>>>16,L&=65535,k&=65535,C[D]=k<<16|L}return new o(C,C[C.length-1]&-2147483648?-1:0)};function y(I,w){return I.add(x(w))}t.j=function(I){if(_(this)||_(I))return d;if(S(this))return S(I)?x(this).j(x(I)):x(x(this).j(I));if(S(I))return x(this.j(x(I)));if(0>this.l(g)&&0>I.l(g))return c(this.m()*I.m());for(var w=this.g.length+I.g.length,C=[],P=0;P<2*w;P++)C[P]=0;for(P=0;P<this.g.length;P++)for(var D=0;D<I.g.length;D++){var L=this.i(P)>>>16,k=this.i(P)&65535,Ze=I.i(D)>>>16,Lt=I.i(D)&65535;C[2*P+2*D]+=k*Lt,v(C,2*P+2*D),C[2*P+2*D+1]+=L*Lt,v(C,2*P+2*D+1),C[2*P+2*D+1]+=k*Ze,v(C,2*P+2*D+1),C[2*P+2*D+2]+=L*Ze,v(C,2*P+2*D+2)}for(P=0;P<w;P++)C[P]=C[2*P+1]<<16|C[2*P];for(P=w;P<2*w;P++)C[P]=0;return new o(C,0)};function v(I,w){for(;(I[w]&65535)!=I[w];)I[w+1]+=I[w]>>>16,I[w]&=65535,w++}function E(I,w){this.g=I,this.h=w}function N(I,w){if(_(w))throw Error("division by zero");if(_(I))return new E(d,d);if(S(I))return w=N(x(I),w),new E(x(w.g),x(w.h));if(S(w))return w=N(I,x(w)),new E(x(w.g),w.h);if(30<I.g.length){if(S(I)||S(w))throw Error("slowDivide_ only works with positive integers.");for(var C=p,P=w;0>=P.l(I);)C=M(C),P=M(P);var D=F(C,1),L=F(P,1);for(P=F(P,2),C=F(C,2);!_(P);){var k=L.add(P);0>=k.l(I)&&(D=D.add(C),L=k),P=F(P,1),C=F(C,1)}return w=y(I,D.j(w)),new E(D,w)}for(D=d;0<=I.l(w);){for(C=Math.max(1,Math.floor(I.m()/w.m())),P=Math.ceil(Math.log(C)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),L=c(C),k=L.j(w);S(k)||0<k.l(I);)C-=P,L=c(C),k=L.j(w);_(L)&&(L=p),D=D.add(L),I=y(I,k)}return new E(D,I)}t.A=function(I){return N(this,I).h},t.and=function(I){for(var w=Math.max(this.g.length,I.g.length),C=[],P=0;P<w;P++)C[P]=this.i(P)&I.i(P);return new o(C,this.h&I.h)},t.or=function(I){for(var w=Math.max(this.g.length,I.g.length),C=[],P=0;P<w;P++)C[P]=this.i(P)|I.i(P);return new o(C,this.h|I.h)},t.xor=function(I){for(var w=Math.max(this.g.length,I.g.length),C=[],P=0;P<w;P++)C[P]=this.i(P)^I.i(P);return new o(C,this.h^I.h)};function M(I){for(var w=I.g.length+1,C=[],P=0;P<w;P++)C[P]=I.i(P)<<1|I.i(P-1)>>>31;return new o(C,I.h)}function F(I,w){var C=w>>5;w%=32;for(var P=I.g.length-C,D=[],L=0;L<P;L++)D[L]=0<w?I.i(L+C)>>>w|I.i(L+C+1)<<32-w:I.i(L+C);return new o(D,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,qI=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Ri=o}).apply(typeof h0<"u"?h0:typeof self<"u"?self:typeof window<"u"?window:{});var ou=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var KI,Ko,GI,Vu,np,QI,YI,XI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,m){return u==Array.prototype||u==Object.prototype||(u[f]=m.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ou=="object"&&ou];for(var f=0;f<u.length;++f){var m=u[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(u,f){if(f)e:{var m=r;u=u.split(".");for(var T=0;T<u.length-1;T++){var O=u[T];if(!(O in m))break e;m=m[O]}u=u[u.length-1],T=m[u],f=f(T),f!=T&&f!=null&&e(m,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var m=0,T=!1,O={next:function(){if(!T&&m<u.length){var j=m++;return{value:f(j,u[j]),done:!1}}return T=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}i("Array.prototype.values",function(u){return u||function(){return s(this,function(f,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function c(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function h(u,f,m){return u.call.apply(u.bind,arguments)}function d(u,f,m){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,T),u.apply(f,O)}}return function(){return u.apply(f,arguments)}}function p(u,f,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,p.apply(null,arguments)}function g(u,f){var m=Array.prototype.slice.call(arguments,1);return function(){var T=m.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function _(u,f){function m(){}m.prototype=f.prototype,u.aa=f.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(T,O,j){for(var W=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)W[Te-2]=arguments[Te];return f.prototype[O].apply(T,W)}}function S(u){const f=u.length;if(0<f){const m=Array(f);for(let T=0;T<f;T++)m[T]=u[T];return m}return[]}function x(u,f){for(let m=1;m<arguments.length;m++){const T=arguments[m];if(l(T)){const O=u.length||0,j=T.length||0;u.length=O+j;for(let W=0;W<j;W++)u[O+W]=T[W]}else u.push(T)}}class y{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function v(u){return/^[\s\xa0]*$/.test(u)}function E(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function N(u){return N[" "](u),u}N[" "]=function(){};var M=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function F(u,f,m){for(const T in u)f.call(m,u[T],T,u)}function I(u,f){for(const m in u)f.call(void 0,u[m],m,u)}function w(u){const f={};for(const m in u)f[m]=u[m];return f}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(u,f){let m,T;for(let O=1;O<arguments.length;O++){T=arguments[O];for(m in T)u[m]=T[m];for(let j=0;j<C.length;j++)m=C[j],Object.prototype.hasOwnProperty.call(T,m)&&(u[m]=T[m])}}function D(u){var f=1;u=u.split(":");const m=[];for(;0<f&&u.length;)m.push(u.shift()),f--;return u.length&&m.push(u.join(":")),m}function L(u){a.setTimeout(()=>{throw u},0)}function k(){var u=X;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class Ze{constructor(){this.h=this.g=null}add(f,m){const T=Lt.get();T.set(f,m),this.h?this.h.next=T:this.g=T,this.h=T}}var Lt=new y(()=>new $n,u=>u.reset());class $n{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let ve,$=!1,X=new Ze,V=()=>{const u=a.Promise.resolve(void 0);ve=()=>{u.then(b)}};var b=()=>{for(var u;u=k();){try{u.h.call(u.g)}catch(m){L(m)}var f=Lt;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}$=!1};function H(){this.s=this.s,this.C=this.C}H.prototype.s=!1,H.prototype.ma=function(){this.s||(this.s=!0,this.N())},H.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function K(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}K.prototype.h=function(){this.defaultPrevented=!0};var ee=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const m=()=>{};a.addEventListener("test",m,f),a.removeEventListener("test",m,f)}catch{}return u}();function te(u,f){if(K.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(M){e:{try{N(f.nodeName);var O=!0;break e}catch{}O=!1}O||(f=null)}}else m=="mouseover"?f=u.fromElement:m=="mouseout"&&(f=u.toElement);this.relatedTarget=f,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:ie[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&te.aa.h.call(this)}}_(te,K);var ie={2:"touch",3:"pen",4:"mouse"};te.prototype.h=function(){te.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Y="closure_listenable_"+(1e6*Math.random()|0),ae=0;function we(u,f,m,T,O){this.listener=u,this.proxy=null,this.src=f,this.type=m,this.capture=!!T,this.ha=O,this.key=++ae,this.da=this.fa=!1}function Ee(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ye(u){this.src=u,this.g={},this.h=0}ye.prototype.add=function(u,f,m,T,O){var j=u.toString();u=this.g[j],u||(u=this.g[j]=[],this.h++);var W=Ue(u,f,T,O);return-1<W?(f=u[W],m||(f.fa=!1)):(f=new we(f,this.src,j,!!T,O),f.fa=m,u.push(f)),f};function Ie(u,f){var m=f.type;if(m in u.g){var T=u.g[m],O=Array.prototype.indexOf.call(T,f,void 0),j;(j=0<=O)&&Array.prototype.splice.call(T,O,1),j&&(Ee(f),u.g[m].length==0&&(delete u.g[m],u.h--))}}function Ue(u,f,m,T){for(var O=0;O<u.length;++O){var j=u[O];if(!j.da&&j.listener==f&&j.capture==!!m&&j.ha==T)return O}return-1}var le="closure_lm_"+(1e6*Math.random()|0),et={};function Ot(u,f,m,T,O){if(Array.isArray(f)){for(var j=0;j<f.length;j++)Ot(u,f[j],m,T,O);return null}return m=Il(m),u&&u[Y]?u.K(f,m,c(T)?!!T.capture:!1,O):qt(u,f,m,!1,T,O)}function qt(u,f,m,T,O,j){if(!f)throw Error("Invalid event type");var W=c(O)?!!O.capture:!!O,Te=po(u);if(Te||(u[le]=Te=new ye(u)),m=Te.add(f,m,T,W,j),m.proxy)return m;if(T=pn(),m.proxy=T,T.src=u,T.listener=m,u.addEventListener)ee||(O=W),O===void 0&&(O=!1),u.addEventListener(f.toString(),T,O);else if(u.attachEvent)u.attachEvent(Sl(f.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return m}function pn(){function u(m){return f.call(u.src,u.listener,m)}const f=Mh;return u}function Rn(u,f,m,T,O){if(Array.isArray(f))for(var j=0;j<f.length;j++)Rn(u,f[j],m,T,O);else T=c(T)?!!T.capture:!!T,m=Il(m),u&&u[Y]?(u=u.i,f=String(f).toString(),f in u.g&&(j=u.g[f],m=Ue(j,m,T,O),-1<m&&(Ee(j[m]),Array.prototype.splice.call(j,m,1),j.length==0&&(delete u.g[f],u.h--)))):u&&(u=po(u))&&(f=u.g[f.toString()],u=-1,f&&(u=Ue(f,m,T,O)),(m=-1<u?f[u]:null)&&Ft(m))}function Ft(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[Y])Ie(f.i,u);else{var m=u.type,T=u.proxy;f.removeEventListener?f.removeEventListener(m,T,u.capture):f.detachEvent?f.detachEvent(Sl(m),T):f.addListener&&f.removeListener&&f.removeListener(T),(m=po(f))?(Ie(m,u),m.h==0&&(m.src=null,f[le]=null)):Ee(u)}}}function Sl(u){return u in et?et[u]:et[u]="on"+u}function Mh(u,f){if(u.da)u=!0;else{f=new te(f,this);var m=u.listener,T=u.ha||u.src;u.fa&&Ft(u),u=m.call(T,f)}return u}function po(u){return u=u[le],u instanceof ye?u:null}var Ki="__closure_events_fn_"+(1e9*Math.random()>>>0);function Il(u){return typeof u=="function"?u:(u[Ki]||(u[Ki]=function(f){return u.handleEvent(f)}),u[Ki])}function Ge(){H.call(this),this.i=new ye(this),this.M=this,this.F=null}_(Ge,H),Ge.prototype[Y]=!0,Ge.prototype.removeEventListener=function(u,f,m,T){Rn(this,u,f,m,T)};function ot(u,f){var m,T=u.F;if(T)for(m=[];T;T=T.F)m.push(T);if(u=u.M,T=f.type||f,typeof f=="string")f=new K(f,u);else if(f instanceof K)f.target=f.target||u;else{var O=f;f=new K(T,u),P(f,O)}if(O=!0,m)for(var j=m.length-1;0<=j;j--){var W=f.g=m[j];O=Gi(W,T,!0,f)&&O}if(W=f.g=u,O=Gi(W,T,!0,f)&&O,O=Gi(W,T,!1,f)&&O,m)for(j=0;j<m.length;j++)W=f.g=m[j],O=Gi(W,T,!1,f)&&O}Ge.prototype.N=function(){if(Ge.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var m=u.g[f],T=0;T<m.length;T++)Ee(m[T]);delete u.g[f],u.h--}}this.F=null},Ge.prototype.K=function(u,f,m,T){return this.i.add(String(u),f,!1,m,T)},Ge.prototype.L=function(u,f,m,T){return this.i.add(String(u),f,!0,m,T)};function Gi(u,f,m,T){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var O=!0,j=0;j<f.length;++j){var W=f[j];if(W&&!W.da&&W.capture==m){var Te=W.listener,at=W.ha||W.src;W.fa&&Ie(u.i,W),O=Te.call(at,T)!==!1&&O}}return O&&!T.defaultPrevented}function mo(u,f,m){if(typeof u=="function")m&&(u=p(u,m));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function go(u){u.g=mo(()=>{u.g=null,u.i&&(u.i=!1,go(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class yo extends H{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:go(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function li(u){H.call(this),this.h=u,this.g={}}_(li,H);var xl=[];function by(u){F(u.g,function(f,m){this.g.hasOwnProperty(m)&&Ft(f)},u),u.g={}}li.prototype.N=function(){li.aa.N.call(this),by(this)},li.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Lh=a.JSON.stringify,tP=a.JSON.parse,nP=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Oh(){}Oh.prototype.h=null;function Dy(u){return u.h||(u.h=u.i())}function Ny(){}var vo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Fh(){K.call(this,"d")}_(Fh,K);function jh(){K.call(this,"c")}_(jh,K);var ui={},Vy=null;function Cl(){return Vy=Vy||new Ge}ui.La="serverreachability";function My(u){K.call(this,ui.La,u)}_(My,K);function _o(u){const f=Cl();ot(f,new My(f))}ui.STAT_EVENT="statevent";function Ly(u,f){K.call(this,ui.STAT_EVENT,u),this.stat=f}_(Ly,K);function Pt(u){const f=Cl();ot(f,new Ly(f,u))}ui.Ma="timingevent";function Oy(u,f){K.call(this,ui.Ma,u),this.size=f}_(Oy,K);function wo(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function Eo(){this.g=!0}Eo.prototype.xa=function(){this.g=!1};function rP(u,f,m,T,O,j){u.info(function(){if(u.g)if(j)for(var W="",Te=j.split("&"),at=0;at<Te.length;at++){var me=Te[at].split("=");if(1<me.length){var gt=me[0];me=me[1];var yt=gt.split("_");W=2<=yt.length&&yt[1]=="type"?W+(gt+"="+me+"&"):W+(gt+"=redacted&")}}else W=null;else W=j;return"XMLHTTP REQ ("+T+") [attempt "+O+"]: "+f+`
`+m+`
`+W})}function iP(u,f,m,T,O,j,W){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+O+"]: "+f+`
`+m+`
`+j+" "+W})}function Qi(u,f,m,T){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+oP(u,m)+(T?" "+T:"")})}function sP(u,f){u.info(function(){return"TIMEOUT: "+f})}Eo.prototype.info=function(){};function oP(u,f){if(!u.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var T=m[u];if(!(2>T.length)){var O=T[1];if(Array.isArray(O)&&!(1>O.length)){var j=O[0];if(j!="noop"&&j!="stop"&&j!="close")for(var W=1;W<O.length;W++)O[W]=""}}}}return Lh(m)}catch{return f}}var Al={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Fy={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Uh;function Pl(){}_(Pl,Oh),Pl.prototype.g=function(){return new XMLHttpRequest},Pl.prototype.i=function(){return{}},Uh=new Pl;function vr(u,f,m,T){this.j=u,this.i=f,this.l=m,this.R=T||1,this.U=new li(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new jy}function jy(){this.i=null,this.g="",this.h=!1}var Uy={},Bh={};function zh(u,f,m){u.L=1,u.v=Dl(Wn(f)),u.m=m,u.P=!0,By(u,null)}function By(u,f){u.F=Date.now(),Rl(u),u.A=Wn(u.v);var m=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),tv(m.i,"t",T),u.C=0,m=u.j.J,u.h=new jy,u.g=_v(u.j,m?f:null,!u.m),0<u.O&&(u.M=new yo(p(u.Y,u,u.g),u.O)),f=u.U,m=u.g,T=u.ca;var O="readystatechange";Array.isArray(O)||(O&&(xl[0]=O.toString()),O=xl);for(var j=0;j<O.length;j++){var W=Ot(m,O[j],T||f.handleEvent,!1,f.h||f);if(!W)break;f.g[W.key]=W}f=u.H?w(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),_o(),rP(u.i,u.u,u.A,u.l,u.R,u.m)}vr.prototype.ca=function(u){u=u.target;const f=this.M;f&&Hn(u)==3?f.j():this.Y(u)},vr.prototype.Y=function(u){try{if(u==this.g)e:{const yt=Hn(this.g);var f=this.g.Ba();const Ji=this.g.Z();if(!(3>yt)&&(yt!=3||this.g&&(this.h.h||this.g.oa()||lv(this.g)))){this.J||yt!=4||f==7||(f==8||0>=Ji?_o(3):_o(2)),$h(this);var m=this.g.Z();this.X=m;t:if(zy(this)){var T=lv(this.g);u="";var O=T.length,j=Hn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ci(this),To(this);var W="";break t}this.h.i=new a.TextDecoder}for(f=0;f<O;f++)this.h.h=!0,u+=this.h.i.decode(T[f],{stream:!(j&&f==O-1)});T.length=0,this.h.g+=u,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=m==200,iP(this.i,this.u,this.A,this.l,this.R,yt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Te,at=this.g;if((Te=at.g?at.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Te)){var me=Te;break t}}me=null}if(m=me)Qi(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Wh(this,m);else{this.o=!1,this.s=3,Pt(12),ci(this),To(this);break e}}if(this.P){m=!0;let mn;for(;!this.J&&this.C<W.length;)if(mn=aP(this,W),mn==Bh){yt==4&&(this.s=4,Pt(14),m=!1),Qi(this.i,this.l,null,"[Incomplete Response]");break}else if(mn==Uy){this.s=4,Pt(15),Qi(this.i,this.l,W,"[Invalid Chunk]"),m=!1;break}else Qi(this.i,this.l,mn,null),Wh(this,mn);if(zy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yt!=4||W.length!=0||this.h.h||(this.s=1,Pt(16),m=!1),this.o=this.o&&m,!m)Qi(this.i,this.l,W,"[Invalid Chunked Response]"),ci(this),To(this);else if(0<W.length&&!this.W){this.W=!0;var gt=this.j;gt.g==this&&gt.ba&&!gt.M&&(gt.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),Yh(gt),gt.M=!0,Pt(11))}}else Qi(this.i,this.l,W,null),Wh(this,W);yt==4&&ci(this),this.o&&!this.J&&(yt==4?mv(this.j,this):(this.o=!1,Rl(this)))}else IP(this.g),m==400&&0<W.indexOf("Unknown SID")?(this.s=3,Pt(12)):(this.s=0,Pt(13)),ci(this),To(this)}}}catch{}finally{}};function zy(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function aP(u,f){var m=u.C,T=f.indexOf(`
`,m);return T==-1?Bh:(m=Number(f.substring(m,T)),isNaN(m)?Uy:(T+=1,T+m>f.length?Bh:(f=f.slice(T,T+m),u.C=T+m,f)))}vr.prototype.cancel=function(){this.J=!0,ci(this)};function Rl(u){u.S=Date.now()+u.I,$y(u,u.I)}function $y(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=wo(p(u.ba,u),f)}function $h(u){u.B&&(a.clearTimeout(u.B),u.B=null)}vr.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(sP(this.i,this.A),this.L!=2&&(_o(),Pt(17)),ci(this),this.s=2,To(this)):$y(this,this.S-u)};function To(u){u.j.G==0||u.J||mv(u.j,u)}function ci(u){$h(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,by(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function Wh(u,f){try{var m=u.j;if(m.G!=0&&(m.g==u||Hh(m.h,u))){if(!u.K&&Hh(m.h,u)&&m.G==3){try{var T=m.Da.g.parse(f)}catch{T=null}if(Array.isArray(T)&&T.length==3){var O=T;if(O[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)Fl(m),Ll(m);else break e;Qh(m),Pt(18)}}else m.za=O[1],0<m.za-m.T&&37500>O[2]&&m.F&&m.v==0&&!m.C&&(m.C=wo(p(m.Za,m),6e3));if(1>=qy(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else di(m,11)}else if((u.K||m.g==u)&&Fl(m),!v(f))for(O=m.Da.g.parse(f),f=0;f<O.length;f++){let me=O[f];if(m.T=me[0],me=me[1],m.G==2)if(me[0]=="c"){m.K=me[1],m.ia=me[2];const gt=me[3];gt!=null&&(m.la=gt,m.j.info("VER="+m.la));const yt=me[4];yt!=null&&(m.Aa=yt,m.j.info("SVER="+m.Aa));const Ji=me[5];Ji!=null&&typeof Ji=="number"&&0<Ji&&(T=1.5*Ji,m.L=T,m.j.info("backChannelRequestTimeoutMs_="+T)),T=m;const mn=u.g;if(mn){const Ul=mn.g?mn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ul){var j=T.h;j.g||Ul.indexOf("spdy")==-1&&Ul.indexOf("quic")==-1&&Ul.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(qh(j,j.h),j.h=null))}if(T.D){const Xh=mn.g?mn.g.getResponseHeader("X-HTTP-Session-Id"):null;Xh&&(T.ya=Xh,Ce(T.I,T.D,Xh))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),T=m;var W=u;if(T.qa=vv(T,T.J?T.ia:null,T.W),W.K){Ky(T.h,W);var Te=W,at=T.L;at&&(Te.I=at),Te.B&&($h(Te),Rl(Te)),T.g=W}else fv(T);0<m.i.length&&Ol(m)}else me[0]!="stop"&&me[0]!="close"||di(m,7);else m.G==3&&(me[0]=="stop"||me[0]=="close"?me[0]=="stop"?di(m,7):Gh(m):me[0]!="noop"&&m.l&&m.l.ta(me),m.v=0)}}_o(4)}catch{}}var lP=class{constructor(u,f){this.g=u,this.map=f}};function Wy(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Hy(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function qy(u){return u.h?1:u.g?u.g.size:0}function Hh(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function qh(u,f){u.g?u.g.add(f):u.h=f}function Ky(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}Wy.prototype.cancel=function(){if(this.i=Gy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Gy(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const m of u.g.values())f=f.concat(m.D);return f}return S(u.i)}function uP(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var f=[],m=u.length,T=0;T<m;T++)f.push(u[T]);return f}f=[],m=0;for(T in u)f[m++]=u[T];return f}function cP(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var f=[];u=u.length;for(var m=0;m<u;m++)f.push(m);return f}f=[],m=0;for(const T in u)f[m++]=T;return f}}}function Qy(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var m=cP(u),T=uP(u),O=T.length,j=0;j<O;j++)f.call(void 0,T[j],m&&m[j],u)}var Yy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hP(u,f){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var T=u[m].indexOf("="),O=null;if(0<=T){var j=u[m].substring(0,T);O=u[m].substring(T+1)}else j=u[m];f(j,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function hi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof hi){this.h=u.h,kl(this,u.j),this.o=u.o,this.g=u.g,bl(this,u.s),this.l=u.l;var f=u.i,m=new xo;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),Xy(this,m),this.m=u.m}else u&&(f=String(u).match(Yy))?(this.h=!1,kl(this,f[1]||"",!0),this.o=So(f[2]||""),this.g=So(f[3]||"",!0),bl(this,f[4]),this.l=So(f[5]||"",!0),Xy(this,f[6]||"",!0),this.m=So(f[7]||"")):(this.h=!1,this.i=new xo(null,this.h))}hi.prototype.toString=function(){var u=[],f=this.j;f&&u.push(Io(f,Jy,!0),":");var m=this.g;return(m||f=="file")&&(u.push("//"),(f=this.o)&&u.push(Io(f,Jy,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(Io(m,m.charAt(0)=="/"?pP:fP,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",Io(m,gP)),u.join("")};function Wn(u){return new hi(u)}function kl(u,f,m){u.j=m?So(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function bl(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function Xy(u,f,m){f instanceof xo?(u.i=f,yP(u.i,u.h)):(m||(f=Io(f,mP)),u.i=new xo(f,u.h))}function Ce(u,f,m){u.i.set(f,m)}function Dl(u){return Ce(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function So(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Io(u,f,m){return typeof u=="string"?(u=encodeURI(u).replace(f,dP),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function dP(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Jy=/[#\/\?@]/g,fP=/[#\?:]/g,pP=/[#\?]/g,mP=/[#\?@]/g,gP=/#/g;function xo(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function _r(u){u.g||(u.g=new Map,u.h=0,u.i&&hP(u.i,function(f,m){u.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}t=xo.prototype,t.add=function(u,f){_r(this),this.i=null,u=Yi(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(f),this.h+=1,this};function Zy(u,f){_r(u),f=Yi(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function ev(u,f){return _r(u),f=Yi(u,f),u.g.has(f)}t.forEach=function(u,f){_r(this),this.g.forEach(function(m,T){m.forEach(function(O){u.call(f,O,T,this)},this)},this)},t.na=function(){_r(this);const u=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let T=0;T<f.length;T++){const O=u[T];for(let j=0;j<O.length;j++)m.push(f[T])}return m},t.V=function(u){_r(this);let f=[];if(typeof u=="string")ev(this,u)&&(f=f.concat(this.g.get(Yi(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)f=f.concat(u[m])}return f},t.set=function(u,f){return _r(this),this.i=null,u=Yi(this,u),ev(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},t.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function tv(u,f,m){Zy(u,f),0<m.length&&(u.i=null,u.g.set(Yi(u,f),S(m)),u.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var T=f[m];const j=encodeURIComponent(String(T)),W=this.V(T);for(T=0;T<W.length;T++){var O=j;W[T]!==""&&(O+="="+encodeURIComponent(String(W[T]))),u.push(O)}}return this.i=u.join("&")};function Yi(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function yP(u,f){f&&!u.j&&(_r(u),u.i=null,u.g.forEach(function(m,T){var O=T.toLowerCase();T!=O&&(Zy(this,T),tv(this,O,m))},u)),u.j=f}function vP(u,f){const m=new Eo;if(a.Image){const T=new Image;T.onload=g(wr,m,"TestLoadImage: loaded",!0,f,T),T.onerror=g(wr,m,"TestLoadImage: error",!1,f,T),T.onabort=g(wr,m,"TestLoadImage: abort",!1,f,T),T.ontimeout=g(wr,m,"TestLoadImage: timeout",!1,f,T),a.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else f(!1)}function _P(u,f){const m=new Eo,T=new AbortController,O=setTimeout(()=>{T.abort(),wr(m,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:T.signal}).then(j=>{clearTimeout(O),j.ok?wr(m,"TestPingServer: ok",!0,f):wr(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(O),wr(m,"TestPingServer: error",!1,f)})}function wr(u,f,m,T,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),T(m)}catch{}}function wP(){this.g=new nP}function EP(u,f,m){const T=m||"";try{Qy(u,function(O,j){let W=O;c(O)&&(W=Lh(O)),f.push(T+j+"="+encodeURIComponent(W))})}catch(O){throw f.push(T+"type="+encodeURIComponent("_badmap")),O}}function Nl(u){this.l=u.Ub||null,this.j=u.eb||!1}_(Nl,Oh),Nl.prototype.g=function(){return new Vl(this.l,this.j)},Nl.prototype.i=function(u){return function(){return u}}({});function Vl(u,f){Ge.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(Vl,Ge),t=Vl.prototype,t.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,Ao(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Co(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ao(this)),this.g&&(this.readyState=3,Ao(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;nv(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function nv(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?Co(this):Ao(this),this.readyState==3&&nv(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Co(this))},t.Qa=function(u){this.g&&(this.response=u,Co(this))},t.ga=function(){this.g&&Co(this)};function Co(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ao(u)}t.setRequestHeader=function(u,f){this.u.append(u,f)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=f.next();return u.join(`\r
`)};function Ao(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Vl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function rv(u){let f="";return F(u,function(m,T){f+=T,f+=":",f+=m,f+=`\r
`}),f}function Kh(u,f,m){e:{for(T in m){var T=!1;break e}T=!0}T||(m=rv(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):Ce(u,f,m))}function Oe(u){Ge.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(Oe,Ge);var TP=/^https?$/i,SP=["POST","PUT"];t=Oe.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,f,m,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Uh.g(),this.v=this.o?Dy(this.o):Dy(Uh),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(j){iv(this,j);return}if(u=m||"",m=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var O in T)m.set(O,T[O]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const j of T.keys())m.set(j,T.get(j));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(m.keys()).find(j=>j.toLowerCase()=="content-type"),O=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(SP,f,void 0))||T||O||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,W]of m)this.g.setRequestHeader(j,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{av(this),this.u=!0,this.g.send(u),this.u=!1}catch(j){iv(this,j)}};function iv(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,sv(u),Ml(u)}function sv(u){u.A||(u.A=!0,ot(u,"complete"),ot(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,ot(this,"complete"),ot(this,"abort"),Ml(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ml(this,!0)),Oe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ov(this):this.bb())},t.bb=function(){ov(this)};function ov(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Hn(u)!=4||u.Z()!=2)){if(u.u&&Hn(u)==4)mo(u.Ea,0,u);else if(ot(u,"readystatechange"),Hn(u)==4){u.h=!1;try{const W=u.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var T;if(T=W===0){var O=String(u.D).match(Yy)[1]||null;!O&&a.self&&a.self.location&&(O=a.self.location.protocol.slice(0,-1)),T=!TP.test(O?O.toLowerCase():"")}m=T}if(m)ot(u,"complete"),ot(u,"success");else{u.m=6;try{var j=2<Hn(u)?u.g.statusText:""}catch{j=""}u.l=j+" ["+u.Z()+"]",sv(u)}}finally{Ml(u)}}}}function Ml(u,f){if(u.g){av(u);const m=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||ot(u,"ready");try{m.onreadystatechange=T}catch{}}}function av(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Hn(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Hn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),tP(f)}};function lv(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function IP(u){const f={};u=(u.g&&2<=Hn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(v(u[T]))continue;var m=D(u[T]);const O=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const j=f[O]||[];f[O]=j,j.push(m)}I(f,function(T){return T.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Po(u,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||f}function uv(u){this.Aa=0,this.i=[],this.j=new Eo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Po("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Po("baseRetryDelayMs",5e3,u),this.cb=Po("retryDelaySeedMs",1e4,u),this.Wa=Po("forwardChannelMaxRetries",2,u),this.wa=Po("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Wy(u&&u.concurrentRequestLimit),this.Da=new wP,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=uv.prototype,t.la=8,t.G=1,t.connect=function(u,f,m,T){Pt(0),this.W=u,this.H=f||{},m&&T!==void 0&&(this.H.OSID=m,this.H.OAID=T),this.F=this.X,this.I=vv(this,null,this.W),Ol(this)};function Gh(u){if(cv(u),u.G==3){var f=u.U++,m=Wn(u.I);if(Ce(m,"SID",u.K),Ce(m,"RID",f),Ce(m,"TYPE","terminate"),Ro(u,m),f=new vr(u,u.j,f),f.L=2,f.v=Dl(Wn(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=f.v,m=!0),m||(f.g=_v(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Rl(f)}yv(u)}function Ll(u){u.g&&(Yh(u),u.g.cancel(),u.g=null)}function cv(u){Ll(u),u.u&&(a.clearTimeout(u.u),u.u=null),Fl(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Ol(u){if(!Hy(u.h)&&!u.s){u.s=!0;var f=u.Ga;ve||V(),$||(ve(),$=!0),X.add(f,u),u.B=0}}function xP(u,f){return qy(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=wo(p(u.Ga,u,f),gv(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const O=new vr(this,this.j,u);let j=this.o;if(this.S&&(j?(j=w(j),P(j,this.S)):j=this.S),this.m!==null||this.O||(O.H=j,j=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var T=this.i[m];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(f+=T,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=dv(this,O,f),m=Wn(this.I),Ce(m,"RID",u),Ce(m,"CVER",22),this.D&&Ce(m,"X-HTTP-Session-Id",this.D),Ro(this,m),j&&(this.O?f="headers="+encodeURIComponent(String(rv(j)))+"&"+f:this.m&&Kh(m,this.m,j)),qh(this.h,O),this.Ua&&Ce(m,"TYPE","init"),this.P?(Ce(m,"$req",f),Ce(m,"SID","null"),O.T=!0,zh(O,m,null)):zh(O,m,f),this.G=2}}else this.G==3&&(u?hv(this,u):this.i.length==0||Hy(this.h)||hv(this))};function hv(u,f){var m;f?m=f.l:m=u.U++;const T=Wn(u.I);Ce(T,"SID",u.K),Ce(T,"RID",m),Ce(T,"AID",u.T),Ro(u,T),u.m&&u.o&&Kh(T,u.m,u.o),m=new vr(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),f&&(u.i=f.D.concat(u.i)),f=dv(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),qh(u.h,m),zh(m,T,f)}function Ro(u,f){u.H&&F(u.H,function(m,T){Ce(f,T,m)}),u.l&&Qy({},function(m,T){Ce(f,T,m)})}function dv(u,f,m){m=Math.min(u.i.length,m);var T=u.l?p(u.l.Na,u.l,u):null;e:{var O=u.i;let j=-1;for(;;){const W=["count="+m];j==-1?0<m?(j=O[0].g,W.push("ofs="+j)):j=0:W.push("ofs="+j);let Te=!0;for(let at=0;at<m;at++){let me=O[at].g;const gt=O[at].map;if(me-=j,0>me)j=Math.max(0,O[at].g-100),Te=!1;else try{EP(gt,W,"req"+me+"_")}catch{T&&T(gt)}}if(Te){T=W.join("&");break e}}}return u=u.i.splice(0,m),f.D=u,T}function fv(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;ve||V(),$||(ve(),$=!0),X.add(f,u),u.v=0}}function Qh(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=wo(p(u.Fa,u),gv(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,pv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=wo(p(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Pt(10),Ll(this),pv(this))};function Yh(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function pv(u){u.g=new vr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=Wn(u.qa);Ce(f,"RID","rpc"),Ce(f,"SID",u.K),Ce(f,"AID",u.T),Ce(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ce(f,"TO",u.ja),Ce(f,"TYPE","xmlhttp"),Ro(u,f),u.m&&u.o&&Kh(f,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=Dl(Wn(f)),m.m=null,m.P=!0,By(m,u)}t.Za=function(){this.C!=null&&(this.C=null,Ll(this),Qh(this),Pt(19))};function Fl(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function mv(u,f){var m=null;if(u.g==f){Fl(u),Yh(u),u.g=null;var T=2}else if(Hh(u.h,f))m=f.D,Ky(u.h,f),T=1;else return;if(u.G!=0){if(f.o)if(T==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var O=u.B;T=Cl(),ot(T,new Oy(T,m)),Ol(u)}else fv(u);else if(O=f.s,O==3||O==0&&0<f.X||!(T==1&&xP(u,f)||T==2&&Qh(u)))switch(m&&0<m.length&&(f=u.h,f.i=f.i.concat(m)),O){case 1:di(u,5);break;case 4:di(u,10);break;case 3:di(u,6);break;default:di(u,2)}}}function gv(u,f){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*f}function di(u,f){if(u.j.info("Error code "+f),f==2){var m=p(u.fb,u),T=u.Xa;const O=!T;T=new hi(T||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||kl(T,"https"),Dl(T),O?vP(T.toString(),m):_P(T.toString(),m)}else Pt(2);u.G=0,u.l&&u.l.sa(f),yv(u),cv(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Pt(2)):(this.j.info("Failed to ping google.com"),Pt(1))};function yv(u){if(u.G=0,u.ka=[],u.l){const f=Gy(u.h);(f.length!=0||u.i.length!=0)&&(x(u.ka,f),x(u.ka,u.i),u.h.i.length=0,S(u.i),u.i.length=0),u.l.ra()}}function vv(u,f,m){var T=m instanceof hi?Wn(m):new hi(m);if(T.g!="")f&&(T.g=f+"."+T.g),bl(T,T.s);else{var O=a.location;T=O.protocol,f=f?f+"."+O.hostname:O.hostname,O=+O.port;var j=new hi(null);T&&kl(j,T),f&&(j.g=f),O&&bl(j,O),m&&(j.l=m),T=j}return m=u.D,f=u.ya,m&&f&&Ce(T,m,f),Ce(T,"VER",u.la),Ro(u,T),T}function _v(u,f,m){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new Oe(new Nl({eb:m})):new Oe(u.pa),f.Ha(u.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function wv(){}t=wv.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function jl(){}jl.prototype.g=function(u,f){return new Kt(u,f)};function Kt(u,f){Ge.call(this),this.g=new uv(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!v(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!v(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new Xi(this)}_(Kt,Ge),Kt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Kt.prototype.close=function(){Gh(this.g)},Kt.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=Lh(u),u=m);f.i.push(new lP(f.Ya++,u)),f.G==3&&Ol(f)},Kt.prototype.N=function(){this.g.l=null,delete this.j,Gh(this.g),delete this.g,Kt.aa.N.call(this)};function Ev(u){Fh.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const m in f){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}_(Ev,Fh);function Tv(){jh.call(this),this.status=1}_(Tv,jh);function Xi(u){this.g=u}_(Xi,wv),Xi.prototype.ua=function(){ot(this.g,"a")},Xi.prototype.ta=function(u){ot(this.g,new Ev(u))},Xi.prototype.sa=function(u){ot(this.g,new Tv)},Xi.prototype.ra=function(){ot(this.g,"b")},jl.prototype.createWebChannel=jl.prototype.g,Kt.prototype.send=Kt.prototype.o,Kt.prototype.open=Kt.prototype.m,Kt.prototype.close=Kt.prototype.close,XI=function(){return new jl},YI=function(){return Cl()},QI=ui,np={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Al.NO_ERROR=0,Al.TIMEOUT=8,Al.HTTP_ERROR=6,Vu=Al,Fy.COMPLETE="complete",GI=Fy,Ny.EventType=vo,vo.OPEN="a",vo.CLOSE="b",vo.ERROR="c",vo.MESSAGE="d",Ge.prototype.listen=Ge.prototype.K,Ko=Ny,Oe.prototype.listenOnce=Oe.prototype.L,Oe.prototype.getLastError=Oe.prototype.Ka,Oe.prototype.getLastErrorCode=Oe.prototype.Ba,Oe.prototype.getStatus=Oe.prototype.Z,Oe.prototype.getResponseJson=Oe.prototype.Oa,Oe.prototype.getResponseText=Oe.prototype.oa,Oe.prototype.send=Oe.prototype.ea,Oe.prototype.setWithCredentials=Oe.prototype.Ha,KI=Oe}).apply(typeof ou<"u"?ou:typeof self<"u"?self:typeof window<"u"?window:{});const d0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Et.UNAUTHENTICATED=new Et(null),Et.GOOGLE_CREDENTIALS=new Et("google-credentials-uid"),Et.FIRST_PARTY=new Et("first-party-uid"),Et.MOCK_USER=new Et("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji=new Gm("@firebase/firestore");function jo(){return ji.logLevel}function Q(t,...e){if(ji.logLevel<=he.DEBUG){const n=e.map(lg);ji.debug(`Firestore (${oo}): ${t}`,...n)}}function cr(t,...e){if(ji.logLevel<=he.ERROR){const n=e.map(lg);ji.error(`Firestore (${oo}): ${t}`,...n)}}function zs(t,...e){if(ji.logLevel<=he.WARN){const n=e.map(lg);ji.warn(`Firestore (${oo}): ${t}`,...n)}}function lg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t="Unexpected state"){const e=`FIRESTORE (${oo}) INTERNAL ASSERTION FAILED: `+t;throw cr(e),new Error(e)}function pe(t,e){t||Z()}function oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends yr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Et.UNAUTHENTICATED))}shutdown(){}}class hM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class dM{constructor(e){this.t=e,this.currentUser=Et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){pe(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Ln;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ln,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ln)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pe(typeof r.accessToken=="string"),new JI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pe(e===null||typeof e=="string"),new Et(e)}}class fM{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Et.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class pM{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new fM(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Et.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class mM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gM{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){pe(this.o===void 0);const r=s=>{s.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(pe(typeof n.token=="string"),this.R=n.token,new mM(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=yM(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ge(t,e){return t<e?-1:t>e?1:0}function $s(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new q(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xe.fromMillis(Date.now())}static fromDate(e){return Xe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Xe(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.timestamp=e}static fromTimestamp(e){return new re(e)}static min(){return new re(new Xe(0,0))}static max(){return new re(new Xe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e,n,r){n===void 0?n=0:n>e.length&&Z(),r===void 0?r=e.length-n:r>e.length-n&&Z(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Oa.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Oa?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Se extends Oa{construct(e,n,r){return new Se(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new q(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Se(n)}static emptyPath(){return new Se([])}}const vM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ht extends Oa{construct(e,n,r){return new ht(e,n,r)}static isValidIdentifier(e){return vM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ht.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ht(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new q(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new q(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new q(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new q(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ht(n)}static emptyPath(){return new ht([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(Se.fromString(e))}static fromName(e){return new J(Se.fromString(e).popFirst(5))}static empty(){return new J(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Se.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new Se(e.slice()))}}function _M(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=re.fromTimestamp(r===1e9?new Xe(n+1,0):new Xe(n,r));return new Xr(i,J.empty(),e)}function wM(t){return new Xr(t.readTime,t.key,-1)}class Xr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Xr(re.min(),J.empty(),-1)}static max(){return new Xr(re.max(),J.empty(),-1)}}function EM(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:ge(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class SM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ul(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==TM)throw t;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(i=>i?B.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new B((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new B((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function IM(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function cl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}ug.oe=-1;function hl(t){return t==null}function xc(t){return t===0&&1/t==-1/0}function xM(t){return typeof t=="number"&&Number.isInteger(t)&&!xc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Hi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ex(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e,n){this.comparator=e,this.root=n||ct.EMPTY}insert(e,n){return new Le(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ct.BLACK,null,null))}remove(e){return new Le(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ct.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new au(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new au(this.root,e,this.comparator,!1)}getReverseIterator(){return new au(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new au(this.root,e,this.comparator,!0)}}class au{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ct{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ct.RED,this.left=i??ct.EMPTY,this.right=s??ct.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new ct(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ct.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ct.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Z();const e=this.left.check();if(e!==this.right.check())throw Z();return e+(this.isRed()?0:1)}}ct.EMPTY=null,ct.RED=!0,ct.BLACK=!1;ct.EMPTY=new class{constructor(){this.size=0}get key(){throw Z()}get value(){throw Z()}get color(){throw Z()}get left(){throw Z()}get right(){throw Z()}copy(e,n,r,i,s){return this}insert(e,n,r){return new ct(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.comparator=e,this.data=new Le(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new p0(this.data.getIterator())}getIteratorFrom(e){return new p0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ft)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ft(this.comparator);return n.data=e,n}}class p0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.fields=e,e.sort(ht.comparator)}static empty(){return new Yt([])}unionWith(e){let n=new ft(ht.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Yt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return $s(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new tx("Invalid base64 string: "+s):s}}(e);return new mt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new mt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mt.EMPTY_BYTE_STRING=new mt("");const CM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jr(t){if(pe(!!t),typeof t=="string"){let e=0;const n=CM.exec(t);if(pe(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ze(t.seconds),nanos:ze(t.nanos)}}function ze(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ui(t){return typeof t=="string"?mt.fromBase64String(t):mt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function hg(t){const e=t.mapValue.fields.__previous_value__;return cg(e)?hg(e):e}function Fa(t){const e=Jr(t.mapValue.fields.__local_write_time__.timestampValue);return new Xe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class ja{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ja("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ja&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lu={mapValue:{}};function Bi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?cg(t)?4:RM(t)?9007199254740991:PM(t)?10:11:Z()}function Bn(t,e){if(t===e)return!0;const n=Bi(t);if(n!==Bi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Fa(t).isEqual(Fa(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Jr(i.timestampValue),a=Jr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ui(i.bytesValue).isEqual(Ui(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return ze(i.geoPointValue.latitude)===ze(s.geoPointValue.latitude)&&ze(i.geoPointValue.longitude)===ze(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ze(i.integerValue)===ze(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=ze(i.doubleValue),a=ze(s.doubleValue);return o===a?xc(o)===xc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return $s(t.arrayValue.values||[],e.arrayValue.values||[],Bn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(f0(o)!==f0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Bn(o[l],a[l])))return!1;return!0}(t,e);default:return Z()}}function Ua(t,e){return(t.values||[]).find(n=>Bn(n,e))!==void 0}function Ws(t,e){if(t===e)return 0;const n=Bi(t),r=Bi(e);if(n!==r)return ge(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ge(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=ze(s.integerValue||s.doubleValue),l=ze(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return m0(t.timestampValue,e.timestampValue);case 4:return m0(Fa(t),Fa(e));case 5:return ge(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Ui(s),l=Ui(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=ge(a[c],l[c]);if(h!==0)return h}return ge(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ge(ze(s.latitude),ze(o.latitude));return a!==0?a:ge(ze(s.longitude),ze(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return g0(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,h;const d=s.fields||{},p=o.fields||{},g=(a=d.value)===null||a===void 0?void 0:a.arrayValue,_=(l=p.value)===null||l===void 0?void 0:l.arrayValue,S=ge(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((h=_==null?void 0:_.values)===null||h===void 0?void 0:h.length)||0);return S!==0?S:g0(g,_)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===lu.mapValue&&o===lu.mapValue)return 0;if(s===lu.mapValue)return 1;if(o===lu.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const p=ge(l[d],h[d]);if(p!==0)return p;const g=Ws(a[l[d]],c[h[d]]);if(g!==0)return g}return ge(l.length,h.length)}(t.mapValue,e.mapValue);default:throw Z()}}function m0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ge(t,e);const n=Jr(t),r=Jr(e),i=ge(n.seconds,r.seconds);return i!==0?i:ge(n.nanos,r.nanos)}function g0(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Ws(n[i],r[i]);if(s)return s}return ge(n.length,r.length)}function Hs(t){return rp(t)}function rp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Jr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ui(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=rp(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${rp(n.fields[o])}`;return i+"}"}(t.mapValue):Z()}function y0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ip(t){return!!t&&"integerValue"in t}function dg(t){return!!t&&"arrayValue"in t}function v0(t){return!!t&&"nullValue"in t}function _0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Mu(t){return!!t&&"mapValue"in t}function PM(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function aa(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Hi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=aa(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=aa(t.arrayValue.values[n]);return e}return Object.assign({},t)}function RM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.value=e}static empty(){return new bt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Mu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=aa(n)}setAll(e){let n=ht.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=aa(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Mu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Bn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Mu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Hi(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new bt(aa(this.value))}}function nx(t){const e=[];return Hi(t.fields,(n,r)=>{const i=new ht([n]);if(Mu(r)){const s=nx(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Yt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new it(e,0,re.min(),re.min(),re.min(),bt.empty(),0)}static newFoundDocument(e,n,r,i){return new it(e,1,n,re.min(),r,i,0)}static newNoDocument(e,n){return new it(e,2,n,re.min(),re.min(),bt.empty(),0)}static newUnknownDocument(e,n){return new it(e,3,n,re.min(),re.min(),bt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof it&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new it(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e,n){this.position=e,this.inclusive=n}}function w0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=Ws(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function E0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Bn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,n="asc"){this.field=e,this.dir=n}}function kM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{}class Ke extends rx{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new DM(e,n,r):n==="array-contains"?new MM(e,r):n==="in"?new LM(e,r):n==="not-in"?new OM(e,r):n==="array-contains-any"?new FM(e,r):new Ke(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new NM(e,r):new VM(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ws(n,this.value)):n!==null&&Bi(this.value)===Bi(n)&&this.matchesComparison(Ws(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Cn extends rx{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Cn(e,n)}matches(e){return ix(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ix(t){return t.op==="and"}function sx(t){return bM(t)&&ix(t)}function bM(t){for(const e of t.filters)if(e instanceof Cn)return!1;return!0}function sp(t){if(t instanceof Ke)return t.field.canonicalString()+t.op.toString()+Hs(t.value);if(sx(t))return t.filters.map(e=>sp(e)).join(",");{const e=t.filters.map(n=>sp(n)).join(",");return`${t.op}(${e})`}}function ox(t,e){return t instanceof Ke?function(r,i){return i instanceof Ke&&r.op===i.op&&r.field.isEqual(i.field)&&Bn(r.value,i.value)}(t,e):t instanceof Cn?function(r,i){return i instanceof Cn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&ox(o,i.filters[a]),!0):!1}(t,e):void Z()}function ax(t){return t instanceof Ke?function(n){return`${n.field.canonicalString()} ${n.op} ${Hs(n.value)}`}(t):t instanceof Cn?function(n){return n.op.toString()+" {"+n.getFilters().map(ax).join(" ,")+"}"}(t):"Filter"}class DM extends Ke{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class NM extends Ke{constructor(e,n){super(e,"in",n),this.keys=lx("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class VM extends Ke{constructor(e,n){super(e,"not-in",n),this.keys=lx("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function lx(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class MM extends Ke{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return dg(n)&&Ua(n.arrayValue,this.value)}}class LM extends Ke{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ua(this.value.arrayValue,n)}}class OM extends Ke{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ua(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ua(this.value.arrayValue,n)}}class FM extends Ke{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!dg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ua(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function T0(t,e=null,n=[],r=[],i=null,s=null,o=null){return new jM(t,e,n,r,i,s,o)}function fg(t){const e=oe(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>sp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),hl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Hs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Hs(r)).join(",")),e.ue=n}return e.ue}function pg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!kM(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!ox(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!E0(t.startAt,e.startAt)&&E0(t.endAt,e.endAt)}function op(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function UM(t,e,n,r,i,s,o,a){return new ao(t,e,n,r,i,s,o,a)}function uh(t){return new ao(t)}function S0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ux(t){return t.collectionGroup!==null}function la(t){const e=oe(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ft(ht.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Ba(s,r))}),n.has(ht.keyField().canonicalString())||e.ce.push(new Ba(ht.keyField(),r))}return e.ce}function On(t){const e=oe(t);return e.le||(e.le=BM(e,la(t))),e.le}function BM(t,e){if(t.limitType==="F")return T0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Ba(i.field,s)});const n=t.endAt?new Cc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Cc(t.startAt.position,t.startAt.inclusive):null;return T0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ap(t,e){const n=t.filters.concat([e]);return new ao(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function lp(t,e,n){return new ao(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ch(t,e){return pg(On(t),On(e))&&t.limitType===e.limitType}function cx(t){return`${fg(On(t))}|lt:${t.limitType}`}function es(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>ax(i)).join(", ")}]`),hl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Hs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Hs(i)).join(",")),`Target(${r})`}(On(t))}; limitType=${t.limitType})`}function hh(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):J.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of la(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=w0(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,la(r),i)||r.endAt&&!function(o,a,l){const c=w0(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,la(r),i))}(t,e)}function zM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function hx(t){return(e,n)=>{let r=!1;for(const i of la(t)){const s=$M(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function $M(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Ws(l,c):Z()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Z()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Hi(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return ex(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM=new Le(J.comparator);function hr(){return WM}const dx=new Le(J.comparator);function Go(...t){let e=dx;for(const n of t)e=e.insert(n.key,n);return e}function fx(t){let e=dx;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Si(){return ua()}function px(){return ua()}function ua(){return new lo(t=>t.toString(),(t,e)=>t.isEqual(e))}const HM=new Le(J.comparator),qM=new ft(J.comparator);function ce(...t){let e=qM;for(const n of t)e=e.add(n);return e}const KM=new ft(ge);function GM(){return KM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xc(e)?"-0":e}}function mx(t){return{integerValue:""+t}}function QM(t,e){return xM(e)?mx(e):mg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(){this._=void 0}}function YM(t,e,n){return t instanceof za?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&cg(s)&&(s=hg(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof $a?yx(t,e):t instanceof Wa?vx(t,e):function(i,s){const o=gx(i,s),a=I0(o)+I0(i.Pe);return ip(o)&&ip(i.Pe)?mx(a):mg(i.serializer,a)}(t,e)}function XM(t,e,n){return t instanceof $a?yx(t,e):t instanceof Wa?vx(t,e):n}function gx(t,e){return t instanceof Ac?function(r){return ip(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class za extends dh{}class $a extends dh{constructor(e){super(),this.elements=e}}function yx(t,e){const n=_x(e);for(const r of t.elements)n.some(i=>Bn(i,r))||n.push(r);return{arrayValue:{values:n}}}class Wa extends dh{constructor(e){super(),this.elements=e}}function vx(t,e){let n=_x(e);for(const r of t.elements)n=n.filter(i=>!Bn(i,r));return{arrayValue:{values:n}}}class Ac extends dh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function I0(t){return ze(t.integerValue||t.doubleValue)}function _x(t){return dg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e,n){this.field=e,this.transform=n}}function ZM(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof $a&&i instanceof $a||r instanceof Wa&&i instanceof Wa?$s(r.elements,i.elements,Bn):r instanceof Ac&&i instanceof Ac?Bn(r.Pe,i.Pe):r instanceof za&&i instanceof za}(t.transform,e.transform)}class e2{constructor(e,n){this.version=e,this.transformResults=n}}class St{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new St}static exists(e){return new St(void 0,e)}static updateTime(e){return new St(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Lu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class fh{}function wx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ph(t.key,St.none()):new dl(t.key,t.data,St.none());{const n=t.data,r=bt.empty();let i=new ft(ht.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new si(t.key,r,new Yt(i.toArray()),St.none())}}function t2(t,e,n){t instanceof dl?function(i,s,o){const a=i.value.clone(),l=C0(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof si?function(i,s,o){if(!Lu(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=C0(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(Ex(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ca(t,e,n,r){return t instanceof dl?function(s,o,a,l){if(!Lu(s.precondition,o))return a;const c=s.value.clone(),h=A0(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof si?function(s,o,a,l){if(!Lu(s.precondition,o))return a;const c=A0(s.fieldTransforms,l,o),h=o.data;return h.setAll(Ex(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return Lu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function n2(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=gx(r.transform,i||null);s!=null&&(n===null&&(n=bt.empty()),n.set(r.field,s))}return n||null}function x0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&$s(r,i,(s,o)=>ZM(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class dl extends fh{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class si extends fh{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Ex(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function C0(t,e,n){const r=new Map;pe(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,XM(o,a,n[i]))}return r}function A0(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,YM(s,o,e))}return r}class ph extends fh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Tx extends fh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&t2(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ca(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ca(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=px();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=wx(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&$s(this.mutations,e.mutations,(n,r)=>x0(n,r))&&$s(this.baseMutations,e.baseMutations,(n,r)=>x0(n,r))}}class gg{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){pe(e.mutations.length===r.length);let i=function(){return HM}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new gg(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We,de;function Sx(t){switch(t){default:return Z();case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0}}function Ix(t){if(t===void 0)return cr("GRPC error has no .code"),U.UNKNOWN;switch(t){case We.OK:return U.OK;case We.CANCELLED:return U.CANCELLED;case We.UNKNOWN:return U.UNKNOWN;case We.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case We.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case We.INTERNAL:return U.INTERNAL;case We.UNAVAILABLE:return U.UNAVAILABLE;case We.UNAUTHENTICATED:return U.UNAUTHENTICATED;case We.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case We.NOT_FOUND:return U.NOT_FOUND;case We.ALREADY_EXISTS:return U.ALREADY_EXISTS;case We.PERMISSION_DENIED:return U.PERMISSION_DENIED;case We.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case We.ABORTED:return U.ABORTED;case We.OUT_OF_RANGE:return U.OUT_OF_RANGE;case We.UNIMPLEMENTED:return U.UNIMPLEMENTED;case We.DATA_LOSS:return U.DATA_LOSS;default:return Z()}}(de=We||(We={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2=new Ri([4294967295,4294967295],0);function P0(t){const e=o2().encode(t),n=new qI;return n.update(e),new Uint8Array(n.digest())}function R0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ri([n,r],0),new Ri([i,s],0)]}class yg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Qo(`Invalid padding: ${n}`);if(r<0)throw new Qo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Qo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Qo(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ri.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Ri.fromNumber(r)));return i.compare(a2)===1&&(i=new Ri([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=P0(e),[r,i]=R0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new yg(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=P0(e),[r,i]=R0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Qo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,fl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new mh(re.min(),i,new Le(ge),hr(),ce())}}class fl{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new fl(r,n,ce(),ce(),ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class xx{constructor(e,n){this.targetId=e,this.me=n}}class Cx{constructor(e,n,r=mt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class k0{constructor(){this.fe=0,this.ge=D0(),this.pe=mt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ce(),n=ce(),r=ce();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Z()}}),new fl(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=D0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,pe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class l2{constructor(e){this.Le=e,this.Be=new Map,this.ke=hr(),this.qe=b0(),this.Qe=new Le(ge)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Z()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(op(s))if(r===0){const o=new J(s.path);this.Ue(n,o,it.newNoDocument(o,re.min()))}else pe(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Ui(r).toUint8Array()}catch(l){if(l instanceof tx)return zs("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new yg(o,i,s)}catch(l){return zs(l instanceof Qo?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&op(a.target)){const l=new J(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,it.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=ce();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new mh(e,n,this.Qe,this.ke,r);return this.ke=hr(),this.qe=b0(),this.Qe=new Le(ge),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new k0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ft(ge),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Q("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new k0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function b0(){return new Le(J.comparator)}function D0(){return new Le(J.comparator)}const u2={asc:"ASCENDING",desc:"DESCENDING"},c2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},h2={and:"AND",or:"OR"};class d2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function up(t,e){return t.useProto3Json||hl(e)?e:{value:e}}function Pc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ax(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function f2(t,e){return Pc(t,e.toTimestamp())}function Jt(t){return pe(!!t),re.fromTimestamp(function(n){const r=Jr(n);return new Xe(r.seconds,r.nanos)}(t))}function vg(t,e){return cp(t,e).canonicalString()}function cp(t,e){const n=function(i){return new Se(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Px(t){const e=Se.fromString(t);return pe(Vx(e)),e}function Rc(t,e){return vg(t.databaseId,e.path)}function ha(t,e){const n=Px(e);if(n.get(1)!==t.databaseId.projectId)throw new q(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(kx(n))}function Rx(t,e){return vg(t.databaseId,e)}function p2(t){const e=Px(t);return e.length===4?Se.emptyPath():kx(e)}function hp(t){return new Se(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function kx(t){return pe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function N0(t,e,n){return{name:Rc(t,e),fields:n.value.mapValue.fields}}function m2(t,e){return"found"in e?function(r,i){pe(!!i.found),i.found.name,i.found.updateTime;const s=ha(r,i.found.name),o=Jt(i.found.updateTime),a=i.found.createTime?Jt(i.found.createTime):re.min(),l=new bt({mapValue:{fields:i.found.fields}});return it.newFoundDocument(s,o,a,l)}(t,e):"missing"in e?function(r,i){pe(!!i.missing),pe(!!i.readTime);const s=ha(r,i.missing),o=Jt(i.readTime);return it.newNoDocument(s,o)}(t,e):Z()}function g2(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Z()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(pe(h===void 0||typeof h=="string"),mt.fromBase64String(h||"")):(pe(h===void 0||h instanceof Buffer||h instanceof Uint8Array),mt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?U.UNKNOWN:Ix(c.code);return new q(h,c.message||"")}(o);n=new Cx(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ha(t,r.document.name),s=Jt(r.document.updateTime),o=r.document.createTime?Jt(r.document.createTime):re.min(),a=new bt({mapValue:{fields:r.document.fields}}),l=it.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Ou(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ha(t,r.document),s=r.readTime?Jt(r.readTime):re.min(),o=it.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Ou([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ha(t,r.document),s=r.removedTargetIds||[];n=new Ou([],s,i,null)}else{if(!("filter"in e))return Z();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new s2(i,s),a=r.targetId;n=new xx(a,o)}}return n}function bx(t,e){let n;if(e instanceof dl)n={update:N0(t,e.key,e.value)};else if(e instanceof ph)n={delete:Rc(t,e.key)};else if(e instanceof si)n={update:N0(t,e.key,e.data),updateMask:x2(e.fieldMask)};else{if(!(e instanceof Tx))return Z();n={verify:Rc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof za)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof $a)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Wa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ac)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Z()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:f2(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Z()}(t,e.precondition)),n}function y2(t,e){return t&&t.length>0?(pe(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Jt(i.updateTime):Jt(s);return o.isEqual(re.min())&&(o=Jt(s)),new e2(o,i.transformResults||[])}(n,e))):[]}function v2(t,e){return{documents:[Rx(t,e.path)]}}function _2(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Rx(t,i);const s=function(c){if(c.length!==0)return Nx(Cn.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:ts(p.field),direction:T2(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=up(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function w2(t){let e=p2(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){pe(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const p=Dx(d);return p instanceof Cn&&sx(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(p=>function(_){return new Ba(ns(_.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(d){let p;return p=typeof d=="object"?d.value:d,hl(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(d){const p=!!d.before,g=d.values||[];return new Cc(g,p)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const p=!d.before,g=d.values||[];return new Cc(g,p)}(n.endAt)),UM(e,i,o,s,a,"F",l,c)}function E2(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Dx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ns(n.unaryFilter.field);return Ke.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ns(n.unaryFilter.field);return Ke.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ns(n.unaryFilter.field);return Ke.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ns(n.unaryFilter.field);return Ke.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Z()}}(t):t.fieldFilter!==void 0?function(n){return Ke.create(ns(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Z()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Cn.create(n.compositeFilter.filters.map(r=>Dx(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Z()}}(n.compositeFilter.op))}(t):Z()}function T2(t){return u2[t]}function S2(t){return c2[t]}function I2(t){return h2[t]}function ts(t){return{fieldPath:t.canonicalString()}}function ns(t){return ht.fromServerFormat(t.fieldPath)}function Nx(t){return t instanceof Ke?function(n){if(n.op==="=="){if(_0(n.value))return{unaryFilter:{field:ts(n.field),op:"IS_NAN"}};if(v0(n.value))return{unaryFilter:{field:ts(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(_0(n.value))return{unaryFilter:{field:ts(n.field),op:"IS_NOT_NAN"}};if(v0(n.value))return{unaryFilter:{field:ts(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ts(n.field),op:S2(n.op),value:n.value}}}(t):t instanceof Cn?function(n){const r=n.getFilters().map(i=>Nx(i));return r.length===1?r[0]:{compositeFilter:{op:I2(n.op),filters:r}}}(t):Z()}function x2(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Vx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e,n,r,i,s=re.min(),o=re.min(),a=mt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Vr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Vr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e){this.ct=e}}function A2(t){const e=w2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?lp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(){this.un=new R2}addToCollectionParentIndex(e,n){return this.un.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(Xr.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(Xr.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class R2{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ft(Se.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ft(Se.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new qs(0)}static kn(){return new qs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(){this.changes=new lo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,it.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ca(r.mutation,i,Yt.empty(),Xe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ce()){const i=Si();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Go();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Si();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ce()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=hr();const o=ua(),a=function(){return ua()}();return n.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof si)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),ca(h.mutation,c,h.mutation.getFieldMask(),Xe.now())):o.set(c.key,Yt.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new b2(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=ua();let i=new Le((o,a)=>o-a),s=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||Yt.empty();h=a.applyToLocalView(c,h),r.set(l,h);const d=(i.get(a.batchId)||ce()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=px();h.forEach(p=>{if(!s.has(p)){const g=wx(n.get(p),r.get(p));g!==null&&d.set(p,g),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return B.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ux(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):B.resolve(Si());let a=-1,l=s;return o.next(c=>B.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?B.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,ce())).next(h=>({batchId:a,changes:fx(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let i=Go();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Go();return this.indexManager.getCollectionParents(e,s).next(a=>B.forEach(a,l=>{const c=function(d,p){return new ao(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,it.newInvalidDocument(h)))});let a=Go();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&ca(h.mutation,c,Yt.empty(),Xe.now()),hh(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return B.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Jt(i.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:A2(i.bundledQuery),readTime:Jt(i.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(){this.overlays=new Le(J.comparator),this.Ir=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Si();return B.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const i=Si(),s=n.length+1,o=new J(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return B.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Le((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=Si(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Si(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return B.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new i2(n,r));let s=this.Ir.get(n);s===void 0&&(s=ce(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(){this.sessionToken=mt.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(){this.Tr=new ft(nt.Er),this.dr=new ft(nt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new nt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new nt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new J(new Se([])),r=new nt(n,e),i=new nt(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new J(new Se([])),r=new nt(n,e),i=new nt(n,e+1);let s=ce();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new nt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class nt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return J.comparator(e.key,n.key)||ge(e.wr,n.wr)}static Ar(e,n){return ge(e.wr,n.wr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ft(nt.Er)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new r2(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new nt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,n){return B.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return B.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new nt(n,0),i=new nt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),B.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ft(ge);return n.forEach(i=>{const s=new nt(i,0),o=new nt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),B.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;J.isDocumentKey(s)||(s=s.child(""));const o=new nt(new J(s),0);let a=new ft(ge);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),B.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){pe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return B.forEach(n.mutations,i=>{const s=new nt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new nt(n,0),i=this.br.firstAfterOrEqual(r);return B.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e){this.Mr=e,this.docs=function(){return new Le(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():it.newInvalidDocument(n))}getEntries(e,n){let r=hr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():it.newInvalidDocument(i))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=hr();const o=n.path,a=new J(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||EM(wM(h),r)<=0||(i.has(h.key)||hh(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return B.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Z()}Or(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new F2(this)}getSize(e){return B.resolve(this.size)}}class F2 extends k2{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e){this.persistence=e,this.Nr=new lo(n=>fg(n),pg),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.Lr=0,this.Br=new _g,this.targetCount=0,this.kr=qs.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),B.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new qs(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Kn(n),B.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),B.waitFor(s).next(()=>i)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),B.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e,n){this.qr={},this.overlays={},this.Qr=new ug(0),this.Kr=!1,this.Kr=!0,this.$r=new M2,this.referenceDelegate=e(this),this.Ur=new j2(this),this.indexManager=new P2,this.remoteDocumentCache=function(i){return new O2(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new C2(n),this.Gr=new N2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new V2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new L2(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Q("MemoryPersistence","Starting transaction:",e);const i=new B2(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return B.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class B2 extends SM{constructor(e){super(),this.currentSequenceNumber=e}}class wg{constructor(e){this.persistence=e,this.Jr=new _g,this.Yr=null}static Zr(e){return new wg(e)}get Xr(){if(this.Yr)return this.Yr;throw Z()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),B.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.Xr,r=>{const i=J.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,re.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return B.or([()=>B.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ce(),i=ce();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Eg(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Wb()?8:IM(At())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new z2;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(jo()<=he.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",es(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),B.resolve()):(jo()<=he.DEBUG&&Q("QueryEngine","Query:",es(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(jo()<=he.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",es(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,On(n))):B.resolve())}Yi(e,n){if(S0(n))return B.resolve(null);let r=On(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=lp(n,null,"F"),r=On(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ce(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,lp(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,i){return S0(n)||i.isEqual(re.min())?B.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?B.resolve(null):(jo()<=he.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),es(n)),this.rs(e,o,n,_M(i,-1)).next(a=>a))})}ts(e,n){let r=new ft(hx(e));return n.forEach((i,s)=>{hh(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return jo()<=he.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",es(n)),this.Ji.getDocumentsMatchingQuery(e,n,Xr.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Le(ge),this._s=new lo(s=>fg(s),pg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new D2(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function H2(t,e,n,r){return new W2(t,e,n,r)}async function Mx(t,e){const n=oe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=ce();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function q2(t,e){const n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,p=d.keys();let g=B.resolve();return p.forEach(_=>{g=g.next(()=>h.getEntry(l,_)).next(S=>{const x=c.docVersions.get(_);pe(x!==null),S.version.compareTo(x)<0&&(d.applyToRemoteDocument(S,c),S.isValidDocument()&&(S.setReadTime(c.commitVersion),h.addEntry(S)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ce();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Lx(t){const e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function K2(t,e){const n=oe(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((h,d)=>{const p=i.get(d);if(!p)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,d)));let g=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(mt.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),i=i.insert(d,g),function(S,x,y){return S.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(p,g,h)&&a.push(n.Ur.updateTargetData(s,g))});let l=hr(),c=ce();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(G2(s,o,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!r.isEqual(re.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(d=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return B.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=i,s))}function G2(t,e,n){let r=ce(),i=ce();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=hr();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(re.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Q("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function Q2(t,e){const n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Y2(t,e){const n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,B.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Vr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function dp(t,e,n){const r=oe(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!cl(o))throw o;Q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function V0(t,e,n){const r=oe(t);let i=re.min(),s=ce();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=oe(l),p=d._s.get(h);return p!==void 0?B.resolve(d.os.get(p)):d.Ur.getTargetData(c,h)}(r,o,On(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:re.min(),n?s:ce())).next(a=>(X2(r,zM(e),a),{documents:a,Ts:s})))}function X2(t,e,n){let r=t.us.get(e)||re.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class M0{constructor(){this.activeTargetIds=GM()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class J2{constructor(){this.so=new M0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new M0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uu=null;function Nd(){return uu===null?uu=function(){return 268435456+Math.round(2147483648*Math.random())}():uu++,"0x"+uu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wt="WebChannelConnection";class nL extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=Nd(),l=this.xo(n,r.toUriEncodedString());Q("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,i).then(h=>(Q("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw zs("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+oo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=eL[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Nd();return new Promise((o,a)=>{const l=new KI;l.setWithCredentials(!0),l.listenOnce(GI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Vu.NO_ERROR:const h=l.getResponseJson();Q(wt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Vu.TIMEOUT:Q(wt,`RPC '${e}' ${s} timed out`),a(new q(U.DEADLINE_EXCEEDED,"Request time out"));break;case Vu.HTTP_ERROR:const d=l.getStatus();if(Q(wt,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const _=function(x){const y=x.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(y)>=0?y:U.UNKNOWN}(g.status);a(new q(_,g.message))}else a(new q(U.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new q(U.UNAVAILABLE,"Connection failed."));break;default:Z()}}finally{Q(wt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);Q(wt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=Nd(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=XI(),a=YI(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");Q(wt,`Creating RPC '${e}' stream ${i}: ${h}`,l);const d=o.createWebChannel(h,l);let p=!1,g=!1;const _=new tL({Io:x=>{g?Q(wt,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(p||(Q(wt,`Opening RPC '${e}' stream ${i} transport.`),d.open(),p=!0),Q(wt,`RPC '${e}' stream ${i} sending:`,x),d.send(x))},To:()=>d.close()}),S=(x,y,v)=>{x.listen(y,E=>{try{v(E)}catch(N){setTimeout(()=>{throw N},0)}})};return S(d,Ko.EventType.OPEN,()=>{g||(Q(wt,`RPC '${e}' stream ${i} transport opened.`),_.yo())}),S(d,Ko.EventType.CLOSE,()=>{g||(g=!0,Q(wt,`RPC '${e}' stream ${i} transport closed`),_.So())}),S(d,Ko.EventType.ERROR,x=>{g||(g=!0,zs(wt,`RPC '${e}' stream ${i} transport errored:`,x),_.So(new q(U.UNAVAILABLE,"The operation could not be completed")))}),S(d,Ko.EventType.MESSAGE,x=>{var y;if(!g){const v=x.data[0];pe(!!v);const E=v,N=E.error||((y=E[0])===null||y===void 0?void 0:y.error);if(N){Q(wt,`RPC '${e}' stream ${i} received error:`,N);const M=N.status;let F=function(C){const P=We[C];if(P!==void 0)return Ix(P)}(M),I=N.message;F===void 0&&(F=U.INTERNAL,I="Unknown error status: "+M+" with message "+N.message),g=!0,_.So(new q(F,I)),d.close()}else Q(wt,`RPC '${e}' stream ${i} received:`,v),_.bo(v)}}),S(a,QI.STAT_EVENT,x=>{x.stat===np.PROXY?Q(wt,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===np.NOPROXY&&Q(wt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.wo()},0),_}}function Vd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gh(t){return new d2(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&Q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Tg(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(cr(n.toString()),cr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new q(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class rL extends Ox{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=g2(this.serializer,e),r=function(s){if(!("targetChange"in s))return re.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?re.min():o.readTime?Jt(o.readTime):re.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=hp(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=op(l)?{documents:v2(s,l)}:{query:_2(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Ax(s,o.resumeToken);const c=up(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(re.min())>0){a.readTime=Pc(s,o.snapshotVersion.toTimestamp());const c=up(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=E2(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=hp(this.serializer),n.removeTarget=e,this.a_(n)}}class iL extends Ox{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return pe(!!e.streamToken),this.lastStreamToken=e.streamToken,pe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){pe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=y2(e.writeResults,e.commitTime),r=Jt(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=hp(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>bx(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new q(U.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,cp(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new q(U.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,cp(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(U.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class oL{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(cr(n),this.D_=!1):Q("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{qi(this)&&(Q("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=oe(l);c.L_.add(4),await pl(c),c.q_.set("Unknown"),c.L_.delete(4),await yh(c)}(this))})}),this.q_=new oL(r,i)}}async function yh(t){if(qi(t))for(const e of t.B_)await e(!0)}async function pl(t){for(const e of t.B_)await e(!1)}function Fx(t,e){const n=oe(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Cg(n)?xg(n):uo(n).r_()&&Ig(n,e))}function Sg(t,e){const n=oe(t),r=uo(n);n.N_.delete(e),r.r_()&&jx(n,e),n.N_.size===0&&(r.r_()?r.o_():qi(n)&&n.q_.set("Unknown"))}function Ig(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}uo(t).A_(e)}function jx(t,e){t.Q_.xe(e),uo(t).R_(e)}function xg(t){t.Q_=new l2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),uo(t).start(),t.q_.v_()}function Cg(t){return qi(t)&&!uo(t).n_()&&t.N_.size>0}function qi(t){return oe(t).L_.size===0}function Ux(t){t.Q_=void 0}async function lL(t){t.q_.set("Online")}async function uL(t){t.N_.forEach((e,n)=>{Ig(t,e)})}async function cL(t,e){Ux(t),Cg(t)?(t.q_.M_(e),xg(t)):t.q_.set("Unknown")}async function hL(t,e,n){if(t.q_.set("Online"),e instanceof Cx&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){Q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await kc(t,r)}else if(e instanceof Ou?t.Q_.Ke(e):e instanceof xx?t.Q_.He(e):t.Q_.We(e),!n.isEqual(re.min()))try{const r=await Lx(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(c);h&&s.N_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(mt.EMPTY_BYTE_STRING,h.snapshotVersion)),jx(s,l);const d=new Vr(h.target,l,c,h.sequenceNumber);Ig(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Q("RemoteStore","Failed to raise snapshot:",r),await kc(t,r)}}async function kc(t,e,n){if(!cl(e))throw e;t.L_.add(1),await pl(t),t.q_.set("Offline"),n||(n=()=>Lx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Q("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await yh(t)})}function Bx(t,e){return e().catch(n=>kc(t,n,e))}async function vh(t){const e=oe(t),n=Zr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;dL(e);)try{const i=await Q2(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,fL(e,i)}catch(i){await kc(e,i)}zx(e)&&$x(e)}function dL(t){return qi(t)&&t.O_.length<10}function fL(t,e){t.O_.push(e);const n=Zr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function zx(t){return qi(t)&&!Zr(t).n_()&&t.O_.length>0}function $x(t){Zr(t).start()}async function pL(t){Zr(t).p_()}async function mL(t){const e=Zr(t);for(const n of t.O_)e.m_(n.mutations)}async function gL(t,e,n){const r=t.O_.shift(),i=gg.from(r,e,n);await Bx(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await vh(t)}async function yL(t,e){e&&Zr(t).V_&&await async function(r,i){if(function(o){return Sx(o)&&o!==U.ABORTED}(i.code)){const s=r.O_.shift();Zr(r).s_(),await Bx(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await vh(r)}}(t,e),zx(t)&&$x(t)}async function O0(t,e){const n=oe(t);n.asyncQueue.verifyOperationInProgress(),Q("RemoteStore","RemoteStore received new credentials");const r=qi(n);n.L_.add(3),await pl(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await yh(n)}async function vL(t,e){const n=oe(t);e?(n.L_.delete(2),await yh(n)):e||(n.L_.add(2),await pl(n),n.q_.set("Unknown"))}function uo(t){return t.K_||(t.K_=function(n,r,i){const s=oe(n);return s.w_(),new rL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:lL.bind(null,t),Ro:uL.bind(null,t),mo:cL.bind(null,t),d_:hL.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Cg(t)?xg(t):t.q_.set("Unknown")):(await t.K_.stop(),Ux(t))})),t.K_}function Zr(t){return t.U_||(t.U_=function(n,r,i){const s=oe(n);return s.w_(),new iL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:pL.bind(null,t),mo:yL.bind(null,t),f_:mL.bind(null,t),g_:gL.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await vh(t)):(await t.U_.stop(),t.O_.length>0&&(Q("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ln,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Ag(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pg(t,e){if(cr("AsyncQueue",`${e}: ${t}`),cl(t))return new q(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=Go(),this.sortedSet=new Le(this.comparator)}static emptySet(e){return new ks(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ks)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ks;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(){this.W_=new Le(J.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Z():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ks{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ks(e,n,ks.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ch(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class wL{constructor(){this.queries=j0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=oe(n),s=i.queries;i.queries=j0(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new q(U.ABORTED,"Firestore shutting down"))}}function j0(){return new lo(t=>cx(t),ch)}async function Rg(t,e){const n=oe(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new _L,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Pg(o,`Initialization of query '${es(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&bg(n)}async function kg(t,e){const n=oe(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function EL(t,e){const n=oe(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&bg(n)}function TL(t,e,n){const r=oe(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function bg(t){t.Y_.forEach(e=>{e.next()})}var fp,U0;(U0=fp||(fp={})).ea="default",U0.Cache="cache";class Dg{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ks(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ks.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==fp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e){this.key=e}}class Hx{constructor(e){this.key=e}}class SL{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ce(),this.mutatedKeys=ce(),this.Aa=hx(e),this.Ra=new ks(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new F0,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,d)=>{const p=i.get(h),g=hh(this.query,d)?d:null,_=!!p&&this.mutatedKeys.has(p.key),S=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let x=!1;p&&g?p.data.isEqual(g.data)?_!==S&&(r.track({type:3,doc:g}),x=!0):this.ga(p,g)||(r.track({type:2,doc:g}),x=!0,(l&&this.Aa(g,l)>0||c&&this.Aa(g,c)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),x=!0):p&&!g&&(r.track({type:1,doc:p}),x=!0,(l||c)&&(a=!0)),x&&(g?(o=o.add(g),s=S?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,d)=>function(g,_){const S=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z()}};return S(g)-S(_)}(h.type,d.type)||this.Aa(h.doc,d.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new Ks(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new F0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ce(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Hx(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Wx(r))}),n}ba(e){this.Ta=e.Ts,this.da=ce();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ks.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class IL{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class xL{constructor(e){this.key=e,this.va=!1}}class CL{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new lo(a=>cx(a),ch),this.Ma=new Map,this.xa=new Set,this.Oa=new Le(J.comparator),this.Na=new Map,this.La=new _g,this.Ba={},this.ka=new Map,this.qa=qs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function AL(t,e,n=!0){const r=Xx(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await qx(r,e,n,!0),i}async function PL(t,e){const n=Xx(t);await qx(n,e,!0,!1)}async function qx(t,e,n,r){const i=await Y2(t.localStore,On(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await RL(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Fx(t.remoteStore,i),a}async function RL(t,e,n,r,i){t.Ka=(d,p,g)=>async function(S,x,y,v){let E=x.view.ma(y);E.ns&&(E=await V0(S.localStore,x.query,!1).then(({documents:I})=>x.view.ma(I,E)));const N=v&&v.targetChanges.get(x.targetId),M=v&&v.targetMismatches.get(x.targetId)!=null,F=x.view.applyChanges(E,S.isPrimaryClient,N,M);return z0(S,x.targetId,F.wa),F.snapshot}(t,d,p,g);const s=await V0(t.localStore,e,!0),o=new SL(e,s.Ts),a=o.ma(s.documents),l=fl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);z0(t,n,c.wa);const h=new IL(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function kL(t,e,n){const r=oe(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!ch(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await dp(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Sg(r.remoteStore,i.targetId),pp(r,i.targetId)}).catch(ul)):(pp(r,i.targetId),await dp(r.localStore,i.targetId,!0))}async function bL(t,e){const n=oe(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Sg(n.remoteStore,r.targetId))}async function DL(t,e,n){const r=jL(t);try{const i=await function(o,a){const l=oe(o),c=Xe.now(),h=a.reduce((g,_)=>g.add(_.key),ce());let d,p;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let _=hr(),S=ce();return l.cs.getEntries(g,h).next(x=>{_=x,_.forEach((y,v)=>{v.isValidDocument()||(S=S.add(y))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,_)).next(x=>{d=x;const y=[];for(const v of a){const E=n2(v,d.get(v.key).overlayedDocument);E!=null&&y.push(new si(v.key,E,nx(E.value.mapValue),St.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,y,a)}).next(x=>{p=x;const y=x.applyToLocalDocumentSet(d,S);return l.documentOverlayCache.saveOverlays(g,x.batchId,y)})}).then(()=>({batchId:p.batchId,changes:fx(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Le(ge)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await ml(r,i.changes),await vh(r.remoteStore)}catch(i){const s=Pg(i,"Failed to persist write");n.reject(s)}}async function Kx(t,e){const n=oe(t);try{const r=await K2(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(pe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?pe(o.va):i.removedDocuments.size>0&&(pe(o.va),o.va=!1))}),await ml(n,r,e)}catch(r){await ul(r)}}function B0(t,e,n){const r=oe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=oe(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const p of d.j_)p.Z_(a)&&(c=!0)}),c&&bg(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function NL(t,e,n){const r=oe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Le(J.comparator);o=o.insert(s,it.newNoDocument(s,re.min()));const a=ce().add(s),l=new mh(re.min(),new Map,new Le(ge),o,a);await Kx(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),Ng(r)}else await dp(r.localStore,e,!1).then(()=>pp(r,e,n)).catch(ul)}async function VL(t,e){const n=oe(t),r=e.batch.batchId;try{const i=await q2(n.localStore,e);Qx(n,r,null),Gx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ml(n,i)}catch(i){await ul(i)}}async function ML(t,e,n){const r=oe(t);try{const i=await function(o,a){const l=oe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(pe(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);Qx(r,e,n),Gx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ml(r,i)}catch(i){await ul(i)}}function Gx(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Qx(t,e,n){const r=oe(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function pp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||Yx(t,r)})}function Yx(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Sg(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Ng(t))}function z0(t,e,n){for(const r of n)r instanceof Wx?(t.La.addReference(r.key,e),LL(t,r)):r instanceof Hx?(Q("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||Yx(t,r.key)):Z()}function LL(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Q("SyncEngine","New document in limbo: "+n),t.xa.add(r),Ng(t))}function Ng(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new J(Se.fromString(e)),r=t.qa.next();t.Na.set(r,new xL(n)),t.Oa=t.Oa.insert(n,r),Fx(t.remoteStore,new Vr(On(uh(n.path)),r,"TargetPurposeLimboResolution",ug.oe))}}async function ml(t,e,n){const r=oe(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=Eg.Wi(l.targetId,c);s.push(d)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,c){const h=oe(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>B.forEach(c,p=>B.forEach(p.$i,g=>h.persistence.referenceDelegate.addReference(d,p.targetId,g)).next(()=>B.forEach(p.Ui,g=>h.persistence.referenceDelegate.removeReference(d,p.targetId,g)))))}catch(d){if(!cl(d))throw d;Q("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const p=d.targetId;if(!d.fromCache){const g=h.os.get(p),_=g.snapshotVersion,S=g.withLastLimboFreeSnapshotVersion(_);h.os=h.os.insert(p,S)}}}(r.localStore,s))}async function OL(t,e){const n=oe(t);if(!n.currentUser.isEqual(e)){Q("SyncEngine","User change. New user:",e.toKey());const r=await Mx(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new q(U.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ml(n,r.hs)}}function FL(t,e){const n=oe(t),r=n.Na.get(e);if(r&&r.va)return ce().add(r.key);{let i=ce();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function Xx(t){const e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Kx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=FL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=NL.bind(null,e),e.Ca.d_=EL.bind(null,e.eventManager),e.Ca.$a=TL.bind(null,e.eventManager),e}function jL(t){const e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=VL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ML.bind(null,e),e}class bc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=gh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return H2(this.persistence,new $2,e.initialUser,this.serializer)}Ga(e){return new U2(wg.Zr,this.serializer)}Wa(e){return new J2}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}bc.provider={build:()=>new bc};class mp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>B0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=OL.bind(null,this.syncEngine),await vL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new wL}()}createDatastore(e){const n=gh(e.databaseInfo.databaseId),r=function(s){return new nL(s)}(e.databaseInfo);return function(s,o,a,l){return new sL(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new aL(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>B0(this.syncEngine,n,0),function(){return L0.D()?new L0:new Z2}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,h){const d=new CL(i,s,o,a,l,c);return h&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=oe(i);Q("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await pl(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}mp.provider={build:()=>new mp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):cr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new q(U.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(i,s){const o=oe(i),a={documents:s.map(d=>Rc(o.serializer,d))},l=await o.Lo("BatchGetDocuments",o.serializer.databaseId,Se.emptyPath(),a,s.length),c=new Map;l.forEach(d=>{const p=m2(o.serializer,d);c.set(p.key.toString(),p)});const h=[];return s.forEach(d=>{const p=c.get(d.toString());pe(!!p),h.push(p)}),h}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ph(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=J.fromPath(r);this.mutations.push(new Tx(i,this.precondition(i)))}),await async function(r,i){const s=oe(r),o={writes:i.map(a=>bx(s.serializer,a))};await s.Mo("Commit",s.serializer.databaseId,Se.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Z();n=re.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new q(U.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(re.min())?St.exists(!1):St.updateTime(n):St.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(re.min()))throw new q(U.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return St.updateTime(n)}return St.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this._u=r.maxAttempts,this.t_=new Tg(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new UL(this.datastore),n=this.cu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const n=this.updateFunction(e);return!hl(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!Sx(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Et.UNAUTHENTICATED,this.clientId=ZI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{Q("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Q("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ln;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Pg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Md(t,e){t.asyncQueue.verifyOperationInProgress(),Q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Mx(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function $0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await $L(t);Q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>O0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>O0(e.remoteStore,i)),t._onlineComponents=e}async function $L(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Q("FirestoreClient","Using user provided OfflineComponentProvider");try{await Md(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===U.FAILED_PRECONDITION||i.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;zs("Error using user provided cache. Falling back to memory cache: "+n),await Md(t,new bc)}}else Q("FirestoreClient","Using default OfflineComponentProvider"),await Md(t,new bc);return t._offlineComponents}async function Mg(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Q("FirestoreClient","Using user provided OnlineComponentProvider"),await $0(t,t._uninitializedComponentsProvider._online)):(Q("FirestoreClient","Using default OnlineComponentProvider"),await $0(t,new mp))),t._onlineComponents}function WL(t){return Mg(t).then(e=>e.syncEngine)}function HL(t){return Mg(t).then(e=>e.datastore)}async function Dc(t){const e=await Mg(t),n=e.eventManager;return n.onListen=AL.bind(null,e.syncEngine),n.onUnlisten=kL.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=PL.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=bL.bind(null,e.syncEngine),n}function qL(t,e,n={}){const r=new Ln;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new Vg({next:p=>{h.Za(),o.enqueueAndForget(()=>kg(s,d));const g=p.docs.has(a);!g&&p.fromCache?c.reject(new q(U.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&l&&l.source==="server"?c.reject(new q(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new Dg(uh(a.path),h,{includeMetadataChanges:!0,_a:!0});return Rg(s,d)}(await Dc(t),t.asyncQueue,e,n,r)),r.promise}function KL(t,e,n={}){const r=new Ln;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new Vg({next:p=>{h.Za(),o.enqueueAndForget(()=>kg(s,d)),p.fromCache&&l.source==="server"?c.reject(new q(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new Dg(a,h,{includeMetadataChanges:!0,_a:!0});return Rg(s,d)}(await Dc(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zx(t,e,n){if(!n)throw new q(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function GL(t,e,n,r){if(e===!0&&r===!0)throw new q(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function H0(t){if(!J.isDocumentKey(t))throw new q(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function q0(t){if(J.isDocumentKey(t))throw new q(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function _h(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Z()}function Zt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=_h(t);throw new q(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new q(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new q(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}GL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Jx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new q(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new q(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new q(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wh{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new K0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new q(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new q(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new K0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new cM;switch(r.type){case"firstParty":return new pM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=W0.get(n);r&&(Q("ComponentProvider","Removing Datastore"),W0.delete(n),r.terminate())}(this),Promise.resolve()}}function QL(t,e,n,r={}){var i;const s=(t=Zt(t,wh))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&zs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Et.MOCK_USER;else{a=Ob(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new q(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Et(c)}t._authCredentials=new hM(new JI(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new oi(this.firestore,e,this._query)}}class xt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Kr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xt(this.firestore,e,this._key)}}class Kr extends oi{constructor(e,n,r){super(e,n,uh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new J(e))}withConverter(e){return new Kr(this.firestore,e,this._path)}}function Gr(t,e,...n){if(t=Je(t),Zx("collection","path",e),t instanceof wh){const r=Se.fromString(e,...n);return q0(r),new Kr(t,null,r)}{if(!(t instanceof xt||t instanceof Kr))throw new q(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Se.fromString(e,...n));return q0(r),new Kr(t.firestore,null,r)}}function Mr(t,e,...n){if(t=Je(t),arguments.length===1&&(e=ZI.newId()),Zx("doc","path",e),t instanceof wh){const r=Se.fromString(e,...n);return H0(r),new xt(t,null,new J(r))}{if(!(t instanceof xt||t instanceof Kr))throw new q(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Se.fromString(e,...n));return H0(r),new xt(t.firestore,t instanceof Kr?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Tg(this,"async_queue_retry"),this.Vu=()=>{const r=Vd();r&&Q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Vd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Vd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Ln;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!cl(e))throw e;Q("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw cr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Ag.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Z()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Q0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class dr extends wh{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new G0,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new G0(e),this._firestoreClient=void 0,await e}}}function YL(t,e){const n=typeof t=="object"?t:dI(),r=typeof t=="string"?t:"(default)",i=Ym(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=Mb("firestore");s&&QL(i,...s)}return i}function gl(t){if(t._terminated)throw new q(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||XL(t),t._firestoreClient}function XL(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,h){return new AM(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Jx(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new zL(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zi(mt.fromBase64String(e))}catch(n){throw new q(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new zi(mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JL=/^__.*__$/;class ZL{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new si(e,this.data,this.fieldMask,n,this.fieldTransforms):new dl(e,this.data,n,this.fieldTransforms)}}class eC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new si(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function tC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z()}}class Fg{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Fg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Nc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(tC(this.Cu)&&JL.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class eO{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||gh(e)}Qu(e,n,r,i=!1){return new Fg({Cu:e,methodName:n,qu:r,path:ht.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Sh(t){const e=t._freezeSettings(),n=gh(t._databaseId);return new eO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function jg(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Bg("Data must be an object, but it was:",o,r);const a=nC(r,o);let l,c;if(s.merge)l=new Yt(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const p=gp(e,d,n);if(!o.contains(p))throw new q(U.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);iC(h,p)||h.push(p)}l=new Yt(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new ZL(new bt(a),l,c)}class Ih extends Th{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ih}}class Ug extends Th{_toFieldTransform(e){return new JM(e.path,new za)}isEqual(e){return e instanceof Ug}}function tO(t,e,n,r){const i=t.Qu(1,e,n);Bg("Data must be an object, but it was:",i,r);const s=[],o=bt.empty();Hi(r,(l,c)=>{const h=zg(e,l,n);c=Je(c);const d=i.Nu(h);if(c instanceof Ih)s.push(h);else{const p=yl(c,d);p!=null&&(s.push(h),o.set(h,p))}});const a=new Yt(s);return new eC(o,a,i.fieldTransforms)}function nO(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[gp(e,r,n)],l=[i];if(s.length%2!=0)throw new q(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(gp(e,s[p])),l.push(s[p+1]);const c=[],h=bt.empty();for(let p=a.length-1;p>=0;--p)if(!iC(c,a[p])){const g=a[p];let _=l[p];_=Je(_);const S=o.Nu(g);if(_ instanceof Ih)c.push(g);else{const x=yl(_,S);x!=null&&(c.push(g),h.set(g,x))}}const d=new Yt(c);return new eC(h,d,o.fieldTransforms)}function rO(t,e,n,r=!1){return yl(n,t.Qu(r?4:3,e))}function yl(t,e){if(rC(t=Je(t)))return Bg("Unsupported field value:",e,t),nC(t,e);if(t instanceof Th)return function(r,i){if(!tC(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=yl(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Je(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return QM(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Xe.fromDate(r);return{timestampValue:Pc(i.serializer,s)}}if(r instanceof Xe){const s=new Xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Pc(i.serializer,s)}}if(r instanceof Lg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zi)return{bytesValue:Ax(i.serializer,r._byteString)};if(r instanceof xt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:vg(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Og)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return mg(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${_h(r)}`)}(t,e)}function nC(t,e){const n={};return ex(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hi(t,(r,i)=>{const s=yl(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function rC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xe||t instanceof Lg||t instanceof zi||t instanceof xt||t instanceof Th||t instanceof Og)}function Bg(t,e,n){if(!rC(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=_h(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function gp(t,e,n){if((e=Je(e))instanceof Eh)return e._internalPath;if(typeof e=="string")return zg(t,e);throw Nc("Field path arguments must be of type string or ",t,!1,void 0,n)}const iO=new RegExp("[~\\*/\\[\\]]");function zg(t,e,n){if(e.search(iO)>=0)throw Nc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Eh(...e.split("."))._internalPath}catch{throw Nc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Nc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new q(U.INVALID_ARGUMENT,a+t+l)}function iC(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(xh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class sO extends Vc{data(){return super.data()}}function xh(t,e){return typeof e=="string"?zg(t,e):e instanceof Eh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $g{}class oC extends $g{}function Ch(t,e,...n){let r=[];e instanceof $g&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Hg).length,a=s.filter(l=>l instanceof Ah).length;if(o>1||o>0&&a>0)throw new q(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Ah extends oC{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Ah(e,n,r)}_apply(e){const n=this._parse(e);return aC(e._query,n),new oi(e.firestore,e.converter,ap(e._query,n))}_parse(e){const n=Sh(e.firestore);return function(s,o,a,l,c,h,d){let p;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new q(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){X0(d,h);const g=[];for(const _ of d)g.push(Y0(l,s,_));p={arrayValue:{values:g}}}else p=Y0(l,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||X0(d,h),p=rO(a,o,d,h==="in"||h==="not-in");return Ke.create(c,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Wg(t,e,n){const r=e,i=xh("where",t);return Ah._create(i,r,n)}class Hg extends $g{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Hg(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Cn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)aC(o,l),o=ap(o,l)}(e._query,n),new oi(e.firestore,e.converter,ap(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class qg extends oC{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new qg(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new q(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new q(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ba(s,o)}(e._query,this._field,this._direction);return new oi(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new ao(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function oO(t,e="asc"){const n=e,r=xh("orderBy",t);return qg._create(r,n)}function Y0(t,e,n){if(typeof(n=Je(n))=="string"){if(n==="")throw new q(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ux(e)&&n.indexOf("/")!==-1)throw new q(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Se.fromString(n));if(!J.isDocumentKey(r))throw new q(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return y0(t,new J(r))}if(n instanceof xt)return y0(t,n._key);throw new q(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_h(n)}.`)}function X0(t,e){if(!Array.isArray(t)||t.length===0)throw new q(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function aC(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new q(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class lC{convertValue(e,n="none"){switch(Bi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ze(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ui(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Z()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Hi(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>ze(o.doubleValue));return new Og(s)}convertGeoPoint(e){return new Lg(ze(e.latitude),ze(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=hg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Fa(e));default:return null}}convertTimestamp(e){const n=Jr(e);return new Xe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Se.fromString(e);pe(Vx(r));const i=new ja(r.get(1),r.get(3)),s=new J(r.popFirst(5));return i.isEqual(n)||cr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kg(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class aO extends lC{constructor(e){super(),this.firestore=e}convertBytes(e){return new zi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Gg extends Vc{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Fu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(xh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Fu extends Gg{data(e={}){return super.data(e)}}class uC{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ms(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Fu(this._firestore,this._userDataWriter,r.key,r,new ms(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Fu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ms(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Fu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ms(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:lO(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function lO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J0(t){t=Zt(t,xt);const e=Zt(t.firestore,dr);return qL(gl(e),t._key).then(n=>hC(e,t,n))}class Ph extends lC{constructor(e){super(),this.firestore=e}convertBytes(e){return new zi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,n)}}function Mc(t){t=Zt(t,oi);const e=Zt(t.firestore,dr),n=gl(e),r=new Ph(e);return sC(t._query),KL(n,t._query).then(i=>new uC(e,r,t,i))}function Ld(t,e,n){t=Zt(t,xt);const r=Zt(t.firestore,dr),i=Kg(t.converter,e,n);return Qg(r,[jg(Sh(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,St.none())])}function cu(t){return Qg(Zt(t.firestore,dr),[new ph(t._key,St.none())])}function Z0(t,e){const n=Zt(t.firestore,dr),r=Mr(t),i=Kg(t.converter,e);return Qg(n,[jg(Sh(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,St.exists(!1))]).then(()=>r)}function cC(t,...e){var n,r,i;t=Je(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Q0(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Q0(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let l,c,h;if(t instanceof xt)c=Zt(t.firestore,dr),h=uh(t._key.path),l={next:d=>{e[o]&&e[o](hC(c,t,d))},error:e[o+1],complete:e[o+2]};else{const d=Zt(t,oi);c=Zt(d.firestore,dr),h=d._query;const p=new Ph(c);l={next:g=>{e[o]&&e[o](new uC(c,p,d,g))},error:e[o+1],complete:e[o+2]},sC(t._query)}return function(p,g,_,S){const x=new Vg(S),y=new Dg(g,x,_);return p.asyncQueue.enqueueAndForget(async()=>Rg(await Dc(p),y)),()=>{x.Za(),p.asyncQueue.enqueueAndForget(async()=>kg(await Dc(p),y))}}(gl(c),h,a,l)}function Qg(t,e){return function(r,i){const s=new Ln;return r.asyncQueue.enqueueAndForget(async()=>DL(await WL(r),i,s)),s.promise}(gl(t),e)}function hC(t,e,n){const r=n.docs.get(e._key),i=new Ph(t);return new Gg(t,i,e._key,r,new ms(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO={maxAttempts:5};function Uo(t,e){if((t=Je(t)).firestore!==e)throw new q(U.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Sh(n)}get(n){const r=Uo(n,this._firestore),i=new aO(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return Z();const o=s[0];if(o.isFoundDocument())return new Vc(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new Vc(this._firestore,i,r._key,null,r.converter);throw Z()})}set(n,r,i){const s=Uo(n,this._firestore),o=Kg(s.converter,r,i),a=jg(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){const o=Uo(n,this._firestore);let a;return a=typeof(r=Je(r))=="string"||r instanceof Eh?nO(this._dataReader,"Transaction.update",o._key,r,i,s):tO(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=Uo(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Uo(e,this._firestore),r=new Ph(this._firestore);return super.get(e).then(i=>new Gg(this._firestore,r,n._key,i._document,new ms(!1,!1),n.converter))}}function hO(t,e,n){t=Zt(t,dr);const r=Object.assign(Object.assign({},uO),n);return function(s){if(s.maxAttempts<1)throw new q(U.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new Ln;return s.asyncQueue.enqueueAndForget(async()=>{const c=await HL(s);new BL(s.asyncQueue,c,a,o,l).au()}),l.promise}(gl(t),i=>e(new cO(t,i)),r)}function dC(){return new Ug("serverTimestamp")}(function(e,n=!0){(function(i){oo=i})(io),Us(new Oi("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new dr(new dM(r.getProvider("auth-internal")),new gM(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new q(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ja(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),qr(d0,"4.7.3",e),qr(d0,"4.7.3","esm2017")})();const dO={apiKey:"AIzaSyBuB1qo6t7mfdBPVkSKS04reB4nCDJzGeE",authDomain:"surchop-9d786.firebaseapp.com",projectId:"surchop-9d786",storageBucket:"surchop-9d786.firebasestorage.app",messagingSenderId:"584554467419",appId:"1:584554467419:web:7237cbf2bf4a9f761e2f7e",measurementId:"G-QBMK24EM00"},fC=hI(dO),kt=YL(fC),Yg=oM(fC),fO=new Gn,pO=()=>mV(Yg,fO),ew=()=>QN(Yg);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mO=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),gO=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),tw=t=>{const e=gO(t);return e.charAt(0).toUpperCase()+e.slice(1)},pC=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),yO=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var vO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _O=R.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>R.createElement("svg",{ref:l,...vO,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:pC("lucide",i),...!s&&!yO(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,h])=>R.createElement(c,h)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=(t,e)=>{const n=R.forwardRef(({className:r,...i},s)=>R.createElement(_O,{ref:s,iconNode:e,className:pC(`lucide-${mO(tw(t))}`,`lucide-${t}`,r),...i}));return n.displayName=tw(t),n};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wO=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],EO=zn("camera",wO);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TO=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],SO=zn("heart",TO);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IO=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],nw=zn("house",IO);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xO=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],CO=zn("menu",xO);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AO=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],PO=zn("play",AO);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],kO=zn("share-2",RO);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bO=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],rw=zn("square-check-big",bO);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],NO=zn("trash-2",DO);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],iw=zn("user-plus",VO);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MO=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],sw=zn("x",MO);function LO(){const[t,e]=R.useState(null),[n,r]=R.useState(!1),[i,s]=R.useState(!1),[o,a]=R.useState(!1);return R.useEffect(()=>{const l=g=>{g.preventDefault(),e(g)},c=()=>r(!0);window.addEventListener("beforeinstallprompt",l),window.addEventListener("appinstalled",c);const h=window.navigator.userAgent.toLowerCase(),d=/iphone|ipad|ipod/.test(h),p=window.navigator.standalone===!0;return s(d),a(p),()=>{window.removeEventListener("beforeinstallprompt",l),window.removeEventListener("appinstalled",c)}},[]),n||o?null:i?A.jsxs("div",{className:"fixed bottom-4 left-1/2 -translate-x-1/2 bg-pink-500 text-white px-4 py-2 rounded-full shadow-md text-sm text-center",children:[" Pour installer Surchope :",A.jsx("br",{}),"Appuie sur le bouton ",A.jsx("b",{children:"Partager"}),"  ",A.jsx("b",{children:"Sur lcran daccueil"})]}):t?A.jsx("button",{onClick:()=>{t.prompt(),t.userChoice.then(l=>{l.outcome==="accepted"&&e(null)})},className:"inline-flex items-center gap-1 px-3 py-1 rounded bg-pink-500 text-white text-sm font-medium hover:bg-pink-600 active:bg-pink-700 transition shadow-sm",children:" Installer"}):null}function OO({user:t}){const[e,n]=R.useState(!1),r=gr(),i=({to:s,label:o,icon:a,accent:l=!1})=>{const c=r.pathname===s;return A.jsxs(js,{to:s,onClick:()=>n(!1),className:`flex items-center gap-2 px-3 py-2 rounded-md text-sm font-medium transition
                    ${c?"bg-pink-100 text-pink-700":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}
                    ${l?"text-pink-600 font-semibold":""}`,children:[A.jsx(a,{size:16}),o]})};return A.jsxs("header",{className:"sticky top-0 z-10 bg-white/90 backdrop-blur border-b",children:[A.jsxs("div",{className:"max-w-5xl mx-auto px-4 h-14 flex items-center justify-between",children:[A.jsxs(js,{to:"/",className:"font-semibold text-base sm:text-lg flex items-center gap-2",children:[A.jsx(SO,{className:"text-pink-500",size:18}),"SURCHOPE"]}),A.jsxs("nav",{className:"hidden md:flex items-center gap-2",children:[A.jsx(i,{to:"/",label:"Tous les couples",icon:nw}),t&&A.jsx(i,{to:"/mes-votes",label:"Mes votes",icon:rw}),t&&A.jsx(i,{to:"/ajouter-couple",label:"Ajouter un couple",icon:iw,accent:!0})]}),A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx(LO,{}),t?A.jsxs(A.Fragment,{children:[A.jsx("img",{className:"w-8 h-8 rounded-full border",src:t.photoURL??"",alt:t.displayName??""}),A.jsx("button",{className:"hidden sm:inline text-sm underline text-gray-600 hover:text-gray-900",onClick:()=>ew(),children:"Se dconnecter"})]}):A.jsx("button",{className:"px-3 py-1 rounded bg-pink-500 text-white text-sm hover:bg-pink-600 transition",onClick:()=>pO(),children:"Se connecter"}),A.jsx("button",{onClick:()=>n(!e),className:"md:hidden p-2 rounded hover:bg-gray-100",children:e?A.jsx(sw,{size:20}):A.jsx(CO,{size:20})})]})]}),e&&A.jsxs("nav",{className:"md:hidden bg-white border-t border-gray-200 flex flex-col p-3 space-y-2 text-sm",children:[A.jsx(i,{to:"/",label:"Tous les couples",icon:nw}),t&&A.jsx(i,{to:"/mes-votes",label:"Mes votes",icon:rw}),t&&A.jsx(i,{to:"/ajouter-couple",label:"Ajouter un couple",icon:iw,accent:!0}),t&&A.jsxs("button",{className:"flex items-center gap-2 px-3 py-2 text-gray-700 hover:bg-gray-100 rounded-md text-left",onClick:()=>{ew(),n(!1)},children:[A.jsx(sw,{size:16}),"Se dconnecter"]})]})]})}function FO({name:t,onClose:e}){const[n,r]=R.useState(!0),[i,s]=R.useState(null);return R.useEffect(()=>{if(!t)return;(async()=>{var a,l,c;try{const h=await fetch(`https://fr.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(t)}`);if(!h.ok)throw new Error("Pas d'info trouve");const d=await h.json();s({title:d.title,summary:d.extract,image:(a=d.thumbnail)==null?void 0:a.source,source:(c=(l=d.content_urls)==null?void 0:l.desktop)==null?void 0:c.page})}catch{s(null)}finally{r(!1)}})()},[t]),A.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",children:A.jsxs("div",{className:"bg-white rounded-2xl p-5 max-w-sm w-full shadow-lg relative",children:[A.jsx("button",{onClick:e,className:"absolute top-2 right-3 text-gray-500 hover:text-gray-700",children:""}),n?A.jsx("p",{className:"text-center",children:"Chargement..."}):i?A.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.image&&A.jsx("img",{src:i.image,alt:i.title,className:"w-48 h-48 rounded-full mb-3 object-cover"}),A.jsx("h2",{className:"text-lg font-semibold",children:i.title}),A.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[i.summary.slice(0,200),"..."]}),A.jsx("a",{href:i.source,target:"_blank",rel:"noopener noreferrer",className:"text-pink-500 text-sm underline",children:"Voir sur Wikipdia"})]}):A.jsx("p",{className:"text-center text-gray-500",children:"Aucune information trouve "})]})})}function jO({couple:t,user:e,onDelete:n}){const r=(e==null?void 0:e.uid)==="EuindCjjeTYx5ABLPCRWdflHy2c2",i=s=>{s.stopPropagation();const o=window.location.origin,a=encodeURIComponent(` Vote pour ce couple sur Surchope : ${t.personA.display_name} & ${t.personB.display_name} 
 ${o}/couple/${t.id}`);window.open(`https://wa.me/?text=${a}`,"_blank")};return A.jsxs("div",{className:"absolute top-2 right-2 flex items-center gap-2 opacity-60 hover:opacity-100 transition",children:[r&&n&&A.jsx("button",{onClick:s=>{s.stopPropagation(),confirm("Supprimer ce couple et les donnes associes ?")&&n(t.id,e.uid)},title:"Supprimer ce couple",className:"hover:text-pink-600",children:A.jsx(NO,{size:16})}),A.jsx("button",{onClick:i,title:"Partager sur WhatsApp",className:"text-green-600 hover:text-green-700",children:A.jsx(kO,{size:16})})]})}function UO({couple:t}){const[e,n]=R.useState(0),r=t.countA||0,i=t.countB||0,s=Math.max(1,r+i),o=Math.round(r/s*100);return R.useEffect(()=>{const a=e,l=o,c=600,h=performance.now(),d=p=>{const g=p-h,_=Math.min(g/c,1),S=Math.sin(_*Math.PI/2),x=a+(l-a)*S;n(x),_<1&&requestAnimationFrame(d)};requestAnimationFrame(d)},[o]),A.jsxs("div",{className:"w-full mt-1",children:[A.jsx("div",{className:"h-2 rounded-full bg-gray-200 overflow-hidden relative",children:A.jsx("div",{className:"absolute left-0 top-0 h-full bg-pink-500 transition-all duration-300",style:{width:`${e}%`}})}),A.jsxs("div",{className:"text-xs mt-1 text-gray-600 text-center",children:[r," vs ",i,"  ",r+i," vote",r+i>1?"s":""]})]})}function BO({couple:t,myChoice:e,onlyMyVotes:n,onSelectPerson:r}){const i=(o,a)=>{const l=e===a;return A.jsxs("div",{className:"flex items-center gap-2 flex-col cursor-pointer relative",onClick:()=>r(o.display_name),children:[l&&A.jsx("div",{className:"absolute w-28 h-28 md:w-36 md:h-36 rounded-full bg-pink-400/30 blur-md animate-pulse-ring -z-10"}),A.jsx("div",{className:`w-24 h-24 md:w-32 md:h-32 rounded-full bg-gray-100 overflow-hidden flex items-center justify-center hover:scale-105 transition ${l?"ring-4 ring-pink-400 shadow-lg":""}`,children:o.image_url?A.jsx("img",{src:o.image_url,alt:o.display_name,className:"object-cover w-full h-full"}):A.jsx("span",{className:"text-lg",children:o.display_name[0]})}),A.jsx("div",{className:`font-medium text-lg text-center ${l?"text-pink-600":"hover:text-pink-600"}`,children:o.display_name})]},a)},s=e==="A"?`${t.personA.display_name} surchope`:e==="B"?`${t.personB.display_name} surchope`:"il y a galit parfaite";return A.jsxs(A.Fragment,{children:[A.jsx("style",{children:`
                @keyframes pulse-ring {
                    0% { transform: scale(0.9); opacity: 0.6; }
                    50% { transform: scale(1.1); opacity: 0.9; }
                    100% { transform: scale(0.9); opacity: 0.6; }
                }
                .animate-pulse-ring {
                    animation: pulse-ring 1.5s infinite ease-in-out;
                }
                `}),A.jsxs("div",{className:"flex-1 flex items-center justify-center gap-3 relative",children:[i(t.personA,"A"),A.jsx("span",{className:"text-gray-400 text-lg font-semibold select-none",children:"vs"}),i(t.personB,"B")]}),A.jsx("div",{className:"w-48 mt-2",children:n?A.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["Pour vous ",s]}):A.jsx(UO,{couple:t})})]})}function zO({couple:t,user:e,canVote:n,myChoice:r,onVote:i}){const[s,o]=R.useState(null),a=d=>{!n||!i||(o(d),i(t,d),setTimeout(()=>o(null),700))},l="px-3 py-2 rounded border font-medium transition-transform duration-300 ease-out active:scale-95",c=n?"":"opacity-60 cursor-not-allowed",h=d=>s!==d?"":d==="tie"?"animate-pulse bg-blue-50 border-blue-500 text-blue-600":"animate-[pop_0.4s_ease-out] bg-pink-100 border-pink-500 text-pink-600 shadow-md";return A.jsxs(A.Fragment,{children:[A.jsx("style",{children:`
          @keyframes pop {
            0% { transform: scale(1); }
            50% { transform: scale(1.12); }
            100% { transform: scale(1); }
          }
        `}),A.jsxs("div",{className:"mt-4 flex flex-col gap-2",children:[A.jsxs("div",{className:"flex gap-2",children:[A.jsxs("button",{disabled:!n,onClick:()=>a("A"),className:`${l} flex-1 ${r==="A"?"bg-pink-50 border-pink-500 text-pink-600":"hover:bg-gray-50"} ${h("A")} ${c}`,children:[t.personA.display_name," surchope"]}),A.jsxs("button",{disabled:!n,onClick:()=>a("B"),className:`${l} flex-1 ${r==="B"?"bg-pink-50 border-pink-500 text-pink-600":"hover:bg-gray-50"} ${h("B")} ${c}`,children:[t.personB.display_name," surchope"]})]}),A.jsx("button",{disabled:!n,onClick:()=>a("tie"),className:`${l} text-sm ${r==="tie"?"bg-blue-50 border-blue-500 text-blue-600":"hover:bg-gray-50 text-gray-600"} ${h("tie")} ${c}`,children:" galit parfaite"})]})]})}function Rh({couple:t,user:e,myChoice:n,onVote:r,compact:i=!1,onlyMyVotes:s=!1,onDelete:o}){const[a,l]=R.useState(null);return A.jsxs("div",{className:"relative p-4 rounded-2xl bg-white shadow-sm border hover:shadow-md transition",children:[A.jsx(jO,{couple:t,user:e,onDelete:o}),A.jsx("div",{className:"flex items-center gap-4 flex-col",children:A.jsx("div",{className:"flex-1 flex items-center gap-3 flex-col",children:A.jsx(BO,{couple:t,myChoice:n,onlyMyVotes:s,onSelectPerson:l})})}),!i&&A.jsx(zO,{couple:t,user:e,canVote:!!e&&!!r,myChoice:n,onVote:r}),!e&&!i&&A.jsx("div",{className:"text-xs text-gray-500 mt-2 text-center",children:"Connecte-toi pour voter."}),a&&A.jsx(FO,{name:a,onClose:()=>l(null)})]})}function $O({onClose:t}){return A.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",children:A.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-sm mx-4 text-center shadow-lg animate-fadeIn",children:[A.jsx("h2",{className:"text-xl font-semibold text-pink-600 mb-3",children:"Bienvenue sur Surchope "}),A.jsxs("p",{className:"text-gray-700 text-sm leading-relaxed mb-5",children:["Ici, on ",A.jsx("span",{className:"font-semibold text-pink-500",children:"surchope"}),"  : cest quand on est en couple avec quelquun de plus attractif que soi  celui ou celle qui a un peu trop bien russi son coup ",A.jsx("br",{}),"Tout a avec humour et bienveillance "]}),A.jsx("button",{onClick:t,className:"px-4 py-2 bg-pink-500 hover:bg-pink-600 text-white text-sm rounded-full shadow-sm transition",children:"Jai compris "})]})})}function mC(){return A.jsxs("main",{className:"flex flex-col items-center justify-center h-[80vh] text-pink-600",children:[A.jsxs("div",{className:"relative w-16 h-16 animate-pulse-heart",children:[A.jsx("div",{className:"absolute inset-0 bg-pink-500 rotate-45 transform rounded-[8px]"}),A.jsx("div",{className:"absolute w-16 h-16 bg-pink-500 rounded-full -top-4 left-0"}),A.jsx("div",{className:"absolute w-16 h-16 bg-pink-500 rounded-full top-0 -left-4"})]}),A.jsx("p",{className:"mt-6 text-lg font-medium animate-fade-in",children:"a surchope fort "})]})}function yp(){return A.jsx("footer",{className:"text-center text-xs text-gray-400 mt-8 italic",children:"Surchoper : cest quand on est en couple avec quelquun dun peu trop canon pour soi "})}function WO({user:t,couples:e,myVotes:n,onVote:r,loading:i,deleteCouple:s}){const[o,a]=R.useState("all"),[l,c]=R.useState(""),[h,d]=R.useState(!1),p=ro();if(R.useEffect(()=>{localStorage.getItem("surchope_intro_seen")||(d(!0),localStorage.setItem("surchope_intro_seen","true"))},[]),i)return A.jsx(mC,{});const g=e.filter(_=>o==="all"||_.category===o).filter(_=>l.trim()===""?!0:`${_.personA.display_name} ${_.personB.display_name}`.toLowerCase().includes(l.toLowerCase())).sort((_,S)=>{const x=!!n[_.id],y=!!n[S.id];return x===y?0:x?1:-1});return A.jsxs("main",{className:"max-w-5xl mx-auto px-4 py-6 space-y-6 relative",children:[h&&A.jsx($O,{onClose:()=>d(!1)}),A.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-3",children:[A.jsx("input",{type:"text",placeholder:" Rechercher un couple ou un prnom...",value:l,onChange:_=>c(_.target.value),className:"w-full sm:w-80 border rounded-full px-4 py-2 text-sm shadow-sm focus:outline-none focus:ring-2 focus:ring-pink-400"}),A.jsx("div",{className:"flex border-b gap-4",children:["all","friends","people"].map(_=>A.jsx("button",{onClick:()=>a(_),className:`flex-1 py-2 text-center text-sm font-medium border-b-2 transition
                                ${o===_?"border-pink-500 text-pink-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:_==="friends"?"Potes":_==="people"?"People":"Tous"},_))})]}),g.length===0?A.jsx("p",{className:"text-center text-gray-500 mt-6",children:"Aucun couple trouv."}):A.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-2 gap-4 pb-24",children:g.map(_=>A.jsx(Rh,{couple:_,user:t,myChoice:n[_.id],onVote:r,onlyMyVotes:!1,onDelete:s},_.id))}),A.jsx(yp,{}),A.jsx("button",{onClick:()=>p("/jouer"),className:"fixed bottom-6 right-6 bg-pink-500 hover:bg-pink-600 text-white rounded-full shadow-lg p-4 transition transform hover:scale-110 active:scale-95 focus:outline-none focus:ring-4 focus:ring-pink-300",title:"Jouer",children:A.jsx(PO,{size:26,fill:"white",className:"ml-0.5"})})]})}function HO({user:t,couples:e,votesAll:n}){const r=ro(),[i,s]=R.useState(!0),[o,a]=R.useState([]);return R.useEffect(()=>{(async()=>{if(!t){a([]),s(!1);return}const l=Ch(Gr(kt,"votes"),Wg("uid","==",t.uid),oO("updatedAt","desc")),c=await Mc(l),h=[];c.forEach(d=>{var x,y;const p=d.data(),g=e.find(v=>v.id===p.couple_id);if(!g)return;let _;p.people_voted_id==="tie"?_="tie":_=p.people_voted_id===g.personA.id?"A":"B";const S=(y=(x=p.updatedAt)==null?void 0:x.toDate)==null?void 0:y.call(x);h.push({couple:g,choice:_,updatedAt:S})}),a(h),s(!1)})()},[t,e]),t?A.jsxs("main",{className:"max-w-5xl mx-auto px-4 py-6 space-y-4",children:[A.jsx("h2",{className:"text-lg font-semibold",children:"Mon historique"}),i&&A.jsx("div",{children:"Chargement"}),!i&&o.length===0&&A.jsx("div",{className:"text-gray-600 text-sm",children:"Tu nas encore vot pour aucun couple."}),!i&&o.map((l,c)=>A.jsxs("div",{className:"space-y-2",children:[l.updatedAt&&A.jsxs("div",{className:"text-xs text-gray-500",children:["Mis  jour le ",l.updatedAt.toLocaleDateString()," "," ",l.updatedAt.toLocaleTimeString()]}),A.jsx(Rh,{couple:l.couple,user:t,myChoice:l.choice,onlyMyVotes:!0,compact:!0})]},l.couple.id+"_"+c))]}):A.jsx("main",{className:"max-w-5xl mx-auto px-4 py-10",children:A.jsxs("div",{className:"p-6 border rounded-2xl bg-white",children:[A.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Mes votes"}),A.jsx("p",{className:"text-gray-600",children:"Connecte-toi pour voir ton historique de votes."}),A.jsx("button",{onClick:()=>r("/"),className:"mt-4 px-3 py-2 rounded bg-gray-900 text-white",children:"Retour  laccueil"})]})})}var ow=!1,vi,vp,_p,ju,Uu,gC,Bu,wp,Ep,Tp,yC,Sp,Ip,vC,_C;function jt(){if(!ow){ow=!0;var t=navigator.userAgent,e=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(t),n=/(Mac OS X)|(Windows)|(Linux)/.exec(t);if(Sp=/\b(iPhone|iP[ao]d)/.exec(t),Ip=/\b(iP[ao]d)/.exec(t),Tp=/Android/i.exec(t),vC=/FBAN\/\w+;/i.exec(t),_C=/Mobile/i.exec(t),yC=!!/Win64/.exec(t),e){vi=e[1]?parseFloat(e[1]):e[5]?parseFloat(e[5]):NaN,vi&&document&&document.documentMode&&(vi=document.documentMode);var r=/(?:Trident\/(\d+.\d+))/.exec(t);gC=r?parseFloat(r[1])+4:vi,vp=e[2]?parseFloat(e[2]):NaN,_p=e[3]?parseFloat(e[3]):NaN,ju=e[4]?parseFloat(e[4]):NaN,ju?(e=/(?:Chrome\/(\d+\.\d+))/.exec(t),Uu=e&&e[1]?parseFloat(e[1]):NaN):Uu=NaN}else vi=vp=_p=Uu=ju=NaN;if(n){if(n[1]){var i=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(t);Bu=i?parseFloat(i[1].replace("_",".")):!0}else Bu=!1;wp=!!n[2],Ep=!!n[3]}else Bu=wp=Ep=!1}}var xp={ie:function(){return jt()||vi},ieCompatibilityMode:function(){return jt()||gC>vi},ie64:function(){return xp.ie()&&yC},firefox:function(){return jt()||vp},opera:function(){return jt()||_p},webkit:function(){return jt()||ju},safari:function(){return xp.webkit()},chrome:function(){return jt()||Uu},windows:function(){return jt()||wp},osx:function(){return jt()||Bu},linux:function(){return jt()||Ep},iphone:function(){return jt()||Sp},mobile:function(){return jt()||Sp||Ip||Tp||_C},nativeApp:function(){return jt()||vC},android:function(){return jt()||Tp},ipad:function(){return jt()||Ip}},qO=xp,KO=!!(typeof window<"u"&&window.document&&window.document.createElement),GO={canUseDOM:KO},QO=GO,wC=QO,EC;wC.canUseDOM&&(EC=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function YO(t,e){if(!wC.canUseDOM||e&&!("addEventListener"in document))return!1;var n="on"+t,r=n in document;if(!r){var i=document.createElement("div");i.setAttribute(n,"return;"),r=typeof i[n]=="function"}return!r&&EC&&t==="wheel"&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var XO=YO,JO=qO,ZO=XO,aw=10,lw=40,uw=800;function TC(t){var e=0,n=0,r=0,i=0;return"detail"in t&&(n=t.detail),"wheelDelta"in t&&(n=-t.wheelDelta/120),"wheelDeltaY"in t&&(n=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=n,n=0),r=e*aw,i=n*aw,"deltaY"in t&&(i=t.deltaY),"deltaX"in t&&(r=t.deltaX),(r||i)&&t.deltaMode&&(t.deltaMode==1?(r*=lw,i*=lw):(r*=uw,i*=uw)),r&&!e&&(e=r<1?-1:1),i&&!n&&(n=i<1?-1:1),{spinX:e,spinY:n,pixelX:r,pixelY:i}}TC.getEventType=function(){return JO.firefox()?"DOMMouseScroll":ZO("wheel")?"wheel":"mousewheel"};var eF=TC,tF=eF;const nF=RE(tF);function rF(t,e,n,r,i,s){s===void 0&&(s=0);var o=Gs(t,e,s),a=o.width,l=o.height,c=Math.min(a,n),h=Math.min(l,r);return c>h*i?{width:h*i,height:h}:{width:c,height:c/i}}function iF(t){return t.width>t.height?t.width/t.naturalWidth:t.height/t.naturalHeight}function Bo(t,e,n,r,i){i===void 0&&(i=0);var s=Gs(e.width,e.height,i),o=s.width,a=s.height;return{x:cw(t.x,o,n.width,r),y:cw(t.y,a,n.height,r)}}function cw(t,e,n,r){var i=e*r/2-n/2;return kh(t,-i,i)}function hw(t,e){return Math.sqrt(Math.pow(t.y-e.y,2)+Math.pow(t.x-e.x,2))}function dw(t,e){return Math.atan2(e.y-t.y,e.x-t.x)*180/Math.PI}function sF(t,e,n,r,i,s,o){s===void 0&&(s=0),o===void 0&&(o=!0);var a=o?oF:aF,l=Gs(e.width,e.height,s),c=Gs(e.naturalWidth,e.naturalHeight,s),h={x:a(100,((l.width-n.width/i)/2-t.x/i)/l.width*100),y:a(100,((l.height-n.height/i)/2-t.y/i)/l.height*100),width:a(100,n.width/l.width*100/i),height:a(100,n.height/l.height*100/i)},d=Math.round(a(c.width,h.width*c.width/100)),p=Math.round(a(c.height,h.height*c.height/100)),g=c.width>=c.height*r,_=g?{width:Math.round(p*r),height:p}:{width:d,height:Math.round(d/r)},S=tt(tt({},_),{x:Math.round(a(c.width-_.width,h.x*c.width/100)),y:Math.round(a(c.height-_.height,h.y*c.height/100))});return{croppedAreaPercentages:h,croppedAreaPixels:S}}function oF(t,e){return Math.min(t,Math.max(0,e))}function aF(t,e){return e}function lF(t,e,n,r,i,s){var o=Gs(e.width,e.height,n),a=kh(r.width/o.width*(100/t.width),i,s),l={x:a*o.width/2-r.width/2-o.width*a*(t.x/100),y:a*o.height/2-r.height/2-o.height*a*(t.y/100)};return{crop:l,zoom:a}}function uF(t,e,n){var r=iF(e);return n.height>n.width?n.height/(t.height*r):n.width/(t.width*r)}function cF(t,e,n,r,i,s){n===void 0&&(n=0);var o=Gs(e.naturalWidth,e.naturalHeight,n),a=kh(uF(t,e,r),i,s),l=r.height>r.width?r.height/t.height:r.width/t.width,c={x:((o.width-t.width)/2-t.x)*l,y:((o.height-t.height)/2-t.y)*l};return{crop:c,zoom:a}}function fw(t,e){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}function hF(t){return t*Math.PI/180}function Gs(t,e,n){var r=hF(n);return{width:Math.abs(Math.cos(r)*t)+Math.abs(Math.sin(r)*e),height:Math.abs(Math.sin(r)*t)+Math.abs(Math.cos(r)*e)}}function kh(t,e,n){return Math.min(Math.max(t,e),n)}function hu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.filter(function(n){return typeof n=="string"&&n.length>0}).join(" ").trim()}var dF=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,fF=1,pF=3,mF=1,gF=function(t){aN(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.cropperRef=R.createRef(),n.imageRef=R.createRef(),n.videoRef=R.createRef(),n.containerPosition={x:0,y:0},n.containerRef=null,n.styleRef=null,n.containerRect=null,n.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},n.dragStartPosition={x:0,y:0},n.dragStartCrop={x:0,y:0},n.gestureZoomStart=0,n.gestureRotationStart=0,n.isTouching=!1,n.lastPinchDistance=0,n.lastPinchRotation=0,n.rafDragTimeout=null,n.rafPinchTimeout=null,n.wheelTimer=null,n.currentDoc=typeof document<"u"?document:null,n.currentWindow=typeof window<"u"?window:null,n.resizeObserver=null,n.previousCropSize=null,n.isInitialized=!1,n.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},n.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!n.containerRef)){var r=!0;n.resizeObserver=new window.ResizeObserver(function(i){if(r){r=!1;return}n.computeSizes()}),n.resizeObserver.observe(n.containerRef)}},n.preventZoomSafari=function(r){return r.preventDefault()},n.cleanEvents=function(){n.currentDoc&&(n.currentDoc.removeEventListener("mousemove",n.onMouseMove),n.currentDoc.removeEventListener("mouseup",n.onDragStopped),n.currentDoc.removeEventListener("touchmove",n.onTouchMove),n.currentDoc.removeEventListener("touchend",n.onDragStopped),n.currentDoc.removeEventListener("gesturechange",n.onGestureChange),n.currentDoc.removeEventListener("gestureend",n.onGestureEnd),n.currentDoc.removeEventListener("scroll",n.onScroll))},n.clearScrollEvent=function(){n.containerRef&&n.containerRef.removeEventListener("wheel",n.onWheel),n.wheelTimer&&clearTimeout(n.wheelTimer)},n.onMediaLoad=function(){var r=n.computeSizes();r&&(n.previousCropSize=r,n.emitCropData(),n.setInitialCrop(r),n.isInitialized=!0),n.props.onMediaLoaded&&n.props.onMediaLoaded(n.mediaSize)},n.setInitialCrop=function(r){if(n.props.initialCroppedAreaPercentages){var i=lF(n.props.initialCroppedAreaPercentages,n.mediaSize,n.props.rotation,r,n.props.minZoom,n.props.maxZoom),s=i.crop,o=i.zoom;n.props.onCropChange(s),n.props.onZoomChange&&n.props.onZoomChange(o)}else if(n.props.initialCroppedAreaPixels){var a=cF(n.props.initialCroppedAreaPixels,n.mediaSize,n.props.rotation,r,n.props.minZoom,n.props.maxZoom),s=a.crop,o=a.zoom;n.props.onCropChange(s),n.props.onZoomChange&&n.props.onZoomChange(o)}},n.computeSizes=function(){var r,i,s,o,a,l,c=n.imageRef.current||n.videoRef.current;if(c&&n.containerRef){n.containerRect=n.containerRef.getBoundingClientRect(),n.saveContainerPosition();var h=n.containerRect.width/n.containerRect.height,d=((r=n.imageRef.current)===null||r===void 0?void 0:r.naturalWidth)||((i=n.videoRef.current)===null||i===void 0?void 0:i.videoWidth)||0,p=((s=n.imageRef.current)===null||s===void 0?void 0:s.naturalHeight)||((o=n.videoRef.current)===null||o===void 0?void 0:o.videoHeight)||0,g=c.offsetWidth<d||c.offsetHeight<p,_=d/p,S=void 0;if(g)switch(n.state.mediaObjectFit){default:case"contain":S=h>_?{width:n.containerRect.height*_,height:n.containerRect.height}:{width:n.containerRect.width,height:n.containerRect.width/_};break;case"horizontal-cover":S={width:n.containerRect.width,height:n.containerRect.width/_};break;case"vertical-cover":S={width:n.containerRect.height*_,height:n.containerRect.height};break}else S={width:c.offsetWidth,height:c.offsetHeight};n.mediaSize=tt(tt({},S),{naturalWidth:d,naturalHeight:p}),n.props.setMediaSize&&n.props.setMediaSize(n.mediaSize);var x=n.props.cropSize?n.props.cropSize:rF(n.mediaSize.width,n.mediaSize.height,n.containerRect.width,n.containerRect.height,n.props.aspect,n.props.rotation);return(((a=n.state.cropSize)===null||a===void 0?void 0:a.height)!==x.height||((l=n.state.cropSize)===null||l===void 0?void 0:l.width)!==x.width)&&n.props.onCropSizeChange&&n.props.onCropSizeChange(x),n.setState({cropSize:x},n.recomputeCropPosition),n.props.setCropSize&&n.props.setCropSize(x),x}},n.saveContainerPosition=function(){if(n.containerRef){var r=n.containerRef.getBoundingClientRect();n.containerPosition={x:r.left,y:r.top}}},n.onMouseDown=function(r){n.currentDoc&&(r.preventDefault(),n.currentDoc.addEventListener("mousemove",n.onMouseMove),n.currentDoc.addEventListener("mouseup",n.onDragStopped),n.saveContainerPosition(),n.onDragStart(e.getMousePoint(r)))},n.onMouseMove=function(r){return n.onDrag(e.getMousePoint(r))},n.onScroll=function(r){n.currentDoc&&(r.preventDefault(),n.saveContainerPosition())},n.onTouchStart=function(r){n.currentDoc&&(n.isTouching=!0,!(n.props.onTouchRequest&&!n.props.onTouchRequest(r))&&(n.currentDoc.addEventListener("touchmove",n.onTouchMove,{passive:!1}),n.currentDoc.addEventListener("touchend",n.onDragStopped),n.saveContainerPosition(),r.touches.length===2?n.onPinchStart(r):r.touches.length===1&&n.onDragStart(e.getTouchPoint(r.touches[0]))))},n.onTouchMove=function(r){r.preventDefault(),r.touches.length===2?n.onPinchMove(r):r.touches.length===1&&n.onDrag(e.getTouchPoint(r.touches[0]))},n.onGestureStart=function(r){n.currentDoc&&(r.preventDefault(),n.currentDoc.addEventListener("gesturechange",n.onGestureChange),n.currentDoc.addEventListener("gestureend",n.onGestureEnd),n.gestureZoomStart=n.props.zoom,n.gestureRotationStart=n.props.rotation)},n.onGestureChange=function(r){if(r.preventDefault(),!n.isTouching){var i=e.getMousePoint(r),s=n.gestureZoomStart-1+r.scale;if(n.setNewZoom(s,i,{shouldUpdatePosition:!0}),n.props.onRotationChange){var o=n.gestureRotationStart+r.rotation;n.props.onRotationChange(o)}}},n.onGestureEnd=function(r){n.cleanEvents()},n.onDragStart=function(r){var i,s,o=r.x,a=r.y;n.dragStartPosition={x:o,y:a},n.dragStartCrop=tt({},n.props.crop),(s=(i=n.props).onInteractionStart)===null||s===void 0||s.call(i)},n.onDrag=function(r){var i=r.x,s=r.y;n.currentWindow&&(n.rafDragTimeout&&n.currentWindow.cancelAnimationFrame(n.rafDragTimeout),n.rafDragTimeout=n.currentWindow.requestAnimationFrame(function(){if(n.state.cropSize&&!(i===void 0||s===void 0)){var o=i-n.dragStartPosition.x,a=s-n.dragStartPosition.y,l={x:n.dragStartCrop.x+o,y:n.dragStartCrop.y+a},c=n.props.restrictPosition?Bo(l,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):l;n.props.onCropChange(c)}}))},n.onDragStopped=function(){var r,i;n.isTouching=!1,n.cleanEvents(),n.emitCropData(),(i=(r=n.props).onInteractionEnd)===null||i===void 0||i.call(r)},n.onWheel=function(r){if(n.currentWindow&&!(n.props.onWheelRequest&&!n.props.onWheelRequest(r))){r.preventDefault();var i=e.getMousePoint(r),s=nF(r).pixelY,o=n.props.zoom-s*n.props.zoomSpeed/200;n.setNewZoom(o,i,{shouldUpdatePosition:!0}),n.state.hasWheelJustStarted||n.setState({hasWheelJustStarted:!0},function(){var a,l;return(l=(a=n.props).onInteractionStart)===null||l===void 0?void 0:l.call(a)}),n.wheelTimer&&clearTimeout(n.wheelTimer),n.wheelTimer=n.currentWindow.setTimeout(function(){return n.setState({hasWheelJustStarted:!1},function(){var a,l;return(l=(a=n.props).onInteractionEnd)===null||l===void 0?void 0:l.call(a)})},250)}},n.getPointOnContainer=function(r,i){var s=r.x,o=r.y;if(!n.containerRect)throw new Error("The Cropper is not mounted");return{x:n.containerRect.width/2-(s-i.x),y:n.containerRect.height/2-(o-i.y)}},n.getPointOnMedia=function(r){var i=r.x,s=r.y,o=n.props,a=o.crop,l=o.zoom;return{x:(i+a.x)/l,y:(s+a.y)/l}},n.setNewZoom=function(r,i,s){var o=s===void 0?{}:s,a=o.shouldUpdatePosition,l=a===void 0?!0:a;if(!(!n.state.cropSize||!n.props.onZoomChange)){var c=kh(r,n.props.minZoom,n.props.maxZoom);if(l){var h=n.getPointOnContainer(i,n.containerPosition),d=n.getPointOnMedia(h),p={x:d.x*c-h.x,y:d.y*c-h.y},g=n.props.restrictPosition?Bo(p,n.mediaSize,n.state.cropSize,c,n.props.rotation):p;n.props.onCropChange(g)}n.props.onZoomChange(c)}},n.getCropData=function(){if(!n.state.cropSize)return null;var r=n.props.restrictPosition?Bo(n.props.crop,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):n.props.crop;return sF(r,n.mediaSize,n.state.cropSize,n.getAspect(),n.props.zoom,n.props.rotation,n.props.restrictPosition)},n.emitCropData=function(){var r=n.getCropData();if(r){var i=r.croppedAreaPercentages,s=r.croppedAreaPixels;n.props.onCropComplete&&n.props.onCropComplete(i,s),n.props.onCropAreaChange&&n.props.onCropAreaChange(i,s)}},n.emitCropAreaChange=function(){var r=n.getCropData();if(r){var i=r.croppedAreaPercentages,s=r.croppedAreaPixels;n.props.onCropAreaChange&&n.props.onCropAreaChange(i,s)}},n.recomputeCropPosition=function(){if(n.state.cropSize){var r=n.props.crop;if(n.isInitialized&&n.previousCropSize){var i=Math.abs(n.previousCropSize.width-n.state.cropSize.width)>1e-6||Math.abs(n.previousCropSize.height-n.state.cropSize.height)>1e-6;if(i){var s=n.state.cropSize.width/n.previousCropSize.width,o=n.state.cropSize.height/n.previousCropSize.height;r={x:n.props.crop.x*s,y:n.props.crop.y*o}}}var a=n.props.restrictPosition?Bo(r,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):r;n.previousCropSize=n.state.cropSize,n.props.onCropChange(a),n.emitCropData()}},n.onKeyDown=function(r){var i,s,o=n.props,a=o.crop,l=o.onCropChange,c=o.keyboardStep,h=o.zoom,d=o.rotation,p=c;if(n.state.cropSize){r.shiftKey&&(p*=.2);var g=tt({},a);switch(r.key){case"ArrowUp":g.y-=p,r.preventDefault();break;case"ArrowDown":g.y+=p,r.preventDefault();break;case"ArrowLeft":g.x-=p,r.preventDefault();break;case"ArrowRight":g.x+=p,r.preventDefault();break;default:return}n.props.restrictPosition&&(g=Bo(g,n.mediaSize,n.state.cropSize,h,d)),r.repeat||(s=(i=n.props).onInteractionStart)===null||s===void 0||s.call(i),l(g)}},n.onKeyUp=function(r){var i,s;switch(r.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":r.preventDefault();break;default:return}n.emitCropData(),(s=(i=n.props).onInteractionEnd)===null||s===void 0||s.call(i)},n}return e.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=dF,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},e.prototype.componentWillUnmount=function(){var n,r;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(n=this.resizeObserver)===null||n===void 0||n.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((r=this.styleRef.parentNode)===null||r===void 0||r.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},e.prototype.componentDidUpdate=function(n){var r,i,s,o,a,l,c,h,d;n.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):n.aspect!==this.props.aspect?this.computeSizes():n.objectFit!==this.props.objectFit?this.computeSizes():n.zoom!==this.props.zoom?this.recomputeCropPosition():((r=n.cropSize)===null||r===void 0?void 0:r.height)!==((i=this.props.cropSize)===null||i===void 0?void 0:i.height)||((s=n.cropSize)===null||s===void 0?void 0:s.width)!==((o=this.props.cropSize)===null||o===void 0?void 0:o.width)?this.computeSizes():(((a=n.crop)===null||a===void 0?void 0:a.x)!==((l=this.props.crop)===null||l===void 0?void 0:l.x)||((c=n.crop)===null||c===void 0?void 0:c.y)!==((h=this.props.crop)===null||h===void 0?void 0:h.y))&&this.emitCropAreaChange(),n.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),n.video!==this.props.video&&((d=this.videoRef.current)===null||d===void 0||d.load());var p=this.getObjectFit();p!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:p},this.computeSizes)},e.prototype.getAspect=function(){var n=this.props,r=n.cropSize,i=n.aspect;return r?r.width/r.height:i},e.prototype.getObjectFit=function(){var n,r,i,s;if(this.props.objectFit==="cover"){var o=this.imageRef.current||this.videoRef.current;if(o&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var a=this.containerRect.width/this.containerRect.height,l=((n=this.imageRef.current)===null||n===void 0?void 0:n.naturalWidth)||((r=this.videoRef.current)===null||r===void 0?void 0:r.videoWidth)||0,c=((i=this.imageRef.current)===null||i===void 0?void 0:i.naturalHeight)||((s=this.videoRef.current)===null||s===void 0?void 0:s.videoHeight)||0,h=l/c;return h<a?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},e.prototype.onPinchStart=function(n){var r=e.getTouchPoint(n.touches[0]),i=e.getTouchPoint(n.touches[1]);this.lastPinchDistance=hw(r,i),this.lastPinchRotation=dw(r,i),this.onDragStart(fw(r,i))},e.prototype.onPinchMove=function(n){var r=this;if(!(!this.currentDoc||!this.currentWindow)){var i=e.getTouchPoint(n.touches[0]),s=e.getTouchPoint(n.touches[1]),o=fw(i,s);this.onDrag(o),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var a=hw(i,s),l=r.props.zoom*(a/r.lastPinchDistance);r.setNewZoom(l,o,{shouldUpdatePosition:!1}),r.lastPinchDistance=a;var c=dw(i,s),h=r.props.rotation+(c-r.lastPinchRotation);r.props.onRotationChange&&r.props.onRotationChange(h),r.lastPinchRotation=c})}},e.prototype.render=function(){var n=this,r,i=this.props,s=i.image,o=i.video,a=i.mediaProps,l=i.cropperProps,c=i.transform,h=i.crop,d=h.x,p=h.y,g=i.rotation,_=i.zoom,S=i.cropShape,x=i.showGrid,y=i.roundCropAreaPixels,v=i.style,E=v.containerStyle,N=v.cropAreaStyle,M=v.mediaStyle,F=i.classes,I=F.containerClassName,w=F.cropAreaClassName,C=F.mediaClassName,P=(r=this.state.mediaObjectFit)!==null&&r!==void 0?r:this.getObjectFit();return R.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(L){return n.containerRef=L},"data-testid":"container",style:E,className:hu("reactEasyCrop_Container",I)},s?R.createElement("img",tt({alt:"",className:hu("reactEasyCrop_Image",P==="contain"&&"reactEasyCrop_Contain",P==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",P==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",C)},a,{src:s,ref:this.imageRef,style:tt(tt({},M),{transform:c||"translate(".concat(d,"px, ").concat(p,"px) rotate(").concat(g,"deg) scale(").concat(_,")")}),onLoad:this.onMediaLoad})):o&&R.createElement("video",tt({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:hu("reactEasyCrop_Video",P==="contain"&&"reactEasyCrop_Contain",P==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",P==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",C)},a,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:tt(tt({},M),{transform:c||"translate(".concat(d,"px, ").concat(p,"px) rotate(").concat(g,"deg) scale(").concat(_,")")}),controls:!1}),(Array.isArray(o)?o:[{src:o}]).map(function(D){return R.createElement("source",tt({key:D.src},D))})),this.state.cropSize&&R.createElement("div",tt({ref:this.cropperRef,style:tt(tt({},N),{width:y?Math.round(this.state.cropSize.width):this.state.cropSize.width,height:y?Math.round(this.state.cropSize.height):this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:hu("reactEasyCrop_CropArea",S==="round"&&"reactEasyCrop_CropAreaRound",x&&"reactEasyCrop_CropAreaGrid",w)},l)))},e.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:pF,minZoom:fF,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:mF},e.getMousePoint=function(n){return{x:Number(n.clientX),y:Number(n.clientY)}},e.getTouchPoint=function(n){return{x:Number(n.clientX),y:Number(n.clientY)}},e}(R.Component);function yF({imageSrc:t,onCancel:e,onCrop:n}){const[r,i]=R.useState({x:0,y:0}),[s,o]=R.useState(1),[a,l]=R.useState(null),[c,h]=R.useState(!1),[d,p]=R.useState(null),g=R.useCallback((y,v)=>{l(v)},[]),_=async y=>{if(y.startsWith("data:")||y.startsWith("blob:"))return S(y);const v=`https://corsproxy.io/?${encodeURIComponent(y)}`,E=await fetch(v);if(!E.ok)throw new Error(`Erreur proxy: ${E.status}`);const N=await E.blob(),M=URL.createObjectURL(N);return S(M)},S=y=>new Promise((v,E)=>{const N=new Image;N.onload=()=>v(N),N.onerror=M=>E(M),N.src=y}),x=async()=>{if(!a){p("Zone de recadrage non dfinie");return}h(!0),p(null);try{const y=await _(t),v=document.createElement("canvas"),E=v.getContext("2d");if(!E)throw new Error("Impossible d'obtenir le contexte du canvas");const{width:N,height:M,x:F,y:I}=a;v.width=N,v.height=M,E.drawImage(y,F,I,N,M,0,0,N,M),v.toBlob(w=>{h(!1),w?n(w):p("chec de la conversion en image.")},"image/jpeg",.9)}catch(y){console.error("Erreur lors du recadrage :",y),p(y.message||"Erreur inconnue lors du recadrage."),h(!1)}};return A.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",children:A.jsxs("div",{className:"bg-white p-4 rounded-2xl w-80 sm:w-96 flex flex-col items-center shadow-lg",children:[A.jsx("div",{className:"relative w-64 h-64 bg-gray-100 rounded-full overflow-hidden",children:A.jsx(gF,{image:t,crop:r,zoom:s,aspect:1,cropShape:"round",showGrid:!1,onCropChange:i,onZoomChange:o,onCropComplete:g})}),A.jsx("input",{type:"range",min:1,max:3,step:.01,value:s,onChange:y=>o(Number(y.target.value)),className:"w-full mt-4 accent-pink-500"}),A.jsxs("div",{className:"flex gap-3 mt-4",children:[A.jsx("button",{onClick:e,disabled:c,className:"px-4 py-2 text-sm bg-gray-200 rounded hover:bg-gray-300",children:"Annuler"}),A.jsx("button",{onClick:x,disabled:c,className:`px-4 py-2 text-sm rounded text-white ${c?"bg-gray-400 cursor-not-allowed":"bg-pink-500 hover:bg-pink-600"}`,children:c?"Recadrage...":"Valider"})]}),d&&A.jsx("p",{className:"text-red-600 text-xs mt-3",children:d})]})})}function vF({label:t,imageUrl:e,file:n,onFileChange:r,onUrlChange:i}){const[s,o]=R.useState(!1),[a,l]=R.useState(null),c=_=>{const S=new FileReader;S.onload=x=>{var y;return l((y=x.target)==null?void 0:y.result)},S.readAsDataURL(_)},h=_=>{var x;const S=(x=_.target.files)==null?void 0:x[0];S&&c(S)},d=_=>{var x;_.preventDefault(),o(!1);const S=(x=_.dataTransfer.files)==null?void 0:x[0];S&&c(S)},p=_=>{const S=new File([_],"cropped.jpg",{type:"image/jpeg"});r(S),l(null)},g=async()=>{e&&l(e)};return A.jsxs("div",{children:[A.jsxs("div",{onDrop:d,onDragOver:_=>{_.preventDefault(),o(!0)},onDragLeave:()=>o(!1),className:`relative w-32 h-32 rounded-full border-2 border-dashed flex items-center justify-center cursor-pointer transition ${s?"border-pink-400 bg-pink-50":"border-gray-300 bg-gray-100"}`,children:[n||e?A.jsx("img",{src:n?URL.createObjectURL(n):e,alt:"Aperu",className:"object-cover w-full h-full rounded-full"}):A.jsx(EO,{className:"text-gray-400 w-10 h-10"}),A.jsx("label",{htmlFor:`${t}-file`,className:"absolute bottom-1 mb-2 bg-pink-500 text-white text-xs px-2 py-1 rounded cursor-pointer shadow hover:bg-pink-600 transition",children:n||e?"Changer":"Choisir"}),A.jsx("input",{id:`${t}-file`,type:"file",accept:"image/*",onChange:h,className:"hidden"})]}),A.jsxs("div",{className:"flex gap-2 items-center mt-3",children:[A.jsx("input",{type:"text",placeholder:"Ou coller une URL dimage",value:e,onChange:_=>i(_.target.value),className:"flex-1 border rounded p-2 text-sm"}),A.jsx("button",{type:"button",onClick:g,disabled:!e,className:`px-3 py-1.5 rounded text-sm text-white ${e?"bg-pink-500 hover:bg-pink-600":"bg-gray-300 cursor-not-allowed"}`,children:"Recadrer"})]}),a&&A.jsx(yF,{imageSrc:a,onCancel:()=>l(null),onCrop:p})]})}async function pw(t){const e="2857d634922be62f9aec8e82cb24cf90",n=new FormData;n.append("key",e),n.append("image",t);const i=await(await fetch("https://api.imgbb.com/1/upload",{method:"POST",body:n})).json();if(i.success)return i.data.url;throw new Error("Upload  ImgBB chou : "+JSON.stringify(i))}function _F(t,e,n){const[r,i]=R.useState({display_name:"",image_url:"",file:null}),[s,o]=R.useState({display_name:"",image_url:"",file:null}),[a,l]=R.useState(!1),[c,h]=R.useState({}),[d,p]=R.useState(null),[g,_]=R.useState(!1);async function S(E){if(!E.trim())return!1;const N=Ch(Gr(kt,"people"),Wg("display_name","==",E.trim()));return!(await Mc(N)).empty}const x=async E=>{const N=E==="A"?r:s;if(!N.display_name.trim())return;const M=await S(N.display_name);h(F=>({...F,[E]:M?`Le nom "${N.display_name}" existe dj dans un autre couple.`:""}))},y=async E=>{if(E.preventDefault(),!r.display_name||!s.display_name){p("Les deux noms sont obligatoires.");return}if(!a){p("Vous devez certifier avoir obtenu le consentement des deux personnes.");return}if(!r.file&&!r.image_url||!s.file&&!s.image_url){p("Chaque personne doit avoir au moins une image ou une URL dimage.");return}if(c.A||c.B){p("Un des noms existe dj. Modifiez-le avant de continuer.");return}p(null),_(!0);try{let N=r.image_url,M=s.image_url;r.file&&(N=await pw(r.file)),s.file&&(M=await pw(s.file));const F=Gr(kt,"people"),I=await Z0(F,{display_name:r.display_name,image_url:N??""}),w=await Z0(F,{display_name:s.display_name,image_url:M??""}),C=Mr(Gr(kt,"couples"));await Ld(C,{id:C.id,people_a_id:I.id,people_b_id:w.id,count_a:0,count_b:0,createdBy:t.uid,createdAt:dC(),consentCertified:!0,category:n}),await Promise.all([Ld(I,{couple_id:C.id},{merge:!0}),Ld(w,{couple_id:C.id},{merge:!0})]),e("/")}catch(N){console.error(N),p("Erreur lors de lenregistrement : "+N.message)}finally{_(!1)}},v=!g&&a&&r.display_name.trim()!==""&&s.display_name.trim()!==""&&(r.file||r.image_url.trim()!=="")&&(s.file||s.image_url.trim()!=="")&&!c.A&&!c.B;return{personA:r,personB:s,setPersonA:i,setPersonB:o,consentChecked:a,setConsentChecked:l,nameErrors:c,error:d,loading:g,canSubmit:v,handleBlur:x,handleSubmit:y}}function wF({user:t}){const e=ro(),[n,r]=R.useState("friends"),{personA:i,personB:s,setPersonA:o,setPersonB:a,consentChecked:l,setConsentChecked:c,nameErrors:h,error:d,loading:p,canSubmit:g,handleBlur:_,handleSubmit:S}=_F(t,e,n);return t?A.jsxs("main",{className:"max-w-3xl mx-auto px-4 py-10",children:[A.jsx("h2",{className:"text-lg font-semibold mb-6",children:"Ajouter un nouveau couple"}),A.jsxs("form",{onSubmit:S,className:"space-y-6",children:[A.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[{label:"Personne A",data:i,set:o,err:h.A,key:"A"},{label:"Personne B",data:s,set:a,err:h.B,key:"B"}].map(({label:x,data:y,set:v,err:E,key:N})=>A.jsxs("div",{children:[A.jsx("h3",{className:"font-medium mb-2",children:x}),A.jsx("input",{type:"text",placeholder:"Nom",value:y.display_name,onChange:M=>v({...y,display_name:M.target.value}),onBlur:()=>_(N),className:`w-full border rounded p-2 mb-4 ${E?"border-red-500 bg-red-50":"border-gray-300"}`}),E&&A.jsx("div",{className:"text-xs text-red-600 mb-2",children:E}),A.jsx(vF,{label:x,imageUrl:y.image_url,file:y.file,onFileChange:M=>v({...y,file:M}),onUrlChange:M=>v({...y,image_url:M})})]},x))}),A.jsxs("div",{className:"mt-6 border-t pt-4",children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Catgorie du couple"}),A.jsxs("select",{value:n,onChange:x=>r(x.target.value),className:"border rounded p-2 text-sm w-full",children:[A.jsx("option",{value:"friends",children:" Connaissances / Potes"}),A.jsx("option",{value:"people",children:" People / Stars"})]})]}),A.jsxs("div",{className:"flex items-start gap-2 border-t pt-4 mt-6",children:[A.jsx("input",{id:"consent",type:"checkbox",checked:l,onChange:x=>c(x.target.checked),className:"mt-1"}),A.jsxs("label",{htmlFor:"consent",className:"text-sm text-gray-700",children:["Je certifie avoir obtenu le ",A.jsx("strong",{children:"consentement explicite"})," des deux personnes reprsentes (textes et images) pour la publication sur Surchope. Jassume lentire responsabilit en cas de contenu non autoris."]})]}),d&&A.jsx("div",{className:"text-red-600 text-sm",children:d}),A.jsx("button",{type:"submit",disabled:!g,className:`px-4 py-2 rounded text-white ${g?"bg-blue-600 hover:bg-blue-700":"bg-gray-300 cursor-not-allowed"}`,children:p?"Enregistrement...":"Crer le couple"})]})]}):A.jsx("main",{className:"max-w-3xl mx-auto px-4 py-10",children:A.jsxs("div",{className:"p-6 border rounded-2xl bg-white",children:[A.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Ajouter un couple"}),A.jsx("p",{className:"text-gray-600",children:"Connecte-toi pour pouvoir ajouter un couple."}),A.jsx("button",{onClick:()=>e("/"),className:"mt-4 px-3 py-2 rounded bg-gray-900 text-white",children:"Retour  laccueil"})]})})}function EF(){return A.jsxs("main",{className:"max-w-3xl mx-auto px-4 py-10 text-sm leading-relaxed text-gray-700",children:[A.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"Politique de confidentialit"}),A.jsxs("p",{className:"mb-4",children:["Le site ",A.jsx("strong",{children:"Surchope"})," est un projet communautaire et ludique, sans but commercial, permettant aux utilisateurs de voter anonymement sur des couples fictifs ou rels."]}),A.jsx("h2",{className:"text-lg font-semibold mt-6 mb-2",children:"1. Donnes collectes"}),A.jsx("p",{children:"Le site collecte uniquement les donnes strictement ncessaires  son fonctionnement :"}),A.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[A.jsx("li",{children:"Adresse e-mail et photo de profil via Google (connexion Firebase Auth)"}),A.jsx("li",{children:"Identifiants anonymes de vote (UID, couple_id, choix A/B)"}),A.jsx("li",{children:"ventuellement des images fournies par les utilisateurs (hberges sur ImgBB)"})]}),A.jsx("h2",{className:"text-lg font-semibold mt-6 mb-2",children:"2. Finalit du traitement"}),A.jsx("p",{children:"Ces donnes sont utilises uniquement pour permettre laffichage des couples, la gestion des votes, et la modration des contenus. Aucune donne nest vendue, partage ou exploite  des fins commerciales."}),A.jsx("h2",{className:"text-lg font-semibold mt-6 mb-2",children:"3. Base lgale"}),A.jsxs("p",{children:["Le traitement repose sur le ",A.jsx("strong",{children:"consentement explicite"})," des utilisateurs, notamment lors de la cration dun couple et du tlchargement dimages."]}),A.jsx("h2",{className:"text-lg font-semibold mt-6 mb-2",children:"4. Dure de conservation"}),A.jsx("p",{children:"Les donnes sont conserves tant que le compte utilisateur existe ou que le couple reste publi. Les utilisateurs peuvent demander la suppression de leurs donnes  tout moment."}),A.jsx("h2",{className:"text-lg font-semibold mt-6 mb-2",children:"5. Droit daccs et de suppression"}),A.jsx("p",{children:"Conformment au Rglement Gnral sur la Protection des Donnes (RGPD), vous pouvez demander :"}),A.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[A.jsx("li",{children:"laccs  vos donnes,"}),A.jsx("li",{children:"leur rectification ou leur suppression,"}),A.jsx("li",{children:"la suppression de vos votes ou de vos couples ajouts."})]}),A.jsxs("p",{children:["Pour exercer ces droits, vous pouvez contacter ladministrateur du site  ladresse :",A.jsx("a",{href:"mailto:contact@surchope.fr",className:"text-blue-600 underline ml-1",children:"contact@surchope.fr"})]}),A.jsx("h2",{className:"text-lg font-semibold mt-6 mb-2",children:"6. Hbergement et sous-traitants"}),A.jsx("p",{children:"Les donnes sont hberges par :"}),A.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[A.jsxs("li",{children:[A.jsx("strong",{children:"Firebase (Google Cloud)"}),"  authentification, base de donnes et stockage"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"ImgBB"}),"  hbergement des images uploades"]})]}),A.jsx("p",{children:"Ces services peuvent transfrer des donnes hors de lUnion europenne, conformment aux clauses contractuelles types de la Commission europenne."}),A.jsx("h2",{className:"text-lg font-semibold mt-6 mb-2",children:"7. Contact"}),A.jsxs("p",{children:["Pour toute question ou rclamation concernant vos donnes, contactez :",A.jsx("a",{href:"mailto:contact@surchope.fr",className:"text-blue-600 underline ml-1",children:"contact@surchope.fr"})]}),A.jsxs("p",{className:"mt-6 text-xs text-gray-500",children:["Dernire mise  jour : ",new Date().toLocaleDateString("fr-FR")]})]})}function TF(){const[t,e]=R.useState([]),[n,r]=R.useState(!0),i=new Map;return R.useEffect(()=>{let o=null;(async()=>{const c=await Mc(Gr(kt,"couples"));await a(c),o=cC(Gr(kt,"couples"),a)})();async function a(c){const h=[];for(const d of c.docs){const p=d.data(),g=await l(p.people_a_id),_=await l(p.people_b_id);!g||!_||h.push({id:d.id,personA:g,personB:_,countA:p.count_a??0,countB:p.count_b??0,countTie:p.count_tie??0,category:p.category??"friends"})}e(h),r(!1)}async function l(c){if(i.has(c))return i.get(c);const h=await J0(Mr(kt,"people",c));if(!h.exists())return null;const d={id:h.id,...h.data()};return i.set(c,d),d}return()=>o&&o()},[]),{couples:t,loading:n,setCouples:e,deleteCouple:async(o,a)=>{if(a!=="EuindCjjeTYx5ABLPCRWdflHy2c2"){alert("Tu nas pas les droits pour supprimer ce couple.");return}try{const l=Mr(kt,"couples",o),c=await J0(l);if(!c.exists()){alert("Couple introuvable.");return}const h=c.data(),p=(await Mc(Ch(Gr(kt,"votes"),Wg("couple_id","==",o)))).docs.map(S=>cu(S.ref)),g=Mr(kt,"people",h.people_a_id),_=Mr(kt,"people",h.people_b_id);await Promise.all([...p,cu(g),cu(_),cu(l)]),e(S=>S.filter(x=>x.id!==o)),alert(" Couple supprim avec succs.")}catch(l){console.error("Erreur pendant la suppression du couple :",l),alert(" Erreur lors de la suppression du couple.")}}}}function SF(t,e){const[n,r]=R.useState([]),[i,s]=R.useState({});return R.useEffect(()=>{const a=Ch(Gr(kt,"votes")),l=cC(a,c=>{const h=c.docs.map(d=>{var _,S;const p=d.data(),g=(S=(_=p.updatedAt)==null?void 0:_.toDate)==null?void 0:S.call(_);return{id:d.id,...p,updatedAt:g}});r(h)});return()=>l()},[]),R.useEffect(()=>{if(!t)return s({});const a={};for(const l of n){if(l.uid!==t.uid)continue;const c=e.find(h=>h.id===l.couple_id);c&&(l.people_voted_id==="tie"?a[l.couple_id]="tie":a[l.couple_id]=l.people_voted_id===c.personA.id?"A":"B")}s(a)},[t,n,e]),{votesAll:n,myVotes:i,handleVote:async(a,l)=>{if(!t)return;const c=`${a.id}_${t.uid}`,h=Mr(kt,"votes",c),d=Mr(kt,"couples",a.id),p=l==="A"?a.personA.id:l==="B"?a.personB.id:"tie";await hO(kt,async g=>{const[_,S]=await Promise.all([g.get(h),g.get(d)]);if(!S.exists())throw new Error("Couple not found");const x=S.data();let{count_a:y=0,count_b:v=0,count_tie:E=0}=x;if(!_.exists())l==="A"?y++:l==="B"?v++:E++;else{const N=_.data(),M=N.people_voted_id===a.personA.id?"A":N.people_voted_id===a.personB.id?"B":"tie";if(M===l)return;M==="A"?y--:M==="B"?v--:E--,l==="A"?y++:l==="B"?v++:E++}g.set(d,{count_a:y,count_b:v,count_tie:E},{merge:!0}),g.set(h,{couple_id:a.id,uid:t.uid,people_voted_id:p,updatedAt:dC()},{merge:!0})}),s(g=>({...g,[a.id]:l}))}}}function IF({couples:t,user:e}){const{id:n}=Rk();console.log(t);const r=t.find(i=>i.id===n);return r?A.jsxs("main",{className:"max-w-md mx-auto px-4 py-6",children:[A.jsxs("h1",{className:"text-2xl font-semibold text-center text-pink-600 mb-4",children:[" ",r.personA.display_name," & ",r.personB.display_name]}),A.jsx(Rh,{couple:r,user:e,compact:!1,onlyMyVotes:!1}),A.jsx("div",{className:"text-center mt-6",children:A.jsx(js,{to:"/",className:"text-sm text-gray-500 hover:text-gray-700",children:" Retour  la liste"})})]}):A.jsxs("div",{className:"flex flex-col items-center justify-center py-10 text-center text-gray-600",children:[A.jsx(mC,{}),A.jsx("p",{children:"Chargement du couple... "}),A.jsx(js,{to:"/",className:"mt-4 text-pink-600 hover:underline",children:" Retourner  l'accueil"})]})}const Xg=R.createContext({});function Jg(t){const e=R.useRef(null);return e.current===null&&(e.current=t()),e.current}const Zg=typeof window<"u",SC=Zg?R.useLayoutEffect:R.useEffect,bh=R.createContext(null);function ey(t,e){t.indexOf(e)===-1&&t.push(e)}function ty(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const fr=(t,e,n)=>n>e?e:n<t?t:n;let ny=()=>{};const pr={},IC=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function xC(t){return typeof t=="object"&&t!==null}const CC=t=>/^0[^.\s]+$/u.test(t);function ry(t){let e;return()=>(e===void 0&&(e=t()),e)}const hn=t=>t,xF=(t,e)=>n=>e(t(n)),vl=(...t)=>t.reduce(xF),Ha=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class iy{constructor(){this.subscriptions=[]}add(e){return ey(this.subscriptions,e),()=>ty(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Fn=t=>t*1e3,un=t=>t/1e3;function AC(t,e){return e?t*(1e3/e):0}const PC=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,CF=1e-7,AF=12;function PF(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=PC(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>CF&&++a<AF);return o}function _l(t,e,n,r){if(t===e&&n===r)return hn;const i=s=>PF(s,0,1,t,n);return s=>s===0||s===1?s:PC(i(s),e,r)}const RC=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,kC=t=>e=>1-t(1-e),bC=_l(.33,1.53,.69,.99),sy=kC(bC),DC=RC(sy),NC=t=>(t*=2)<1?.5*sy(t):.5*(2-Math.pow(2,-10*(t-1))),oy=t=>1-Math.sin(Math.acos(t)),VC=kC(oy),MC=RC(oy),RF=_l(.42,0,1,1),kF=_l(0,0,.58,1),LC=_l(.42,0,.58,1),bF=t=>Array.isArray(t)&&typeof t[0]!="number",OC=t=>Array.isArray(t)&&typeof t[0]=="number",DF={linear:hn,easeIn:RF,easeInOut:LC,easeOut:kF,circIn:oy,circInOut:MC,circOut:VC,backIn:sy,backInOut:DC,backOut:bC,anticipate:NC},NF=t=>typeof t=="string",mw=t=>{if(OC(t)){ny(t.length===4);const[e,n,r,i]=t;return _l(e,n,r,i)}else if(NF(t))return DF[t];return t},du=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function VF(t,e){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(h){o.has(h)&&(c.schedule(h),t()),h(a)}const c={schedule:(h,d=!1,p=!1)=>{const _=p&&i?n:r;return d&&o.add(h),_.has(h)||_.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(a=h,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(l),n.clear(),i=!1,s&&(s=!1,c.process(h))}};return c}const MF=40;function FC(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=du.reduce((E,N)=>(E[N]=VF(s),E),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:h,update:d,preRender:p,render:g,postRender:_}=o,S=()=>{const E=pr.useManualTiming?i.timestamp:performance.now();n=!1,pr.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(E-i.timestamp,MF),1)),i.timestamp=E,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),h.process(i),d.process(i),p.process(i),g.process(i),_.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(S))},x=()=>{n=!0,r=!0,i.isProcessing||t(S)};return{schedule:du.reduce((E,N)=>{const M=o[N];return E[N]=(F,I=!1,w=!1)=>(n||x(),M.schedule(F,I,w)),E},{}),cancel:E=>{for(let N=0;N<du.length;N++)o[du[N]].cancel(E)},state:i,steps:o}}const{schedule:ke,cancel:ei,state:ut,steps:Od}=FC(typeof requestAnimationFrame<"u"?requestAnimationFrame:hn,!0);let zu;function LF(){zu=void 0}const zt={now:()=>(zu===void 0&&zt.set(ut.isProcessing||pr.useManualTiming?ut.timestamp:performance.now()),zu),set:t=>{zu=t,queueMicrotask(LF)}},jC=t=>e=>typeof e=="string"&&e.startsWith(t),ay=jC("--"),OF=jC("var(--"),ly=t=>OF(t)?FF.test(t.split("/*")[0].trim()):!1,FF=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,co={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},qa={...co,transform:t=>fr(0,1,t)},fu={...co,default:1},da=t=>Math.round(t*1e5)/1e5,uy=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function jF(t){return t==null}const UF=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,cy=(t,e)=>n=>!!(typeof n=="string"&&UF.test(n)&&n.startsWith(t)||e&&!jF(n)&&Object.prototype.hasOwnProperty.call(n,e)),UC=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(uy);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},BF=t=>fr(0,255,t),Fd={...co,transform:t=>Math.round(BF(t))},Ii={test:cy("rgb","red"),parse:UC("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Fd.transform(t)+", "+Fd.transform(e)+", "+Fd.transform(n)+", "+da(qa.transform(r))+")"};function zF(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Cp={test:cy("#"),parse:zF,transform:Ii.transform},wl=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ir=wl("deg"),jn=wl("%"),ne=wl("px"),$F=wl("vh"),WF=wl("vw"),gw={...jn,parse:t=>jn.parse(t)/100,transform:t=>jn.transform(t*100)},gs={test:cy("hsl","hue"),parse:UC("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+jn.transform(da(e))+", "+jn.transform(da(n))+", "+da(qa.transform(r))+")"},He={test:t=>Ii.test(t)||Cp.test(t)||gs.test(t),parse:t=>Ii.test(t)?Ii.parse(t):gs.test(t)?gs.parse(t):Cp.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ii.transform(t):gs.transform(t),getAnimatableNone:t=>{const e=He.parse(t);return e.alpha=0,He.transform(e)}},HF=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function qF(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(uy))==null?void 0:e.length)||0)+(((n=t.match(HF))==null?void 0:n.length)||0)>0}const BC="number",zC="color",KF="var",GF="var(",yw="${}",QF=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ka(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(QF,l=>(He.test(l)?(r.color.push(s),i.push(zC),n.push(He.parse(l))):l.startsWith(GF)?(r.var.push(s),i.push(KF),n.push(l)):(r.number.push(s),i.push(BC),n.push(parseFloat(l))),++s,yw)).split(yw);return{values:n,split:a,indexes:r,types:i}}function $C(t){return Ka(t).values}function WC(t){const{split:e,types:n}=Ka(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===BC?s+=da(i[o]):a===zC?s+=He.transform(i[o]):s+=i[o]}return s}}const YF=t=>typeof t=="number"?0:He.test(t)?He.getAnimatableNone(t):t;function XF(t){const e=$C(t);return WC(t)(e.map(YF))}const ti={test:qF,parse:$C,createTransformer:WC,getAnimatableNone:XF};function jd(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function JF({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=jd(l,a,t+1/3),s=jd(l,a,t),o=jd(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Lc(t,e){return n=>n>0?e:t}const Ne=(t,e,n)=>t+(e-t)*n,Ud=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},ZF=[Cp,Ii,gs],ej=t=>ZF.find(e=>e.test(t));function vw(t){const e=ej(t);if(!e)return!1;let n=e.parse(t);return e===gs&&(n=JF(n)),n}const _w=(t,e)=>{const n=vw(t),r=vw(e);if(!n||!r)return Lc(t,e);const i={...n};return s=>(i.red=Ud(n.red,r.red,s),i.green=Ud(n.green,r.green,s),i.blue=Ud(n.blue,r.blue,s),i.alpha=Ne(n.alpha,r.alpha,s),Ii.transform(i))},Ap=new Set(["none","hidden"]);function tj(t,e){return Ap.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function nj(t,e){return n=>Ne(t,e,n)}function hy(t){return typeof t=="number"?nj:typeof t=="string"?ly(t)?Lc:He.test(t)?_w:sj:Array.isArray(t)?HC:typeof t=="object"?He.test(t)?_w:rj:Lc}function HC(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>hy(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function rj(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=hy(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function ij(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],o=t.indexes[s][r[s]],a=t.values[o]??0;n[i]=a,r[s]++}return n}const sj=(t,e)=>{const n=ti.createTransformer(e),r=Ka(t),i=Ka(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Ap.has(t)&&!i.values.length||Ap.has(e)&&!r.values.length?tj(t,e):vl(HC(ij(r,i),i.values),n):Lc(t,e)};function qC(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Ne(t,e,n):hy(t)(t,e)}const oj=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>ke.update(e,n),stop:()=>ei(e),now:()=>ut.isProcessing?ut.timestamp:zt.now()}},KC=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Oc=2e4;function dy(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Oc;)e+=n,r=t.next(e);return e>=Oc?1/0:e}function aj(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(dy(r),Oc);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:un(i)}}const lj=5;function GC(t,e,n){const r=Math.max(e-lj,0);return AC(n-t(r),e-r)}const Fe={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Bd=.001;function uj({duration:t=Fe.duration,bounce:e=Fe.bounce,velocity:n=Fe.velocity,mass:r=Fe.mass}){let i,s,o=1-e;o=fr(Fe.minDamping,Fe.maxDamping,o),t=fr(Fe.minDuration,Fe.maxDuration,un(t)),o<1?(i=c=>{const h=c*o,d=h*t,p=h-n,g=Pp(c,o),_=Math.exp(-d);return Bd-p/g*_},s=c=>{const d=c*o*t,p=d*n+n,g=Math.pow(o,2)*Math.pow(c,2)*t,_=Math.exp(-d),S=Pp(Math.pow(c,2),o);return(-i(c)+Bd>0?-1:1)*((p-g)*_)/S}):(i=c=>{const h=Math.exp(-c*t),d=(c-n)*t+1;return-Bd+h*d},s=c=>{const h=Math.exp(-c*t),d=(n-c)*(t*t);return h*d});const a=5/t,l=hj(i,s,a);if(t=Fn(t),isNaN(l))return{stiffness:Fe.stiffness,damping:Fe.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const cj=12;function hj(t,e,n){let r=n;for(let i=1;i<cj;i++)r=r-t(r)/e(r);return r}function Pp(t,e){return t*Math.sqrt(1-e*e)}const dj=["duration","bounce"],fj=["stiffness","damping","mass"];function ww(t,e){return e.some(n=>t[n]!==void 0)}function pj(t){let e={velocity:Fe.velocity,stiffness:Fe.stiffness,damping:Fe.damping,mass:Fe.mass,isResolvedFromDuration:!1,...t};if(!ww(t,fj)&&ww(t,dj))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*fr(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Fe.mass,stiffness:i,damping:s}}else{const n=uj(t);e={...e,...n,mass:Fe.mass},e.isResolvedFromDuration=!0}return e}function Fc(t=Fe.visualDuration,e=Fe.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:h,duration:d,velocity:p,isResolvedFromDuration:g}=pj({...n,velocity:-un(n.velocity||0)}),_=p||0,S=c/(2*Math.sqrt(l*h)),x=o-s,y=un(Math.sqrt(l/h)),v=Math.abs(x)<5;r||(r=v?Fe.restSpeed.granular:Fe.restSpeed.default),i||(i=v?Fe.restDelta.granular:Fe.restDelta.default);let E;if(S<1){const M=Pp(y,S);E=F=>{const I=Math.exp(-S*y*F);return o-I*((_+S*y*x)/M*Math.sin(M*F)+x*Math.cos(M*F))}}else if(S===1)E=M=>o-Math.exp(-y*M)*(x+(_+y*x)*M);else{const M=y*Math.sqrt(S*S-1);E=F=>{const I=Math.exp(-S*y*F),w=Math.min(M*F,300);return o-I*((_+S*y*x)*Math.sinh(w)+M*x*Math.cosh(w))/M}}const N={calculatedDuration:g&&d||null,next:M=>{const F=E(M);if(g)a.done=M>=d;else{let I=M===0?_:0;S<1&&(I=M===0?Fn(_):GC(E,M,F));const w=Math.abs(I)<=r,C=Math.abs(o-F)<=i;a.done=w&&C}return a.value=a.done?o:F,a},toString:()=>{const M=Math.min(dy(N),Oc),F=KC(I=>N.next(M*I).value,M,30);return M+"ms "+F},toTransition:()=>{}};return N}Fc.applyToOptions=t=>{const e=aj(t,100,Fc);return t.ease=e.ease,t.duration=Fn(e.duration),t.type="keyframes",t};function Rp({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:h}){const d=t[0],p={done:!1,value:d},g=w=>a!==void 0&&w<a||l!==void 0&&w>l,_=w=>a===void 0?l:l===void 0||Math.abs(a-w)<Math.abs(l-w)?a:l;let S=n*e;const x=d+S,y=o===void 0?x:o(x);y!==x&&(S=y-d);const v=w=>-S*Math.exp(-w/r),E=w=>y+v(w),N=w=>{const C=v(w),P=E(w);p.done=Math.abs(C)<=c,p.value=p.done?y:P};let M,F;const I=w=>{g(p.value)&&(M=w,F=Fc({keyframes:[p.value,_(p.value)],velocity:GC(E,w,p.value),damping:i,stiffness:s,restDelta:c,restSpeed:h}))};return I(0),{calculatedDuration:null,next:w=>{let C=!1;return!F&&M===void 0&&(C=!0,N(w),I(w)),M!==void 0&&w>=M?F.next(w-M):(!C&&N(w),p)}}}function mj(t,e,n){const r=[],i=n||pr.mix||qC,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||hn:e;a=vl(l,a)}r.push(a)}return r}function gj(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(ny(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=mj(e,r,i),l=a.length,c=h=>{if(o&&h<t[0])return e[0];let d=0;if(l>1)for(;d<t.length-2&&!(h<t[d+1]);d++);const p=Ha(t[d],t[d+1],h);return a[d](p)};return n?h=>c(fr(t[0],t[s-1],h)):c}function yj(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Ha(0,e,r);t.push(Ne(n,1,i))}}function vj(t){const e=[0];return yj(e,t.length-1),e}function _j(t,e){return t.map(n=>n*e)}function wj(t,e){return t.map(()=>e||LC).splice(0,t.length-1)}function fa({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=bF(r)?r.map(mw):mw(r),s={done:!1,value:e[0]},o=_j(n&&n.length===e.length?n:vj(e),t),a=gj(o,e,{ease:Array.isArray(i)?i:wj(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const Ej=t=>t!==null;function fy(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter(Ej),a=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const Tj={decay:Rp,inertia:Rp,tween:fa,keyframes:fa,spring:Fc};function QC(t){typeof t.type=="string"&&(t.type=Tj[t.type])}class py{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const Sj=t=>t/100;class my extends py{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==zt.now()&&this.tick(zt.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;QC(e);const{type:n=fa,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=e;let{keyframes:a}=e;const l=n||fa;l!==fa&&typeof a[0]!="number"&&(this.mixKeyframes=vl(Sj,qC(a[0],a[1])),a=[0,100]);const c=l({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=dy(c));const{calculatedDuration:h}=c;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=c}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:c=0,keyframes:h,repeat:d,repeatType:p,repeatDelay:g,type:_,onUpdate:S,finalKeyframe:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const y=this.currentTime-c*(this.playbackSpeed>=0?1:-1),v=this.playbackSpeed>=0?y<0:y>i;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let E=this.currentTime,N=r;if(d){const w=Math.min(this.currentTime,i)/a;let C=Math.floor(w),P=w%1;!P&&w>=1&&(P=1),P===1&&C--,C=Math.min(C,d+1),!!(C%2)&&(p==="reverse"?(P=1-P,g&&(P-=g/a)):p==="mirror"&&(N=o)),E=fr(0,1,P)*a}const M=v?{done:!1,value:h[0]}:N.next(E);s&&(M.value=s(M.value));let{done:F}=M;!v&&l!==null&&(F=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&F);return I&&_!==Rp&&(M.value=fy(h,this.options,x,this.speed)),S&&S(M.value),I&&this.finish(),M}then(e,n){return this.finished.then(e,n)}get duration(){return un(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+un(e)}get time(){return un(this.currentTime)}set time(e){var n;e=Fn(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(zt.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=un(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=oj,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(zt.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function Ij(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const xi=t=>t*180/Math.PI,kp=t=>{const e=xi(Math.atan2(t[1],t[0]));return bp(e)},xj={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:kp,rotateZ:kp,skewX:t=>xi(Math.atan(t[1])),skewY:t=>xi(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},bp=t=>(t=t%360,t<0&&(t+=360),t),Ew=kp,Tw=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Sw=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Cj={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Tw,scaleY:Sw,scale:t=>(Tw(t)+Sw(t))/2,rotateX:t=>bp(xi(Math.atan2(t[6],t[5]))),rotateY:t=>bp(xi(Math.atan2(-t[2],t[0]))),rotateZ:Ew,rotate:Ew,skewX:t=>xi(Math.atan(t[4])),skewY:t=>xi(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Dp(t){return t.includes("scale")?1:0}function Np(t,e){if(!t||t==="none")return Dp(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=Cj,i=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=xj,i=a}if(!i)return Dp(e);const s=r[e],o=i[1].split(",").map(Pj);return typeof s=="function"?s(o):o[s]}const Aj=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Np(n,e)};function Pj(t){return parseFloat(t.trim())}const ho=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],fo=new Set(ho),Iw=t=>t===co||t===ne,Rj=new Set(["x","y","z"]),kj=ho.filter(t=>!Rj.has(t));function bj(t){const e=[];return kj.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const ki={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Np(e,"x"),y:(t,{transform:e})=>Np(e,"y")};ki.translateX=ki.x;ki.translateY=ki.y;const bi=new Set;let Vp=!1,Mp=!1,Lp=!1;function YC(){if(Mp){const t=Array.from(bi).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=bj(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))==null||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Mp=!1,Vp=!1,bi.forEach(t=>t.complete(Lp)),bi.clear()}function XC(){bi.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Mp=!0)})}function Dj(){Lp=!0,XC(),YC(),Lp=!1}class gy{constructor(e,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(bi.add(this),Vp||(Vp=!0,ke.read(XC),ke.resolveKeyframes(YC))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const a=r.readValue(n,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}Ij(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),bi.delete(this)}cancel(){this.state==="scheduled"&&(bi.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Nj=t=>t.startsWith("--");function Vj(t,e,n){Nj(e)?t.style.setProperty(e,n):t.style[e]=n}const Mj=ry(()=>window.ScrollTimeline!==void 0),Lj={};function Oj(t,e){const n=ry(t);return()=>Lj[e]??n()}const JC=Oj(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Yo=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,xw={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Yo([0,.65,.55,1]),circOut:Yo([.55,0,1,.45]),backIn:Yo([.31,.01,.66,-.59]),backOut:Yo([.33,1.53,.69,.99])};function ZC(t,e){if(t)return typeof t=="function"?JC()?KC(t,e):"ease-out":OC(t)?Yo(t):Array.isArray(t)?t.map(n=>ZC(n,e)||xw.easeOut):xw[t]}function Fj(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:l}={},c=void 0){const h={[e]:n};l&&(h.offset=l);const d=ZC(a,i);Array.isArray(d)&&(h.easing=d);const p={delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return c&&(p.pseudoElement=c),t.animate(h,p)}function eA(t){return typeof t=="function"&&"applyToOptions"in t}function jj({type:t,...e}){return eA(t)&&JC()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class Uj extends py{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,ny(typeof e.type!="string");const c=jj(e);this.animation=Fj(n,r,i,c,s),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const h=fy(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(h):Vj(n,r,h),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return un(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+un(e)}get time(){return un(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Fn(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&Mj()?(this.animation.timeline=e,hn):n(this)}}const tA={anticipate:NC,backInOut:DC,circInOut:MC};function Bj(t){return t in tA}function zj(t){typeof t.ease=="string"&&Bj(t.ease)&&(t.ease=tA[t.ease])}const Cw=10;class $j extends Uj{constructor(e){zj(e),QC(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new my({...o,autoplay:!1}),l=Fn(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-Cw).value,a.sample(l).value,Cw),a.stop()}}const Aw=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ti.test(t)||t==="0")&&!t.startsWith("url("));function Wj(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function Hj(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=Aw(i,e),a=Aw(s,e);return!o||!a?!1:Wj(t)||(n==="spring"||eA(n))&&r}function Op(t){t.duration=0,t.type="keyframes"}const qj=new Set(["opacity","clipPath","filter","transform"]),Kj=ry(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Gj(t){var h;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=t;if(!(((h=e==null?void 0:e.owner)==null?void 0:h.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=e.owner.getProps();return Kj()&&n&&qj.has(n)&&(n!=="transform"||!c)&&!l&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const Qj=40;class Yj extends py{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:l,motionValue:c,element:h,...d}){var _;super(),this.stop=()=>{var S,x;this._animation&&(this._animation.stop(),(S=this.stopTimeline)==null||S.call(this)),(x=this.keyframeResolver)==null||x.cancel()},this.createdAt=zt.now();const p={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:l,motionValue:c,element:h,...d},g=(h==null?void 0:h.KeyframeResolver)||gy;this.keyframeResolver=new g(a,(S,x,y)=>this.onKeyframesResolved(S,x,p,!y),l,c,h),(_=this.keyframeResolver)==null||_.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:l,isHandoff:c,onUpdate:h}=r;this.resolvedAt=zt.now(),Hj(e,s,o,a)||((pr.instantAnimations||!l)&&(h==null||h(fy(e,r,n))),e[0]=e[e.length-1],Op(r),r.repeat=0);const p={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>Qj?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},g=!c&&Gj(p)?new $j({...p,element:p.motionValue.owner.current}):new my(p);g.finished.then(()=>this.notifyFinished()).catch(hn),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),Dj()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const Xj=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Jj(t){const e=Xj.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function nA(t,e,n=1){const[r,i]=Jj(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return IC(o)?parseFloat(o):o}return ly(i)?nA(i,e,n+1):i}function yy(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const rA=new Set(["width","height","top","left","right","bottom",...ho]),Zj={test:t=>t==="auto",parse:t=>t},iA=t=>e=>e.test(t),sA=[co,ne,jn,Ir,WF,$F,Zj],Pw=t=>sA.find(iA(t));function e4(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||CC(t):!0}const t4=new Set(["brightness","contrast","saturate","opacity"]);function n4(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(uy)||[];if(!r)return t;const i=n.replace(r,"");let s=t4.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const r4=/\b([a-z-]*)\(.*?\)/gu,Fp={...ti,getAnimatableNone:t=>{const e=t.match(r4);return e?e.map(n4).join(" "):t}},Rw={...co,transform:Math.round},i4={rotate:Ir,rotateX:Ir,rotateY:Ir,rotateZ:Ir,scale:fu,scaleX:fu,scaleY:fu,scaleZ:fu,skew:Ir,skewX:Ir,skewY:Ir,distance:ne,translateX:ne,translateY:ne,translateZ:ne,x:ne,y:ne,z:ne,perspective:ne,transformPerspective:ne,opacity:qa,originX:gw,originY:gw,originZ:ne},vy={borderWidth:ne,borderTopWidth:ne,borderRightWidth:ne,borderBottomWidth:ne,borderLeftWidth:ne,borderRadius:ne,radius:ne,borderTopLeftRadius:ne,borderTopRightRadius:ne,borderBottomRightRadius:ne,borderBottomLeftRadius:ne,width:ne,maxWidth:ne,height:ne,maxHeight:ne,top:ne,right:ne,bottom:ne,left:ne,padding:ne,paddingTop:ne,paddingRight:ne,paddingBottom:ne,paddingLeft:ne,margin:ne,marginTop:ne,marginRight:ne,marginBottom:ne,marginLeft:ne,backgroundPositionX:ne,backgroundPositionY:ne,...i4,zIndex:Rw,fillOpacity:qa,strokeOpacity:qa,numOctaves:Rw},s4={...vy,color:He,backgroundColor:He,outlineColor:He,fill:He,stroke:He,borderColor:He,borderTopColor:He,borderRightColor:He,borderBottomColor:He,borderLeftColor:He,filter:Fp,WebkitFilter:Fp},oA=t=>s4[t];function aA(t,e){let n=oA(t);return n!==Fp&&(n=ti),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const o4=new Set(["auto","none","0"]);function a4(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!o4.has(s)&&Ka(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=aA(n,i)}class l4 extends gy{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),ly(c))){const h=nA(c,n.current);h!==void 0&&(e[l]=h),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!rA.has(r)||e.length!==2)return;const[i,s]=e,o=Pw(i),a=Pw(s);if(o!==a)if(Iw(o)&&Iw(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else ki[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||e4(e[i]))&&r.push(i);r.length&&a4(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ki[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var a;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=ki[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function u4(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const lA=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function uA(t){return xC(t)&&"offsetHeight"in t}const kw=30,c4=t=>!isNaN(parseFloat(t));class h4{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=zt.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=zt.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=c4(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new iy);const r=this.events[e].add(n);return e==="change"?()=>{r(),ke.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=zt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>kw)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,kw);return AC(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Qs(t,e){return new h4(t,e)}const{schedule:_y}=FC(queueMicrotask,!1),yn={x:!1,y:!1};function cA(){return yn.x||yn.y}function d4(t){return t==="x"||t==="y"?yn[t]?null:(yn[t]=!0,()=>{yn[t]=!1}):yn.x||yn.y?null:(yn.x=yn.y=!0,()=>{yn.x=yn.y=!1})}function hA(t,e){const n=u4(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function bw(t){return!(t.pointerType==="touch"||cA())}function f4(t,e,n={}){const[r,i,s]=hA(t,n),o=a=>{if(!bw(a))return;const{target:l}=a,c=e(l,a);if(typeof c!="function"||!l)return;const h=d=>{bw(d)&&(c(d),l.removeEventListener("pointerleave",h))};l.addEventListener("pointerleave",h,i)};return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const dA=(t,e)=>e?t===e?!0:dA(t,e.parentElement):!1,wy=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,p4=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function m4(t){return p4.has(t.tagName)||t.tabIndex!==-1}const $u=new WeakSet;function Dw(t){return e=>{e.key==="Enter"&&t(e)}}function zd(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const g4=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=Dw(()=>{if($u.has(n))return;zd(n,"down");const i=Dw(()=>{zd(n,"up")}),s=()=>zd(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function Nw(t){return wy(t)&&!cA()}function y4(t,e,n={}){const[r,i,s]=hA(t,n),o=a=>{const l=a.currentTarget;if(!Nw(a))return;$u.add(l);const c=e(l,a),h=(g,_)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",p),$u.has(l)&&$u.delete(l),Nw(g)&&typeof c=="function"&&c(g,{success:_})},d=g=>{h(g,l===window||l===document||n.useGlobalTarget||dA(l,g.target))},p=g=>{h(g,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",p,i)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),uA(a)&&(a.addEventListener("focus",c=>g4(c,i)),!m4(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function fA(t){return xC(t)&&"ownerSVGElement"in t}function v4(t){return fA(t)&&t.tagName==="svg"}const It=t=>!!(t&&t.getVelocity),_4=[...sA,He,ti],w4=t=>_4.find(iA(t)),Ey=R.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function Vw(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function E4(...t){return e=>{let n=!1;const r=t.map(i=>{const s=Vw(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():Vw(t[i],null)}}}}function T4(...t){return R.useCallback(E4(...t),t)}class S4 extends R.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=uA(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function I4({children:t,isPresent:e,anchorX:n,root:r}){const i=R.useId(),s=R.useRef(null),o=R.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=R.useContext(Ey),l=T4(s,t==null?void 0:t.ref);return R.useInsertionEffect(()=>{const{width:c,height:h,top:d,left:p,right:g}=o.current;if(e||!s.current||!c||!h)return;const _=n==="left"?`left: ${p}`:`right: ${g}`;s.current.dataset.motionPopId=i;const S=document.createElement("style");a&&(S.nonce=a);const x=r??document.head;return x.appendChild(S),S.sheet&&S.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${h}px !important;
            ${_}px !important;
            top: ${d}px !important;
          }
        `),()=>{x.contains(S)&&x.removeChild(S)}},[e]),A.jsx(S4,{isPresent:e,childRef:s,sizeRef:o,children:R.cloneElement(t,{ref:l})})}const x4=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:a,root:l})=>{const c=Jg(C4),h=R.useId();let d=!0,p=R.useMemo(()=>(d=!1,{id:h,initial:e,isPresent:n,custom:i,onExitComplete:g=>{c.set(g,!0);for(const _ of c.values())if(!_)return;r&&r()},register:g=>(c.set(g,!1),()=>c.delete(g))}),[n,c,r]);return s&&d&&(p={...p}),R.useMemo(()=>{c.forEach((g,_)=>c.set(_,!1))},[n]),R.useEffect(()=>{!n&&!c.size&&r&&r()},[n]),o==="popLayout"&&(t=A.jsx(I4,{isPresent:n,anchorX:a,root:l,children:t})),A.jsx(bh.Provider,{value:p,children:t})};function C4(){return new Map}function pA(t=!0){const e=R.useContext(bh);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=R.useId();R.useEffect(()=>{if(t)return i(s)},[t]);const o=R.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const pu=t=>t.key||"";function Mw(t){const e=[];return R.Children.forEach(t,n=>{R.isValidElement(n)&&e.push(n)}),e}const A4=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:a="left",root:l})=>{const[c,h]=pA(o),d=R.useMemo(()=>Mw(t),[t]),p=o&&!c?[]:d.map(pu),g=R.useRef(!0),_=R.useRef(d),S=Jg(()=>new Map),[x,y]=R.useState(d),[v,E]=R.useState(d);SC(()=>{g.current=!1,_.current=d;for(let F=0;F<v.length;F++){const I=pu(v[F]);p.includes(I)?S.delete(I):S.get(I)!==!0&&S.set(I,!1)}},[v,p.length,p.join("-")]);const N=[];if(d!==x){let F=[...d];for(let I=0;I<v.length;I++){const w=v[I],C=pu(w);p.includes(C)||(F.splice(I,0,w),N.push(w))}return s==="wait"&&N.length&&(F=N),E(Mw(F)),y(d),null}const{forceRender:M}=R.useContext(Xg);return A.jsx(A.Fragment,{children:v.map(F=>{const I=pu(F),w=o&&!c?!1:d===v||p.includes(I),C=()=>{if(S.has(I))S.set(I,!0);else return;let P=!0;S.forEach(D=>{D||(P=!1)}),P&&(M==null||M(),E(_.current),o&&(h==null||h()),r&&r())};return A.jsx(x4,{isPresent:w,initial:!g.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,root:l,onExitComplete:w?void 0:C,anchorX:a,children:F},I)})})},mA=R.createContext({strict:!1}),Lw={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ys={};for(const t in Lw)Ys[t]={isEnabled:e=>Lw[t].some(n=>!!e[n])};function P4(t){for(const e in t)Ys[e]={...Ys[e],...t[e]}}const R4=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function jc(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||R4.has(t)}let gA=t=>!jc(t);function k4(t){typeof t=="function"&&(gA=e=>e.startsWith("on")?!jc(e):t(e))}try{k4(require("@emotion/is-prop-valid").default)}catch{}function b4(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(gA(i)||n===!0&&jc(i)||!e&&!jc(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const Dh=R.createContext({});function Nh(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Ga(t){return typeof t=="string"||Array.isArray(t)}const Ty=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Sy=["initial",...Ty];function Vh(t){return Nh(t.animate)||Sy.some(e=>Ga(t[e]))}function yA(t){return!!(Vh(t)||t.variants)}function D4(t,e){if(Vh(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Ga(n)?n:void 0,animate:Ga(r)?r:void 0}}return t.inherit!==!1?e:{}}function N4(t){const{initial:e,animate:n}=D4(t,R.useContext(Dh));return R.useMemo(()=>({initial:e,animate:n}),[Ow(e),Ow(n)])}function Ow(t){return Array.isArray(t)?t.join(" "):t}const Qa={};function V4(t){for(const e in t)Qa[e]=t[e],ay(e)&&(Qa[e].isCSSVariable=!0)}function vA(t,{layout:e,layoutId:n}){return fo.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Qa[t]||t==="opacity")}const M4={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},L4=ho.length;function O4(t,e,n){let r="",i=!0;for(let s=0;s<L4;s++){const o=ho[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=lA(a,vy[o]);if(!l){i=!1;const h=M4[o]||o;r+=`${h}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function Iy(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(fo.has(l)){o=!0;continue}else if(ay(l)){i[l]=c;continue}else{const h=lA(c,vy[l]);l.startsWith("origin")?(a=!0,s[l]=h):r[l]=h}}if(e.transform||(o||n?r.transform=O4(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:h=0}=s;r.transformOrigin=`${l} ${c} ${h}`}}const xy=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function _A(t,e,n){for(const r in e)!It(e[r])&&!vA(r,n)&&(t[r]=e[r])}function F4({transformTemplate:t},e){return R.useMemo(()=>{const n=xy();return Iy(n,e,t),Object.assign({},n.vars,n.style)},[e])}function j4(t,e){const n=t.style||{},r={};return _A(r,n,t),Object.assign(r,F4(t,e)),r}function U4(t,e){const n={},r=j4(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const B4={offset:"stroke-dashoffset",array:"stroke-dasharray"},z4={offset:"strokeDashoffset",array:"strokeDasharray"};function $4(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?B4:z4;t[s.offset]=ne.transform(-r);const o=ne.transform(e),a=ne.transform(n);t[s.array]=`${o} ${a}`}function wA(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...a},l,c,h){if(Iy(t,a,c),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:d,style:p}=t;d.transform&&(p.transform=d.transform,delete d.transform),(p.transform||d.transformOrigin)&&(p.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),p.transform&&(p.transformBox=(h==null?void 0:h.transformBox)??"fill-box",delete d.transformBox),e!==void 0&&(d.x=e),n!==void 0&&(d.y=n),r!==void 0&&(d.scale=r),i!==void 0&&$4(d,i,s,o,!1)}const EA=()=>({...xy(),attrs:{}}),TA=t=>typeof t=="string"&&t.toLowerCase()==="svg";function W4(t,e,n,r){const i=R.useMemo(()=>{const s=EA();return wA(s,e,TA(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};_A(s,t.style,t),i.style={...s,...i.style}}return i}const H4=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Cy(t){return typeof t!="string"||t.includes("-")?!1:!!(H4.indexOf(t)>-1||/[A-Z]/u.test(t))}function q4(t,e,n,{latestValues:r},i,s=!1){const a=(Cy(t)?W4:U4)(e,r,i,t),l=b4(e,typeof t=="string",s),c=t!==R.Fragment?{...l,...a,ref:n}:{},{children:h}=e,d=R.useMemo(()=>It(h)?h.get():h,[h]);return R.createElement(t,{...c,children:d})}function Fw(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Ay(t,e,n,r){if(typeof e=="function"){const[i,s]=Fw(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=Fw(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function Wu(t){return It(t)?t.get():t}function K4({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:G4(n,r,i,t),renderState:e()}}function G4(t,e,n,r){const i={},s=r(t,{});for(const p in s)i[p]=Wu(s[p]);let{initial:o,animate:a}=t;const l=Vh(t),c=yA(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const d=h?a:o;if(d&&typeof d!="boolean"&&!Nh(d)){const p=Array.isArray(d)?d:[d];for(let g=0;g<p.length;g++){const _=Ay(t,p[g]);if(_){const{transitionEnd:S,transition:x,...y}=_;for(const v in y){let E=y[v];if(Array.isArray(E)){const N=h?E.length-1:0;E=E[N]}E!==null&&(i[v]=E)}for(const v in S)i[v]=S[v]}}}return i}const SA=t=>(e,n)=>{const r=R.useContext(Dh),i=R.useContext(bh),s=()=>K4(t,e,r,i);return n?s():Jg(s)};function Py(t,e,n){var s;const{style:r}=t,i={};for(const o in r)(It(r[o])||e.style&&It(e.style[o])||vA(o,t)||((s=n==null?void 0:n.getValue(o))==null?void 0:s.liveStyle)!==void 0)&&(i[o]=r[o]);return i}const Q4=SA({scrapeMotionValuesFromProps:Py,createRenderState:xy});function IA(t,e,n){const r=Py(t,e,n);for(const i in t)if(It(t[i])||It(e[i])){const s=ho.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}const Y4=SA({scrapeMotionValuesFromProps:IA,createRenderState:EA}),X4=Symbol.for("motionComponentSymbol");function ys(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function J4(t,e,n){return R.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):ys(n)&&(n.current=r))},[e])}const Ry=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Z4="framerAppearId",xA="data-"+Ry(Z4),CA=R.createContext({});function eU(t,e,n,r,i){var S,x;const{visualElement:s}=R.useContext(Dh),o=R.useContext(mA),a=R.useContext(bh),l=R.useContext(Ey).reducedMotion,c=R.useRef(null);r=r||o.renderer,!c.current&&r&&(c.current=r(t,{visualState:e,parent:s,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const h=c.current,d=R.useContext(CA);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&tU(c.current,n,i,d);const p=R.useRef(!1);R.useInsertionEffect(()=>{h&&p.current&&h.update(n,a)});const g=n[xA],_=R.useRef(!!g&&!((S=window.MotionHandoffIsComplete)!=null&&S.call(window,g))&&((x=window.MotionHasOptimisedAnimation)==null?void 0:x.call(window,g)));return SC(()=>{h&&(p.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),_.current&&h.animationState&&h.animationState.animateChanges())}),R.useEffect(()=>{h&&(!_.current&&h.animationState&&h.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)==null||y.call(window,g)}),_.current=!1),h.enteringChildren=void 0)}),h}function tU(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:h}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:AA(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&ys(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:l,layoutRoot:c})}function AA(t){if(t)return t.options.allowProjection!==!1?t.projection:AA(t.parent)}function $d(t,{forwardMotionProps:e=!1}={},n,r){n&&P4(n);const i=Cy(t)?Y4:Q4;function s(a,l){let c;const h={...R.useContext(Ey),...a,layoutId:nU(a)},{isStatic:d}=h,p=N4(a),g=i(a,d);if(!d&&Zg){rU();const _=iU(h);c=_.MeasureLayout,p.visualElement=eU(t,g,h,r,_.ProjectionNode)}return A.jsxs(Dh.Provider,{value:p,children:[c&&p.visualElement?A.jsx(c,{visualElement:p.visualElement,...h}):null,q4(t,a,J4(g,p.visualElement,l),g,d,e)]})}s.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=R.forwardRef(s);return o[X4]=t,o}function nU({layoutId:t}){const e=R.useContext(Xg).id;return e&&t!==void 0?e+"-"+t:t}function rU(t,e){R.useContext(mA).strict}function iU(t){const{drag:e,layout:n}=Ys;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function sU(t,e){if(typeof Proxy>"u")return $d;const n=new Map,r=(s,o)=>$d(s,o,t,e),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,$d(o,void 0,t,e)),n.get(o))})}function PA({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function oU({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function aU(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Wd(t){return t===void 0||t===1}function jp({scale:t,scaleX:e,scaleY:n}){return!Wd(t)||!Wd(e)||!Wd(n)}function yi(t){return jp(t)||RA(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function RA(t){return jw(t.x)||jw(t.y)}function jw(t){return t&&t!=="0%"}function Uc(t,e,n){const r=t-n,i=e*r;return n+i}function Uw(t,e,n,r,i){return i!==void 0&&(t=Uc(t,i,r)),Uc(t,n,r)+e}function Up(t,e=0,n=1,r,i){t.min=Uw(t.min,e,n,r,i),t.max=Uw(t.max,e,n,r,i)}function kA(t,{x:e,y:n}){Up(t.x,e.translate,e.scale,e.originPoint),Up(t.y,n.translate,n.scale,n.originPoint)}const Bw=.999999999999,zw=1.0000000000001;function lU(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&_s(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,kA(t,o)),r&&yi(s.latestValues)&&_s(t,s.latestValues))}e.x<zw&&e.x>Bw&&(e.x=1),e.y<zw&&e.y>Bw&&(e.y=1)}function vs(t,e){t.min=t.min+e,t.max=t.max+e}function $w(t,e,n,r,i=.5){const s=Ne(t.min,t.max,i);Up(t,e,n,s,r)}function _s(t,e){$w(t.x,e.x,e.scaleX,e.scale,e.originX),$w(t.y,e.y,e.scaleY,e.scale,e.originY)}function bA(t,e){return PA(aU(t.getBoundingClientRect(),e))}function uU(t,e,n){const r=bA(t,n),{scroll:i}=e;return i&&(vs(r.x,i.offset.x),vs(r.y,i.offset.y)),r}const Ww=()=>({translate:0,scale:1,origin:0,originPoint:0}),ws=()=>({x:Ww(),y:Ww()}),Hw=()=>({min:0,max:0}),Be=()=>({x:Hw(),y:Hw()}),Bp={current:null},DA={current:!1};function cU(){if(DA.current=!0,!!Zg)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Bp.current=t.matches;t.addEventListener("change",e),e()}else Bp.current=!1}const hU=new WeakMap;function dU(t,e,n){for(const r in e){const i=e[r],s=n[r];if(It(i))t.addValue(r,i);else if(It(s))t.addValue(r,Qs(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,Qs(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const qw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class fU{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=gy,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=zt.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,ke.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=Vh(n),this.isVariantNode=yA(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in d){const g=d[p];l[p]!==void 0&&It(g)&&g.set(l[p])}}mount(e){var n;this.current=e,hU.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),DA.current||cU(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Bp.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),ei(this.notifyUpdate),ei(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=fo.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&ke.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ys){const n=Ys[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Be()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<qw.length;r++){const i=qw[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=dU(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Qs(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(IC(r)||CC(r))?r=parseFloat(r):!w4(r)&&ti.test(n)&&(r=aA(e,n)),this.setBaseTarget(e,It(r)?r.get():r)),It(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=Ay(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!It(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new iy),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){_y.render(this.render)}}class NA extends fU{constructor(){super(...arguments),this.KeyframeResolver=l4}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;It(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function VA(t,{style:e,vars:n},r,i){const s=t.style;let o;for(o in e)s[o]=e[o];i==null||i.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function pU(t){return window.getComputedStyle(t)}class mU extends NA{constructor(){super(...arguments),this.type="html",this.renderInstance=VA}readValueFromInstance(e,n){var r;if(fo.has(n))return(r=this.projection)!=null&&r.isProjecting?Dp(n):Aj(e,n);{const i=pU(e),s=(ay(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return bA(e,n)}build(e,n,r){Iy(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Py(e,n,r)}}const MA=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function gU(t,e,n,r){VA(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(MA.has(i)?i:Ry(i),e.attrs[i])}class yU extends NA{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Be}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(fo.has(n)){const r=oA(n);return r&&r.default||0}return n=MA.has(n)?n:Ry(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return IA(e,n,r)}build(e,n,r){wA(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){gU(e,n,r,i)}mount(e){this.isSVGTag=TA(e.tagName),super.mount(e)}}const vU=(t,e)=>Cy(t)?new yU(e):new mU(e,{allowProjection:t!==R.Fragment});function bs(t,e,n){const r=t.getProps();return Ay(r,e,n!==void 0?n:r.custom,t)}const zp=t=>Array.isArray(t);function _U(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Qs(n))}function wU(t){return zp(t)?t[t.length-1]||0:t}function EU(t,e){const n=bs(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=wU(s[o]);_U(t,o,a)}}function TU(t){return!!(It(t)&&t.add)}function $p(t,e){const n=t.getValue("willChange");if(TU(n))return n.add(e);if(!n&&pr.WillChange){const r=new pr.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function LA(t){return t.props[xA]}const SU=t=>t!==null;function IU(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(SU),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[s]}const xU={type:"spring",stiffness:500,damping:25,restSpeed:10},CU=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),AU={type:"keyframes",duration:.8},PU={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},RU=(t,{keyframes:e})=>e.length>2?AU:fo.has(t)?t.startsWith("scale")?CU(e[1]):xU:PU;function kU({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...h}){return!!Object.keys(h).length}const ky=(t,e,n,r={},i,s)=>o=>{const a=yy(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-Fn(l);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:p=>{e.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};kU(a)||Object.assign(h,RU(t,h)),h.duration&&(h.duration=Fn(h.duration)),h.repeatDelay&&(h.repeatDelay=Fn(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let d=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(Op(h),h.delay===0&&(d=!0)),(pr.instantAnimations||pr.skipAnimations)&&(d=!0,Op(h),h.delay=0),h.allowFlatten=!a.type&&!a.ease,d&&!s&&e.get()!==void 0){const p=IU(h.keyframes,a);if(p!==void 0){ke.update(()=>{h.onUpdate(p),h.onComplete()});return}}return a.isSync?new my(h):new Yj(h)};function bU({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function OA(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=e;r&&(s=r);const l=[],c=i&&t.animationState&&t.animationState.getState()[i];for(const h in a){const d=t.getValue(h,t.latestValues[h]??null),p=a[h];if(p===void 0||c&&bU(c,h))continue;const g={delay:n,...yy(s||{},h)},_=d.get();if(_!==void 0&&!d.isAnimating&&!Array.isArray(p)&&p===_&&!g.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const y=LA(t);if(y){const v=window.MotionHandoffAnimation(y,h,ke);v!==null&&(g.startTime=v,S=!0)}}$p(t,h),d.start(ky(h,d,p,t.shouldReduceMotion&&rA.has(h)?{type:!1}:g,t,S));const x=d.animation;x&&l.push(x)}return o&&Promise.all(l).then(()=>{ke.update(()=>{o&&EU(t,o)})}),l}function FA(t,e,n,r=0,i=1){const s=Array.from(t).sort((c,h)=>c.sortNodePosition(h)).indexOf(e),o=t.size,a=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:a-s*r}function Wp(t,e,n={}){var l;const r=bs(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(OA(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:h=0,staggerChildren:d,staggerDirection:p}=i;return DU(t,e,c,h,d,p,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[c,h]=a==="beforeChildren"?[s,o]:[o,s];return c().then(()=>h())}else return Promise.all([s(),o(n.delay)])}function DU(t,e,n=0,r=0,i=0,s=1,o){const a=[];for(const l of t.variantChildren)l.notify("AnimationStart",e),a.push(Wp(l,e,{...o,delay:n+(typeof r=="function"?0:r)+FA(t.variantChildren,l,r,i,s)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(a)}function NU(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>Wp(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=Wp(t,e,n);else{const i=typeof e=="function"?bs(t,e,n.custom):e;r=Promise.all(OA(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function jA(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const VU=Sy.length;function UA(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?UA(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<VU;n++){const r=Sy[n],i=t.props[r];(Ga(i)||i===!1)&&(e[r]=i)}return e}const MU=[...Ty].reverse(),LU=Ty.length;function OU(t){return e=>Promise.all(e.map(({animation:n,options:r})=>NU(t,n,r)))}function FU(t){let e=OU(t),n=Kw(),r=!0;const i=l=>(c,h)=>{var p;const d=bs(t,h,l==="exit"?(p=t.presenceContext)==null?void 0:p.custom:void 0);if(d){const{transition:g,transitionEnd:_,...S}=d;c={...c,...S,..._}}return c};function s(l){e=l(t)}function o(l){const{props:c}=t,h=UA(t.parent)||{},d=[],p=new Set;let g={},_=1/0;for(let x=0;x<LU;x++){const y=MU[x],v=n[y],E=c[y]!==void 0?c[y]:h[y],N=Ga(E),M=y===l?v.isActive:null;M===!1&&(_=x);let F=E===h[y]&&E!==c[y]&&N;if(F&&r&&t.manuallyAnimateOnMount&&(F=!1),v.protectedKeys={...g},!v.isActive&&M===null||!E&&!v.prevProp||Nh(E)||typeof E=="boolean")continue;const I=jU(v.prevProp,E);let w=I||y===l&&v.isActive&&!F&&N||x>_&&N,C=!1;const P=Array.isArray(E)?E:[E];let D=P.reduce(i(y),{});M===!1&&(D={});const{prevResolvedValues:L={}}=v,k={...L,...D},Ze=ve=>{w=!0,p.has(ve)&&(C=!0,p.delete(ve)),v.needsAnimating[ve]=!0;const $=t.getValue(ve);$&&($.liveStyle=!1)};for(const ve in k){const $=D[ve],X=L[ve];if(g.hasOwnProperty(ve))continue;let V=!1;zp($)&&zp(X)?V=!jA($,X):V=$!==X,V?$!=null?Ze(ve):p.add(ve):$!==void 0&&p.has(ve)?Ze(ve):v.protectedKeys[ve]=!0}v.prevProp=E,v.prevResolvedValues=D,v.isActive&&(g={...g,...D}),r&&t.blockInitialAnimation&&(w=!1);const Lt=F&&I;w&&(!Lt||C)&&d.push(...P.map(ve=>{const $={type:y};if(typeof ve=="string"&&r&&!Lt&&t.manuallyAnimateOnMount&&t.parent){const{parent:X}=t,V=bs(X,ve);if(X.enteringChildren&&V){const{delayChildren:b}=V.transition||{};$.delay=FA(X.enteringChildren,t,b)}}return{animation:ve,options:$}}))}if(p.size){const x={};if(typeof c.initial!="boolean"){const y=bs(t,Array.isArray(c.initial)?c.initial[0]:c.initial);y&&y.transition&&(x.transition=y.transition)}p.forEach(y=>{const v=t.getBaseTarget(y),E=t.getValue(y);E&&(E.liveStyle=!0),x[y]=v??null}),d.push({animation:x})}let S=!!d.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(S=!1),r=!1,S?e(d):Promise.resolve()}function a(l,c){var d;if(n[l].isActive===c)return Promise.resolve();(d=t.variantChildren)==null||d.forEach(p=>{var g;return(g=p.animationState)==null?void 0:g.setActive(l,c)}),n[l].isActive=c;const h=o(l);for(const p in n)n[p].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=Kw()}}}function jU(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!jA(e,t):!1}function fi(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Kw(){return{animate:fi(!0),whileInView:fi(),whileHover:fi(),whileTap:fi(),whileDrag:fi(),whileFocus:fi(),exit:fi()}}class ai{constructor(e){this.isMounted=!1,this.node=e}update(){}}class UU extends ai{constructor(e){super(e),e.animationState||(e.animationState=FU(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Nh(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let BU=0;class zU extends ai{constructor(){super(...arguments),this.id=BU++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const $U={animation:{Feature:UU},exit:{Feature:zU}};function Ya(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function El(t){return{point:{x:t.pageX,y:t.pageY}}}const WU=t=>e=>wy(e)&&t(e,El(e));function pa(t,e,n,r){return Ya(t,e,WU(n),r)}const BA=1e-4,HU=1-BA,qU=1+BA,zA=.01,KU=0-zA,GU=0+zA;function Dt(t){return t.max-t.min}function QU(t,e,n){return Math.abs(t-e)<=n}function Gw(t,e,n,r=.5){t.origin=r,t.originPoint=Ne(e.min,e.max,t.origin),t.scale=Dt(n)/Dt(e),t.translate=Ne(n.min,n.max,t.origin)-t.originPoint,(t.scale>=HU&&t.scale<=qU||isNaN(t.scale))&&(t.scale=1),(t.translate>=KU&&t.translate<=GU||isNaN(t.translate))&&(t.translate=0)}function ma(t,e,n,r){Gw(t.x,e.x,n.x,r?r.originX:void 0),Gw(t.y,e.y,n.y,r?r.originY:void 0)}function Qw(t,e,n){t.min=n.min+e.min,t.max=t.min+Dt(e)}function YU(t,e,n){Qw(t.x,e.x,n.x),Qw(t.y,e.y,n.y)}function Yw(t,e,n){t.min=e.min-n.min,t.max=t.min+Dt(e)}function ga(t,e,n){Yw(t.x,e.x,n.x),Yw(t.y,e.y,n.y)}function sn(t){return[t("x"),t("y")]}const $A=({current:t})=>t?t.ownerDocument.defaultView:null,Xw=(t,e)=>Math.abs(t-e);function XU(t,e){const n=Xw(t.x,e.x),r=Xw(t.y,e.y);return Math.sqrt(n**2+r**2)}class WA{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=qd(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,_=XU(p.offset,{x:0,y:0})>=this.distanceThreshold;if(!g&&!_)return;const{point:S}=p,{timestamp:x}=ut;this.history.push({...S,timestamp:x});const{onStart:y,onMove:v}=this.handlers;g||(y&&y(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,p)},this.handlePointerMove=(p,g)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=Hd(g,this.transformPagePoint),ke.update(this.updatePoint,!0)},this.handlePointerUp=(p,g)=>{this.end();const{onEnd:_,onSessionEnd:S,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=qd(p.type==="pointercancel"?this.lastMoveEventInfo:Hd(g,this.transformPagePoint),this.history);this.startEvent&&_&&_(p,y),S&&S(p,y)},!wy(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const a=El(e),l=Hd(a,this.transformPagePoint),{point:c}=l,{timestamp:h}=ut;this.history=[{...c,timestamp:h}];const{onSessionStart:d}=n;d&&d(e,qd(l,this.history)),this.removeListeners=vl(pa(this.contextWindow,"pointermove",this.handlePointerMove),pa(this.contextWindow,"pointerup",this.handlePointerUp),pa(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ei(this.updatePoint)}}function Hd(t,e){return e?{point:e(t.point)}:t}function Jw(t,e){return{x:t.x-e.x,y:t.y-e.y}}function qd({point:t},e){return{point:t,delta:Jw(t,HA(e)),offset:Jw(t,JU(e)),velocity:ZU(e,.1)}}function JU(t){return t[0]}function HA(t){return t[t.length-1]}function ZU(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=HA(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Fn(e)));)n--;if(!r)return{x:0,y:0};const s=un(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function eB(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Ne(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Ne(n,t,r.max):Math.min(t,n)),t}function Zw(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function tB(t,{top:e,left:n,bottom:r,right:i}){return{x:Zw(t.x,n,i),y:Zw(t.y,e,r)}}function eE(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function nB(t,e){return{x:eE(t.x,e.x),y:eE(t.y,e.y)}}function rB(t,e){let n=.5;const r=Dt(t),i=Dt(e);return i>r?n=Ha(e.min,e.max-r,t.min):r>i&&(n=Ha(t.min,t.max-i,e.min)),fr(0,1,n)}function iB(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Hp=.35;function sB(t=Hp){return t===!1?t=0:t===!0&&(t=Hp),{x:tE(t,"left","right"),y:tE(t,"top","bottom")}}function tE(t,e,n){return{min:nE(t,e),max:nE(t,n)}}function nE(t,e){return typeof t=="number"?t:t[e]||0}const oB=new WeakMap;class aB{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Be(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(El(d).point)},o=(d,p)=>{const{drag:g,dragPropagation:_,onDragStart:S}=this.getProps();if(g&&!_&&(this.openDragLock&&this.openDragLock(),this.openDragLock=d4(g),!this.openDragLock))return;this.latestPointerEvent=d,this.latestPanInfo=p,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),sn(y=>{let v=this.getAxisMotionValue(y).get()||0;if(jn.test(v)){const{projection:E}=this.visualElement;if(E&&E.layout){const N=E.layout.layoutBox[y];N&&(v=Dt(N)*(parseFloat(v)/100))}}this.originPoint[y]=v}),S&&ke.postRender(()=>S(d,p)),$p(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},a=(d,p)=>{this.latestPointerEvent=d,this.latestPanInfo=p;const{dragPropagation:g,dragDirectionLock:_,onDirectionLock:S,onDrag:x}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:y}=p;if(_&&this.currentDirection===null){this.currentDirection=lB(y),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",p.point,y),this.updateAxis("y",p.point,y),this.visualElement.render(),x&&x(d,p)},l=(d,p)=>{this.latestPointerEvent=d,this.latestPanInfo=p,this.stop(d,p),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>sn(d=>{var p;return this.getAnimationState(d)==="paused"&&((p=this.getAxisMotionValue(d).animation)==null?void 0:p.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new WA(e,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:r,contextWindow:$A(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&ke.postRender(()=>a(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!mu(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=eB(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&ys(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=tB(r.layoutBox,e):this.constraints=!1,this.elastic=sB(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&sn(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=iB(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!ys(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=uU(r,i.root,this.visualElement.getTransformPagePoint());let o=nB(i.layout.layoutBox,s);if(n){const a=n(oU(o));this.hasMutatedConstraints=!!a,a&&(o=PA(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=sn(h=>{if(!mu(h,n,this.currentDirection))return;let d=l&&l[h]||{};o&&(d={min:0,max:0});const p=i?200:1e6,g=i?40:1e7,_={type:"inertia",velocity:r?e[h]:0,bounceStiffness:p,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(h,_)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return $p(this.visualElement,e),r.start(ky(e,r,0,n,this.visualElement,!1))}stopAnimation(){sn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){sn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){sn(n=>{const{drag:r}=this.getProps();if(!mu(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-Ne(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ys(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};sn(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=rB({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),sn(o=>{if(!mu(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Ne(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;oB.set(this.visualElement,this);const e=this.visualElement.current,n=pa(e,"pointerdown",l=>{const{drag:c,dragListener:h=!0}=this.getProps();c&&h&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();ys(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),ke.read(r);const o=Ya(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(sn(h=>{const d=this.getAxisMotionValue(h);d&&(this.originPoint[h]+=l[h].translate,d.set(d.get()+l[h].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=Hp,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function mu(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function lB(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class uB extends ai{constructor(e){super(e),this.removeGroupControls=hn,this.removeListeners=hn,this.controls=new aB(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||hn}unmount(){this.removeGroupControls(),this.removeListeners()}}const rE=t=>(e,n)=>{t&&ke.postRender(()=>t(e,n))};class cB extends ai{constructor(){super(...arguments),this.removePointerDownListener=hn}onPointerDown(e){this.session=new WA(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:$A(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:rE(e),onStart:rE(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&ke.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=pa(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Hu={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function iE(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const zo={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ne.test(t))t=parseFloat(t);else return t;const n=iE(t,e.target.x),r=iE(t,e.target.y);return`${n}% ${r}%`}},hB={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=ti.parse(t);if(i.length>5)return r;const s=ti.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=Ne(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};let Kd=!1;class dB extends R.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;V4(fB),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),Kd&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Hu.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,Kd=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||ke.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),_y.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;Kd=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function qA(t){const[e,n]=pA(),r=R.useContext(Xg);return A.jsx(dB,{...t,layoutGroup:r,switchLayoutGroup:R.useContext(CA),isPresent:e,safeToRemove:n})}const fB={borderRadius:{...zo,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:zo,borderTopRightRadius:zo,borderBottomLeftRadius:zo,borderBottomRightRadius:zo,boxShadow:hB};function pB(t,e,n){const r=It(t)?t:Qs(t);return r.start(ky("",r,e,n)),r.animation}const mB=(t,e)=>t.depth-e.depth;class gB{constructor(){this.children=[],this.isDirty=!1}add(e){ey(this.children,e),this.isDirty=!0}remove(e){ty(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(mB),this.isDirty=!1,this.children.forEach(e)}}function yB(t,e){const n=zt.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(ei(r),t(s-e))};return ke.setup(r,!0),()=>ei(r)}const KA=["TopLeft","TopRight","BottomLeft","BottomRight"],vB=KA.length,sE=t=>typeof t=="string"?parseFloat(t):t,oE=t=>typeof t=="number"||ne.test(t);function _B(t,e,n,r,i,s){i?(t.opacity=Ne(0,n.opacity??1,wB(r)),t.opacityExit=Ne(e.opacity??1,0,EB(r))):s&&(t.opacity=Ne(e.opacity??1,n.opacity??1,r));for(let o=0;o<vB;o++){const a=`border${KA[o]}Radius`;let l=aE(e,a),c=aE(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||oE(l)===oE(c)?(t[a]=Math.max(Ne(sE(l),sE(c),r),0),(jn.test(c)||jn.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Ne(e.rotate||0,n.rotate||0,r))}function aE(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const wB=GA(0,.5,VC),EB=GA(.5,.95,hn);function GA(t,e,n){return r=>r<t?0:r>e?1:n(Ha(t,e,r))}function lE(t,e){t.min=e.min,t.max=e.max}function rn(t,e){lE(t.x,e.x),lE(t.y,e.y)}function uE(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function cE(t,e,n,r,i){return t-=e,t=Uc(t,1/n,r),i!==void 0&&(t=Uc(t,1/i,r)),t}function TB(t,e=0,n=1,r=.5,i,s=t,o=t){if(jn.test(e)&&(e=parseFloat(e),e=Ne(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Ne(s.min,s.max,r);t===s&&(a-=e),t.min=cE(t.min,e,n,a,i),t.max=cE(t.max,e,n,a,i)}function hE(t,e,[n,r,i],s,o){TB(t,e[n],e[r],e[i],e.scale,s,o)}const SB=["x","scaleX","originX"],IB=["y","scaleY","originY"];function dE(t,e,n,r){hE(t.x,e,SB,n?n.x:void 0,r?r.x:void 0),hE(t.y,e,IB,n?n.y:void 0,r?r.y:void 0)}function fE(t){return t.translate===0&&t.scale===1}function QA(t){return fE(t.x)&&fE(t.y)}function pE(t,e){return t.min===e.min&&t.max===e.max}function xB(t,e){return pE(t.x,e.x)&&pE(t.y,e.y)}function mE(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function YA(t,e){return mE(t.x,e.x)&&mE(t.y,e.y)}function gE(t){return Dt(t.x)/Dt(t.y)}function yE(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class CB{constructor(){this.members=[]}add(e){ey(this.members,e),e.scheduleRender()}remove(e){if(ty(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function AB(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:h,rotateX:d,rotateY:p,skewX:g,skewY:_}=n;c&&(r=`perspective(${c}px) ${r}`),h&&(r+=`rotate(${h}deg) `),d&&(r+=`rotateX(${d}deg) `),p&&(r+=`rotateY(${p}deg) `),g&&(r+=`skewX(${g}deg) `),_&&(r+=`skewY(${_}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const Gd=["","X","Y","Z"],PB=1e3;let RB=0;function Qd(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function XA(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=LA(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",ke,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&XA(r)}function JA({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=RB++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(DB),this.nodes.forEach(LB),this.nodes.forEach(OB),this.nodes.forEach(NB)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new gB)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new iy),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=fA(o)&&!v4(o),this.instance=o;const{layoutId:a,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),t){let h,d=0;const p=()=>this.root.updateBlockedByResize=!1;ke.read(()=>{d=window.innerWidth}),t(o,()=>{const g=window.innerWidth;g!==d&&(d=g,this.root.updateBlockedByResize=!0,h&&h(),h=yB(p,250),Hu.hasAnimatedSinceResize&&(Hu.hasAnimatedSinceResize=!1,this.nodes.forEach(wE)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&c&&(a||l)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:d,hasRelativeLayoutChanged:p,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||c.getDefaultTransition()||zB,{onLayoutAnimationStart:S,onLayoutAnimationComplete:x}=c.getProps(),y=!this.targetLayout||!YA(this.targetLayout,g),v=!d&&p;if(this.options.layoutRoot||this.resumeFrom||v||d&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const E={...yy(_,"layout"),onPlay:S,onComplete:x};(c.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E),this.setAnimationOrigin(h,v)}else d||wE(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ei(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(FB),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&XA(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const d=this.path[h];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(vE);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(_E);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(MB),this.nodes.forEach(kB),this.nodes.forEach(bB)):this.nodes.forEach(_E),this.clearAllSnapshots();const a=zt.now();ut.delta=fr(0,1e3/60,a-ut.timestamp),ut.timestamp=a,ut.isProcessing=!0,Od.update.process(ut),Od.preRender.process(ut),Od.render.process(ut),ut.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,_y.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(VB),this.sharedNodes.forEach(jB)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ke.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ke.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Dt(this.snapshot.measuredBox.x)&&!Dt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Be(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!QA(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,h=c!==this.prevTransformTemplateValue;o&&this.instance&&(a||yi(this.latestValues)||h)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),$B(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:o}=this.options;if(!o)return Be();const a=o.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(WB))){const{scroll:h}=this.root;h&&(vs(a.x,h.offset.x),vs(a.y,h.offset.y))}return a}removeElementScroll(o){var l;const a=Be();if(rn(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let c=0;c<this.path.length;c++){const h=this.path[c],{scroll:d,options:p}=h;h!==this.root&&d&&p.layoutScroll&&(d.wasRoot&&rn(a,o),vs(a.x,d.offset.x),vs(a.y,d.offset.y))}return a}applyTransform(o,a=!1){const l=Be();rn(l,o);for(let c=0;c<this.path.length;c++){const h=this.path[c];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&_s(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),yi(h.latestValues)&&_s(l,h.latestValues)}return yi(this.latestValues)&&_s(l,this.latestValues),l}removeTransform(o){const a=Be();rn(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!yi(c.latestValues))continue;jp(c.latestValues)&&c.updateSnapshot();const h=Be(),d=c.measurePageBox();rn(h,d),dE(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,h)}return yi(this.latestValues)&&dE(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ut.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var p;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:d}=this.options;if(!(!this.layout||!(h||d))){if(this.resolvedRelativeTargetAt=ut.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Be(),this.relativeTargetOrigin=Be(),ga(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),rn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Be(),this.targetWithTransforms=Be()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),YU(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):rn(this.target,this.layout.layoutBox),kA(this.target,this.targetDelta)):rn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Be(),this.relativeTargetOrigin=Be(),ga(this.relativeTargetOrigin,this.target,g.target),rn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||jp(this.parent.latestValues)||RA(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var _;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(_=this.parent)!=null&&_.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===ut.timestamp&&(l=!1),l)return;const{layout:c,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||h))return;rn(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,p=this.treeScale.y;lU(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Be());const{target:g}=o;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(uE(this.prevProjectionDelta.x,this.projectionDelta.x),uE(this.prevProjectionDelta.y,this.projectionDelta.y)),ma(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==p||!yE(this.projectionDelta.x,this.prevProjectionDelta.x)||!yE(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ws(),this.projectionDelta=ws(),this.projectionDeltaWithTransform=ws()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},h={...this.latestValues},d=ws();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=Be(),g=l?l.source:void 0,_=this.layout?this.layout.source:void 0,S=g!==_,x=this.getStack(),y=!x||x.members.length<=1,v=!!(S&&!y&&this.options.crossfade===!0&&!this.path.some(BB));this.animationProgress=0;let E;this.mixTargetDelta=N=>{const M=N/1e3;EE(d.x,o.x,M),EE(d.y,o.y,M),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ga(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),UB(this.relativeTarget,this.relativeTargetOrigin,p,M),E&&xB(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=Be()),rn(E,this.relativeTarget)),S&&(this.animationValues=h,_B(h,c,this.latestValues,M,v,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=M},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,c;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(c=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||c.stop(),this.pendingAnimation&&(ei(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ke.update(()=>{Hu.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Qs(0)),this.currentAnimation=pB(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),o.onUpdate&&o.onUpdate(h)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(PB),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:h}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&ZA(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Be();const d=Dt(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const p=Dt(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}rn(a,l),_s(a,h),ma(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new CB),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&Qd("z",o,c,this.animationValues);for(let h=0;h<Gd.length;h++)Qd(`rotate${Gd[h]}`,o,c,this.animationValues),Qd(`skew${Gd[h]}`,o,c,this.animationValues);o.render();for(const h in c)o.setStaticValue(h,c[h]),this.animationValues&&(this.animationValues[h]=c[h]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Wu(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Wu(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!yi(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const h=c.animationValues||c.latestValues;this.applyTransformsToTarget();let d=AB(this.projectionDeltaWithTransform,this.treeScale,h);l&&(d=l(h,d)),o.transform=d;const{x:p,y:g}=this.projectionDelta;o.transformOrigin=`${p.origin*100}% ${g.origin*100}% 0`,c.animationValues?o.opacity=c===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:o.opacity=c===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const _ in Qa){if(h[_]===void 0)continue;const{correct:S,applyTo:x,isCSSVariable:y}=Qa[_],v=d==="none"?h[_]:S(h[_],c);if(x){const E=x.length;for(let N=0;N<E;N++)o[x[N]]=v}else y?this.options.visualElement.renderState.vars[_]=v:o[_]=v}this.options.layoutId&&(o.pointerEvents=c===this?Wu(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(vE),this.root.sharedNodes.clear()}}}function kB(t){t.updateLayout()}function bB(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?sn(d=>{const p=o?e.measuredBox[d]:e.layoutBox[d],g=Dt(p);p.min=r[d].min,p.max=p.min+g}):ZA(s,e.layoutBox,r)&&sn(d=>{const p=o?e.measuredBox[d]:e.layoutBox[d],g=Dt(r[d]);p.max=p.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+g)});const a=ws();ma(a,r,e.layoutBox);const l=ws();o?ma(l,t.applyTransform(i,!0),e.measuredBox):ma(l,r,e.layoutBox);const c=!QA(a);let h=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:p,layout:g}=d;if(p&&g){const _=Be();ga(_,e.layoutBox,p.layoutBox);const S=Be();ga(S,r,g.layoutBox),YA(_,S)||(h=!0),d.options.layoutRoot&&(t.relativeTarget=S,t.relativeTargetOrigin=_,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function DB(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function NB(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function VB(t){t.clearSnapshot()}function vE(t){t.clearMeasurements()}function _E(t){t.isLayoutDirty=!1}function MB(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function wE(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function LB(t){t.resolveTargetDelta()}function OB(t){t.calcProjection()}function FB(t){t.resetSkewAndRotation()}function jB(t){t.removeLeadSnapshot()}function EE(t,e,n){t.translate=Ne(e.translate,0,n),t.scale=Ne(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function TE(t,e,n,r){t.min=Ne(e.min,n.min,r),t.max=Ne(e.max,n.max,r)}function UB(t,e,n,r){TE(t.x,e.x,n.x,r),TE(t.y,e.y,n.y,r)}function BB(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const zB={duration:.45,ease:[.4,0,.1,1]},SE=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),IE=SE("applewebkit/")&&!SE("chrome/")?Math.round:hn;function xE(t){t.min=IE(t.min),t.max=IE(t.max)}function $B(t){xE(t.x),xE(t.y)}function ZA(t,e,n){return t==="position"||t==="preserve-aspect"&&!QU(gE(e),gE(n),.2)}function WB(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const HB=JA({attachResizeListener:(t,e)=>Ya(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Yd={current:void 0},eP=JA({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Yd.current){const t=new HB({});t.mount(window),t.setOptions({layoutScroll:!0}),Yd.current=t}return Yd.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),qB={pan:{Feature:cB},drag:{Feature:uB,ProjectionNode:eP,MeasureLayout:qA}};function CE(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&ke.postRender(()=>s(e,El(e)))}class KB extends ai{mount(){const{current:e}=this.node;e&&(this.unmount=f4(e,(n,r)=>(CE(this.node,r,"Start"),i=>CE(this.node,i,"End"))))}unmount(){}}class GB extends ai{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=vl(Ya(this.node.current,"focus",()=>this.onFocus()),Ya(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function AE(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&ke.postRender(()=>s(e,El(e)))}class QB extends ai{mount(){const{current:e}=this.node;e&&(this.unmount=y4(e,(n,r)=>(AE(this.node,r,"Start"),(i,{success:s})=>AE(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const qp=new WeakMap,Xd=new WeakMap,YB=t=>{const e=qp.get(t.target);e&&e(t)},XB=t=>{t.forEach(YB)};function JB({root:t,...e}){const n=t||document;Xd.has(n)||Xd.set(n,{});const r=Xd.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(XB,{root:t,...e})),r[i]}function ZB(t,e,n){const r=JB(e);return qp.set(t,n),r.observe(t),()=>{qp.delete(t),r.unobserve(t)}}const e3={some:0,all:1};class t3 extends ai{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:e3[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:h,onViewportLeave:d}=this.node.getProps(),p=c?h:d;p&&p(l)};return ZB(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(n3(e,n))&&this.startObserver()}unmount(){}}function n3({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const r3={inView:{Feature:t3},tap:{Feature:QB},focus:{Feature:GB},hover:{Feature:KB}},i3={layout:{ProjectionNode:eP,MeasureLayout:qA}},s3={...$U,...r3,...qB,...i3},PE=sU(s3,vU);var Tl={};(function t(e,n,r,i){var s=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),o=typeof Path2D=="function"&&typeof DOMMatrix=="function",a=function(){if(!e.OffscreenCanvas)return!1;var V=new OffscreenCanvas(1,1),b=V.getContext("2d");b.fillRect(0,0,1,1);var H=V.transferToImageBitmap();try{b.createPattern(H,"no-repeat")}catch{return!1}return!0}();function l(){}function c(V){var b=n.exports.Promise,H=b!==void 0?b:e.Promise;return typeof H=="function"?new H(V):(V(l,l),null)}var h=function(V,b){return{transform:function(H){if(V)return H;if(b.has(H))return b.get(H);var K=new OffscreenCanvas(H.width,H.height),ee=K.getContext("2d");return ee.drawImage(H,0,0),b.set(H,K),K},clear:function(){b.clear()}}}(a,new Map),d=function(){var V=Math.floor(16.666666666666668),b,H,K={},ee=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(b=function(te){var ie=Math.random();return K[ie]=requestAnimationFrame(function Y(ae){ee===ae||ee+V-1<ae?(ee=ae,delete K[ie],te()):K[ie]=requestAnimationFrame(Y)}),ie},H=function(te){K[te]&&cancelAnimationFrame(K[te])}):(b=function(te){return setTimeout(te,V)},H=function(te){return clearTimeout(te)}),{frame:b,cancel:H}}(),p=function(){var V,b,H={};function K(ee){function te(ie,Y){ee.postMessage({options:ie||{},callback:Y})}ee.init=function(Y){var ae=Y.transferControlToOffscreen();ee.postMessage({canvas:ae},[ae])},ee.fire=function(Y,ae,we){if(b)return te(Y,null),b;var Ee=Math.random().toString(36).slice(2);return b=c(function(ye){function Ie(Ue){Ue.data.callback===Ee&&(delete H[Ee],ee.removeEventListener("message",Ie),b=null,h.clear(),we(),ye())}ee.addEventListener("message",Ie),te(Y,Ee),H[Ee]=Ie.bind(null,{data:{callback:Ee}})}),b},ee.reset=function(){ee.postMessage({reset:!0});for(var Y in H)H[Y](),delete H[Y]}}return function(){if(V)return V;if(!r&&s){var ee=["var CONFETTI, SIZE = {}, module = {};","("+t.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{V=new Worker(URL.createObjectURL(new Blob([ee])))}catch(te){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn(" Could not load worker",te),null}K(V)}return V}}(),g={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function _(V,b){return b?b(V):V}function S(V){return V!=null}function x(V,b,H){return _(V&&S(V[b])?V[b]:g[b],H)}function y(V){return V<0?0:Math.floor(V)}function v(V,b){return Math.floor(Math.random()*(b-V))+V}function E(V){return parseInt(V,16)}function N(V){return V.map(M)}function M(V){var b=String(V).replace(/[^0-9a-f]/gi,"");return b.length<6&&(b=b[0]+b[0]+b[1]+b[1]+b[2]+b[2]),{r:E(b.substring(0,2)),g:E(b.substring(2,4)),b:E(b.substring(4,6))}}function F(V){var b=x(V,"origin",Object);return b.x=x(b,"x",Number),b.y=x(b,"y",Number),b}function I(V){V.width=document.documentElement.clientWidth,V.height=document.documentElement.clientHeight}function w(V){var b=V.getBoundingClientRect();V.width=b.width,V.height=b.height}function C(V){var b=document.createElement("canvas");return b.style.position="fixed",b.style.top="0px",b.style.left="0px",b.style.pointerEvents="none",b.style.zIndex=V,b}function P(V,b,H,K,ee,te,ie,Y,ae){V.save(),V.translate(b,H),V.rotate(te),V.scale(K,ee),V.arc(0,0,1,ie,Y,ae),V.restore()}function D(V){var b=V.angle*(Math.PI/180),H=V.spread*(Math.PI/180);return{x:V.x,y:V.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:V.startVelocity*.5+Math.random()*V.startVelocity,angle2D:-b+(.5*H-Math.random()*H),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:V.color,shape:V.shape,tick:0,totalTicks:V.ticks,decay:V.decay,drift:V.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:V.gravity*3,ovalScalar:.6,scalar:V.scalar,flat:V.flat}}function L(V,b){b.x+=Math.cos(b.angle2D)*b.velocity+b.drift,b.y+=Math.sin(b.angle2D)*b.velocity+b.gravity,b.velocity*=b.decay,b.flat?(b.wobble=0,b.wobbleX=b.x+10*b.scalar,b.wobbleY=b.y+10*b.scalar,b.tiltSin=0,b.tiltCos=0,b.random=1):(b.wobble+=b.wobbleSpeed,b.wobbleX=b.x+10*b.scalar*Math.cos(b.wobble),b.wobbleY=b.y+10*b.scalar*Math.sin(b.wobble),b.tiltAngle+=.1,b.tiltSin=Math.sin(b.tiltAngle),b.tiltCos=Math.cos(b.tiltAngle),b.random=Math.random()+2);var H=b.tick++/b.totalTicks,K=b.x+b.random*b.tiltCos,ee=b.y+b.random*b.tiltSin,te=b.wobbleX+b.random*b.tiltCos,ie=b.wobbleY+b.random*b.tiltSin;if(V.fillStyle="rgba("+b.color.r+", "+b.color.g+", "+b.color.b+", "+(1-H)+")",V.beginPath(),o&&b.shape.type==="path"&&typeof b.shape.path=="string"&&Array.isArray(b.shape.matrix))V.fill(ve(b.shape.path,b.shape.matrix,b.x,b.y,Math.abs(te-K)*.1,Math.abs(ie-ee)*.1,Math.PI/10*b.wobble));else if(b.shape.type==="bitmap"){var Y=Math.PI/10*b.wobble,ae=Math.abs(te-K)*.1,we=Math.abs(ie-ee)*.1,Ee=b.shape.bitmap.width*b.scalar,ye=b.shape.bitmap.height*b.scalar,Ie=new DOMMatrix([Math.cos(Y)*ae,Math.sin(Y)*ae,-Math.sin(Y)*we,Math.cos(Y)*we,b.x,b.y]);Ie.multiplySelf(new DOMMatrix(b.shape.matrix));var Ue=V.createPattern(h.transform(b.shape.bitmap),"no-repeat");Ue.setTransform(Ie),V.globalAlpha=1-H,V.fillStyle=Ue,V.fillRect(b.x-Ee/2,b.y-ye/2,Ee,ye),V.globalAlpha=1}else if(b.shape==="circle")V.ellipse?V.ellipse(b.x,b.y,Math.abs(te-K)*b.ovalScalar,Math.abs(ie-ee)*b.ovalScalar,Math.PI/10*b.wobble,0,2*Math.PI):P(V,b.x,b.y,Math.abs(te-K)*b.ovalScalar,Math.abs(ie-ee)*b.ovalScalar,Math.PI/10*b.wobble,0,2*Math.PI);else if(b.shape==="star")for(var le=Math.PI/2*3,et=4*b.scalar,Ot=8*b.scalar,qt=b.x,pn=b.y,Rn=5,Ft=Math.PI/Rn;Rn--;)qt=b.x+Math.cos(le)*Ot,pn=b.y+Math.sin(le)*Ot,V.lineTo(qt,pn),le+=Ft,qt=b.x+Math.cos(le)*et,pn=b.y+Math.sin(le)*et,V.lineTo(qt,pn),le+=Ft;else V.moveTo(Math.floor(b.x),Math.floor(b.y)),V.lineTo(Math.floor(b.wobbleX),Math.floor(ee)),V.lineTo(Math.floor(te),Math.floor(ie)),V.lineTo(Math.floor(K),Math.floor(b.wobbleY));return V.closePath(),V.fill(),b.tick<b.totalTicks}function k(V,b,H,K,ee){var te=b.slice(),ie=V.getContext("2d"),Y,ae,we=c(function(Ee){function ye(){Y=ae=null,ie.clearRect(0,0,K.width,K.height),h.clear(),ee(),Ee()}function Ie(){r&&!(K.width===i.width&&K.height===i.height)&&(K.width=V.width=i.width,K.height=V.height=i.height),!K.width&&!K.height&&(H(V),K.width=V.width,K.height=V.height),ie.clearRect(0,0,K.width,K.height),te=te.filter(function(Ue){return L(ie,Ue)}),te.length?Y=d.frame(Ie):ye()}Y=d.frame(Ie),ae=ye});return{addFettis:function(Ee){return te=te.concat(Ee),we},canvas:V,promise:we,reset:function(){Y&&d.cancel(Y),ae&&ae()}}}function Ze(V,b){var H=!V,K=!!x(b||{},"resize"),ee=!1,te=x(b,"disableForReducedMotion",Boolean),ie=s&&!!x(b||{},"useWorker"),Y=ie?p():null,ae=H?I:w,we=V&&Y?!!V.__confetti_initialized:!1,Ee=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,ye;function Ie(le,et,Ot){for(var qt=x(le,"particleCount",y),pn=x(le,"angle",Number),Rn=x(le,"spread",Number),Ft=x(le,"startVelocity",Number),Sl=x(le,"decay",Number),Mh=x(le,"gravity",Number),po=x(le,"drift",Number),Ki=x(le,"colors",N),Il=x(le,"ticks",Number),Ge=x(le,"shapes"),ot=x(le,"scalar"),Gi=!!x(le,"flat"),mo=F(le),go=qt,yo=[],li=V.width*mo.x,xl=V.height*mo.y;go--;)yo.push(D({x:li,y:xl,angle:pn,spread:Rn,startVelocity:Ft,color:Ki[go%Ki.length],shape:Ge[v(0,Ge.length)],ticks:Il,decay:Sl,gravity:Mh,drift:po,scalar:ot,flat:Gi}));return ye?ye.addFettis(yo):(ye=k(V,yo,ae,et,Ot),ye.promise)}function Ue(le){var et=te||x(le,"disableForReducedMotion",Boolean),Ot=x(le,"zIndex",Number);if(et&&Ee)return c(function(Ft){Ft()});H&&ye?V=ye.canvas:H&&!V&&(V=C(Ot),document.body.appendChild(V)),K&&!we&&ae(V);var qt={width:V.width,height:V.height};Y&&!we&&Y.init(V),we=!0,Y&&(V.__confetti_initialized=!0);function pn(){if(Y){var Ft={getBoundingClientRect:function(){if(!H)return V.getBoundingClientRect()}};ae(Ft),Y.postMessage({resize:{width:Ft.width,height:Ft.height}});return}qt.width=qt.height=null}function Rn(){ye=null,K&&(ee=!1,e.removeEventListener("resize",pn)),H&&V&&(document.body.contains(V)&&document.body.removeChild(V),V=null,we=!1)}return K&&!ee&&(ee=!0,e.addEventListener("resize",pn,!1)),Y?Y.fire(le,qt,Rn):Ie(le,qt,Rn)}return Ue.reset=function(){Y&&Y.reset(),ye&&ye.reset()},Ue}var Lt;function $n(){return Lt||(Lt=Ze(null,{useWorker:!0,resize:!0})),Lt}function ve(V,b,H,K,ee,te,ie){var Y=new Path2D(V),ae=new Path2D;ae.addPath(Y,new DOMMatrix(b));var we=new Path2D;return we.addPath(ae,new DOMMatrix([Math.cos(ie)*ee,Math.sin(ie)*ee,-Math.sin(ie)*te,Math.cos(ie)*te,H,K])),we}function $(V){if(!o)throw new Error("path confetti are not supported in this browser");var b,H;typeof V=="string"?b=V:(b=V.path,H=V.matrix);var K=new Path2D(b),ee=document.createElement("canvas"),te=ee.getContext("2d");if(!H){for(var ie=1e3,Y=ie,ae=ie,we=0,Ee=0,ye,Ie,Ue=0;Ue<ie;Ue+=2)for(var le=0;le<ie;le+=2)te.isPointInPath(K,Ue,le,"nonzero")&&(Y=Math.min(Y,Ue),ae=Math.min(ae,le),we=Math.max(we,Ue),Ee=Math.max(Ee,le));ye=we-Y,Ie=Ee-ae;var et=10,Ot=Math.min(et/ye,et/Ie);H=[Ot,0,0,Ot,-Math.round(ye/2+Y)*Ot,-Math.round(Ie/2+ae)*Ot]}return{type:"path",path:b,matrix:H}}function X(V){var b,H=1,K="#000000",ee='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof V=="string"?b=V:(b=V.text,H="scalar"in V?V.scalar:H,ee="fontFamily"in V?V.fontFamily:ee,K="color"in V?V.color:K);var te=10*H,ie=""+te+"px "+ee,Y=new OffscreenCanvas(te,te),ae=Y.getContext("2d");ae.font=ie;var we=ae.measureText(b),Ee=Math.ceil(we.actualBoundingBoxRight+we.actualBoundingBoxLeft),ye=Math.ceil(we.actualBoundingBoxAscent+we.actualBoundingBoxDescent),Ie=2,Ue=we.actualBoundingBoxLeft+Ie,le=we.actualBoundingBoxAscent+Ie;Ee+=Ie+Ie,ye+=Ie+Ie,Y=new OffscreenCanvas(Ee,ye),ae=Y.getContext("2d"),ae.font=ie,ae.fillStyle=K,ae.fillText(b,Ue,le);var et=1/H;return{type:"bitmap",bitmap:Y.transferToImageBitmap(),matrix:[et,0,0,et,-Ee*et/2,-ye*et/2]}}n.exports=function(){return $n().apply(this,arguments)},n.exports.reset=function(){$n().reset()},n.exports.create=Ze,n.exports.shapeFromPath=$,n.exports.shapeFromText=X})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),Tl,!1);const o3=Tl.exports;Tl.exports.create;function a3({couples:t,user:e,myVotes:n,onVote:r}){const i=ro(),s=R.useMemo(()=>t.filter(g=>!n[g.id]),[t,n]),[o,a]=R.useState(0),[l,c]=R.useState(!1),h=()=>{o<s.length-1?a(o+1):c(!0)},d=(g,_)=>{r(g,_),setTimeout(h,400)};if(R.useEffect(()=>{(l||s.length===0)&&o3({particleCount:120,spread:70,origin:{y:.6},colors:["#ec4899","#f472b6","#fde68a"]})},[l,s.length]),l||s.length===0)return A.jsxs("main",{className:"max-w-md mx-auto px-4 py-12 flex flex-col items-center justify-center text-center space-y-6",children:[A.jsx("h1",{className:"text-3xl font-semibold text-pink-600",children:" Bravo !"}),A.jsx("p",{className:"text-gray-700 leading-relaxed",children:"Tu as vot pour tous les couples disponibles  Reviens bientt, de nouveaux duos tattendent !"}),A.jsx("button",{onClick:()=>i("/"),className:"px-4 py-2 rounded-full bg-pink-500 hover:bg-pink-600 text-white font-medium shadow-sm transition",children:" Retour  laccueil"}),A.jsx(PE.div,{className:"mt-8 text-4xl",initial:{scale:0},animate:{scale:[1,1.3,1],rotate:[0,10,-10,0]},transition:{duration:1.5,repeat:1/0},children:""}),A.jsx(yp,{})]});const p=s[o];return A.jsxs("main",{className:"max-w-md mx-auto px-4 py-6 flex flex-col items-center justify-center gap-6",children:[A.jsxs("div",{className:"flex justify-between w-full items-center",children:[A.jsx("button",{onClick:()=>i("/"),className:"text-gray-500 hover:text-gray-700 text-sm",children:" Quitter"}),A.jsxs("div",{className:"text-sm text-gray-400",children:[o+1,"/",s.length]})]}),A.jsx(A4,{mode:"wait",children:A.jsx(PE.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:"w-full",children:p&&A.jsx(Rh,{couple:p,user:e,onVote:d,compact:!1,onlyMyVotes:!1})},p==null?void 0:p.id)}),A.jsx(yp,{})]})}function l3(){const[t,e]=R.useState(null),{couples:n,loading:r,deleteCouple:i}=TF(),{votesAll:s,myVotes:o,handleVote:a}=SF(t,n);return R.useEffect(()=>GN(Yg,e),[]),A.jsxs("div",{children:[A.jsx(OO,{user:t}),A.jsxs(Hk,{children:[A.jsx(Sr,{path:"/",element:A.jsx(WO,{user:t,couples:n,myVotes:o,onVote:a,loading:r,deleteCouple:i})}),A.jsx(Sr,{path:"/jouer",element:A.jsx(a3,{couples:n,user:t,myVotes:o,onVote:a})}),A.jsx(Sr,{path:"/mes-votes",element:A.jsx(HO,{user:t,couples:n,votesAll:s})}),A.jsx(Sr,{path:"/ajouter-couple",element:A.jsx(wF,{user:t})}),A.jsx(Sr,{path:"/couple/:id",element:A.jsx(IF,{couples:n,user:t})}),A.jsx(Sr,{path:"/confidentialite",element:A.jsx(EF,{})}),A.jsx(Sr,{path:"*",element:A.jsx($k,{to:"/",replace:!0})})]}),A.jsxs("footer",{className:"text-center text-xs text-gray-500 py-6",children:["Fait avec amour, aucun jugement  "," ",A.jsx("a",{href:"/confidentialite",className:"underline hover:text-gray-700",children:"Politique de confidentialit"})]})]})}const u3=document.getElementById("root"),c3=zS(u3);c3.render(A.jsx(zP.StrictMode,{children:A.jsx(pb,{basename:"/",children:A.jsx(l3,{})})}));const h3=Ab({onNeedRefresh(){confirm("Une nouvelle version est disponible. Recharger ?")&&h3(!0)},onOfflineReady(){console.log("Lapplication est prte  tre utilise hors ligne.")}})});export default d3();
